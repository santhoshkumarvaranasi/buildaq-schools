import{a as ve}from"./chunk-AETU5EI4.js";import{a as Me,b as Qn}from"./chunk-2VMXMS7J.js";import{bootstrapApplication as Xp}from"@angular/platform-browser";import{provideBrowserGlobalErrorListeners as Bp,provideZoneChangeDetection as zp}from"@angular/core";import{provideAnimations as Vp}from"@angular/platform-browser/animations";import{provideRouter as Hp}from"@angular/router";import{provideHttpClient as jp,withInterceptors as Wp}from"@angular/common/http";import{CommonModule as Ya}from"@angular/common";import{RouterLink as Ja}from"@angular/router";import{MatButtonModule as Da}from"@angular/material/button";import{MatIconModule as Fa}from"@angular/material/icon";import{MatInputModule as Aa}from"@angular/material/input";import{MatFormFieldModule as Ra}from"@angular/material/form-field";import{MatSelectModule as La}from"@angular/material/select";import{MatTableModule as Na}from"@angular/material/table";import{MatCardModule as Ba}from"@angular/material/card";import{MatToolbarModule as za}from"@angular/material/toolbar";import{MatDialogModule as Va}from"@angular/material/dialog";import{MatListModule as Ha}from"@angular/material/list";import{MatCheckboxModule as ja}from"@angular/material/checkbox";import{MatSidenavModule as Wa}from"@angular/material/sidenav";import{MatChipsModule as $a}from"@angular/material/chips";import{MatPaginatorModule as Ua}from"@angular/material/paginator";import{MatSortModule as Ga}from"@angular/material/sort";import{MatTooltipModule as qa}from"@angular/material/tooltip";import{MatProgressBarModule as Qa}from"@angular/material/progress-bar";import*as _t from"@angular/core";var D=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=_t.\u0275\u0275defineNgModule({type:n});static \u0275inj=_t.\u0275\u0275defineInjector({imports:[Da,Fa,Aa,Ra,La,Na,Ba,za,Va,Ha,ja,Wa,$a,Ua,Ga,qa,Qa]})};var Yn={students:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 7a7 7 0 0 1 14 0" stroke-linecap="round" stroke-linejoin="round"/></svg>',attendance:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M8 3v2m8-2v2M5 9h14M7 5h10a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"/><path d="m9 13 2 2 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg>',fees:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><rect x="4" y="5" width="16" height="14" rx="2" ry="2"/><path d="M4 9h16M9 13h6" stroke-linecap="round"/></svg>',behavior:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M5 12h14M12 5l7 7-7 7-7-7Z" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 9v4" stroke-linecap="round"/></svg>',timetable:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><rect x="4" y="5" width="16" height="15" rx="2" ry="2"/><path d="M8 3v4m8-4v4M4 11h16M8 15h3" stroke-linecap="round"/></svg>',analytics:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M4 19h16M7 16V9m5 7V5m5 11v-6" stroke-linecap="round"/></svg>',alertInfo:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><circle cx="12" cy="12" r="9"/><path d="M12 8v6m0 3h.01" stroke-linecap="round"/></svg>',alertWarn:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7"><path d="M12 4 3 20h18L12 4Z" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 10v4m0 3h.01" stroke-linecap="round"/></svg>'};import*as p from"@angular/core";import{BehaviorSubject as qn}from"rxjs";import*as ht from"@angular/core";import*as Jn from"@angular/common/http";var le=class n{constructor(t){this.http=t;console.log("TenantService constructor - starting..."),this.loadDefaultTenant()}currentTenantSubject=new qn(null);currentTenant$=this.currentTenantSubject.asObservable();loadingSubject=new qn(!1);loading$=this.loadingSubject.asObservable();errorSubject=new qn(null);error$=this.errorSubject.asObservable();tenantId="";isInitialized=!1;loadDefaultTenant(){console.log("Loading default tenant configuration..."),this.setLoading(!0);let t={id:"default",name:"School Management System",displayName:"BuildAQ Schools",domain:window.location.hostname,status:"active",adminEmail:"admin@buildaq.com",adminName:"System Administrator",features:{gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0},branding:{logo:"",favicon:"/favicon.ico",primaryColor:"#3498db",secondaryColor:"#2ecc71",accentColor:"#f39c12",logoUrl:"",fontFamily:"Inter, sans-serif"},settings:{timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD",language:"en-US",academicYear:{start:"2025-08-15",end:"2026-06-15"},gradingScale:{A:90,B:80,C:70,D:60,F:0},classPeriods:{1:"08:00-08:50",2:"09:00-09:50",3:"10:00-10:50",4:"11:00-11:50",5:"12:00-12:50",6:"13:00-13:50",7:"14:00-14:50",8:"15:00-15:50"},schoolHours:{start:"07:30",end:"16:00"}},subscription:{plan:"enterprise",status:"active",limits:{maxStudents:1e4,maxTeachers:1e3,maxClasses:2e3,maxStorageGB:100,maxApiCalls:1e5},usage:{students:0,teachers:0,classes:0,storageGB:0,apiCalls:0}},createdAt:new Date,updatedAt:new Date,dataRegion:"US-East",complianceLevel:"ferpa",ssoEnabled:!1,mfaRequired:!1};this.setCurrentTenant(t),this.applyTenantConfiguration(t),this.isInitialized=!0,this.setLoading(!1),console.log("Default tenant loaded successfully:",t.name)}setCurrentTenant(t){this.currentTenantSubject.next(t)}applyTenantConfiguration(t){this.applyBranding(t.branding),this.updatePageTitle(t.displayName),this.updateFavicon(t.branding.favicon)}applyBranding(t){let e=document.documentElement;e.style.setProperty("--primary-color",t.primaryColor),e.style.setProperty("--secondary-color",t.secondaryColor),e.style.setProperty("--accent-color",t.accentColor||t.primaryColor),t.fontFamily&&e.style.setProperty("--font-family",t.fontFamily)}updatePageTitle(t){document.title=`${t} - School Management`}updateFavicon(t){if(t){let e=document.querySelector('link[rel="icon"]');e||(e=document.createElement("link"),e.rel="icon",document.head.appendChild(e)),e.href=t}}getCurrentTenant(){return this.currentTenantSubject.value}getTenantId(){return this.tenantId||"default"}isFeatureEnabled(t){return this.getCurrentTenant()?.features[t]||!1}isReady(){return this.isInitialized&&this.currentTenantSubject.value!==null}updateFeatures(t){let e=this.getCurrentTenant();e&&(e.features=Object.assign({},e.features,t),e.updatedAt=new Date,this.setCurrentTenant(e))}setPlan(t){let e=this.getCurrentTenant();if(e){switch(e.subscription.plan=t,t){case"free":e.features={gradebook:!1,reports:!1,analytics:!1,bulkOperations:!1,dataExport:!1,realTimeUpdates:!1,notifications:!1,customBranding:!1,apiAccess:!1,advancedReporting:!1};break;case"basic":e.features={gradebook:!0,reports:!0,analytics:!1,bulkOperations:!0,dataExport:!1,realTimeUpdates:!1,notifications:!0,customBranding:!1,apiAccess:!0,advancedReporting:!1};break;case"premium":e.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break;case"enterprise":default:e.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break}e.updatedAt=new Date,this.setCurrentTenant(e),this.applyTenantConfiguration(e)}}setLoading(t){this.loadingSubject.next(t)}setError(t){this.errorSubject.next(t)}static \u0275fac=function(e){return new(e||n)(ht.\u0275\u0275inject(Jn.HttpClient))};static \u0275prov=ht.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as Kn from"@angular/core";var F=class n{students=[{id:1,firstName:"Jane",lastName:"Doe",email:"jane.doe@example.com",grade:"10",section:"A",class:"10A",enrollmentDate:"2023-06-01",status:"active"},{id:2,firstName:"John",lastName:"Smith",email:"john.smith@example.com",grade:"9",section:"B",class:"9B",enrollmentDate:"2022-08-15",status:"active"},{id:3,firstName:"Priya",lastName:"Kumar",email:"priya.kumar@example.com",grade:"11",section:"A",class:"11A",enrollmentDate:"2021-04-10",status:"inactive"},{id:4,firstName:"Carlos",lastName:"Mendez",email:"carlos.mendez@example.com",grade:"8",section:"C",class:"8C",enrollmentDate:"2024-02-01",status:"active"},{id:5,firstName:"Sara",lastName:"Lee",email:"sara.lee@example.com",grade:"9",section:"A",class:"9A",enrollmentDate:"2024-03-12",status:"active"}];staff=[{id:1,name:"Alice Brown",role:"Teacher",email:"alice.brown@example.com",phone:"+1-555-1001"},{id:2,name:"Robert Green",role:"Accountant",email:"robert.green@example.com"},{id:3,name:"Emily Davis",role:"Counselor",email:"emily.davis@example.com"},{id:4,name:"Daniel Carter",role:"PE Teacher",email:"daniel.carter@example.com"}];classes=[{id:"10A",name:"Class 10 A",capacity:40,teacher:"Alice Brown"},{id:"9B",name:"Class 9 B",capacity:38,teacher:"Robert Green"},{id:"8C",name:"Class 8 C",capacity:35,teacher:"Emily Davis"}];fees=[{studentId:1,balance:1200,lastPaid:"2025-03-15"},{studentId:2,balance:0,lastPaid:"2025-06-01"},{studentId:3,balance:450,lastPaid:"2025-05-20"},{studentId:4,balance:0,lastPaid:"2025-06-10"},{studentId:5,balance:300,lastPaid:"2025-06-05"}];discounts=[{id:"D-001",studentId:1,studentName:"Jane Doe",type:"Scholarship",amount:200,reason:"Merit",validUntil:"2025-12-31",status:"active"},{id:"D-002",studentId:2,studentName:"John Smith",type:"Sibling",amount:150,reason:"Sibling concession",validUntil:"2025-09-30",status:"active"},{id:"D-003",studentId:3,studentName:"Priya Kumar",type:"Need-based",amount:250,reason:"Financial aid",validUntil:"2025-08-31",status:"active"}];receipts=[{id:"R-1001",studentId:1,studentName:"Jane Doe",date:"2025-06-01",amount:1200,method:"Online"},{id:"R-1002",studentId:2,studentName:"John Smith",date:"2025-06-02",amount:800,method:"Cash"},{id:"R-1003",studentId:4,studentName:"Carlos Mendez",date:"2025-06-11",amount:500,method:"Online"}];attendance=[{id:1,studentId:1,date:"2025-11-20",status:"present"},{id:2,studentId:2,date:"2025-11-20",status:"absent"},{id:3,studentId:4,date:"2025-11-20",status:"present"},{id:4,studentId:5,date:"2025-11-20",status:"present"}];timetable=[{id:1,classId:"10A",subject:"Mathematics",teacher:"Alice Brown",day:"Mon",time:"09:00"},{id:2,classId:"9B",subject:"Science",teacher:"Robert Green",day:"Tue",time:"10:00"},{id:3,classId:"8C",subject:"English",teacher:"Emily Davis",day:"Wed",time:"11:00",conflict:!1},{id:4,classId:"10A",subject:"Physics",teacher:"Daniel Carter",day:"Mon",time:"09:30",conflict:!0,conflictReason:"Overlaps with Mathematics"}];exams=[{id:1,title:"Midterm 2025",date:"2025-10-15",studentMarks:[{studentId:1,marks:78},{studentId:2,marks:85}]}];admissions=[{id:1,name:"Ravi Patel",class:"8A",status:"new",submitted:"2025-06-10",notes:"Needs guardian contact"},{id:2,name:"Sara Lee",class:"9B",status:"verified",submitted:"2025-06-05",notes:"All docs uploaded"},{id:3,name:"Mark Chen",class:"10A",status:"rejected",submitted:"2025-06-08",notes:"Incomplete transcript"}];behaviorIncidents=[{id:1,studentId:1,studentName:"Jane Doe",class:"10A",date:"2025-11-10",type:"Late submission",severity:"low",actionTaken:"Reminder sent",staff:"Alice Brown",followUpDate:"2025-11-20",parentNotified:!1},{id:2,studentId:1,studentName:"Jane Doe",class:"10A",date:"2025-11-18",type:"Class disruption",severity:"medium",actionTaken:"Counseling scheduled",staff:"Alice Brown",followUpDate:"2025-11-25",parentNotified:!0},{id:3,studentId:2,studentName:"John Smith",class:"9B",date:"2025-11-05",type:"Absence",severity:"low",actionTaken:"Called guardian",staff:"Robert Green",followUpDate:"2025-11-12",parentNotified:!0},{id:4,studentId:3,studentName:"Priya Kumar",class:"11A",date:"2025-10-28",type:"Cheating",severity:"high",actionTaken:"Incident report filed",staff:"Robert Green",followUpDate:"2025-11-05",parentNotified:!0},{id:5,studentId:4,studentName:"Carlos Mendez",class:"8C",date:"2025-11-12",type:"Bullying",severity:"medium",actionTaken:"Parent meeting scheduled",staff:"Emily Davis",followUpDate:"2025-11-22",parentNotified:!0}];announcements=[{id:1,title:"PTA Meeting",audience:"all",priority:"normal",date:"2025-12-05",author:"Principal",body:"Parent Teacher meeting at 4 PM in auditorium."},{id:2,title:"Exam Schedule",audience:"students",priority:"high",date:"2025-12-10",author:"Exam Cell",body:"Midterm schedule released. Check Exams page."},{id:3,title:"Workshop Invite",audience:"teachers",priority:"low",date:"2025-11-28",author:"Academics",body:"Teaching with AI tools workshop in Lab 2."}];library=[{id:1,title:"Algebra Essentials",author:"K. Sharma",category:"Mathematics",status:"available"},{id:2,title:"World History",author:"L. Peters",category:"History",status:"checked-out",borrower:"Jane Doe",dueDate:"2025-12-05"},{id:3,title:"Chemistry Basics",author:"R. Gupta",category:"Science",status:"available"},{id:4,title:"English Grammar",author:"S. White",category:"Language",status:"checked-out",borrower:"John Smith",dueDate:"2025-12-02"}];transportRoutes=[{id:1,routeName:"Route A - North",driver:"Daniel Carter",capacity:40,assigned:32,status:"on-time",departure:"07:30",returnTime:"15:15",notes:"Stop at Maple Ave closed Friday"},{id:2,routeName:"Route B - East",driver:"Emily Davis",capacity:36,assigned:30,status:"delayed",departure:"07:45",returnTime:"15:30",notes:"Detour near bridge repairs"},{id:3,routeName:"Route C - South",driver:"Carlos Ruiz",capacity:42,assigned:38,status:"on-time",departure:"07:25",returnTime:"15:10"},{id:4,routeName:"Route D - West",driver:"Sofia Lee",capacity:30,assigned:18,status:"maintenance",departure:"\u2014",returnTime:"\u2014",notes:"Bus in service bay"}];clubs=[{id:1,name:"Robotics Club",advisor:"Alice Brown",members:24,meetingDay:"Wed",nextEvent:"Regional qualifier",category:"STEM"},{id:2,name:"Drama Society",advisor:"Robert Green",members:18,meetingDay:"Fri",nextEvent:"Winter play auditions",category:"Arts"},{id:3,name:"Debate Team",advisor:"Emily Davis",members:12,meetingDay:"Tue",nextEvent:"Inter-school debate",category:"Academics"},{id:4,name:"Eco Club",advisor:"Carlos Ruiz",members:15,meetingDay:"Thu",nextEvent:"Campus cleanup",category:"Community"}];parents=[{id:1,name:"Anita Doe",studentIds:[1],email:"anita.doe@example.com",phone:"+1-555-0101",preferredChannel:"email",lastContact:"2025-11-15",notes:"Prefers morning calls"},{id:2,name:"Michael Smith",studentIds:[2],email:"m.smith@example.com",phone:"+1-555-0102",preferredChannel:"sms",lastContact:"2025-11-10",notes:"Works night shifts"},{id:3,name:"Priya Nair",studentIds:[3],email:"priya.nair@example.com",phone:"+1-555-0103",preferredChannel:"email",lastContact:"2025-11-18"},{id:4,name:"Lucia Mendez",studentIds:[4],email:"lucia.mendez@example.com",phone:"+1-555-0104",preferredChannel:"email",lastContact:"2025-11-12"}];healthProfiles=[{studentId:1,allergies:"Peanuts",medications:"EpiPen",conditions:"Asthma",doctor:"Dr. Lee",emergencyContact:"Anita Doe (+1-555-0101)"},{studentId:2,allergies:"None",medications:"None",conditions:"",doctor:"Dr. Patel",emergencyContact:"Michael Smith (+1-555-0102)"},{studentId:3,allergies:"Dust",medications:"Antihistamine",conditions:"Allergic rhinitis",doctor:"Dr. Rao",emergencyContact:"Priya Nair (+1-555-0103)"},{studentId:4,allergies:"None",medications:"None",conditions:"None",doctor:"Dr. Lee",emergencyContact:"Lucia Mendez (+1-555-0104)"}];healthIncidents=[{id:1,studentId:1,studentName:"Jane Doe",date:"2025-11-20",symptom:"Asthma flare",actionTaken:"Inhaler administered",notifiedParent:!0},{id:2,studentId:2,studentName:"John Smith",date:"2025-11-18",symptom:"Fever",actionTaken:"Sent home",notifiedParent:!0},{id:3,studentId:3,studentName:"Priya Kumar",date:"2025-11-10",symptom:"Headache",actionTaken:"Rested in clinic",notifiedParent:!1},{id:4,studentId:4,studentName:"Carlos Mendez",date:"2025-11-08",symptom:"Sprained ankle",actionTaken:"Ice and rest",notifiedParent:!0}];assets=[{id:"IT-001",name:"Chromebook A",category:"IT",status:"assigned",assignedTo:"Jane Doe",assignedType:"student",dueDate:"2025-12-05",location:"Lab 1",lastService:"2025-10-01"},{id:"IT-002",name:"Projector",category:"IT",status:"maintenance",location:"Audiovisual",vendor:"AV Works",lastService:"2025-11-10"},{id:"SCI-010",name:"Microscope",category:"Lab",status:"available",location:"Science Lab"},{id:"LIB-100",name:"Kindle",category:"Library Device",status:"assigned",assignedTo:"John Smith",assignedType:"student",dueDate:"2025-11-30",location:"Library"},{id:"RM-201",name:"Smart Board",category:"IT",status:"available",location:"Room 201",lastService:"2025-09-15"}];events=[{id:1,title:"PTA Meeting",date:"2025-12-05",time:"16:00",location:"Auditorium",audience:"parents",category:"PTA",status:"upcoming",rsvps:[{name:"Anita Doe",role:"Parent",response:"yes"}]},{id:2,title:"Science Fair",date:"2025-12-12",time:"10:00",location:"Hall A",audience:"students",category:"Academics",status:"upcoming",rsvps:[{name:"Jane Doe",role:"Student",response:"pending"}]},{id:3,title:"Teacher Workshop",date:"2025-11-30",time:"14:00",location:"Lab 2",audience:"teachers",category:"Training",status:"upcoming",rsvps:[{name:"Alice Brown",role:"Teacher",response:"yes"}]},{id:4,title:"Sports Day",date:"2025-12-20",time:"09:00",location:"Ground",audience:"students",category:"Sports",status:"upcoming",rsvps:[{name:"Carlos Mendez",role:"Student",response:"yes"}]}];resources=[{id:1,name:"Room 101",type:"room",capacity:30,equipment:"Projector",status:"available"},{id:2,name:"Physics Lab",type:"lab",capacity:24,equipment:"Lab benches, microscopes",status:"available"},{id:3,name:"Soccer Ground",type:"ground",capacity:200,equipment:"Scoreboard",status:"in-use"},{id:4,name:"Chemistry Lab",type:"lab",capacity:20,equipment:"Fume hoods",status:"maintenance"}];bookings=[{id:1,resourceId:1,resourceName:"Room 101",requester:"Alice Brown",purpose:"PTA Prep",date:"2025-12-04",start:"14:00",end:"15:30",status:"approved",conflict:!1},{id:2,resourceId:2,resourceName:"Physics Lab",requester:"Science Club",purpose:"Demo",date:"2025-12-04",start:"10:00",end:"12:00",status:"pending",conflict:!1},{id:3,resourceId:1,resourceName:"Room 101",requester:"Math Dept",purpose:"Workshop",date:"2025-12-04",start:"15:00",end:"16:00",status:"pending",conflict:!0},{id:4,resourceId:4,resourceName:"Chemistry Lab",requester:"Science Dept",purpose:"Lab prep",date:"2025-12-05",start:"09:00",end:"11:00",status:"approved",conflict:!1}];teacherGoals=[{id:1,teacherId:1,teacherName:"Alice Brown",title:"Improve math outcomes by 5%",dueDate:"2025-12-31",status:"on-track"},{id:2,teacherId:2,teacherName:"Robert Green",title:"Integrate project-based learning",dueDate:"2025-11-30",status:"at-risk"},{id:3,teacherId:3,teacherName:"Emily Davis",title:"Increase parent touchpoints",dueDate:"2025-12-15",status:"on-track"}];teacherFeedback=[{id:1,teacherId:1,teacherName:"Alice Brown",date:"2025-11-15",observer:"Principal",summary:"Engaged class, good pacing",score:4.5},{id:2,teacherId:2,teacherName:"Robert Green",date:"2025-11-10",observer:"Vice Principal",summary:"Needs more checks for understanding",score:3.5},{id:3,teacherId:3,teacherName:"Emily Davis",date:"2025-11-12",observer:"Principal",summary:"Great rapport with students",score:4.7}];teacherPd=[{id:1,teacherId:1,teacherName:"Alice Brown",title:"STEM Workshop",hours:6,status:"completed",date:"2025-11-05"},{id:2,teacherId:2,teacherName:"Robert Green",title:"Classroom management",hours:4,status:"in-progress"},{id:3,teacherId:3,teacherName:"Emily Davis",title:"Counseling best practices",hours:5,status:"planned"}];coverageRequests=[{id:1,date:"2025-12-02",classId:"10A",period:"09:00-10:00",subject:"Math",requester:"Alice Brown",status:"open"},{id:2,date:"2025-12-02",classId:"9B",period:"11:00-12:00",subject:"Science",requester:"Robert Green",status:"assigned",substitute:"Emily Davis"},{id:3,date:"2025-12-03",classId:"8C",period:"10:00-11:00",subject:"English",requester:"Emily Davis",status:"open"}];notifications=[{id:1,type:"fee",title:"Overdue fee",message:"Jane Doe has $1,200 outstanding",date:"2025-11-25",unread:!0,priority:"high",link:"/fees"},{id:2,type:"attendance",title:"Absence recorded",message:"John Smith absent today",date:"2025-11-26",unread:!0,priority:"normal",link:"/attendance"},{id:3,type:"behavior",title:"Follow-up due",message:"Asthma flare follow-up for Jane Doe",date:"2025-11-27",unread:!1,priority:"high",link:"/behavior"},{id:4,type:"coverage",title:"Coverage needed",message:"8C English needs substitute",date:"2025-11-28",unread:!0,priority:"high",link:"/resources"},{id:5,type:"event",title:"PTA Meeting",message:"PTA meeting on 2025-12-05",date:"2025-11-29",unread:!1,priority:"low",link:"/events"}];getStudents(){return this.students}getStaff(){return this.staff}getClasses(){return this.classes}getFees(){return this.fees}getAttendance(){return this.attendance}getTimetable(){return this.timetable}getExams(){return this.exams}getDiscounts(){return this.discounts}getReceipts(){return this.receipts}getBehaviorIncidents(){let t={};return this.behaviorIncidents.forEach(e=>{t[e.studentId]=(t[e.studentId]||0)+1}),this.behaviorIncidents.map(e=>Object.assign({},e,{isRepeat:(t[e.studentId]||0)>1}))}addBehaviorIncident(t){let e=(this.behaviorIncidents.reduce((r,P)=>Math.max(r,P.id),0)||0)+1,i=this.students.find(r=>r.id===t.studentId),o=Object.assign({id:e,studentId:t.studentId||0,studentName:t.studentName||(i?`${i.firstName} ${i.lastName}`:"Unknown"),class:t.class||i&&i.class||"",date:t.date||new Date().toISOString().slice(0,10),type:t.type||"General",severity:t.severity||"medium",actionTaken:t.actionTaken||"Logged",staff:t.staff||"Counselor",followUpDate:t.followUpDate,parentNotified:!!t.parentNotified});return this.behaviorIncidents.unshift(o),o}getAnnouncements(){return this.announcements}addAnnouncement(t){let e=(this.announcements.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,title:t.title||"Untitled",audience:t.audience||"all",priority:t.priority||"normal",date:t.date||new Date().toISOString().slice(0,10),author:t.author||"Admin",body:t.body||""});return this.announcements.unshift(i),i}getLibraryItems(){return this.library}checkoutBook(t,e,i){let o=this.library.find(r=>r.id===t);return o?(o.status="checked-out",o.borrower=e,o.dueDate=i,o):null}returnBook(t){let e=this.library.find(i=>i.id===t);return e?(e.status="available",e.borrower=void 0,e.dueDate=void 0,e):null}getTransportRoutes(){return this.transportRoutes}updateRouteStatus(t,e){let i=this.transportRoutes.find(o=>o.id===t);return i?(i.status=e,i):null}getClubs(){return this.clubs}addClub(t){let e=(this.clubs.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,name:"New Club",advisor:"Advisor",members:0,meetingDay:"Mon",category:"General"},t);return this.clubs.unshift(i),i}getParents(){return this.parents}addParent(t){let e=(this.parents.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,name:"New Parent",studentIds:[],email:"",preferredChannel:"email"},t);return this.parents.unshift(i),i}getHealthProfiles(){return this.healthProfiles}getHealthIncidents(){return this.healthIncidents}addHealthIncident(t){let e=(this.healthIncidents.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,studentId:t.studentId||0,studentName:t.studentName||"Student",date:t.date||new Date().toISOString().slice(0,10),symptom:t.symptom||"Symptom",actionTaken:t.actionTaken||"Logged",notifiedParent:!!t.notifiedParent});return this.healthIncidents.unshift(i),i}getAssets(){return this.assets}updateAsset(t,e){let i=this.assets.findIndex(o=>o.id===t);return i===-1?null:(this.assets[i]=Object.assign({},this.assets[i],e),this.assets[i])}addAsset(t){let e=Object.assign({id:`AST-${(this.assets.length+1).toString().padStart(3,"0")}`,name:"New Asset",category:"General",status:"available",location:"Store"},t);return this.assets.unshift(e),e}getEvents(){return this.events}addEvent(t){let e=(this.events.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,title:"New Event",date:new Date().toISOString().slice(0,10),audience:"all",status:"upcoming",rsvps:[]},t);return this.events.unshift(i),i}getResources(){return this.resources}getBookings(){return this.bookings}addBooking(t){let e=(this.bookings.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,resourceId:t.resourceId||0,resourceName:t.resourceName||"Resource",requester:t.requester||"Requester",purpose:t.purpose||"Purpose",date:t.date||new Date().toISOString().slice(0,10),start:t.start||"09:00",end:t.end||"10:00",status:t.status||"pending",conflict:!!t.conflict});return this.bookings.unshift(i),i}updateBooking(t,e){let i=this.bookings.findIndex(o=>o.id===t);return i===-1?null:(this.bookings[i]=Object.assign({},this.bookings[i],e),this.bookings[i])}getTeacherGoals(){return this.teacherGoals}getTeacherFeedback(){return this.teacherFeedback}getTeacherPd(){return this.teacherPd}getCoverageRequests(){return this.coverageRequests}updateCoverage(t,e){let i=this.coverageRequests.findIndex(o=>o.id===t);return i===-1?null:(this.coverageRequests[i]=Object.assign({},this.coverageRequests[i],e),this.coverageRequests[i])}getNotifications(){return this.notifications}updateNotification(t,e){let i=this.notifications.findIndex(o=>o.id===t);return i===-1?null:(this.notifications[i]=Object.assign({},this.notifications[i],e),this.notifications[i])}addDiscount(t){let e=Object.assign({id:`D-${(this.discounts.length+1).toString().padStart(3,"0")}`,status:"active"},t);return this.discounts.unshift(e),e}updateDiscountStatus(t,e){let i=this.discounts.findIndex(o=>o.id===t);return i===-1?null:(this.discounts[i].status=e,this.discounts[i])}getAdmissions(){return this.admissions}updateAdmission(t,e){let i=this.admissions.findIndex(o=>o.id===t);return i===-1?null:(this.admissions[i].status=e,this.admissions[i])}createStudent(t){let e=(this.students.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e,status:"active"},t);return i.firstName=i.firstName||"",i.lastName=i.lastName||"",this.students.unshift(i),i}updateStudent(t,e){let i=this.students.findIndex(r=>r.id===t);if(i===-1)return null;let o=Object.assign({},this.students[i],e);return this.students[i]=o,o}deleteStudent(t){let e=this.students.findIndex(i=>i.id===t);return e===-1?!1:(this.students.splice(e,1),!0)}createStaff(t){let e=(this.staff.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e},t);return i.name=i.name||"",this.staff.unshift(i),i}updateStaff(t,e){let i=this.staff.findIndex(r=>r.id===t);if(i===-1)return null;let o=Object.assign({},this.staff[i],e);return this.staff[i]=o,o}deleteStaff(t){let e=this.staff.findIndex(i=>i.id===t);return e===-1?!1:(this.staff.splice(e,1),!0)}addAttendance(t,e,i){let r={id:(this.attendance.reduce((P,k)=>Math.max(P,k.id),0)||0)+1,studentId:t,date:e,status:i};return this.attendance.unshift(r),r}updateAttendanceStatus(t,e){let i=this.attendance.findIndex(o=>o.id===t);return i===-1?null:(this.attendance[i].status=e,this.attendance[i])}payFee(t,e,i){let o=this.fees.findIndex(P=>P.studentId===t);if(o===-1){let P={studentId:t,balance:Math.max(0,0-e),lastPaid:i};return this.fees.unshift(P),P}let r=this.fees[o];return r.balance=Math.max(0,(r.balance||0)-e),r.lastPaid=i,r}addTimetableEntry(t){let e=(this.timetable.reduce((o,r)=>Math.max(o,r.id),0)||0)+1,i=Object.assign({id:e},t);return this.timetable.unshift(i),i}deleteTimetableEntry(t){let e=this.timetable.findIndex(i=>i.id===t);return e===-1?!1:(this.timetable.splice(e,1),!0)}createExam(t,e,i){let o=(this.exams.reduce((k,A)=>Math.max(k,A.id),0)||0)+1,r=i.map(k=>({studentId:k,marks:null})),P={id:o,title:t,date:e,studentMarks:r};return this.exams.unshift(P),P}recordMarks(t,e){let i=this.exams.find(o=>o.id===t);return i?(e.forEach(o=>{let r=i.studentMarks.find(P=>P.studentId===o.studentId);r?r.marks=o.marks:i.studentMarks.push({studentId:o.studentId,marks:o.marks})}),i):null}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Kn.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as Zn from"@angular/platform-browser";import*as ae from"@angular/common";import*as Xn from"@angular/material/button";import*as ye from"@angular/material/card";import*as ei from"@angular/material/tooltip";function Ka(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"button",41),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),n&2){let e=t.$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275property("routerLink",i.getLink(e.path)),p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate(e.label)}}function Za(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",42)(1,"span",43),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div")(4,"div",44),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"div",45),p.\u0275\u0275text(7),p.\u0275\u0275elementEnd()()()),n&2){let e=t.$implicit;p.\u0275\u0275property("ngClass",e.tone),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.icon),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate(e.label),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.value)}}function Xa(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"mat-card",46),p.\u0275\u0275element(1,"div",47),p.\u0275\u0275elementStart(2,"div",48),p.\u0275\u0275element(3,"div",49),p.\u0275\u0275elementStart(4,"div",50),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(6,"div",51),p.\u0275\u0275text(7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"div",52),p.\u0275\u0275text(9),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"button",53),p.\u0275\u0275text(11,"Open"),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275property("routerLink",i.getLink(e.path)),p.\u0275\u0275advance(),p.\u0275\u0275property("ngClass",e.tone),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngClass",e.tone)("innerHTML",i.safeIcons[e.iconKey],p.\u0275\u0275sanitizeHtml),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.metric),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.title),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.desc)}}function eo(n,t){if(n&1&&p.\u0275\u0275element(0,"div",56),n&2){let e=t.$implicit;p.\u0275\u0275styleProp("height",e.rate,"%"),p.\u0275\u0275property("matTooltip",e.date+": "+e.rate+"%")}}function to(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",54),p.\u0275\u0275template(1,eo,1,3,"div",55),p.\u0275\u0275elementEnd()),n&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(),p.\u0275\u0275property("ngForOf",e.attendanceSpark)}}function no(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"span"),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate(e.date)}}function io(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",57)(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",58),p.\u0275\u0275element(4,"div",59),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"span",60),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.type),p.\u0275\u0275advance(2),p.\u0275\u0275styleProp("width",(e.count||0)*25,"%"),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.count)}}function ao(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",61)(1,"div",62),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",63),p.\u0275\u0275text(4),p.\u0275\u0275pipe(5,"titlecase"),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.count),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind1(5,2,e.stage))}}function oo(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"button",72),p.\u0275\u0275text(1,"Collect"),p.\u0275\u0275elementEnd()),n&2){let e=p.\u0275\u0275nextContext(3);p.\u0275\u0275property("routerLink",e.getLink("fees/collect"))}}function ro(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"button",72),p.\u0275\u0275text(1,"Review"),p.\u0275\u0275elementEnd()),n&2){let e=p.\u0275\u0275nextContext(3);p.\u0275\u0275property("routerLink",e.getLink("behavior"))}}function lo(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",66),p.\u0275\u0275element(1,"span",67),p.\u0275\u0275elementStart(2,"div",68)(3,"div",69),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",70),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd()(),p.\u0275\u0275template(7,oo,2,1,"button",71)(8,ro,2,1,"button",71),p.\u0275\u0275elementEnd()),n&2){let e=t.$implicit,i=p.\u0275\u0275nextContext(2);p.\u0275\u0275property("ngClass",e.tone),p.\u0275\u0275advance(),p.\u0275\u0275property("innerHTML",e.tone==="warn"?i.safeIcons.alertWarn:i.safeIcons.alertInfo,p.\u0275\u0275sanitizeHtml),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate(e.label),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.detail),p.\u0275\u0275advance(),p.\u0275\u0275property("ngIf",e.label==="Fees due"),p.\u0275\u0275advance(),p.\u0275\u0275property("ngIf",e.label==="Behavior follow-ups")}}function so(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",64),p.\u0275\u0275template(1,lo,9,6,"div",65),p.\u0275\u0275elementEnd()),n&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(),p.\u0275\u0275property("ngForOf",e.alerts)}}function co(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",76)(1,"div",77),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",78),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",79),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.label),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.detail),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.date)}}function mo(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"mat-card",73)(1,"mat-card-title"),p.\u0275\u0275text(2,"Recent activity"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",74),p.\u0275\u0275template(4,co,7,3,"div",75),p.\u0275\u0275elementEnd()()),n&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",e.recent)}}function po(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",83)(1,"span"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"span",84),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.type),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.count)}}function uo(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"mat-card",80)(1,"mat-card-title"),p.\u0275\u0275text(2,"Behavior insights"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"mat-card-subtitle"),p.\u0275\u0275text(4,"Top causes this month"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",81),p.\u0275\u0275template(6,po,5,2,"div",82),p.\u0275\u0275elementEnd()()),n&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(6),p.\u0275\u0275property("ngForOf",e.metrics.behaviorTopCauses)}}function go(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"div",87)(1,"div",88)(2,"div",89),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"div",90),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(6,"div",91)(7,"div",92),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"div",93),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(11,"button",41),p.\u0275\u0275text(12,"View"),p.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate(e.date),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.category||"Event"),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate(e.title),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.location||"Campus"),p.\u0275\u0275advance(),p.\u0275\u0275property("routerLink",i.getLink("events"))}}function fo(n,t){if(n&1&&(p.\u0275\u0275elementStart(0,"mat-card",85)(1,"mat-card-title"),p.\u0275\u0275text(2,"Upcoming events"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(3,go,13,5,"div",86),p.\u0275\u0275elementEnd()),n&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",e.upcomingEvents)}}var gt=class n{constructor(t,e,i){this.tenantService=t;this.mock=e;this.sanitizer=i}tenant=null;isShell=window.location.pathname.startsWith("/schools");metrics={students:0,activeStudents:0,teachers:0,attendanceToday:0,attendanceRate:0,feesOutstanding:0,behaviorFollowUps:0,behaviorThisMonth:0,behaviorTopCauses:[]};featureTiles=[];quickLinks=[{label:"Add Admission",path:"admissions"},{label:"Collect Fees",path:"fees/collect"},{label:"New Announcement",path:"announcements"},{label:"Book Resource",path:"resources"},{label:"Log Incident",path:"behavior"}];statusChips=[];upcomingEvents=[];attendanceSpark=[];feeBreakdown={paid:0,outstanding:0};behaviorByType=[];admissionsPipeline=[];alerts=[];recent=[];safeIcons={};ngOnInit(){this.tenantService.currentTenant$.subscribe(t=>{this.tenant=t}),this.computeMetrics(),this.safeIcons=Object.fromEntries(Object.entries(Yn).map(([t,e])=>[t,this.sanitizer.bypassSecurityTrustHtml(e)])),this.buildTiles(),this.buildStatus(),this.buildEvents(),this.buildInsights(),this.buildAlerts(),this.buildRecent()}getLink(t){return this.isShell?`/schools/${t}`:`/${t}`}computeMetrics(){let t=this.mock.getStudents()||[],e=this.mock.getStaff()||[],i=this.mock.getAttendance()||[],o=this.mock.getFees()||[],r=this.mock.getBehaviorIncidents()||[];this.metrics.students=t.length,this.metrics.activeStudents=t.filter(L=>(L.status||"").toLowerCase()==="active").length,this.metrics.teachers=e.length;let P=new Date().toISOString().slice(0,10);this.metrics.attendanceToday=i.filter(L=>L.date===P&&L.status==="present").length,this.metrics.attendanceRate=this.metrics.students?Math.round(this.metrics.attendanceToday/this.metrics.students*100):0,this.metrics.feesOutstanding=o.reduce((L,ne)=>L+(Number(ne.balance)||0),0);let k=P.slice(0,7);this.metrics.behaviorThisMonth=r.filter(L=>(L.date||"").startsWith(k)).length;let A=new Date;this.metrics.behaviorFollowUps=r.filter(L=>L.followUpDate&&new Date(L.followUpDate)>=A).length;let ie={};r.forEach(L=>{ie[L.type]=(ie[L.type]||0)+1}),this.metrics.behaviorTopCauses=Object.entries(ie).sort((L,ne)=>ne[1]-L[1]).slice(0,3).map(([L,ne])=>({type:L,count:ne}))}buildTiles(){this.featureTiles=[{iconKey:"students",title:"Students",desc:"Roster, status, and guardians",metric:`${this.metrics.activeStudents}/${this.metrics.students} active`,path:"students",tone:"blue"},{iconKey:"attendance",title:"Attendance",desc:"Today and trends",metric:`${this.metrics.attendanceRate}% present`,path:"attendance",tone:"teal"},{iconKey:"fees",title:"Fees",desc:"Collect, discounts, receipts",metric:`$${this.metrics.feesOutstanding.toLocaleString()}`,path:"fees/collect",tone:"gold"},{iconKey:"behavior",title:"Behavior",desc:"Incidents & follow-ups",metric:`${this.metrics.behaviorFollowUps} follow-ups`,path:"behavior",tone:"coral"},{iconKey:"timetable",title:"Timetable",desc:"Conflicts and rooms",metric:"View schedule",path:"timetable",tone:"violet"},{iconKey:"analytics",title:"Analytics",desc:"Dashboards & reports",metric:"Open reports",path:"analytics",tone:"slate"}]}buildStatus(){this.statusChips=[{label:"Attendance",icon:"\u2705",tone:"ok",value:`${this.metrics.attendanceRate}% today`},{label:"Fees",icon:"\u{1F4B0}",tone:"warn",value:`$${this.metrics.feesOutstanding.toLocaleString()} due`},{label:"Behavior",icon:"\u26A0\uFE0F",tone:"info",value:`${this.metrics.behaviorFollowUps} follow-ups`}]}buildEvents(){let t=new Date,e=this.mock.getEvents?.()||[];this.upcomingEvents=e.filter(i=>new Date(i.date)>=t).sort((i,o)=>i.date.localeCompare(o.date)).slice(0,4)}buildInsights(){let t=this.mock.getAttendance?.()||[],e={};t.forEach(N=>{e[N.date]||(e[N.date]={present:0,total:0}),e[N.date].total+=1,(N.status||"").toLowerCase()==="present"&&(e[N.date].present+=1)});let i=Object.keys(e).sort().slice(-7);this.attendanceSpark=i.map(N=>({date:N.slice(5),rate:e[N].total?Math.round(e[N].present/e[N].total*100):0}));let o=this.mock.getFees?.()||[],P=(this.mock.getReceipts?.()||[]).reduce((N,xe)=>N+(Number(xe.amount)||0),0),k=o.reduce((N,xe)=>N+(Number(xe.balance)||0),0);this.feeBreakdown={paid:P,outstanding:k};let A=this.mock.getBehaviorIncidents?.()||[],ie={};A.forEach(N=>{ie[N.type]=(ie[N.type]||0)+1}),this.behaviorByType=Object.entries(ie).map(([N,xe])=>({type:N,count:xe})).slice(0,4);let L=this.mock.getAdmissions?.()||[],ne={new:0,verified:0,rejected:0};L.forEach(N=>{ne[N.status]=(ne[N.status]||0)+1}),this.admissionsPipeline=Object.entries(ne).map(([N,xe])=>({stage:N,count:xe}))}buildAlerts(){let t=[];this.metrics.feesOutstanding>0&&t.push({label:"Fees due",detail:`$${this.metrics.feesOutstanding.toLocaleString()} outstanding`,tone:"warn"}),this.metrics.behaviorFollowUps>0&&t.push({label:"Behavior follow-ups",detail:`${this.metrics.behaviorFollowUps} pending`,tone:"warn"}),this.metrics.attendanceRate<90&&t.push({label:"Attendance",detail:`${this.metrics.attendanceRate}% today`,tone:"info"});let e=this.upcomingEvents[0];e&&t.push({label:"Upcoming event",detail:`${e.title} on ${e.date}`,tone:"info"}),this.alerts=t.slice(0,4)}buildRecent(){let t=[],e=this.mock.getAnnouncements?.()||[],i=this.mock.getBehaviorIncidents?.()||[],o=this.mock.getReceipts?.()||[];e.slice(0,2).forEach(r=>t.push({label:"Announcement",detail:r.title,date:r.date})),i.slice(0,2).forEach(r=>t.push({label:"Incident",detail:`${r.studentName} - ${r.type}`,date:r.date})),o.slice(0,2).forEach(r=>t.push({label:"Receipt",detail:`${r.studentName} $${r.amount}`,date:r.date})),this.recent=t.slice(0,5)}get feePaidPercent(){let t=this.feeBreakdown.paid+this.feeBreakdown.outstanding;return t?Math.round(this.feeBreakdown.paid/t*100):0}get feeOutstandingPercent(){return 100-this.feePaidPercent}static \u0275fac=function(e){return new(e||n)(p.\u0275\u0275directiveInject(le),p.\u0275\u0275directiveInject(F),p.\u0275\u0275directiveInject(Zn.DomSanitizer))};static \u0275cmp=p.\u0275\u0275defineComponent({type:n,selectors:[["app-schools-dashboard"]],decls:69,vars:27,consts:[[1,"dashboard-container"],[1,"hero","mat-elevation-z2"],[1,"hero-text"],[1,"eyebrow"],[1,"subtitle"],[1,"quick-links"],["mat-stroked-button","","color","primary",3,"routerLink",4,"ngFor","ngForOf"],[1,"hero-visual"],[1,"blob"],["aria-hidden","true",1,"emoji-icon","hero-icon"],[1,"hero-badges"],[1,"hero-chip"],[1,"emoji-icon"],[1,"status-chips"],["class","status-chip",3,"ngClass",4,"ngFor","ngForOf"],[1,"feature-grid"],["class","feature-card mat-elevation-z2",3,"routerLink",4,"ngFor","ngForOf"],[1,"insights-grid"],[1,"insight-card","mat-elevation-z2"],[1,"insight-title"],["class","sparkline",4,"ngIf"],[1,"spark-labels"],[4,"ngFor","ngForOf"],[1,"donut-wrap"],[1,"donut"],[1,"donut-center"],[1,"donut-value"],[1,"donut-label"],[1,"legend"],[1,"dot","teal"],[1,"dot","gold"],[1,"bar-list"],["class","bar-row",4,"ngFor","ngForOf"],[1,"pipeline"],["class","pipe-segment",4,"ngFor","ngForOf"],[1,"alerts-feed"],["class","alerts",4,"ngIf"],["class","recent-card mat-elevation-z2",4,"ngIf"],[1,"lower-grid"],["class","top-causes mat-elevation-z2",4,"ngIf"],["class","events-card mat-elevation-z2",4,"ngIf"],["mat-stroked-button","","color","primary",3,"routerLink"],[1,"status-chip",3,"ngClass"],["aria-hidden","true",1,"emoji-icon"],[1,"status-label"],[1,"status-value"],[1,"feature-card","mat-elevation-z2",3,"routerLink"],[1,"accent-bar",3,"ngClass"],[1,"feature-top"],[1,"icon-wrap",3,"ngClass","innerHTML"],[1,"metric"],[1,"feature-title"],[1,"feature-desc"],["mat-button","","color","primary",1,"feature-cta"],[1,"sparkline"],["class","spark-bar",3,"height","matTooltip",4,"ngFor","ngForOf"],[1,"spark-bar",3,"matTooltip"],[1,"bar-row"],[1,"bar-track"],[1,"bar-fill"],[1,"bar-count"],[1,"pipe-segment"],[1,"pipe-value"],[1,"pipe-label"],[1,"alerts"],["class","alert-chip",3,"ngClass",4,"ngFor","ngForOf"],[1,"alert-chip",3,"ngClass"],[1,"alert-icon",3,"innerHTML"],[1,"alert-text"],[1,"alert-label"],[1,"alert-detail"],["mat-stroked-button","","color","primary","class","alert-cta",3,"routerLink",4,"ngIf"],["mat-stroked-button","","color","primary",1,"alert-cta",3,"routerLink"],[1,"recent-card","mat-elevation-z2"],[1,"recent-list"],["class","recent-row",4,"ngFor","ngForOf"],[1,"recent-row"],[1,"recent-pill"],[1,"recent-detail"],[1,"recent-date"],[1,"top-causes","mat-elevation-z2"],[1,"causes-list"],["class","cause-row",4,"ngFor","ngForOf"],[1,"cause-row"],[1,"pill"],[1,"events-card","mat-elevation-z2"],["class","event-row",4,"ngFor","ngForOf"],[1,"event-row"],[1,"event-date"],[1,"date"],[1,"category"],[1,"event-info"],[1,"event-title"],[1,"event-sub"]],template:function(e,i){e&1&&(p.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p.\u0275\u0275text(4,"School Management"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"h1"),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"p",4),p.\u0275\u0275text(8,"Everything you need to run admissions, academics, and operations in one view."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"div",5),p.\u0275\u0275template(10,Ka,2,2,"button",6),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(11,"div",7),p.\u0275\u0275element(12,"div",8),p.\u0275\u0275elementStart(13,"span",9),p.\u0275\u0275text(14,"\u{1F393}"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"div",10)(16,"div",11)(17,"span",12),p.\u0275\u0275text(18,"\u{1F465}"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(19),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"div",11)(21,"span",12),p.\u0275\u0275text(22,"\u{1F4B3}"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(23),p.\u0275\u0275pipe(24,"currency"),p.\u0275\u0275elementEnd()()()(),p.\u0275\u0275elementStart(25,"div",13),p.\u0275\u0275template(26,Za,8,4,"div",14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"div",15),p.\u0275\u0275template(28,Xa,12,7,"mat-card",16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(29,"div",17)(30,"mat-card",18)(31,"div",19),p.\u0275\u0275text(32,"Attendance trend"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(33,to,2,1,"div",20),p.\u0275\u0275elementStart(34,"div",21),p.\u0275\u0275template(35,no,2,1,"span",22),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(36,"mat-card",18)(37,"div",19),p.\u0275\u0275text(38,"Fees"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(39,"div",23),p.\u0275\u0275element(40,"div",24),p.\u0275\u0275elementStart(41,"div",25)(42,"div",26),p.\u0275\u0275text(43),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(44,"div",27),p.\u0275\u0275text(45,"Total"),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(46,"div",28),p.\u0275\u0275element(47,"span",29),p.\u0275\u0275text(48),p.\u0275\u0275pipe(49,"number"),p.\u0275\u0275element(50,"span",30),p.\u0275\u0275text(51),p.\u0275\u0275pipe(52,"number"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(53,"mat-card",18)(54,"div",19),p.\u0275\u0275text(55,"Incidents by type"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(56,"div",31),p.\u0275\u0275template(57,io,7,4,"div",32),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(58,"mat-card",18)(59,"div",19),p.\u0275\u0275text(60,"Admissions pipeline"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(61,"div",33),p.\u0275\u0275template(62,ao,6,4,"div",34),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(63,"div",35),p.\u0275\u0275template(64,so,2,1,"div",36)(65,mo,5,1,"mat-card",37),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(66,"div",38),p.\u0275\u0275template(67,uo,7,1,"mat-card",39)(68,fo,4,1,"mat-card",40),p.\u0275\u0275elementEnd()()),e&2&&(p.\u0275\u0275advance(6),p.\u0275\u0275textInterpolate((i.tenant==null?null:i.tenant.displayName)||"School Management System"),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",i.quickLinks),p.\u0275\u0275advance(9),p.\u0275\u0275textInterpolate1(" ",i.metrics.students," students "),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(24,19,i.metrics.feesOutstanding)," "),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",i.statusChips),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.featureTiles),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngIf",i.attendanceSpark.length),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.attendanceSpark),p.\u0275\u0275advance(5),p.\u0275\u0275styleProp("background","conic-gradient(#14b8a6 "+i.feePaidPercent+"%, #f59e0b 0)"),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1("$",i.feeBreakdown.outstanding+i.feeBreakdown.paid),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate1(" Paid $",p.\u0275\u0275pipeBind2(49,21,i.feeBreakdown.paid,"1.0-0")," "),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1(" Outstanding $",p.\u0275\u0275pipeBind2(52,24,i.feeBreakdown.outstanding,"1.0-0")," "),p.\u0275\u0275advance(6),p.\u0275\u0275property("ngForOf",i.behaviorByType),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngForOf",i.admissionsPipeline),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",i.alerts.length),p.\u0275\u0275advance(),p.\u0275\u0275property("ngIf",i.recent.length),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",i.metrics.behaviorTopCauses.length),p.\u0275\u0275advance(),p.\u0275\u0275property("ngIf",i.upcomingEvents.length))},dependencies:[Ya,ae.NgClass,ae.NgForOf,ae.NgIf,Ja,D,Xn.MatButton,ye.MatCard,ye.MatCardSubtitle,ye.MatCardTitle,ei.MatTooltip,ae.DecimalPipe,ae.TitleCasePipe,ae.CurrencyPipe],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px;border-radius:16px;background:linear-gradient(90deg,#3b5998,#1e88e5);color:#fff;position:relative;overflow:hidden}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.subtitle[_ngcontent-%COMP%]{margin:6px 0 10px;opacity:.9}.quick-links[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.emoji-icon[_ngcontent-%COMP%]{font-size:20px;line-height:1;display:inline-flex}.hero-icon[_ngcontent-%COMP%]{font-size:72px}.hero-visual[_ngcontent-%COMP%]{position:relative;min-width:220px;display:flex;align-items:center;justify-content:center}.blob[_ngcontent-%COMP%]{position:absolute;width:200px;height:200px;background:radial-gradient(circle at 20% 20%,rgba(255,255,255,.3),transparent 50%),radial-gradient(circle at 80% 40%,rgba(255,255,255,.22),transparent 45%);filter:blur(2px);border-radius:50%}.hero-badges[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:0;display:grid;gap:6px}.hero-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;background:#ffffff29;padding:6px 10px;border-radius:999px;font-weight:600}.metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.metric-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#6b7280}.metric-value[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#0f172a}.status-chips[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}.status-chip[_ngcontent-%COMP%]{display:flex;gap:10px;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;align-items:center;box-shadow:0 4px 10px #1126920d}.status-chip.ok[_ngcontent-%COMP%]{background:#14b8a61f;border-color:#14b8a640}.status-chip.warn[_ngcontent-%COMP%]{background:#f59e0b1f;border-color:#f59e0b40}.status-chip.info[_ngcontent-%COMP%]{background:#1e88e51f;border-color:#1e88e540}.status-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#6b7280}.status-value[_ngcontent-%COMP%]{font-weight:700}.feature-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}.feature-card[_ngcontent-%COMP%]{cursor:pointer;border:1px solid #e3e8f0;border-radius:12px;padding:12px 12px 10px;background:#fff;box-shadow:0 6px 16px #11269214;transition:transform .12s ease,box-shadow .12s ease;overflow:hidden}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 22px #1126921f}.feature-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.icon-wrap[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:#eef4ff;display:grid;place-items:center;color:#1e88e5}.icon-wrap[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.feature-title[_ngcontent-%COMP%]{font-weight:700;margin-top:8px}.feature-desc[_ngcontent-%COMP%]{color:#42526e;margin:4px 0 8px}.feature-cta[_ngcontent-%COMP%]{padding:0;margin-top:2px}.metric[_ngcontent-%COMP%]{font-weight:700;color:#0f172a}.icon-wrap.blue[_ngcontent-%COMP%]{background:#1e88e51f;color:#1e88e5}.icon-wrap.teal[_ngcontent-%COMP%]{background:#14b8a61f;color:#0f766e}.icon-wrap.gold[_ngcontent-%COMP%]{background:#f59e0b24;color:#b45309}.icon-wrap.coral[_ngcontent-%COMP%]{background:#fb718524;color:#be123c}.icon-wrap.violet[_ngcontent-%COMP%]{background:#7c3aed24;color:#6d28d9}.icon-wrap.slate[_ngcontent-%COMP%]{background:#33415524;color:#1f2937}.insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}.insight-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.insight-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px}.sparkline[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(20px,1fr));gap:6px;align-items:end;height:80px}.spark-bar[_ngcontent-%COMP%]{background:linear-gradient(180deg,#1e88e5,#3b82f6);border-radius:6px 6px 2px 2px}.spark-labels[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(20px,1fr));gap:6px;font-size:11px;color:#6b7280;margin-top:6px;text-align:center}.donut-wrap[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto 8px}.donut[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background:conic-gradient(#14b8a6 50%,#f59e0b 0);border:3px solid #fff;box-shadow:inset 0 0 0 1px #0000000a}.donut-center[_ngcontent-%COMP%]{position:absolute;inset:18px;background:#fff;border-radius:50%;display:grid;place-items:center;text-align:center;padding:4px;box-shadow:0 4px 10px #11269214}.donut-value[_ngcontent-%COMP%]{font-weight:700}.donut-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.legend[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:center;font-size:12px;color:#42526e}.dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:4px}.dot.teal[_ngcontent-%COMP%]{background:#14b8a6}.dot.gold[_ngcontent-%COMP%]{background:#f59e0b}.bar-list[_ngcontent-%COMP%]{display:grid;gap:8px}.bar-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 3fr auto;gap:8px;align-items:center}.bar-track[_ngcontent-%COMP%]{background:#e5e7eb;border-radius:999px;height:8px;overflow:hidden}.bar-fill[_ngcontent-%COMP%]{background:#fb7185;height:100%}.bar-count[_ngcontent-%COMP%]{font-weight:700}.pipeline[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(60px,1fr));gap:10px;text-align:center}.pipe-segment[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:10px;padding:8px;background:#fff;box-shadow:0 4px 10px #1126920f}.pipe-value[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.pipe-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.alerts-feed[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 3fr;gap:12px}.alerts[_ngcontent-%COMP%]{display:grid;gap:8px}.alert-chip[_ngcontent-%COMP%]{display:flex;gap:10px;padding:10px 12px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;box-shadow:0 4px 10px #1126920d;align-items:center}.alert-chip.warn[_ngcontent-%COMP%]{border-color:#f59e0b66;background:#f59e0b14}.alert-chip.info[_ngcontent-%COMP%]{border-color:#1e88e566;background:#1e88e514}.alert-label[_ngcontent-%COMP%]{font-weight:700}.alert-detail[_ngcontent-%COMP%]{color:#42526e}.alert-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.alert-cta[_ngcontent-%COMP%]{margin-left:auto}.recent-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.recent-list[_ngcontent-%COMP%]{display:grid;gap:8px;margin-top:8px}.recent-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:8px;align-items:center}.recent-pill[_ngcontent-%COMP%]{background:#e5efff;color:#1e88e5;border-radius:999px;padding:4px 8px;font-weight:700;font-size:12px}.recent-detail[_ngcontent-%COMP%]{font-weight:600;color:#1f2937}.recent-date[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.lower-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px}.top-causes[_ngcontent-%COMP%]{padding:12px 12px 16px;border-radius:12px}.causes-list[_ngcontent-%COMP%]{display:grid;gap:8px;margin-top:8px}.cause-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;border:1px solid #e5e7eb;border-radius:8px}.pill[_ngcontent-%COMP%]{background:#e5efff;color:#0b63f6;font-weight:700;border-radius:999px;padding:2px 10px;font-size:12px}.events-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.event-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr auto;gap:8px;align-items:center;padding:8px 0;border-bottom:1px solid #eef1f6}.event-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.event-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:700}.event-date[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.event-title[_ngcontent-%COMP%]{font-weight:700}.event-sub[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}@media (max-width: 768px){.hero[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.hero-visual[_ngcontent-%COMP%]{align-self:stretch;justify-content:flex-start}.event-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};import{CommonModule as _o}from"@angular/common";import{FormsModule as ho}from"@angular/forms";import{MatPaginator as Co}from"@angular/material/paginator";import{MatSort as bo}from"@angular/material/sort";import{MatTableDataSource as xo}from"@angular/material/table";import*as d from"@angular/core";import*as xt from"@angular/common";import*as we from"@angular/forms";import*as Mt from"@angular/material/button";import*as se from"@angular/material/input";import*as vt from"@angular/material/select";import*as z from"@angular/material/table";import*as Se from"@angular/material/card";import*as ti from"@angular/material/toolbar";import*as Pe from"@angular/material/chips";import*as ni from"@angular/material/paginator";import*as yt from"@angular/material/sort";import*as ii from"@angular/material/tooltip";var Mo=()=>[10,25,50];function vo(n,t){if(n&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",68),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(e);let o=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(o.clearSearch())}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(1,"svg",8),d.\u0275\u0275element(2,"path",69),d.\u0275\u0275elementEnd()()}}function yo(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"mat-option",70),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275property("value",e),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e)}}function wo(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",71),d.\u0275\u0275text(1,"Name"),d.\u0275\u0275elementEnd())}function So(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",72)(1,"div",73),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"div",74),d.\u0275\u0275text(4),d.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(e.name),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("ID #",e.id)}}function Po(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",71),d.\u0275\u0275text(1,"Class"),d.\u0275\u0275elementEnd())}function Oo(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",72),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.class||"--")}}function Eo(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",71),d.\u0275\u0275text(1,"Section"),d.\u0275\u0275elementEnd())}function ko(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",72),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.section||"--")}}function To(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",71),d.\u0275\u0275text(1,"Roll No"),d.\u0275\u0275elementEnd())}function Io(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",72),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.rollNo||"--")}}function Do(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",75),d.\u0275\u0275text(1,"Status"),d.\u0275\u0275elementEnd())}function Fo(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",76)(1,"mat-chip",77),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1(" ",e.status||"unknown"," ")}}function Ao(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",75),d.\u0275\u0275text(1,"Email"),d.\u0275\u0275elementEnd())}function Ro(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",72),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.email||"--")}}function Lo(n,t){n&1&&(d.\u0275\u0275elementStart(0,"th",71),d.\u0275\u0275text(1,"Enrolled"),d.\u0275\u0275elementEnd())}function No(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"td",78),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.enrollmentDate||"--")}}function Bo(n,t){n&1&&d.\u0275\u0275element(0,"th",75)}function zo(n,t){if(n&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"td",72)(1,"div",79)(2,"button",80),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.editStudent(o))}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(3,"svg",81),d.\u0275\u0275element(4,"path",82),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(5,"button",83),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.toggleTransfer(o))}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(6,"svg",81),d.\u0275\u0275element(7,"path",84),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(8,"button",85),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.deleteStudent(o))}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(9,"svg",81),d.\u0275\u0275element(10,"path",86),d.\u0275\u0275elementEnd()()()()}}function Vo(n,t){n&1&&d.\u0275\u0275element(0,"tr",87)}function Ho(n,t){n&1&&d.\u0275\u0275element(0,"tr",88)}function jo(n,t){if(n&1&&(d.\u0275\u0275elementStart(0,"tr",89)(1,"td")(2,"div",90),d.\u0275\u0275text(3,"No students match your filters."),d.\u0275\u0275elementEnd()()()),n&2){let e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Wo(n,t){if(n&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",91)(1,"div",92)(2,"div",73),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"mat-chip",77),d.\u0275\u0275text(5),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(6,"div",74),d.\u0275\u0275text(7),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",74),d.\u0275\u0275text(9),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",74),d.\u0275\u0275text(11),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(12,"div",79)(13,"button",43),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.editStudent(o))}),d.\u0275\u0275text(14,"Edit"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"button",93),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.toggleTransfer(o))}),d.\u0275\u0275text(16),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"button",94),d.\u0275\u0275listener("click",function(){let o=d.\u0275\u0275restoreView(e).$implicit,r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.deleteStudent(o))}),d.\u0275\u0275text(18,"Delete"),d.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(e.name),d.\u0275\u0275advance(),d.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1(" ",e.status||"unknown"," "),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate3("ID #",e.id," \xB7 Class ",e.class||"--"," \xB7 Section ",e.section||"--"),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2("Roll ",e.rollNo||"--"," \xB7 Enrolled ",e.enrollmentDate||"--"),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("Email: ",e.email||"--"),d.\u0275\u0275advance(5),d.\u0275\u0275textInterpolate1(" ",(e.status||"").toLowerCase()==="transferred"?"Restore":"Transfer"," ")}}var bt=class n{constructor(t,e){this.mock=t;this.tenantService=e;this.loadRows()}rows=[];dataSource=new xo([]);displayedColumns=["name","class","section","rollNo","status","email","enrolled","actions"];classes=[];search="";classFilter="";statusFilter="all";metrics={total:0,active:0,inactive:0};paginator;sort;ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=this.mock.getStudents()||[];this.rows=t.map(e=>({id:e.id,name:`${e.firstName||""} ${e.lastName||""}`.trim(),rollNo:e.rollNo||e.roll_number||"",class:e.class,section:e.section,status:e.status||"active",email:e.email,enrollmentDate:e.enrollmentDate})),this.classes=Array.from(new Set(this.rows.map(e=>e.class).filter(Boolean))),this.refreshMetrics(),this.applyFilters()}refreshMetrics(){this.metrics.total=this.rows.length,this.metrics.active=this.rows.filter(t=>(t.status||"").toLowerCase()==="active").length,this.metrics.inactive=this.rows.length-this.metrics.active}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(i=>{let o=!t||i.name.toLowerCase().includes(t)||String(i.id).includes(t)||(i.rollNo||"").toLowerCase().includes(t),r=!this.classFilter||i.class===this.classFilter,P=this.statusFilter==="all"||(i.status||"").toLowerCase()===this.statusFilter;return o&&r&&P});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addStudent(){alert("Implement add student flow")}editStudent(t){alert(`Edit student ${t.name}`)}deleteStudent(t){confirm("Delete this student?")&&(this.mock.deleteStudent(t.id),this.loadRows())}toggleTransfer(t){let e=(t.status||"").toLowerCase()==="transferred"?"active":"transferred";this.mock.updateStudent(t.id,{status:e}),this.loadRows()}exportCsv(){let t=["Id","Name","Class","Section","Roll","Status","Email","Enrolled"],e=this.dataSource.data.map(k=>[k.id,`"${(k.name||"").replace(/"/g,'""')}"`,k.class||"",k.section||"",k.rollNo||"",k.status||"",k.email||"",k.enrollmentDate||""].join(",")),i=[t.join(","),...e].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="students.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(d.\u0275\u0275directiveInject(F),d.\u0275\u0275directiveInject(le))};static \u0275cmp=d.\u0275\u0275defineComponent({type:n,selectors:[["app-students"]],viewQuery:function(e,i){if(e&1&&(d.\u0275\u0275viewQuery(Co,5),d.\u0275\u0275viewQuery(bo,5)),e&2){let o;d.\u0275\u0275queryRefresh(o=d.\u0275\u0275loadQuery())&&(i.paginator=o.first),d.\u0275\u0275queryRefresh(o=d.\u0275\u0275loadQuery())&&(i.sort=o.first)}},decls:122,vars:15,consts:[[1,"fees-page","students-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["viewBox","0 0 24 24",1,"icon"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["d","M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-7 9v-1a6 6 0 0 1 12 0v1H5z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 14-4-4 1.41-1.41L11 13.17l5.59-5.58L18 9l-7 7z","fill","currentColor"],[1,"metric-icon","warn"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 9h-2V7h2v4zm0 4h-2v-2h2v2z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid","compact"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name, id, roll no",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill",1,"class-field"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"status-chip-wrap"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","active"],["value","inactive"],["value","transferred"],[1,"export-wrap"],["mat-flat-button","","color","primary",1,"ghost-button",3,"click"],["d","M12 3v12m0 0-4-4m4 4 4-4M5 19h14","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],[1,"table-card","mat-elevation-z2"],[1,"table-head"],[1,"last-updated"],[1,"table-wrap","desktop-only"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","section"],["matColumnDef","rollNo"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","status-cell",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","enrolled"],["mat-cell","","class","enrolled-cell",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],["mat-cell","",1,"status-cell"],[1,"status-chip",3,"color"],["mat-cell","",1,"enrolled-cell"],[1,"action-row"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"click"],["viewBox","0 0 24 24","width","20","height","20",1,"icon"],["d","M5 19h14M7 14l7.5-7.5a1.06 1.06 0 0 1 1.5 0l1 1a1.06 1.06 0 0 1 0 1.5L9.5 16.5 7 17z","fill","none","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-icon-button","","color","primary","matTooltip","Transfer / Restore",3,"click"],["d","M4 7h12l-3-3m3 3-3 3M20 17H8l3-3m-3 3 3 3","fill","none","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["d","M6 7h12m-9 0v10m6-10v10M9 7l.6-2h4.8l.6 2M10 7v0","fill","none","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"]],template:function(e,i){e&1&&(d.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),d.\u0275\u0275text(4,"School Management"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",4),d.\u0275\u0275text(6,"Students"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275element(7,"span",5),d.\u0275\u0275elementStart(8,"div",6)(9,"button",7),d.\u0275\u0275listener("click",function(){return i.addStudent()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",8),d.\u0275\u0275element(11,"path",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(12," Add Student "),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"div",10)(14,"mat-card",11)(15,"div",12),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(16,"svg",8),d.\u0275\u0275element(17,"path",13),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(18,"div",14)(19,"div",15),d.\u0275\u0275text(20,"Total"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(21,"div",16),d.\u0275\u0275text(22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"div",17),d.\u0275\u0275text(24,"Students"),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(25,"mat-card",11)(26,"div",18),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(27,"svg",8),d.\u0275\u0275element(28,"path",19),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(29,"div",14)(30,"div",15),d.\u0275\u0275text(31,"Active"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(32,"div",16),d.\u0275\u0275text(33),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(34,"div",17),d.\u0275\u0275text(35,"Currently enrolled"),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(36,"mat-card",11)(37,"div",20),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(38,"svg",8),d.\u0275\u0275element(39,"path",21),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(40,"div",14)(41,"div",15),d.\u0275\u0275text(42,"Inactive"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(43,"div",22),d.\u0275\u0275text(44),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(45,"div",17),d.\u0275\u0275text(46,"Need attention"),d.\u0275\u0275elementEnd()()()(),d.\u0275\u0275elementStart(47,"mat-card",23)(48,"div",24)(49,"mat-form-field",25)(50,"mat-label"),d.\u0275\u0275text(51,"Search"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(52,"span",26),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(53,"svg",8),d.\u0275\u0275element(54,"path",27),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(55,"input",28),d.\u0275\u0275twoWayListener("ngModelChange",function(r){return d.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),d.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(56,vo,3,0,"button",29),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(57,"mat-form-field",30)(58,"mat-label"),d.\u0275\u0275text(59,"Class"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(60,"mat-select",31),d.\u0275\u0275twoWayListener("ngModelChange",function(r){return d.\u0275\u0275twoWayBindingSet(i.classFilter,r)||(i.classFilter=r),r}),d.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),d.\u0275\u0275elementStart(61,"mat-option",32),d.\u0275\u0275text(62,"All"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(63,yo,2,2,"mat-option",33),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(64,"div",34)(65,"mat-chip-listbox",35),d.\u0275\u0275listener("selectionChange",function(r){return i.onStatusChange(r)}),d.\u0275\u0275elementStart(66,"mat-chip-option",36),d.\u0275\u0275text(67,"All"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(68,"mat-chip-option",37),d.\u0275\u0275text(69,"Active"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(70,"mat-chip-option",38),d.\u0275\u0275text(71,"Inactive"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(72,"mat-chip-option",39),d.\u0275\u0275text(73,"Transferred"),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(74,"div",40)(75,"button",41),d.\u0275\u0275listener("click",function(){return i.exportCsv()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(76,"svg",8),d.\u0275\u0275element(77,"path",42),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(78," Export CSV "),d.\u0275\u0275elementEnd(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(79,"button",43),d.\u0275\u0275listener("click",function(){return i.addStudent()}),d.\u0275\u0275text(80,"Add Student"),d.\u0275\u0275elementEnd()()()(),d.\u0275\u0275elementStart(81,"mat-card",44)(82,"div",45)(83,"div")(84,"mat-card-title"),d.\u0275\u0275text(85,"Student roster"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(86,"mat-card-subtitle"),d.\u0275\u0275text(87,"Full list with class and status."),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(88,"div",46),d.\u0275\u0275text(89,"Updated just now"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(90,"div",47)(91,"table",48),d.\u0275\u0275elementContainerStart(92,49),d.\u0275\u0275template(93,wo,2,0,"th",50)(94,So,5,2,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(95,52),d.\u0275\u0275template(96,Po,2,0,"th",50)(97,Oo,2,1,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(98,53),d.\u0275\u0275template(99,Eo,2,0,"th",50)(100,ko,2,1,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(101,54),d.\u0275\u0275template(102,To,2,0,"th",50)(103,Io,2,1,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(104,55),d.\u0275\u0275template(105,Do,2,0,"th",56)(106,Fo,3,2,"td",57),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(107,58),d.\u0275\u0275template(108,Ao,2,0,"th",56)(109,Ro,2,1,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(110,59),d.\u0275\u0275template(111,Lo,2,0,"th",50)(112,No,2,1,"td",60),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(113,61),d.\u0275\u0275template(114,Bo,1,0,"th",56)(115,zo,11,0,"td",51),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275template(116,Vo,1,0,"tr",62)(117,Ho,1,0,"tr",63)(118,jo,4,1,"tr",64),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(119,"div",65),d.\u0275\u0275template(120,Wo,19,10,"div",66),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(121,"mat-paginator",67),d.\u0275\u0275elementEnd()()),e&2&&(d.\u0275\u0275advance(22),d.\u0275\u0275textInterpolate(i.metrics.total),d.\u0275\u0275advance(11),d.\u0275\u0275textInterpolate(i.metrics.active),d.\u0275\u0275advance(11),d.\u0275\u0275textInterpolate(i.metrics.inactive),d.\u0275\u0275advance(11),d.\u0275\u0275twoWayProperty("ngModel",i.search),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",i.search),d.\u0275\u0275advance(4),d.\u0275\u0275twoWayProperty("ngModel",i.classFilter),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",i.classes),d.\u0275\u0275advance(2),d.\u0275\u0275property("value",i.statusFilter),d.\u0275\u0275advance(26),d.\u0275\u0275property("dataSource",i.dataSource),d.\u0275\u0275advance(25),d.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),d.\u0275\u0275advance(),d.\u0275\u0275property("matRowDefColumns",i.displayedColumns),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",i.dataSource.data),d.\u0275\u0275advance(),d.\u0275\u0275property("pageSize",10)("pageSizeOptions",d.\u0275\u0275pureFunction0(14,Mo)))},dependencies:[_o,xt.NgForOf,xt.NgIf,ho,we.DefaultValueAccessor,we.NgControlStatus,we.NgModel,D,Mt.MatButton,Mt.MatIconButton,se.MatInput,se.MatFormField,se.MatLabel,se.MatPrefix,se.MatSuffix,vt.MatSelect,vt.MatOption,z.MatTable,z.MatHeaderCellDef,z.MatHeaderRowDef,z.MatColumnDef,z.MatCellDef,z.MatRowDef,z.MatHeaderCell,z.MatCell,z.MatHeaderRow,z.MatRow,z.MatNoDataRow,Se.MatCard,Se.MatCardSubtitle,Se.MatCardTitle,ti.MatToolbar,Pe.MatChip,Pe.MatChipListbox,Pe.MatChipOption,ni.MatPaginator,yt.MatSort,yt.MatSortHeader,ii.MatTooltip],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".students-page[_ngcontent-%COMP%]{padding:0;background:radial-gradient(circle at 15% 10%,rgba(37,99,235,.05),transparent 45%),#f7f9fb}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;border:1px solid #e5e7eb;border-radius:14px;background:#fff;box-shadow:0 6px 14px #11269214}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;background:#2563eb1f;display:grid;place-items:center;color:#1e88e5}.metric-icon.success[_ngcontent-%COMP%]{background:#14b8a624;color:#0f766e}.metric-icon.warn[_ngcontent-%COMP%]{background:#f59e0b29;color:#b45309}.metric-body[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#6b7280}.metric-body[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-weight:800;font-size:20px}.metric-body[_ngcontent-%COMP%]   .metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.filters-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:14px;background:#fff;box-shadow:0 6px 14px #1126920f;padding:12px}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;align-items:center}.filter-grid.compact[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr auto auto;align-items:center}.status-chip-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.status-chips[_ngcontent-%COMP%]{display:inline-flex;gap:6px;padding:4px 6px;border-radius:999px;background:#f1f5f9}.export-wrap[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;align-items:center;flex-wrap:wrap}.table-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:14px;background:#fff;box-shadow:0 8px 18px #11269214;padding:12px}.table-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:8px}.last-updated[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.fees-table[_ngcontent-%COMP%]{width:100%;border-spacing:0}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;color:#1f2937}.fees-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#fbfcff}.fees-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f2f6ff}.fees-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px}th.mat-header-cell[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb}.fees-table[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]{width:120px}.fees-table[_ngcontent-%COMP%]   td.enrolled-cell[_ngcontent-%COMP%]{width:140px;text-align:right}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}.students-page[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:180px}.students-page[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:700;border-radius:20px}.status-chip.mat-primary[_ngcontent-%COMP%]{background:#1e88e51f;color:#0f4c8a}.status-chip.mat-warn[_ngcontent-%COMP%]{background:#f59e0b29;color:#8b4100}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip[_ngcontent-%COMP%]{border-radius:999px;min-height:34px;font-weight:700;padding:0 10px}.ghost-button[_ngcontent-%COMP%]{border-radius:10px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.students-page[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.filters-card[_ngcontent-%COMP%]{padding:10px}.filter-grid[_ngcontent-%COMP%], .filter-grid.compact[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.export-wrap[_ngcontent-%COMP%]{justify-content:flex-start}.students-page[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.students-page[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:640px}.students-page[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-end}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.mobile-card[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})};import{CommonModule as $o}from"@angular/common";import{FormsModule as Uo}from"@angular/forms";import{MatPaginator as Go}from"@angular/material/paginator";import{MatSort as qo}from"@angular/material/sort";import{MatTableDataSource as Qo}from"@angular/material/table";import*as g from"@angular/core";import*as St from"@angular/common";import*as Oe from"@angular/forms";import*as Pt from"@angular/material/button";import*as ce from"@angular/material/input";import*as V from"@angular/material/table";import*as Ee from"@angular/material/card";import*as ai from"@angular/material/toolbar";import*as ke from"@angular/material/chips";import*as oi from"@angular/material/paginator";import*as Ot from"@angular/material/sort";var Yo=()=>[10,25,50];function Jo(n,t){if(n&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",51),g.\u0275\u0275listener("click",function(){g.\u0275\u0275restoreView(e);let o=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(o.clearSearch())}),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(1,"svg",8),g.\u0275\u0275element(2,"path",52),g.\u0275\u0275elementEnd()()}}function Ko(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",53),g.\u0275\u0275text(1,"Name"),g.\u0275\u0275elementEnd())}function Zo(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54)(1,"div",55),g.\u0275\u0275text(2),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(3,"div",56),g.\u0275\u0275text(4),g.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(e.name),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1("ID #",e.id)}}function Xo(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",53),g.\u0275\u0275text(1,"Role"),g.\u0275\u0275elementEnd())}function er(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate(e.role)}}function tr(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",57),g.\u0275\u0275text(1,"Classes"),g.\u0275\u0275elementEnd())}function nr(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate(e.classes||"--")}}function ir(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",57),g.\u0275\u0275text(1,"Email"),g.\u0275\u0275elementEnd())}function ar(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate(e.email||"--")}}function or(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",57),g.\u0275\u0275text(1,"Phone"),g.\u0275\u0275elementEnd())}function rr(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate(e.phone||"--")}}function lr(n,t){n&1&&(g.\u0275\u0275elementStart(0,"th",57),g.\u0275\u0275text(1,"Status"),g.\u0275\u0275elementEnd())}function sr(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"td",54)(1,"mat-chip",58),g.\u0275\u0275text(2),g.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;g.\u0275\u0275advance(),g.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate1(" ",e.status||"active"," ")}}function cr(n,t){n&1&&g.\u0275\u0275element(0,"th",57)}function dr(n,t){if(n&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"td",54)(1,"div",59)(2,"button",60),g.\u0275\u0275listener("click",function(){let o=g.\u0275\u0275restoreView(e).$implicit,r=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(r.editTeacher(o))}),g.\u0275\u0275text(3,"Edit"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"button",61),g.\u0275\u0275listener("click",function(){let o=g.\u0275\u0275restoreView(e).$implicit,r=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(r.deleteTeacher(o))}),g.\u0275\u0275text(5,"Delete"),g.\u0275\u0275elementEnd()()()}}function mr(n,t){n&1&&g.\u0275\u0275element(0,"tr",62)}function pr(n,t){n&1&&g.\u0275\u0275element(0,"tr",63)}function ur(n,t){if(n&1&&(g.\u0275\u0275elementStart(0,"tr",64)(1,"td")(2,"div",65),g.\u0275\u0275text(3,"No teachers match your filters."),g.\u0275\u0275elementEnd()()()),n&2){let e=g.\u0275\u0275nextContext();g.\u0275\u0275advance(),g.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function gr(n,t){if(n&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",66)(1,"div",67)(2,"div",55),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"mat-chip",68),g.\u0275\u0275text(5),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(6,"div",56),g.\u0275\u0275text(7),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"div",56),g.\u0275\u0275text(9),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"div",59)(11,"button",60),g.\u0275\u0275listener("click",function(){let o=g.\u0275\u0275restoreView(e).$implicit,r=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(r.editTeacher(o))}),g.\u0275\u0275text(12,"Edit"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(13,"button",61),g.\u0275\u0275listener("click",function(){let o=g.\u0275\u0275restoreView(e).$implicit,r=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(r.deleteTeacher(o))}),g.\u0275\u0275text(14,"Delete"),g.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(e.name),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(e.role||"Teacher"),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1("Email: ",e.email||"--"),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1("Phone: ",e.phone||"--")}}var wt=class n{constructor(t){this.mock=t;this.loadRows()}rows=[];dataSource=new Qo([]);displayedColumns=["name","role","classes","email","phone","status","actions"];search="";statusFilter="all";metrics={total:0,active:0};paginator;sort;ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=this.mock.getStaff()||[];this.rows=t.map(e=>({id:e.id,name:e.name,role:e.role,email:e.email,phone:e.phone,classes:"",status:"active"})),this.refreshMetrics(),this.applyFilters()}refreshMetrics(){this.metrics.total=this.rows.length,this.metrics.active=this.rows.length}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(i=>{let o=!t||i.name.toLowerCase().includes(t)||String(i.id).includes(t),r=this.statusFilter==="all"||(i.status||"").toLowerCase()===this.statusFilter;return o&&r});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addTeacher(){alert("Implement add teacher flow")}editTeacher(t){alert(`Edit ${t.name}`)}deleteTeacher(t){confirm("Delete this teacher?")&&alert("Deleted (mock)")}exportCsv(){let t=["Id","Name","Role","Classes","Email","Phone","Status"],e=this.dataSource.data.map(k=>[k.id,`"${(k.name||"").replace(/"/g,'""')}"`,k.role||"",k.classes||"",k.email||"",k.phone||"",k.status||""].join(",")),i=[t.join(","),...e].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="teachers.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(g.\u0275\u0275directiveInject(F))};static \u0275cmp=g.\u0275\u0275defineComponent({type:n,selectors:[["app-teachers"]],viewQuery:function(e,i){if(e&1&&(g.\u0275\u0275viewQuery(Go,5),g.\u0275\u0275viewQuery(qo,5)),e&2){let o;g.\u0275\u0275queryRefresh(o=g.\u0275\u0275loadQuery())&&(i.paginator=o.first),g.\u0275\u0275queryRefresh(o=g.\u0275\u0275loadQuery())&&(i.sort=o.first)}},decls:89,vars:12,consts:[[1,"fees-page","teachers-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["viewBox","0 0 24 24",1,"icon"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["d","M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-7 9v-1a6 6 0 0 1 12 0v1H5z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 14-4-4 1.41-1.41L11 13.17l5.59-5.58L18 9l-7 7z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name or id",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","active"],["value","inactive"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"table-card","mat-elevation-z2"],[1,"table-wrap","desktop-only"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","classes"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],[1,"action-row"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""]],template:function(e,i){e&1&&(g.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),g.\u0275\u0275text(4,"School Management"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",4),g.\u0275\u0275text(6,"Teachers"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275element(7,"span",5),g.\u0275\u0275elementStart(8,"div",6)(9,"button",7),g.\u0275\u0275listener("click",function(){return i.addTeacher()}),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(10,"svg",8),g.\u0275\u0275element(11,"path",9),g.\u0275\u0275elementEnd(),g.\u0275\u0275text(12," Add Teacher "),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(13,"div",10)(14,"mat-card",11)(15,"div",12),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(16,"svg",8),g.\u0275\u0275element(17,"path",13),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(18,"div",14)(19,"div",15),g.\u0275\u0275text(20,"Total"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(21,"div",16),g.\u0275\u0275text(22),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(23,"div",17),g.\u0275\u0275text(24,"Teachers"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(25,"mat-card",11)(26,"div",18),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(27,"svg",8),g.\u0275\u0275element(28,"path",19),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(29,"div",14)(30,"div",15),g.\u0275\u0275text(31,"Active"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(32,"div",16),g.\u0275\u0275text(33),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(34,"div",17),g.\u0275\u0275text(35,"Available"),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(36,"mat-card",20)(37,"div",21)(38,"mat-form-field",22)(39,"mat-label"),g.\u0275\u0275text(40,"Search"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(41,"span",23),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(42,"svg",8),g.\u0275\u0275element(43,"path",24),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(44,"input",25),g.\u0275\u0275twoWayListener("ngModelChange",function(r){return g.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),g.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(45,Jo,3,0,"button",26),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(46,"mat-chip-listbox",27),g.\u0275\u0275listener("selectionChange",function(r){return i.onStatusChange(r)}),g.\u0275\u0275elementStart(47,"mat-chip-option",28),g.\u0275\u0275text(48,"All"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(49,"mat-chip-option",29),g.\u0275\u0275text(50,"Active"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(51,"mat-chip-option",30),g.\u0275\u0275text(52,"Inactive"),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(53,"button",31),g.\u0275\u0275listener("click",function(){return i.exportCsv()}),g.\u0275\u0275text(54," Export CSV "),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(55,"mat-card",32)(56,"mat-card-title"),g.\u0275\u0275text(57,"Teacher roster"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(58,"mat-card-subtitle"),g.\u0275\u0275text(59,"All teaching staff with contact."),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(60,"div",33)(61,"table",34),g.\u0275\u0275elementContainerStart(62,35),g.\u0275\u0275template(63,Ko,2,0,"th",36)(64,Zo,5,2,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(65,38),g.\u0275\u0275template(66,Xo,2,0,"th",36)(67,er,2,1,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(68,39),g.\u0275\u0275template(69,tr,2,0,"th",40)(70,nr,2,1,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(71,41),g.\u0275\u0275template(72,ir,2,0,"th",40)(73,ar,2,1,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(74,42),g.\u0275\u0275template(75,or,2,0,"th",40)(76,rr,2,1,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(77,43),g.\u0275\u0275template(78,lr,2,0,"th",40)(79,sr,3,2,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275elementContainerStart(80,44),g.\u0275\u0275template(81,cr,1,0,"th",40)(82,dr,6,0,"td",37),g.\u0275\u0275elementContainerEnd(),g.\u0275\u0275template(83,mr,1,0,"tr",45)(84,pr,1,0,"tr",46)(85,ur,4,1,"tr",47),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(86,"div",48),g.\u0275\u0275template(87,gr,15,4,"div",49),g.\u0275\u0275elementEnd(),g.\u0275\u0275element(88,"mat-paginator",50),g.\u0275\u0275elementEnd()()),e&2&&(g.\u0275\u0275advance(22),g.\u0275\u0275textInterpolate(i.metrics.total),g.\u0275\u0275advance(11),g.\u0275\u0275textInterpolate(i.metrics.active),g.\u0275\u0275advance(11),g.\u0275\u0275twoWayProperty("ngModel",i.search),g.\u0275\u0275advance(),g.\u0275\u0275property("ngIf",i.search),g.\u0275\u0275advance(),g.\u0275\u0275property("value",i.statusFilter),g.\u0275\u0275advance(15),g.\u0275\u0275property("dataSource",i.dataSource),g.\u0275\u0275advance(22),g.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),g.\u0275\u0275advance(),g.\u0275\u0275property("matRowDefColumns",i.displayedColumns),g.\u0275\u0275advance(3),g.\u0275\u0275property("ngForOf",i.dataSource.data),g.\u0275\u0275advance(),g.\u0275\u0275property("pageSize",10)("pageSizeOptions",g.\u0275\u0275pureFunction0(11,Yo)))},dependencies:[$o,St.NgForOf,St.NgIf,Uo,Oe.DefaultValueAccessor,Oe.NgControlStatus,Oe.NgModel,D,Pt.MatButton,Pt.MatIconButton,ce.MatInput,ce.MatFormField,ce.MatLabel,ce.MatPrefix,ce.MatSuffix,V.MatTable,V.MatHeaderCellDef,V.MatHeaderRowDef,V.MatColumnDef,V.MatCellDef,V.MatRowDef,V.MatHeaderCell,V.MatCell,V.MatHeaderRow,V.MatRow,V.MatNoDataRow,Ee.MatCard,Ee.MatCardSubtitle,Ee.MatCardTitle,ai.MatToolbar,ke.MatChip,ke.MatChipListbox,ke.MatChipOption,oi.MatPaginator,Ot.MatSort,Ot.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".teachers-page[_ngcontent-%COMP%]{padding:0}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px}.teachers-page[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:180px}.teachers-page[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{text-transform:capitalize}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.teachers-page[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.teachers-page[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.teachers-page[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:640px}.teachers-page[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-end}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}}"]})};import{CommonModule as Mr}from"@angular/common";import{FormsModule as vr}from"@angular/forms";import*as a from"@angular/core";import{BehaviorSubject as fr}from"rxjs";import*as ri from"@angular/core";var Et=class n{records=[];records$=new fr([]);getAttendanceRecords(){return this.records$.asObservable()}addRecord(t){this.records.push(t),this.records$.next(this.records)}updateRecord(t,e){let i=this.records.findIndex(o=>o.id===t);i>-1&&(this.records[i]=Me(Me({},this.records[i]),e),this.records$.next(this.records))}getRecordsForClass(t,e){return this.records.filter(i=>i.classId===t&&i.date===e)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=ri.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as di from"@angular/common/http";import{HttpHeaders as hr}from"@angular/common/http";import{throwError as Cr,BehaviorSubject as li}from"rxjs";import{catchError as Te,retry as br,tap as re,map as si}from"rxjs/operators";import*as ft from"@angular/core";import*as ci from"@angular/common/http";var kt=class n{constructor(t,e){this.http=t;this.tenantService=e}baseUrl=ve.apiUrl;version=ve.apiVersion;loadingSubject=new li(!1);loading$=this.loadingSubject.asObservable();errorSubject=new li(null);error$=this.errorSubject.asObservable();get(t,e){this.setLoading(!0);let i=this.buildUrl(t),o={headers:this.getHeaders(),params:this.buildParams(e)};return this.http.get(i,o).pipe(br(2),re(r=>{this.setLoading(!1),this.clearError(),r==null&&console.warn("ApiService.get: received null response for",t)}),si(r=>r==null?{}:r.data!==void 0?r.data:r),Te(r=>this.handleError(r)))}post(t,e,i){this.setLoading(!0);let o=this.buildUrl(t),r={headers:this.getHeaders()};return i&&(r.params=this.buildParams(i)),this.http.post(o,e,r).pipe(re(()=>this.setLoading(!1)),re(()=>this.clearError()),Te(P=>this.handleError(P)))}put(t,e,i){this.setLoading(!0);let o=this.buildUrl(t),r={headers:this.getHeaders()};return i&&(r.params=this.buildParams(i)),this.http.put(o,e,r).pipe(re(()=>this.setLoading(!1)),re(()=>this.clearError()),Te(P=>this.handleError(P)))}delete(t,e){this.setLoading(!0);let i=this.buildUrl(t),o={headers:this.getHeaders()};return e&&(o.params=this.buildParams(e)),this.http.delete(i,o).pipe(re(()=>this.setLoading(!1)),re(()=>this.clearError()),Te(r=>this.handleError(r)))}uploadFile(t,e,i){this.setLoading(!0);let o=this.buildUrl(t),r=new FormData;r.append("file",e),i&&Object.keys(i).forEach(k=>{r.append(k,i[k])});let P=this.getHeaders();return P.delete("Content-Type"),this.http.post(o,r,{headers:P}).pipe(re(()=>this.setLoading(!1)),re(()=>this.clearError()),Te(k=>this.handleError(k)))}downloadFile(t,e){this.setLoading(!0);let i=this.buildUrl(t),o={headers:this.getHeaders(),responseType:"blob"};return this.http.get(i,o).pipe(si(r=>r),re(()=>this.setLoading(!1)),re(r=>{e&&this.saveFile(r,e)}),Te(r=>this.handleError(r)))}buildUrl(t){let e=t.startsWith("/")?t.slice(1):t;return`${this.baseUrl}/${this.version}/${e}`}getHeaders(){let t=new hr({"Content-Type":"application/json",Accept:"application/json"}),e=this.getAuthToken();e&&(t=t.set("Authorization",`Bearer ${e}`));let i=this.getTenantId();return i&&(t=t.set("X-Tenant-ID",i)),t}buildParams(t){if(!t)return;let e={};return Object.keys(t).forEach(i=>{t[i]!==null&&t[i]!==void 0&&t[i]!==""&&(e[i]=t[i])}),e}handleError(t){this.setLoading(!1);let e;return t.error instanceof ErrorEvent?e={code:"CLIENT_ERROR",message:"A client-side error occurred. Please check your internet connection.",details:t.error.message,timestamp:new Date().toISOString()}:e={code:t.error?.code||`HTTP_${t.status}`,message:t.error?.message||this.getErrorMessage(t.status),details:t.error?.details||t.message,timestamp:new Date().toISOString()},this.setError(e),console.error("API Error:",e),Cr(()=>e)}getErrorMessage(t){switch(t){case 400:return"Invalid request. Please check your input.";case 401:return"You are not authorized. Please log in again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"Conflict. The resource already exists or is being used.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Internal server error. Please try again later.";case 502:return"Bad gateway. The server is temporarily unavailable.";case 503:return"Service unavailable. Please try again later.";case 504:return"Gateway timeout. The server took too long to respond.";default:return"An unexpected error occurred. Please try again."}}getAuthToken(){return typeof window<"u"?localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")||localStorage.getItem("shellAuthToken")||sessionStorage.getItem("shellAuthToken"):null}getTenantId(){return this.tenantService.getTenantId()}saveFile(t,e){if(typeof window<"u"){let i=document.createElement("a"),o=window.URL.createObjectURL(t);i.href=o,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}}setLoading(t){this.loadingSubject.next(t)}setError(t){this.errorSubject.next(t)}clearError(){this.errorSubject.next(null)}clearCurrentError(){this.clearError()}shouldUseMockData(){return!1}static \u0275fac=function(e){return new(e||n)(ft.\u0275\u0275inject(ci.HttpClient),ft.\u0275\u0275inject(le))};static \u0275prov=ft.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"})};import*as fe from"@angular/common";import*as oe from"@angular/forms";function yr(n,t){if(n&1){let e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",55),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);let o=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(o.clearSearch())}),a.\u0275\u0275text(1,"\u2715"),a.\u0275\u0275elementEnd()}}function wr(n,t){if(n&1&&(a.\u0275\u0275elementStart(0,"option",56),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;a.\u0275\u0275property("value",e),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(e)}}function Sr(n,t){if(n&1&&(a.\u0275\u0275elementStart(0,"option",56),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;a.\u0275\u0275property("value",e),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate(e)}}function Pr(n,t){if(n&1&&(a.\u0275\u0275elementStart(0,"span",85),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate2(" ",e.day.substring(0,3)," ",e.startTime," ")}}function Or(n,t){if(n&1){let e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr",57),a.\u0275\u0275listener("click",function(){let o=a.\u0275\u0275restoreView(e).$implicit,r=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(r.selectClass(o))}),a.\u0275\u0275elementStart(1,"td",58)(2,"strong"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(4,"td",59)(5,"div",60)(6,"strong"),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"small",61),a.\u0275\u0275text(9),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(10,"td",62)(11,"span",63),a.\u0275\u0275text(12),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(13,"td",64),a.\u0275\u0275text(14),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"td",65),a.\u0275\u0275text(16),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"td",66)(18,"div",67)(19,"span",68),a.\u0275\u0275text(20),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"div",69),a.\u0275\u0275element(22,"div",70),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"small",71),a.\u0275\u0275text(24),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(25,"td",72)(26,"div",73),a.\u0275\u0275template(27,Pr,2,2,"span",74),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(28,"td",75)(29,"span",76)(30,"span",77),a.\u0275\u0275text(31),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(32),a.\u0275\u0275pipe(33,"titlecase"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(34,"td")(35,"button",78),a.\u0275\u0275listener("click",function(){let o=a.\u0275\u0275restoreView(e).$implicit,r=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(r.showAttendance(o))}),a.\u0275\u0275text(36,"Attendance"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(37,"td",79)(38,"div",80)(39,"button",81),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().viewClass(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275text(40,"\u{1F441}\uFE0F"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(41,"button",82),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().editClass(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275text(42,"\u270F\uFE0F"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"button",83),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().manageEnrollment(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275text(44,"\u{1F465}"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"button",84),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().generateReport(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275text(46,"\u{1F4CA}"),a.\u0275\u0275elementEnd()()()()}if(n&2){let e=t.$implicit,i=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("highlighted",i.isClassSelected(e)),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(e.code),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(e.name),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",e.semester," ",e.year),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(e.department),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.teacherName),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.credits),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate2("",e.enrolledStudents,"/",e.maxStudents),a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("width",i.getCapacityPercentage(e),"%"),a.\u0275\u0275property("ngClass",i.getCapacityClass(e)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("",i.getCapacityPercentage(e),"%"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",e.schedule),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",i.getStatusClass(e.status)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(i.getStatusIcon(e.status)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(33,19,e.status)," ")}}function Er(n,t){n&1&&(a.\u0275\u0275elementStart(0,"div",86)(1,"span",87),a.\u0275\u0275text(2,"\u2190 Scroll horizontally to see more \u2192"),a.\u0275\u0275elementEnd()())}function kr(n,t){if(n&1&&(a.\u0275\u0275elementStart(0,"div",114)(1,"span",115),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"span",116),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"span",117),a.\u0275\u0275text(6),a.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.day),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate2("",e.startTime,"-",e.endTime),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.room)}}function Tr(n,t){if(n&1&&(a.\u0275\u0275elementStart(0,"div",95)(1,"div",99)(2,"span",97),a.\u0275\u0275text(3,"\u{1F4CB} Prerequisites"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"span",98),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd()()()),n&2){let e=a.\u0275\u0275nextContext().$implicit,i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(i.formatPrerequisites(e.prerequisites))}}function Ir(n,t){if(n&1){let e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",88),a.\u0275\u0275listener("click",function(){let o=a.\u0275\u0275restoreView(e).$implicit,r=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(r.selectClass(o))}),a.\u0275\u0275elementStart(1,"div",89)(2,"div",90)(3,"h3",91),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"span",92),a.\u0275\u0275text(6),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(7,"div",93)(8,"span",76)(9,"span",77),a.\u0275\u0275text(10),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(11),a.\u0275\u0275pipe(12,"titlecase"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(13,"div",94)(14,"div",95)(15,"div",96)(16,"span",97),a.\u0275\u0275text(17,"\u{1F3EB} Department"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"span",98)(19,"span",63),a.\u0275\u0275text(20),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(21,"div",95)(22,"div",96)(23,"span",97),a.\u0275\u0275text(24,"\u{1F468}\u200D\u{1F3EB} Teacher"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"span",98),a.\u0275\u0275text(26),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(27,"div",95)(28,"div",96)(29,"span",97),a.\u0275\u0275text(30,"\u{1F4DA} Credits"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"span",98),a.\u0275\u0275text(32),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(33,"div",96)(34,"span",97),a.\u0275\u0275text(35,"\u{1F4C5} Semester"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(36,"span",98),a.\u0275\u0275text(37),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(38,"div",95)(39,"div",99)(40,"span",97),a.\u0275\u0275text(41,"\u{1F465} Enrollment"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(42,"div",100)(43,"span",68),a.\u0275\u0275text(44),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"div",101),a.\u0275\u0275element(46,"div",102),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(47,"small",103),a.\u0275\u0275text(48),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(49,"div",95)(50,"div",99)(51,"span",97),a.\u0275\u0275text(52,"\u{1F552} Schedule"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(53,"div",104),a.\u0275\u0275template(54,kr,7,4,"div",105),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(55,Tr,6,1,"div",106),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(56,"div",107)(57,"button",108),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().viewClass(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275elementStart(58,"span",109),a.\u0275\u0275text(59,"\u{1F441}\uFE0F"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(60,"span",110),a.\u0275\u0275text(61,"View"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(62,"button",111),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().manageEnrollment(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275elementStart(63,"span",109),a.\u0275\u0275text(64,"\u{1F465}"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(65,"span",110),a.\u0275\u0275text(66,"Enrollment"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(67,"button",112),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().viewSchedule(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275elementStart(68,"span",109),a.\u0275\u0275text(69,"\u{1F4C5}"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(70,"span",110),a.\u0275\u0275text(71,"Schedule"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(72,"button",113),a.\u0275\u0275listener("click",function(o){let r=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().duplicateClass(r),a.\u0275\u0275resetView(o.stopPropagation())}),a.\u0275\u0275elementStart(73,"span",109),a.\u0275\u0275text(74,"\u{1F4CB}"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(75,"span",110),a.\u0275\u0275text(76,"Duplicate"),a.\u0275\u0275elementEnd()()()()}if(n&2){let e=t.$implicit,i=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("selected",i.isClassSelected(e)),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(e.name),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.code),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",i.getStatusClass(e.status)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(i.getStatusIcon(e.status)),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(12,20,e.status)," "),a.\u0275\u0275advance(9),a.\u0275\u0275textInterpolate(e.department),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate(e.teacherName),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate1("",e.credits," credits"),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate2("",e.semester," ",e.year),a.\u0275\u0275advance(7),a.\u0275\u0275textInterpolate2("",e.enrolledStudents,"/",e.maxStudents," students"),a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("width",i.getCapacityPercentage(e),"%"),a.\u0275\u0275property("ngClass",i.getCapacityClass(e)),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(i.getEnrollmentStatus(e)),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngForOf",e.schedule),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",e.prerequisites&&e.prerequisites.length>0)}}function Dr(n,t){if(n&1){let e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",118)(1,"button",119),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);let o=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(o.loadMoreClasses())}),a.\u0275\u0275elementStart(2,"span",109),a.\u0275\u0275text(3,"\u2B07\uFE0F"),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd()()}if(n&2){let e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1(" Load More Classes (",e.filteredClasses.length-e.displayLimit," remaining) ")}}function Fr(n,t){if(n&1){let e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",120)(1,"div",121)(2,"h3"),a.\u0275\u0275text(3,"\u{1F4DA} No Classes Found"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"p"),a.\u0275\u0275text(5,"No classes match your current search criteria."),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",122)(7,"button",123),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);let o=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(o.clearFilters())}),a.\u0275\u0275text(8,"Clear Filters"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"button",124),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);let o=a.\u0275\u0275nextContext();return a.\u0275\u0275resetView(o.addClass())}),a.\u0275\u0275text(10,"Add New Class"),a.\u0275\u0275elementEnd()()()()}}var Tt=class n{constructor(t,e,i,o,r){this.attendanceService=t;this.http=e;this.api=i;this.cdr=o;this.zone=r;try{console.log("ClassesComponent constructor")}catch{}}classes=[];enrollments=[];filteredClasses=[];selectedClass=null;showEnrollmentModal=!1;searchTerm="";selectedDepartment="";selectedSemester="";selectedStatus="";viewMode="table";displayLimit=20;sortField="name";currentSort={field:"name",direction:"asc"};newEnrollmentStudentId=null;allStudents=[];selectedEnrollmentClass=null;selectedAttendanceClass=null;attendanceDate=new Date().toISOString();showScrollIndicator=!1;showMobileFilters=!1;departments=[];semesters=[];displayedColumns=["code","name","department","teacher","credits","capacity","schedule","status","attendance","actions"];ngAfterViewInit(){try{console.log("ClassesComponent ngAfterViewInit")}catch{}}ngOnInit(){this.fetchClasses(),this.fetchEnrollments()}fetchClasses(){try{console.log("Fetching classes via ApiService")}catch{}this.api.get("classes/summary").subscribe({next:t=>{let e=[];Array.isArray(t)?e=t:t&&Array.isArray(t.data)?e=t.data:t&&Array.isArray(t.classes)?e=t.classes:console.warn("Unexpected /classes response \u2014 expected array, got:",t),this.classes=Array.isArray(e)?e:[];try{this.zone.run(()=>{this.departments=Array.from(new Set(this.classes.map(i=>i.department).filter(Boolean))).sort(),this.semesters=Array.from(new Set(this.classes.map(i=>i.semester).filter(Boolean))).sort(),this.applyFilters()})}catch{this.departments=Array.from(new Set(this.classes.map(o=>o.department).filter(Boolean))).sort(),this.semesters=Array.from(new Set(this.classes.map(o=>o.semester).filter(Boolean))).sort(),this.applyFilters()}try{console.log("Classes fetched:",{count:this.classes.length,departments:this.departments.slice(0,50),semesters:this.semesters.slice(0,50),filtered:this.filteredClasses.length})}catch{}try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}try{if(!this.departments||this.departments.length<=1){try{console.log("Departments list small, fetching via ApiService")}catch{}this.api.get("departments").subscribe({next:i=>{let o=i?.data;if(Array.isArray(o)&&o.length){this.departments=Array.from(new Set(o.filter(Boolean))).sort();try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}}},error:i=>{}})}}catch{}},error:t=>console.error("Error fetching classes",t)})}fetchEnrollments(){this.api.get("enrollments/summary").subscribe({next:t=>{if(Array.isArray(t))this.enrollments=t;else{console.warn("Unexpected /enrollments response \u2014 expected array, got:",t);let e=t||{};this.enrollments=Array.isArray(e.enrollments)?e.enrollments:[]}try{console.log("Enrollments fetched:",{count:this.enrollments.length}),this.zone.run(()=>{})}catch{}try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}},error:t=>console.error("Error fetching enrollments",t)})}applyFilters(){let t=[...this.classes],e=this.searchTerm?.trim().toLowerCase();e&&(t=t.filter(r=>(r.name||"").toLowerCase().includes(e)||(r.code||"").toLowerCase().includes(e))),this.selectedDepartment&&(t=t.filter(r=>r.department===this.selectedDepartment)),this.selectedSemester&&(t=t.filter(r=>r.semester===this.selectedSemester)),this.selectedStatus&&(t=t.filter(r=>r.status===this.selectedStatus));let i=this.currentSort.field||this.sortField,o=this.currentSort.direction==="desc"?-1:1;t.sort((r,P)=>{let k=r&&r[i]||"",A=P&&P[i]||"";return k<A?-1*o:k>A?1*o:0}),this.filteredClasses=t}exportClassList(){let t=[["ID","Code","Name","Department","Semester","Year","Credits","Status"]];this.classes.forEach(P=>t.push([String(P.id),P.code||"",P.name||"",P.department||"",P.semester||"",String(P.year||""),String(P.credits||""),P.status||""]));let e=t.map(P=>P.map(k=>'"'+String(k).replace(/"/g,'""')+'"').join(",")).join(`
`),i=new Blob([e],{type:"text/csv"}),o=URL.createObjectURL(i),r=document.createElement("a");r.href=o,r.download="classes.csv",r.click(),URL.revokeObjectURL(o)}toggleMobileFilters(){this.showMobileFilters=!this.showMobileFilters}filterClasses(){this.applyFilters()}sortClasses(){this.sortByField(this.sortField)}getActiveCount(){return this.classes.filter(t=>t.status==="active").length}getTotalEnrollments(){return this.enrollments.filter(t=>t.status==="enrolled").length}getAverageCapacity(){if(!this.classes.length)return 0;let t=this.classes.map(i=>this.getCapacityPercentage(i));return Math.round(t.reduce((i,o)=>i+o,0)/t.length)}getDepartmentCount(){return this.departments.length}getEnrollmentStatus(t){if(!t.maxStudents)return"unknown";let e=this.getCapacityPercentage(t);return e>=100?"full":e>=90?"nearly-full":"open"}formatPrerequisites(t){return!t||t.length===0?"None":t.join(", ")}viewSchedule(t){}duplicateClass(t){let e=Qn(Me({},t),{id:Date.now()});this.classes.push(e),this.applyFilters()}openEnrollmentModal(t){this.selectedClass=t,this.showEnrollmentModal=!0}closeEnrollmentModal(){this.selectedClass=null,this.showEnrollmentModal=!1}getEnrolledForClass(t){return this.enrollments.filter(e=>e.classId===t&&e.status==="enrolled")}ensureAttendanceRecordsForClass(t){let e=this.getEnrolledForClass(t),o=new Date().toISOString();e.forEach(r=>{this.attendanceService.getRecordsForClass(t,o).find(k=>k.studentId===r.studentId)||this.attendanceService.addRecord({id:Date.now(),studentId:r.studentId,studentName:r.studentName,classId:t,className:this.classes.find(k=>k.id===t)?.name||"",date:o,status:"present",notes:""})})}onSearch(t){t!==void 0&&(this.searchTerm=t),this.applyFilters()}clearSearch(){this.searchTerm="",this.applyFilters()}checkScrollIndicator(){}setViewMode(t){this.viewMode=t}sortByField(t){this.currentSort.field===t?this.currentSort.direction=this.currentSort.direction==="asc"?"desc":"asc":(this.currentSort.field=t,this.currentSort.direction="asc"),this.applyFilters()}trackByClassId(t,e){return e.id}get dataSource(){return this.filteredClasses}isClassSelected(t){return!!this.selectedClass&&this.selectedClass.id===t.id}selectClass(t){this.selectedClass=t}getCapacityPercentage(t){return t.maxStudents?Math.round((t.enrolledStudents||0)/t.maxStudents*100):0}getCapacityClass(t){let e=this.getCapacityPercentage(t);return e>=90?"capacity-high":e>=60?"capacity-medium":"capacity-low"}getStatusClass(t){switch(t){case"active":return"status-active";case"cancelled":return"status-cancelled";case"completed":return"status-completed";default:return""}}getStatusIcon(t){switch(t){case"active":return"\u2705";case"cancelled":return"\u274C";case"completed":return"\u{1F3C1}";default:return""}}showAttendance(t){this.selectedAttendanceClass=t,this.ensureAttendanceRecordsForClass(t.id)}closeAttendance(){this.selectedAttendanceClass=null}viewClass(t){}editClass(t){}manageEnrollment(t){this.selectedEnrollmentClass=t,this.showEnrollmentModal=!0}getEnrolledStudents(t){return this.enrollments.filter(e=>e.classId===t&&e.status==="enrolled")}removeStudentFromClass(t){let e=this.enrollments.findIndex(i=>i.id===t);e>-1&&(this.enrollments[e].status="dropped")}addStudentToClass(){if(!this.selectedEnrollmentClass||!this.newEnrollmentStudentId)return;let t=this.allStudents.find(e=>e.studentId===this.newEnrollmentStudentId);t&&(this.enrollments.push({id:Date.now(),studentId:t.studentId,studentName:t.studentName,classId:this.selectedEnrollmentClass.id,status:"enrolled"}),this.newEnrollmentStudentId=null)}generateReport(t){}loadMoreClasses(){this.displayLimit+=20}clearFilters(){this.selectedDepartment="",this.selectedSemester="",this.selectedStatus="",this.searchTerm="",this.applyFilters()}addClass(){}static \u0275fac=function(e){return new(e||n)(a.\u0275\u0275directiveInject(Et),a.\u0275\u0275directiveInject(di.HttpClient),a.\u0275\u0275directiveInject(kt),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.NgZone))};static \u0275cmp=a.\u0275\u0275defineComponent({type:n,selectors:[["app-classes"]],decls:154,vars:55,consts:[[1,"classes-container"],[1,"classes-header"],[1,"header-search"],[1,"search-wrapper"],["type","text","placeholder","\u{1F50D} Search classes...",1,"form-input","header-search-input",3,"ngModelChange","input","ngModel"],["class","clear-search-btn",3,"click",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary","export-btn",3,"click"],[1,"btn","btn-primary","add-class-btn",3,"click"],[1,"filters-section"],[1,"mobile-filter-toggle",3,"click"],[1,"filter-icon"],[1,"filter-row"],[1,"mobile-filter-row"],[1,"filter-group"],[1,"filter-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","active"],["value","cancelled"],["value","completed"],["value","draft"],[1,"filter-actions"],[1,"btn","btn-secondary","clear-filters",3,"click"],[1,"sort-options"],["value","name"],["value","code"],["value","department"],["value","teacher"],["value","credits"],["value","enrollment"],["value","capacity"],["value","status"],[1,"quick-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"classes-table-container"],[1,"view-controls"],[1,"classes-count"],[1,"view-toggle-buttons"],["title","Table View",1,"view-toggle-btn",3,"click"],["title","Card View",1,"view-toggle-btn",3,"click"],[1,"table-wrapper"],[1,"table-scroll-container"],[1,"classes-table"],[1,"sortable",3,"click"],[1,"sort-indicator"],["class","class-row",3,"highlighted","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","scroll-indicator",4,"ngIf"],[1,"mobile-cards"],["class","class-card",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-section",4,"ngIf"],["class","no-classes",4,"ngIf"],[1,"clear-search-btn",3,"click"],[3,"value"],[1,"class-row",3,"click"],[1,"class-code"],[1,"class-name"],[1,"name-wrapper"],[1,"class-semester"],[1,"department-cell"],[1,"department-badge"],[1,"teacher-cell"],[1,"credits-cell"],[1,"capacity-cell"],[1,"capacity-info"],[1,"capacity-numbers"],[1,"capacity-bar"],[1,"capacity-fill",3,"ngClass"],[1,"capacity-percentage"],[1,"schedule-cell"],[1,"schedule-summary"],["class","schedule-item",4,"ngFor","ngForOf"],[1,"status-cell"],[1,"status-badge",3,"ngClass"],[1,"status-icon"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"actions-cell"],[1,"action-buttons"],["title","View Details",1,"btn-action","btn-view",3,"click"],["title","Edit Class",1,"btn-action","btn-edit",3,"click"],["title","Manage Enrollment",1,"btn-action","btn-enrollment",3,"click"],["title","Generate Report",1,"btn-action","btn-more",3,"click"],[1,"schedule-item"],[1,"scroll-indicator"],[1,"scroll-text"],[1,"class-card",3,"click"],[1,"class-card-header"],[1,"class-info"],[1,"class-card-name"],[1,"class-card-code"],[1,"class-card-status"],[1,"class-card-body"],[1,"card-row"],[1,"class-card-field"],[1,"class-card-label"],[1,"class-card-value"],[1,"class-card-field","full-width"],[1,"capacity-info-mobile"],[1,"capacity-bar-mobile"],[1,"capacity-fill-mobile",3,"ngClass"],[1,"enrollment-status"],[1,"schedule-mobile"],["class","schedule-item-mobile",4,"ngFor","ngForOf"],["class","card-row",4,"ngIf"],[1,"class-card-actions"],["title","View Details",1,"card-action-btn","primary",3,"click"],[1,"btn-icon"],[1,"btn-text"],["title","Manage Enrollment",1,"card-action-btn","secondary",3,"click"],["title","Schedule",1,"card-action-btn","tertiary",3,"click"],["title","Duplicate Class",1,"card-action-btn","quaternary",3,"click"],[1,"schedule-item-mobile"],[1,"schedule-day"],[1,"schedule-time"],[1,"schedule-room"],[1,"load-more-section"],[1,"btn","btn-outline","load-more-btn",3,"click"],[1,"no-classes"],[1,"empty-state"],[1,"empty-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(a.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),a.\u0275\u0275text(3,"\u{1F4DA} Classes Management"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"input",4),a.\u0275\u0275twoWayListener("ngModelChange",function(r){return a.\u0275\u0275twoWayBindingSet(i.searchTerm,r)||(i.searchTerm=r),r}),a.\u0275\u0275listener("input",function(){return i.onSearch()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(7,yr,2,0,"button",5),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(8,"div",6)(9,"button",7),a.\u0275\u0275listener("click",function(){return i.exportClassList()}),a.\u0275\u0275text(10," \u{1F4CA} Export "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"button",8),a.\u0275\u0275listener("click",function(){return i.addClass()}),a.\u0275\u0275text(12," \u2795 Add New Class "),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(13,"div",9)(14,"div",10),a.\u0275\u0275listener("click",function(){return i.toggleMobileFilters()}),a.\u0275\u0275elementStart(15,"span"),a.\u0275\u0275text(16,"\u{1F50D} Filters & Search"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"span",11),a.\u0275\u0275text(18,"\u25BC"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(19,"div",12)(20,"div",13)(21,"div",14)(22,"label",15),a.\u0275\u0275text(23,"Department"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(24,"select",16),a.\u0275\u0275twoWayListener("ngModelChange",function(r){return a.\u0275\u0275twoWayBindingSet(i.selectedDepartment,r)||(i.selectedDepartment=r),r}),a.\u0275\u0275listener("change",function(){return i.filterClasses()}),a.\u0275\u0275elementStart(25,"option",17),a.\u0275\u0275text(26,"All Departments"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(27,wr,2,2,"option",18),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(28,"div",14)(29,"label",15),a.\u0275\u0275text(30,"Semester"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"select",16),a.\u0275\u0275twoWayListener("ngModelChange",function(r){return a.\u0275\u0275twoWayBindingSet(i.selectedSemester,r)||(i.selectedSemester=r),r}),a.\u0275\u0275listener("change",function(){return i.filterClasses()}),a.\u0275\u0275elementStart(32,"option",17),a.\u0275\u0275text(33,"All Semesters"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(34,Sr,2,2,"option",18),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(35,"div",14)(36,"label",15),a.\u0275\u0275text(37,"Status"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(38,"select",16),a.\u0275\u0275twoWayListener("ngModelChange",function(r){return a.\u0275\u0275twoWayBindingSet(i.selectedStatus,r)||(i.selectedStatus=r),r}),a.\u0275\u0275listener("change",function(){return i.filterClasses()}),a.\u0275\u0275elementStart(39,"option",17),a.\u0275\u0275text(40,"All Status"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(41,"option",19),a.\u0275\u0275text(42,"Active"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"option",20),a.\u0275\u0275text(44,"Cancelled"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"option",21),a.\u0275\u0275text(46,"Completed"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(47,"option",22),a.\u0275\u0275text(48,"Draft"),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(49,"div",23)(50,"button",24),a.\u0275\u0275listener("click",function(){return i.clearFilters()}),a.\u0275\u0275text(51," \u{1F5D1}\uFE0F Clear Filters "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(52,"div",25)(53,"label",15),a.\u0275\u0275text(54,"Sort By"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"select",16),a.\u0275\u0275twoWayListener("ngModelChange",function(r){return a.\u0275\u0275twoWayBindingSet(i.sortField,r)||(i.sortField=r),r}),a.\u0275\u0275listener("change",function(){return i.sortClasses()}),a.\u0275\u0275elementStart(56,"option",26),a.\u0275\u0275text(57,"Name (A-Z)"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(58,"option",27),a.\u0275\u0275text(59,"Code"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(60,"option",28),a.\u0275\u0275text(61,"Department"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(62,"option",29),a.\u0275\u0275text(63,"Teacher"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(64,"option",30),a.\u0275\u0275text(65,"Credits"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(66,"option",31),a.\u0275\u0275text(67,"Enrollment"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(68,"option",32),a.\u0275\u0275text(69,"Capacity"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(70,"option",33),a.\u0275\u0275text(71,"Status"),a.\u0275\u0275elementEnd()()()()(),a.\u0275\u0275elementStart(72,"div",34)(73,"div",35)(74,"span",36),a.\u0275\u0275text(75),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(76,"span",37),a.\u0275\u0275text(77,"Showing"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(78,"div",35)(79,"span",36),a.\u0275\u0275text(80),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(81,"span",37),a.\u0275\u0275text(82,"Active"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(83,"div",35)(84,"span",36),a.\u0275\u0275text(85),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(86,"span",37),a.\u0275\u0275text(87,"Total Enrolled"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(88,"div",35)(89,"span",36),a.\u0275\u0275text(90),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(91,"span",37),a.\u0275\u0275text(92,"Avg. Capacity"),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(93,"div",35)(94,"span",36),a.\u0275\u0275text(95),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(96,"span",37),a.\u0275\u0275text(97,"Departments"),a.\u0275\u0275elementEnd()()()(),a.\u0275\u0275elementStart(98,"div",38)(99,"div",39)(100,"div",40)(101,"p"),a.\u0275\u0275text(102),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(103,"div",41)(104,"button",42),a.\u0275\u0275listener("click",function(){return i.setViewMode("table")}),a.\u0275\u0275text(105," \u{1F4CA} "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(106,"button",43),a.\u0275\u0275listener("click",function(){return i.setViewMode("cards")}),a.\u0275\u0275text(107," \u{1F0CF} "),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(108,"div",44)(109,"div",45)(110,"table",46)(111,"thead")(112,"tr")(113,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("code")}),a.\u0275\u0275text(114," Code "),a.\u0275\u0275elementStart(115,"span",48),a.\u0275\u0275text(116),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(117,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("name")}),a.\u0275\u0275text(118," Class Name "),a.\u0275\u0275elementStart(119,"span",48),a.\u0275\u0275text(120),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(121,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("department")}),a.\u0275\u0275text(122," Department "),a.\u0275\u0275elementStart(123,"span",48),a.\u0275\u0275text(124),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(125,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("teacher")}),a.\u0275\u0275text(126," Teacher "),a.\u0275\u0275elementStart(127,"span",48),a.\u0275\u0275text(128),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(129,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("credits")}),a.\u0275\u0275text(130," Credits "),a.\u0275\u0275elementStart(131,"span",48),a.\u0275\u0275text(132),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(133,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("capacity")}),a.\u0275\u0275text(134," Capacity "),a.\u0275\u0275elementStart(135,"span",48),a.\u0275\u0275text(136),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(137,"th"),a.\u0275\u0275text(138,"Schedule"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(139,"th",47),a.\u0275\u0275listener("click",function(){return i.sortByField("status")}),a.\u0275\u0275text(140," Status "),a.\u0275\u0275elementStart(141,"span",48),a.\u0275\u0275text(142),a.\u0275\u0275elementEnd()(),a.\u0275\u0275elementStart(143,"th"),a.\u0275\u0275text(144,"Attendance"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(145,"th"),a.\u0275\u0275text(146,"Actions"),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275elementStart(147,"tbody"),a.\u0275\u0275template(148,Or,47,21,"tr",49),a.\u0275\u0275elementEnd()()(),a.\u0275\u0275template(149,Er,3,0,"div",50),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(150,"div",51),a.\u0275\u0275template(151,Ir,77,22,"div",52)(152,Dr,5,1,"div",53),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(153,Fr,11,0,"div",54),a.\u0275\u0275elementEnd()()),e&2&&(a.\u0275\u0275advance(6),a.\u0275\u0275twoWayProperty("ngModel",i.searchTerm),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",i.searchTerm),a.\u0275\u0275advance(10),a.\u0275\u0275classProp("rotated",i.showMobileFilters),a.\u0275\u0275advance(2),a.\u0275\u0275classProp("mobile-expanded",i.showMobileFilters),a.\u0275\u0275advance(5),a.\u0275\u0275twoWayProperty("ngModel",i.selectedDepartment),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",i.departments),a.\u0275\u0275advance(4),a.\u0275\u0275twoWayProperty("ngModel",i.selectedSemester),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",i.semesters),a.\u0275\u0275advance(4),a.\u0275\u0275twoWayProperty("ngModel",i.selectedStatus),a.\u0275\u0275advance(17),a.\u0275\u0275twoWayProperty("ngModel",i.sortField),a.\u0275\u0275advance(20),a.\u0275\u0275textInterpolate(i.filteredClasses.length),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(i.getActiveCount()),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(i.getTotalEnrollments()),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1("",i.getAverageCapacity(),"%"),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(i.getDepartmentCount()),a.\u0275\u0275advance(7),a.\u0275\u0275textInterpolate2("Showing ",i.filteredClasses.length," of ",i.classes.length," classes"),a.\u0275\u0275advance(2),a.\u0275\u0275classProp("active",i.viewMode==="table"),a.\u0275\u0275advance(2),a.\u0275\u0275classProp("active",i.viewMode==="cards"),a.\u0275\u0275advance(2),a.\u0275\u0275styleProp("display",i.viewMode==="cards"?"none":"block"),a.\u0275\u0275advance(7),a.\u0275\u0275classProp("active",i.currentSort.field==="code"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="code"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(3),a.\u0275\u0275classProp("active",i.currentSort.field==="name"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="name"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(3),a.\u0275\u0275classProp("active",i.currentSort.field==="department"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="department"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(3),a.\u0275\u0275classProp("active",i.currentSort.field==="teacher"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="teacher"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(3),a.\u0275\u0275classProp("active",i.currentSort.field==="credits"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="credits"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(3),a.\u0275\u0275classProp("active",i.currentSort.field==="capacity"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="capacity"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(5),a.\u0275\u0275classProp("active",i.currentSort.field==="status"),a.\u0275\u0275advance(),a.\u0275\u0275textInterpolate1(" ",i.currentSort.field==="status"?i.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),a.\u0275\u0275advance(6),a.\u0275\u0275property("ngForOf",i.filteredClasses)("ngForTrackBy",i.trackByClassId),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",i.showScrollIndicator),a.\u0275\u0275advance(),a.\u0275\u0275styleProp("display",i.viewMode==="cards"?"block":"none"),a.\u0275\u0275advance(),a.\u0275\u0275property("ngForOf",i.filteredClasses)("ngForTrackBy",i.trackByClassId),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",i.filteredClasses.length>i.displayLimit),a.\u0275\u0275advance(),a.\u0275\u0275property("ngIf",i.filteredClasses.length===0))},dependencies:[Mr,fe.NgClass,fe.NgForOf,fe.NgIf,vr,oe.NgSelectOption,oe.\u0275NgSelectMultipleOption,oe.DefaultValueAccessor,oe.SelectControlValueAccessor,oe.NgControlStatus,oe.NgModel,D,fe.TitleCasePipe],styles:[".classes-container[_ngcontent-%COMP%]{padding:16px;background:#f8f9fa;min-height:100vh}@media (min-width: 768px){.classes-container[_ngcontent-%COMP%]{padding:24px}}@media (min-width: 1024px){.classes-container[_ngcontent-%COMP%]{padding:32px}}.classes-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;gap:20px}}.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#2c3e50;margin:0;font-weight:600}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px}}@media (min-width: 1024px){.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:12px}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]{width:220px;min-height:44px;padding:10px 14px;border:2px solid #bdc3c7;border-radius:8px;font-size:15px;transition:width .18s ease}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%)}@media (max-width: 900px){.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]{width:140px}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]:focus{width:100%}}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{align-items:center}}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#9b59b6;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:hover, .classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #9b59b666}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(155,89,182,.5);outline-offset:2px}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:hover, .classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:24px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden}.filters-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}@media (max-width: 767px){.mobile-filter-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#ecf0f1;cursor:pointer;border-bottom:1px solid #bdc3c7;font-weight:500;color:#2c3e50;-webkit-user-select:none;user-select:none}.mobile-filter-toggle[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{transition:transform .3s ease;font-size:12px}.mobile-filter-toggle[_ngcontent-%COMP%]   .filter-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.mobile-filter-toggle[_ngcontent-%COMP%]:hover{background:#e6e6e6}.mobile-filter-toggle[_ngcontent-%COMP%]:active{background:#d9d9d9}}@media (min-width: 768px){.mobile-filter-toggle[_ngcontent-%COMP%]{display:none}}.filter-row[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:20px}@media (max-width: 767px){.filter-row[_ngcontent-%COMP%]{display:none}.filter-row.mobile-expanded[_ngcontent-%COMP%]{display:flex}}@media (min-width: 768px){.filter-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}}@media (min-width: 1024px){.filter-row[_ngcontent-%COMP%]{flex-wrap:nowrap;gap:24px}}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 48px 12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;transition:border-color .3s ease}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:#7f8c8d;color:#fff;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]:hover{background:#e74c3c}.mobile-filter-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}@media (min-width: 768px){.mobile-filter-row[_ngcontent-%COMP%]{flex-direction:row;gap:20px;flex-wrap:wrap}}@media (min-width: 1024px){.mobile-filter-row[_ngcontent-%COMP%]{flex-wrap:nowrap;gap:24px}}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:180px}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:14px}.filter-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;background:#fff;cursor:pointer;transition:border-color .3s ease}.filter-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}.filter-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (min-width: 768px){.filter-actions[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-end;gap:16px}}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:hover, .filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:active{transform:translateY(0)}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.filter-actions[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]{min-width:180px}.filter-actions[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:14px}.quick-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;padding:16px 20px;background:#ecf0f1;border-top:1px solid #bdc3c7}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]{justify-content:space-around;gap:20px}}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;min-width:80px}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#3498db;line-height:1}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:24px}}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d;margin-top:4px;text-align:center}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px}}.classes-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden}.classes-table-container[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.view-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #bdc3c7;background:#ecf0f1}.view-controls[_ngcontent-%COMP%]   .classes-count[_ngcontent-%COMP%]{margin:0}.view-controls[_ngcontent-%COMP%]   .classes-count[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:14px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]{min-height:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:44px;padding:10px;font-size:18px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:hover, .view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff}.table-wrapper.hidden[_ngcontent-%COMP%]{display:none}.table-scroll-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ecf0f1}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bdc3c7;border-radius:4px}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7f8c8d}.classes-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ecf0f1}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;text-align:left;font-weight:600;color:#2c3e50;border-bottom:2px solid #bdc3c7;white-space:nowrap}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .3s ease}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#e0e0e0}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   .sort-indicator[_ngcontent-%COMP%]{margin-left:8px;font-size:12px;opacity:.6}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   .sort-indicator.active[_ngcontent-%COMP%]{opacity:1;color:#3498db}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s ease}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]:hover{background:#e3f2fd}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row.highlighted[_ngcontent-%COMP%]{background:#bbdefb}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #bdc3c7;vertical-align:middle}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-code[_ngcontent-%COMP%]{font-weight:600;color:#3498db}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-name[_ngcontent-%COMP%]   .name-wrapper[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#2c3e50;font-size:16px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-name[_ngcontent-%COMP%]   .name-wrapper[_ngcontent-%COMP%]   .class-semester[_ngcontent-%COMP%]{color:#7f8c8d;font-size:12px;margin-top:2px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.department-cell[_ngcontent-%COMP%]   .department-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.teacher-cell[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.credits-cell[_ngcontent-%COMP%]{font-weight:600;color:#9b59b6}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-numbers[_ngcontent-%COMP%]{display:block;font-size:12px;color:#2c3e50;font-weight:500;margin-bottom:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]{width:80px;height:6px;background:#e9ecef;border-radius:3px;overflow:hidden;margin-bottom:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .3s ease}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-low[_ngcontent-%COMP%]{background:#2ecc71}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-medium[_ngcontent-%COMP%]{background:#f39c12}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-high[_ngcontent-%COMP%]{background:#e67e22}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-full[_ngcontent-%COMP%]{background:#e74c3c}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-percentage[_ngcontent-%COMP%]{font-size:11px;color:#7f8c8d}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]{background:#f7fbfe;color:#217dbb;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500;white-space:nowrap}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:6px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:14px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#d1f5e0;color:#25a25a}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fbdedb;color:#d62c1a}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#e6d5ed;color:#804399}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#d0d5d5;color:#667273}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{min-height:44px;min-width:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:36px;min-height:36px;padding:8px;font-size:14px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:hover, .classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-view[_ngcontent-%COMP%]{background:#9b59b6}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-edit[_ngcontent-%COMP%]{background:#f39c12}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-enrollment[_ngcontent-%COMP%]{background:#2ecc71}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-more[_ngcontent-%COMP%]{background:#3498db}.scroll-indicator[_ngcontent-%COMP%]{text-align:center;padding:12px;background:#ecf0f1;color:#7f8c8d;font-size:12px}@media (min-width: 768px){.scroll-indicator[_ngcontent-%COMP%]{display:none}}.mobile-cards[_ngcontent-%COMP%]{display:none;padding:16px 20px}.mobile-cards.visible[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.mobile-cards[_ngcontent-%COMP%]{padding:20px}}.class-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden;cursor:pointer;transition:all .3s ease;position:relative}.class-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.class-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.class-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.class-card.selected[_ngcontent-%COMP%]{border:2px solid #3498db;box-shadow:0 4px 16px #3498db4d}.class-card-header[_ngcontent-%COMP%]{padding:16px 20px 0;display:flex;justify-content:space-between;align-items:flex-start;gap:12px}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]{flex:1}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   .class-card-name[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#2c3e50;line-height:1.3}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   .class-card-code[_ngcontent-%COMP%]{font-size:12px;color:#3498db;font-weight:600;background:#3498db1a;padding:2px 8px;border-radius:4px;margin-top:4px;display:inline-block}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:6px}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:14px}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#d1f5e0;color:#25a25a}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fbdedb;color:#d62c1a}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#e6d5ed;color:#804399}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#d0d5d5;color:#667273}.class-card-body[_ngcontent-%COMP%]{padding:16px 20px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;margin-bottom:12px;gap:16px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field.full-width[_ngcontent-%COMP%]{width:100%}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-label[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]{font-size:14px;color:#2c3e50;font-weight:500}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .department-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-block}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-numbers[_ngcontent-%COMP%]{display:block;font-size:14px;color:#2c3e50;margin-bottom:6px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]{width:100%;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;margin-bottom:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-low[_ngcontent-%COMP%]{background:#2ecc71}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-medium[_ngcontent-%COMP%]{background:#f39c12}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-high[_ngcontent-%COMP%]{background:#e67e22}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-full[_ngcontent-%COMP%]{background:#e74c3c}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .enrollment-status[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f7fbfe;padding:6px 12px;border-radius:6px;margin-bottom:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-day[_ngcontent-%COMP%]{font-weight:600;color:#217dbb;font-size:12px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]{font-size:11px;color:#258cd1}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-room[_ngcontent-%COMP%]{font-size:10px;color:#3498db;font-weight:600}.class-card-actions[_ngcontent-%COMP%]{padding:16px 20px 20px;display:flex;gap:8px;flex-wrap:wrap}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;flex:1;min-width:calc(50% - 4px);font-size:12px;padding:10px 8px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:hover, .class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:14px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.primary[_ngcontent-%COMP%]{background:#3498db}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.secondary[_ngcontent-%COMP%]{background:#2ecc71}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.tertiary[_ngcontent-%COMP%]{background:#9b59b6}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.quaternary[_ngcontent-%COMP%]{background:#f39c12}.load-more-section[_ngcontent-%COMP%]{text-align:center;padding:20px}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;background:transparent;color:#3498db;border:2px solid #3498db}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover, .load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover, .load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{background:#3498db;color:#fff}.no-classes[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#7f8c8d;margin-bottom:12px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:24px;font-size:16px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#7f8c8d}.btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.btn.btn-secondary[_ngcontent-%COMP%]{background:#7f8c8d}.btn.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#3498db;border:2px solid #3498db}.btn.btn-outline[_ngcontent-%COMP%]:hover, .btn.btn-outline[_ngcontent-%COMP%]:focus{background:#3498db;color:#fff}.form-input[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}*[_ngcontent-%COMP%]:focus{outline:2px solid #3498db;outline-offset:2px}@media (prefers-contrast: high){.class-card[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{border:2px solid #2c3e50}.status-badge[_ngcontent-%COMP%]{border:1px solid #2c3e50!important}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-color-scheme: dark){.classes-container[_ngcontent-%COMP%]{background:#233140;color:#fff}.class-card[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{background:#2c3e50;color:#fff}.class-card-body[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]{color:#fff}}"]})};import{CommonModule as Ar}from"@angular/common";import{FormsModule as Rr}from"@angular/forms";import{MatTableDataSource as Lr}from"@angular/material/table";import{MatPaginator as Nr}from"@angular/material/paginator";import{MatSort as Br}from"@angular/material/sort";import*as u from"@angular/core";import*as Dt from"@angular/common";import*as Ie from"@angular/forms";import*as Ft from"@angular/material/button";import*as de from"@angular/material/input";import*as At from"@angular/material/select";import*as H from"@angular/material/table";import*as De from"@angular/material/card";import*as mi from"@angular/material/toolbar";import*as Fe from"@angular/material/chips";import*as pi from"@angular/material/paginator";import*as Rt from"@angular/material/sort";import*as ui from"@angular/material/tooltip";var zr=()=>[8,15,25];function Vr(n,t){if(n&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"button",61),u.\u0275\u0275listener("click",function(){u.\u0275\u0275restoreView(e);let o=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(o.clearSearch())}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(1,"svg",8),u.\u0275\u0275element(2,"path",62),u.\u0275\u0275elementEnd()()}}function Hr(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"mat-option",63),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;u.\u0275\u0275property("value",e.id),u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function jr(n,t){n&1&&(u.\u0275\u0275elementStart(0,"th",64),u.\u0275\u0275text(1,"Student"),u.\u0275\u0275elementEnd())}function Wr(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"td",65)(1,"div",66),u.\u0275\u0275text(2),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(3,"div",67),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(e.studentName),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("ID #",e.studentId)}}function $r(n,t){n&1&&(u.\u0275\u0275elementStart(0,"th",64),u.\u0275\u0275text(1,"Class"),u.\u0275\u0275elementEnd())}function Ur(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"td",65),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.class||"--")}}function Gr(n,t){n&1&&(u.\u0275\u0275elementStart(0,"th",64),u.\u0275\u0275text(1,"Date"),u.\u0275\u0275elementEnd())}function qr(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"td",65),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.date)}}function Qr(n,t){n&1&&(u.\u0275\u0275elementStart(0,"th",68),u.\u0275\u0275text(1,"Status"),u.\u0275\u0275elementEnd())}function Yr(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"td",69)(1,"mat-chip",70),u.\u0275\u0275text(2),u.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275property("color",e.status==="present"?"primary":"warn"),u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate1(" ",e.status," ")}}function Jr(n,t){n&1&&(u.\u0275\u0275elementStart(0,"th",68),u.\u0275\u0275text(1,"Actions"),u.\u0275\u0275elementEnd())}function Kr(n,t){if(n&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"td",65)(1,"div",71)(2,"button",72),u.\u0275\u0275listener("click",function(){let o=u.\u0275\u0275restoreView(e).$implicit,r=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(r.toggleStatus(o))}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(3,"svg",73),u.\u0275\u0275element(4,"path",74),u.\u0275\u0275elementEnd()()()()}}function Zr(n,t){n&1&&u.\u0275\u0275element(0,"tr",75)}function Xr(n,t){n&1&&u.\u0275\u0275element(0,"tr",76)}function el(n,t){if(n&1&&(u.\u0275\u0275elementStart(0,"tr",77)(1,"td")(2,"div",78),u.\u0275\u0275text(3,"No attendance matches your filters."),u.\u0275\u0275elementEnd()()()),n&2){let e=u.\u0275\u0275nextContext();u.\u0275\u0275advance(),u.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function tl(n,t){if(n&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",79)(1,"div",80)(2,"div",66),u.\u0275\u0275text(3),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"mat-chip",70),u.\u0275\u0275text(5),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(6,"div",67),u.\u0275\u0275text(7),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(8,"div",67),u.\u0275\u0275text(9),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(10,"div",71)(11,"button",36),u.\u0275\u0275listener("click",function(){let o=u.\u0275\u0275restoreView(e).$implicit,r=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(r.toggleStatus(o))}),u.\u0275\u0275text(12," Toggle "),u.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(e.studentName),u.\u0275\u0275advance(),u.\u0275\u0275property("color",e.status==="present"?"primary":"warn"),u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate1(" ",e.status," "),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate2("ID #",e.studentId," \xB7 ",e.class||"--"),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("Date: ",e.date)}}var It=class n{constructor(t){this.mock=t;this.attendance=t.getAttendance()}attendance=[];students=[];rows=[];dataSource=new Lr([]);displayedColumns=["student","class","date","status","actions"];search="";statusFilter="all";newStudentId=null;newDate=new Date().toISOString().slice(0,10);newStatus="present";summary={present:0,absent:0,total:0};today=new Date().toISOString().slice(0,10);paginator;sort;ngOnInit(){this.students=this.mock.getStudents(),this.students.length&&(this.newStudentId=this.students[0].id),this.loadRows()}ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=new Map(this.students.map(e=>[e.id,e]));this.rows=this.attendance.map(e=>{let i=t.get(e.studentId);return{id:e.id,studentId:e.studentId,studentName:i?`${i.firstName} ${i.lastName}`:`Student ${e.studentId}`,class:i?.class,date:e.date,status:e.status}}),this.applyFilters(),this.refreshSummary()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(i=>{let o=!t||i.studentName.toLowerCase().includes(t)||String(i.studentId).includes(t),r=this.statusFilter==="all"||i.status===this.statusFilter,P=!this.newDate||i.date===this.newDate;return o&&r&&P});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addAttendance(){this.newStudentId&&(this.mock.addAttendance(this.newStudentId,this.newDate,this.newStatus),this.attendance=this.mock.getAttendance(),this.loadRows())}toggleStatus(t){let e=t.status==="present"?"absent":"present";this.mock.updateAttendanceStatus(t.id,e),this.attendance=this.mock.getAttendance(),this.loadRows()}refreshSummary(){this.summary.present=this.rows.filter(t=>t.status==="present").length,this.summary.absent=this.rows.filter(t=>t.status==="absent").length,this.summary.total=this.students.length}exportCsv(){let t=this.dataSource.data,e=["Id","Student","Class","Date","Status"],i=t.map(A=>[A.id,`"${(A.studentName||"").replace(/"/g,'""')}"`,A.class||"",A.date,A.status].join(",")),o=[e.join(","),...i].join(`
`),r=new Blob([o],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(r),k=document.createElement("a");k.href=P,k.download="attendance.csv",k.click(),URL.revokeObjectURL(P)}static \u0275fac=function(e){return new(e||n)(u.\u0275\u0275directiveInject(F))};static \u0275cmp=u.\u0275\u0275defineComponent({type:n,selectors:[["app-attendance"]],viewQuery:function(e,i){if(e&1&&(u.\u0275\u0275viewQuery(Nr,5),u.\u0275\u0275viewQuery(Br,5)),e&2){let o;u.\u0275\u0275queryRefresh(o=u.\u0275\u0275loadQuery())&&(i.paginator=o.first),u.\u0275\u0275queryRefresh(o=u.\u0275\u0275loadQuery())&&(i.sort=o.first)}},decls:117,vars:19,consts:[[1,"fees-page","attendance-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon","success"],["viewBox","0 0 24 24",1,"icon"],["d","M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm-2 15-4-4 1.4-1.4 2.6 2.6 5.6-5.6L17 10l-7 7z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","warn"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"metric-icon"],["d","M12 8v5h4v-2h-2V8z","fill","currentColor"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name or id",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],["matInput","","type","date",3,"ngModelChange","ngModel"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","present"],["value","absent"],[1,"export-wrap"],["mat-flat-button","","color","primary",1,"ghost-button",3,"click"],["d","M12 3v12m0 0-4-4m4 4 4-4M5 19h14","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],[1,"structure-header"],["appearance","fill",1,"class-select"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","date"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","status-cell",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],["mat-cell","",1,"status-cell"],[1,"status-chip",3,"color"],[1,"action-row"],["mat-icon-button","","color","primary","matTooltip","Toggle status",3,"click"],["viewBox","0 0 24 24","width","20","height","20",1,"icon"],["d","M4 7h12l-3-3m3 3-3 3M20 17H8l3-3m-3 3 3 3","fill","none","stroke","currentColor","stroke-width","1.6","stroke-linecap","round","stroke-linejoin","round"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"]],template:function(e,i){e&1&&(u.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),u.\u0275\u0275text(4,"School Management"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"div",4),u.\u0275\u0275text(6,"Attendance"),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(10,"svg",8),u.\u0275\u0275element(11,"path",9),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(12,"div",10)(13,"div",11),u.\u0275\u0275text(14,"Present today"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(15,"div",12),u.\u0275\u0275text(16),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(17,"div",13),u.\u0275\u0275text(18),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(21,"svg",8),u.\u0275\u0275element(22,"path",15),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(23,"div",10)(24,"div",11),u.\u0275\u0275text(25,"Absent"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(26,"div",16),u.\u0275\u0275text(27),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(28,"div",13),u.\u0275\u0275text(29),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",17),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(32,"svg",8),u.\u0275\u0275element(33,"path",18)(34,"path",19),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(35,"div",10)(36,"div",11),u.\u0275\u0275text(37,"Marked"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(38,"div",12),u.\u0275\u0275text(39),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(40,"div",13),u.\u0275\u0275text(41,"Entries recorded"),u.\u0275\u0275elementEnd()()()(),u.\u0275\u0275elementStart(42,"mat-card",20)(43,"div",21)(44,"mat-form-field",22)(45,"mat-label"),u.\u0275\u0275text(46,"Search student"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(47,"span",23),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(48,"svg",8),u.\u0275\u0275element(49,"path",24),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(50,"input",25),u.\u0275\u0275twoWayListener("ngModelChange",function(r){return u.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),u.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(51,Vr,3,0,"button",26),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(52,"mat-form-field",27)(53,"mat-label"),u.\u0275\u0275text(54,"Date"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(55,"input",28),u.\u0275\u0275twoWayListener("ngModelChange",function(r){return u.\u0275\u0275twoWayBindingSet(i.newDate,r)||(i.newDate=r),r}),u.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(56,"mat-chip-listbox",29),u.\u0275\u0275listener("selectionChange",function(r){return i.onStatusChange(r)}),u.\u0275\u0275elementStart(57,"mat-chip-option",30),u.\u0275\u0275text(58,"All"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(59,"mat-chip-option",31),u.\u0275\u0275text(60,"Present"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(61,"mat-chip-option",32),u.\u0275\u0275text(62,"Absent"),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(63,"div",33)(64,"button",34),u.\u0275\u0275listener("click",function(){return i.exportCsv()}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(65,"svg",8),u.\u0275\u0275element(66,"path",35),u.\u0275\u0275elementEnd(),u.\u0275\u0275text(67," Export CSV "),u.\u0275\u0275elementEnd(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(68,"button",36),u.\u0275\u0275listener("click",function(){return i.addAttendance()}),u.\u0275\u0275text(69,"Add Entry"),u.\u0275\u0275elementEnd()()()(),u.\u0275\u0275elementStart(70,"mat-card",20)(71,"div",37)(72,"mat-form-field",38)(73,"mat-label"),u.\u0275\u0275text(74,"Student"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(75,"mat-select",39),u.\u0275\u0275twoWayListener("ngModelChange",function(r){return u.\u0275\u0275twoWayBindingSet(i.newStudentId,r)||(i.newStudentId=r),r}),u.\u0275\u0275template(76,Hr,2,3,"mat-option",40),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(77,"mat-form-field",38)(78,"mat-label"),u.\u0275\u0275text(79,"Status"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(80,"mat-select",39),u.\u0275\u0275twoWayListener("ngModelChange",function(r){return u.\u0275\u0275twoWayBindingSet(i.newStatus,r)||(i.newStatus=r),r}),u.\u0275\u0275elementStart(81,"mat-option",31),u.\u0275\u0275text(82,"Present"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(83,"mat-option",32),u.\u0275\u0275text(84,"Absent"),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(85,"button",41),u.\u0275\u0275listener("click",function(){return i.addAttendance()}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(86,"svg",8),u.\u0275\u0275element(87,"path",42),u.\u0275\u0275elementEnd(),u.\u0275\u0275text(88," Mark attendance "),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(89,"mat-card",43)(90,"mat-card-title"),u.\u0275\u0275text(91,"Attendance log"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(92,"mat-card-subtitle"),u.\u0275\u0275text(93,"Filter by student, date, or status."),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(94,"div",44)(95,"table",45),u.\u0275\u0275elementContainerStart(96,46),u.\u0275\u0275template(97,jr,2,0,"th",47)(98,Wr,5,2,"td",48),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(99,49),u.\u0275\u0275template(100,$r,2,0,"th",47)(101,Ur,2,1,"td",48),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(102,50),u.\u0275\u0275template(103,Gr,2,0,"th",47)(104,qr,2,1,"td",48),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(105,51),u.\u0275\u0275template(106,Qr,2,0,"th",52)(107,Yr,3,2,"td",53),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(108,54),u.\u0275\u0275template(109,Jr,2,0,"th",52)(110,Kr,5,0,"td",48),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275template(111,Zr,1,0,"tr",55)(112,Xr,1,0,"tr",56)(113,el,4,1,"tr",57),u.\u0275\u0275elementEnd()(),u.\u0275\u0275element(114,"mat-paginator",58),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(115,"mat-card",59),u.\u0275\u0275template(116,tl,13,6,"div",60),u.\u0275\u0275elementEnd()()),e&2&&(u.\u0275\u0275advance(16),u.\u0275\u0275textInterpolate(i.summary.present),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("Out of ",i.summary.total," students"),u.\u0275\u0275advance(9),u.\u0275\u0275textInterpolate(i.summary.absent),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("Tracked for ",i.today),u.\u0275\u0275advance(10),u.\u0275\u0275textInterpolate(i.attendance.length),u.\u0275\u0275advance(11),u.\u0275\u0275twoWayProperty("ngModel",i.search),u.\u0275\u0275advance(),u.\u0275\u0275property("ngIf",i.search),u.\u0275\u0275advance(4),u.\u0275\u0275twoWayProperty("ngModel",i.newDate),u.\u0275\u0275advance(),u.\u0275\u0275property("value",i.statusFilter),u.\u0275\u0275advance(19),u.\u0275\u0275twoWayProperty("ngModel",i.newStudentId),u.\u0275\u0275advance(),u.\u0275\u0275property("ngForOf",i.students),u.\u0275\u0275advance(4),u.\u0275\u0275twoWayProperty("ngModel",i.newStatus),u.\u0275\u0275advance(15),u.\u0275\u0275property("dataSource",i.dataSource),u.\u0275\u0275advance(16),u.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),u.\u0275\u0275advance(),u.\u0275\u0275property("matRowDefColumns",i.displayedColumns),u.\u0275\u0275advance(2),u.\u0275\u0275property("pageSize",8)("pageSizeOptions",u.\u0275\u0275pureFunction0(18,zr)),u.\u0275\u0275advance(2),u.\u0275\u0275property("ngForOf",i.dataSource.data))},dependencies:[Ar,Dt.NgForOf,Dt.NgIf,Rr,Ie.DefaultValueAccessor,Ie.NgControlStatus,Ie.NgModel,D,Ft.MatButton,Ft.MatIconButton,de.MatInput,de.MatFormField,de.MatLabel,de.MatPrefix,de.MatSuffix,At.MatSelect,At.MatOption,H.MatTable,H.MatHeaderCellDef,H.MatHeaderRowDef,H.MatColumnDef,H.MatCellDef,H.MatRowDef,H.MatHeaderCell,H.MatCell,H.MatHeaderRow,H.MatRow,H.MatNoDataRow,De.MatCard,De.MatCardSubtitle,De.MatCardTitle,mi.MatToolbar,Fe.MatChip,Fe.MatChipListbox,Fe.MatChipOption,pi.MatPaginator,Rt.MatSort,Rt.MatSortHeader,ui.MatTooltip],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".attendance-page[_ngcontent-%COMP%]{background:radial-gradient(circle at 15% 10%,rgba(37,99,235,.05),transparent 45%),#f7f9fb}.attendance-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}.attendance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attendance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #f1f5f9}.attendance-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:700;text-transform:uppercase}.attendance-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 2px 8px #0000000a}.status-present[_ngcontent-%COMP%]{background:#e6ffed;color:#155724;padding:.25rem .5rem;border-radius:12px;font-weight:600}.status-absent[_ngcontent-%COMP%]{background:#ffecec;color:#7f1d1d;padding:.25rem .5rem;border-radius:12px;font-weight:600}@media (max-width: 767px){.attendance-table[_ngcontent-%COMP%]{font-size:.95rem}}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 900px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}.filters-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:14px;background:#fff;box-shadow:0 6px 14px #1126920f;padding:12px}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;align-items:center}.filter-grid.compact[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr auto auto;align-items:center}.status-chip-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.status-chips[_ngcontent-%COMP%]{display:inline-flex;gap:6px;padding:4px 6px;border-radius:999px;background:#f1f5f9}.export-wrap[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;align-items:center;flex-wrap:wrap}.status-chip.mat-primary[_ngcontent-%COMP%]{background:#1e88e51f;color:#0f4c8a}.status-chip.mat-warn[_ngcontent-%COMP%]{background:#f59e0b29;color:#8b4100}.status-chip[_ngcontent-%COMP%]{border-radius:16px;font-weight:700;text-transform:capitalize}.status-cell[_ngcontent-%COMP%]{width:120px}.enrolled-cell[_ngcontent-%COMP%]{text-align:right}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}@media (max-width: 768px){.filters-card[_ngcontent-%COMP%]{padding:10px}.filter-grid[_ngcontent-%COMP%], .filter-grid.compact[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.export-wrap[_ngcontent-%COMP%]{justify-content:flex-start}}"]})};import{CommonModule as nl}from"@angular/common";import{FormsModule as il}from"@angular/forms";import{RouterModule as al}from"@angular/router";import{MatPaginator as ol}from"@angular/material/paginator";import{MatSort as rl}from"@angular/material/sort";import{MatTableDataSource as ll}from"@angular/material/table";import*as c from"@angular/core";import*as Ae from"@angular/common";import*as me from"@angular/forms";import*as Nt from"@angular/router";import*as Bt from"@angular/material/button";import*as pe from"@angular/material/input";import*as j from"@angular/material/table";import*as Re from"@angular/material/card";import*as gi from"@angular/material/toolbar";import*as Le from"@angular/material/chips";import*as fi from"@angular/material/paginator";import*as zt from"@angular/material/sort";import*as _i from"@angular/material/progress-bar";var sl=()=>["/schools/fees/history"],cl=()=>["/schools/fees/collect"],dl=()=>["/schools/fees/categories"],ml=()=>["/schools/fees/structure"],pl=()=>["/schools/fees/my-fees"],ul=()=>["/schools/fees/discounts"],gl=()=>[5,10,25];function fl(n,t){if(n&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",63),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(e);let o=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(o.clearSearch())}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(1,"svg",8),c.\u0275\u0275element(2,"path",64),c.\u0275\u0275elementEnd()()}}function _l(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Student"),c.\u0275\u0275elementEnd())}function hl(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"div",67),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",68),c.\u0275\u0275text(4),c.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(e.studentName),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("ID #",e.studentId)}}function Cl(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Class"),c.\u0275\u0275elementEnd())}function bl(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"td",66),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate(e.class||"\u2014")}}function xl(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Balance"),c.\u0275\u0275elementEnd())}function Ml(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"span"),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"currency"),c.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275classProp("due",e.status==="due")("clear",e.status==="clear"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind1(3,5,e.balance)," ")}}function vl(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Last Paid"),c.\u0275\u0275elementEnd())}function yl(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"td",66),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate(e.lastPaid||"\u2014")}}function wl(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",69),c.\u0275\u0275text(1,"Status"),c.\u0275\u0275elementEnd())}function Sl(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"mat-chip",70),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("color",e.status==="due"?"warn":"primary"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",e.status==="due"?"Due":"Clear"," ")}}function Pl(n,t){n&1&&(c.\u0275\u0275elementStart(0,"th",69),c.\u0275\u0275text(1,"Collect"),c.\u0275\u0275elementEnd())}function Ol(n,t){if(n&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"td",66)(1,"div",71)(2,"mat-form-field",72)(3,"mat-label"),c.\u0275\u0275text(4,"Amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"input",73),c.\u0275\u0275twoWayListener("ngModelChange",function(o){let r=c.\u0275\u0275restoreView(e).$implicit,P=c.\u0275\u0275nextContext();return c.\u0275\u0275twoWayBindingSet(P.paymentAmounts[r.studentId],o)||(P.paymentAmounts[r.studentId]=o),c.\u0275\u0275resetView(o)}),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(6,"button",74),c.\u0275\u0275listener("click",function(){let o=c.\u0275\u0275restoreView(e).$implicit,r=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(r.pay(o.studentId))}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(7,"svg",8),c.\u0275\u0275element(8,"path",75),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(9," Record "),c.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=c.\u0275\u0275nextContext();c.\u0275\u0275advance(5),c.\u0275\u0275twoWayProperty("ngModel",i.paymentAmounts[e.studentId]),c.\u0275\u0275advance(),c.\u0275\u0275property("disabled",!i.paymentAmounts[e.studentId])}}function El(n,t){n&1&&c.\u0275\u0275element(0,"tr",76)}function kl(n,t){n&1&&c.\u0275\u0275element(0,"tr",77)}function Tl(n,t){if(n&1&&(c.\u0275\u0275elementStart(0,"tr",78)(1,"td")(2,"div",79),c.\u0275\u0275text(3,"No students match your filters."),c.\u0275\u0275elementEnd()()()),n&2){let e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Il(n,t){if(n&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",80)(1,"div",81)(2,"div",67),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"mat-chip",82),c.\u0275\u0275text(5),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(6,"div",68),c.\u0275\u0275text(7),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"div",83),c.\u0275\u0275text(9),c.\u0275\u0275pipe(10,"currency"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(11,"div",71)(12,"mat-form-field",72)(13,"mat-label"),c.\u0275\u0275text(14,"Amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(15,"input",73),c.\u0275\u0275twoWayListener("ngModelChange",function(o){let r=c.\u0275\u0275restoreView(e).$implicit,P=c.\u0275\u0275nextContext();return c.\u0275\u0275twoWayBindingSet(P.paymentAmounts[r.studentId],o)||(P.paymentAmounts[r.studentId]=o),c.\u0275\u0275resetView(o)}),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(16,"button",84),c.\u0275\u0275listener("click",function(){let o=c.\u0275\u0275restoreView(e).$implicit,r=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(r.pay(o.studentId))}),c.\u0275\u0275text(17," Record "),c.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=c.\u0275\u0275nextContext();c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(e.studentName),c.\u0275\u0275advance(),c.\u0275\u0275property("color",e.status==="due"?"warn":"primary"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",e.status==="due"?"Due":"Clear"," "),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate2("Class ",e.class||"--"," \xB7 Last paid ",e.lastPaid||"--"),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("Balance: ",c.\u0275\u0275pipeBind1(10,8,e.balance)),c.\u0275\u0275advance(6),c.\u0275\u0275twoWayProperty("ngModel",i.paymentAmounts[e.studentId]),c.\u0275\u0275advance(),c.\u0275\u0275property("disabled",!i.paymentAmounts[e.studentId])}}var Lt=class n{constructor(t){this.mock=t;this.fees=this.mock.getFees()}fees=[];search="";paymentAmounts={};students=[];viewRows=[];dataSource=new ll([]);displayedColumns=["student","class","balance","lastPaid","status","actions"];statusFilter="all";summary={outstanding:0,dueCount:0,clearedCount:0,latestPayment:""};collectionProgress=0;paginator;sort;ngOnInit(){this.loadRows()}ngAfterViewInit(){this.attachTableHelpers()}loadRows(){this.students=this.mock.getStudents(),this.fees=this.mock.getFees();let t=new Map(this.fees.map(e=>[e.studentId,e]));this.viewRows=this.students.map(e=>{let i=t.get(e.id),o=Number(i?.balance)||0;return{studentId:e.id,studentName:`${e.firstName} ${e.lastName}`,class:e.class,balance:o,lastPaid:i?.lastPaid,status:o>0?"due":"clear"}}),this.viewRows.forEach(e=>this.paymentAmounts[e.studentId]=this.paymentAmounts[e.studentId]||0),this.applyFilters(),this.refreshSummary()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.viewRows.filter(i=>{let o=!t||i.studentName.toLowerCase().includes(t)||String(i.studentId).includes(t)||(i.class||"").toLowerCase().includes(t),r=this.statusFilter==="all"||i.status===this.statusFilter;return o&&r});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}pay(t){let e=Number(this.paymentAmounts[t])||0;if(e<=0)return;let i=new Date().toISOString().slice(0,10);this.mock.payFee(t,e,i),this.paymentAmounts[t]=0,this.loadRows()}refreshSummary(){this.summary.outstanding=this.viewRows.reduce((i,o)=>i+(Number(o.balance)||0),0),this.summary.dueCount=this.viewRows.filter(i=>i.status==="due").length,this.summary.clearedCount=this.viewRows.filter(i=>i.status==="clear").length;let t=this.viewRows.map(i=>i.lastPaid).filter(Boolean).map(i=>new Date(i)).sort((i,o)=>o.getTime()-i.getTime())[0];this.summary.latestPayment=t?t.toISOString().slice(0,10):"";let e=this.viewRows.length;this.collectionProgress=e?Math.round(this.summary.clearedCount/e*100):0}exportCsv(){let t=["Student","Class","Balance","LastPaid","Status"],e=this.dataSource.data.map(k=>[`"${(k.studentName||"").replace(/"/g,'""')}"`,k.class||"",k.balance,k.lastPaid||"",k.status].join(",")),i=[t.join(","),...e].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="fees.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(c.\u0275\u0275directiveInject(F))};static \u0275cmp=c.\u0275\u0275defineComponent({type:n,selectors:[["app-fees"]],viewQuery:function(e,i){if(e&1&&(c.\u0275\u0275viewQuery(ol,5),c.\u0275\u0275viewQuery(rl,5)),e&2){let o;c.\u0275\u0275queryRefresh(o=c.\u0275\u0275loadQuery())&&(i.paginator=o.first),c.\u0275\u0275queryRefresh(o=c.\u0275\u0275loadQuery())&&(i.sort=o.first)}},decls:124,vars:30,consts:[[1,"fees-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-stroked-button","","color","accent",3,"routerLink"],["viewBox","0 0 24 24",1,"icon"],["d","M13 3a9 9 0 1 0 9 9h-2a7 7 0 1 1-7-7v2l3-3-3-3v2z","fill","currentColor"],["mat-flat-button","","color","accent",3,"routerLink"],["d","M21 7H3c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 8H3V9h18v6zm-2-3.5c0 .83-.67 1.5-1.5 1.5S16 12.33 16 11.5 16.67 10 17.5 10s1.5.67 1.5 1.5z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","warn"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"metric-value","warn-text"],["mode","determinate",3,"value"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm.5-13H11v6l4.75 2.85.75-1.23-3.5-2.07V7z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name, id, class",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","due"],["value","clear"],[1,"filter-actions"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"routerLink"],["d","M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 5h8v3h-8v-3zm0-5h8v3h-8v-3z","fill","currentColor"],["d","M4 6c0 1.66 3.58 3 8 3s8-1.34 8-3-3.58-3-8-3-8 1.34-8 3zm0 4c0 1.66 3.58 3 8 3s8-1.34 8-3V8c-1.73 1.27-5.02 2-8 2s-6.27-.73-8-2v2zm0 4c0 1.66 3.58 3 8 3s8-1.34 8-3v-2c-1.73 1.27-5.02 2-8 2s-6.27-.73-8-2v2z","fill","currentColor"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z","fill","currentColor"],["d","M12 2 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-3zm0 2.18L18.59 6 12 7.82 5.41 6 12 4.18zM5 8.47l7 1.91 7-1.91v2.53c0 4.24-2.7 8.28-7 9.66-4.3-1.38-7-5.42-7-9.66V8.47z","fill","currentColor"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["d","M5 20h14v-2H5v2zm7-16-4 4h3v4h2v-4h3l-4-4z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","","matSortDisableClear","",1,"fees-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","balance"],["matColumnDef","lastPaid"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[1,"router-outlet-wrap"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],[1,"action-row"],["appearance","fill",1,"compact-number"],["matInput","","type","number","min","0",3,"ngModelChange","ngModel"],["mat-flat-button","","color","accent",1,"record-btn",3,"click","disabled"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15-4-4 1.41-1.41L10 14.17l6.59-6.58L18 9l-8 8z","fill","currentColor"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["selected","",3,"color"],[1,"cell-strong"],["mat-stroked-button","","color","primary",3,"click","disabled"]],template:function(e,i){e&1&&(c.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),c.\u0275\u0275text(4,"Finance"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"div",4),c.\u0275\u0275text(6,"Fee Management"),c.\u0275\u0275elementEnd()(),c.\u0275\u0275element(7,"span",5),c.\u0275\u0275elementStart(8,"div",6)(9,"button",7),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(10,"svg",8),c.\u0275\u0275element(11,"path",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(12," History "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(13,"button",10),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(14,"svg",8),c.\u0275\u0275element(15,"path",11),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(16," Collect Fee "),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(17,"div",12)(18,"mat-card",13)(19,"div",14),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(20,"svg",8),c.\u0275\u0275element(21,"path",11),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(22,"div",15)(23,"div",16),c.\u0275\u0275text(24,"Outstanding"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(25,"div",17),c.\u0275\u0275text(26),c.\u0275\u0275pipe(27,"currency"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(28,"div",18),c.\u0275\u0275text(29),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275elementStart(30,"mat-card",13)(31,"div",19),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(32,"svg",8),c.\u0275\u0275element(33,"path",20),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(34,"div",15)(35,"div",16),c.\u0275\u0275text(36,"Due students"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(37,"div",21),c.\u0275\u0275text(38),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(39,"div",18),c.\u0275\u0275text(40),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(41,"mat-progress-bar",22),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(42,"mat-card",13)(43,"div",23),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(44,"svg",8),c.\u0275\u0275element(45,"path",24),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(46,"div",15)(47,"div",16),c.\u0275\u0275text(48,"Latest payment"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(49,"div",17),c.\u0275\u0275text(50),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(51,"div",18),c.\u0275\u0275text(52,"Refresh after collection"),c.\u0275\u0275elementEnd()()()(),c.\u0275\u0275elementStart(53,"mat-card",25)(54,"div",26)(55,"mat-form-field",27)(56,"mat-label"),c.\u0275\u0275text(57,"Search student"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(58,"span",28),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(59,"svg",8),c.\u0275\u0275element(60,"path",29),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(61,"input",30),c.\u0275\u0275twoWayListener("ngModelChange",function(r){return c.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),c.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(62,fl,3,0,"button",31),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(63,"mat-chip-listbox",32),c.\u0275\u0275listener("selectionChange",function(r){return i.onStatusChange(r)}),c.\u0275\u0275elementStart(64,"mat-chip-option",33),c.\u0275\u0275text(65,"All"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(66,"mat-chip-option",34),c.\u0275\u0275text(67,"Due"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(68,"mat-chip-option",35),c.\u0275\u0275text(69,"Clear"),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(70,"div",36)(71,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(72,"svg",8),c.\u0275\u0275element(73,"path",38),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(74," Categories "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(75,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(76,"svg",8),c.\u0275\u0275element(77,"path",39),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(78," Structure "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(79,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(80,"svg",8),c.\u0275\u0275element(81,"path",40),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(82," My Fees "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(83,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(84,"svg",8),c.\u0275\u0275element(85,"path",41),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(86," Discounts "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(87,"button",42),c.\u0275\u0275listener("click",function(){return i.exportCsv()}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(88,"svg",8),c.\u0275\u0275element(89,"path",43),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(90," Export CSV "),c.\u0275\u0275elementEnd()()()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(91,"mat-card",44)(92,"mat-card-title"),c.\u0275\u0275text(93,"Student balances"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(94,"mat-card-subtitle"),c.\u0275\u0275text(95,"Quickly check outstanding balances and record payments."),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(96,"div",45)(97,"table",46),c.\u0275\u0275elementContainerStart(98,47),c.\u0275\u0275template(99,_l,2,0,"th",48)(100,hl,5,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(101,50),c.\u0275\u0275template(102,Cl,2,0,"th",48)(103,bl,2,1,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(104,51),c.\u0275\u0275template(105,xl,2,0,"th",48)(106,Ml,4,7,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(107,52),c.\u0275\u0275template(108,vl,2,0,"th",48)(109,yl,2,1,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(110,53),c.\u0275\u0275template(111,wl,2,0,"th",54)(112,Sl,3,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(113,55),c.\u0275\u0275template(114,Pl,2,0,"th",54)(115,Ol,10,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275template(116,El,1,0,"tr",56)(117,kl,1,0,"tr",57)(118,Tl,4,1,"tr",58),c.\u0275\u0275elementEnd()(),c.\u0275\u0275element(119,"mat-paginator",59),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(120,"mat-card",60),c.\u0275\u0275template(121,Il,18,10,"div",61),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(122,"div",62),c.\u0275\u0275element(123,"router-outlet"),c.\u0275\u0275elementEnd()()),e&2&&(c.\u0275\u0275advance(9),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(23,sl)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(24,cl)),c.\u0275\u0275advance(13),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(27,21,i.summary.outstanding)),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1("Across ",i.viewRows.length," students"),c.\u0275\u0275advance(9),c.\u0275\u0275textInterpolate(i.summary.dueCount),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("Cleared: ",i.summary.clearedCount),c.\u0275\u0275advance(),c.\u0275\u0275property("value",i.collectionProgress),c.\u0275\u0275advance(9),c.\u0275\u0275textInterpolate(i.summary.latestPayment||"\u2014"),c.\u0275\u0275advance(11),c.\u0275\u0275twoWayProperty("ngModel",i.search),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",i.search),c.\u0275\u0275advance(),c.\u0275\u0275property("value",i.statusFilter),c.\u0275\u0275advance(8),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(25,dl)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(26,ml)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(27,pl)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(28,ul)),c.\u0275\u0275advance(14),c.\u0275\u0275property("dataSource",i.dataSource),c.\u0275\u0275advance(19),c.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),c.\u0275\u0275advance(),c.\u0275\u0275property("matRowDefColumns",i.displayedColumns),c.\u0275\u0275advance(2),c.\u0275\u0275property("pageSize",5)("pageSizeOptions",c.\u0275\u0275pureFunction0(29,gl)),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngForOf",i.dataSource.data))},dependencies:[nl,Ae.NgForOf,Ae.NgIf,il,me.DefaultValueAccessor,me.NumberValueAccessor,me.NgControlStatus,me.MinValidator,me.NgModel,al,Nt.RouterOutlet,Nt.RouterLink,D,Bt.MatButton,Bt.MatIconButton,pe.MatInput,pe.MatFormField,pe.MatLabel,pe.MatPrefix,pe.MatSuffix,j.MatTable,j.MatHeaderCellDef,j.MatHeaderRowDef,j.MatColumnDef,j.MatCellDef,j.MatRowDef,j.MatHeaderCell,j.MatCell,j.MatHeaderRow,j.MatRow,j.MatNoDataRow,Re.MatCard,Re.MatCardSubtitle,Re.MatCardTitle,gi.MatToolbar,Le.MatChip,Le.MatChipListbox,Le.MatChipOption,fi.MatPaginator,zt.MatSort,zt.MatSortHeader,_i.MatProgressBar,Ae.CurrencyPipe],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}"]})};import{CommonModule as Dl}from"@angular/common";import{FormsModule as Fl}from"@angular/forms";import{MatTableDataSource as Al}from"@angular/material/table";import{MatPaginator as Rl}from"@angular/material/paginator";import{MatSort as Ll}from"@angular/material/sort";import*as s from"@angular/core";import*as Ht from"@angular/common";import*as Ne from"@angular/forms";import*as jt from"@angular/material/button";import*as ue from"@angular/material/input";import*as Wt from"@angular/material/select";import*as W from"@angular/material/table";import*as Be from"@angular/material/card";import*as hi from"@angular/material/toolbar";import*as Ci from"@angular/material/checkbox";import*as bi from"@angular/material/chips";import*as xi from"@angular/material/paginator";import*as $t from"@angular/material/sort";var Nl=()=>[8,15,25];function Bl(n,t){if(n&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",59),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(e);let o=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(o.clearSearch())}),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(1,"svg",8),s.\u0275\u0275element(2,"path",60),s.\u0275\u0275elementEnd()()}}function zl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.name)}}function Vl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275property("value",e),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e)}}function Hl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.name)}}function jl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275property("value",e),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e)}}function Wl(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Class"),s.\u0275\u0275elementEnd())}function $l(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.classId)}}function Ul(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Subject"),s.\u0275\u0275elementEnd())}function Gl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.subject)}}function ql(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Teacher"),s.\u0275\u0275elementEnd())}function Ql(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.teacher)}}function Yl(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Day"),s.\u0275\u0275elementEnd())}function Jl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.day)}}function Kl(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Time"),s.\u0275\u0275elementEnd())}function Zl(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.time)}}function Xl(n,t){n&1&&(s.\u0275\u0275elementStart(0,"th",64),s.\u0275\u0275text(1,"Conflict"),s.\u0275\u0275elementEnd())}function es(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"mat-chip",67),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),n&2){let e=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.conflictReason)}}function ts(n,t){n&1&&(s.\u0275\u0275elementStart(0,"span"),s.\u0275\u0275text(1,"--"),s.\u0275\u0275elementEnd())}function ns(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275template(1,es,2,1,"mat-chip",65)(2,ts,2,0,"span",66),s.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",e.conflict),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",!e.conflict)}}function is(n,t){n&1&&s.\u0275\u0275element(0,"th",64)}function as(n,t){if(n&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"td",63)(1,"button",68),s.\u0275\u0275listener("click",function(){let o=s.\u0275\u0275restoreView(e).$implicit,r=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(r.deleteEntry(o.id))}),s.\u0275\u0275text(2,"Delete"),s.\u0275\u0275elementEnd()()}}function os(n,t){n&1&&s.\u0275\u0275element(0,"tr",69)}function rs(n,t){n&1&&s.\u0275\u0275element(0,"tr",70)}function ls(n,t){if(n&1&&(s.\u0275\u0275elementStart(0,"tr",71)(1,"td")(2,"div",72),s.\u0275\u0275text(3,"No timetable entries match your filters."),s.\u0275\u0275elementEnd()()()),n&2){let e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(),s.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function ss(n,t){if(n&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",73)(1,"div",74)(2,"div",75),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"mat-chip",76),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"div",77),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",77),s.\u0275\u0275text(9),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"div",77),s.\u0275\u0275text(11),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(12,"div",78)(13,"button",68),s.\u0275\u0275listener("click",function(){let o=s.\u0275\u0275restoreView(e).$implicit,r=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(r.deleteEntry(o.id))}),s.\u0275\u0275text(14,"Delete"),s.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate2("",e.classId," \xB7 ",e.subject),s.\u0275\u0275advance(),s.\u0275\u0275property("color",e.conflict?"warn":"primary"),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate1(" ",e.conflict?"Conflict":"OK"," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate2("",e.day," \xB7 ",e.time),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1("Teacher: ",e.teacher),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1("Reason: ",e.conflictReason||"None")}}var Vt=class n{constructor(t){this.mock=t;this.classes=t.getClasses(),this.rows=t.getTimetable()}classes=[];rows=[];dataSource=new Al([]);displayedColumns=["classId","subject","teacher","day","time","conflict","actions"];newEntry={id:0,classId:"",subject:"",teacher:"",day:"",time:""};search="";filterClass="";filterDay="";showConflictsOnly=!1;classCount=0;nextDay="";conflictCount=0;days=["Mon","Tue","Wed","Thu","Fri","Sat"];paginator;sort;ngOnInit(){this.applyFilters(),this.refreshSummary()}ngAfterViewInit(){this.attachTableHelpers()}addEntry(){!this.newEntry.classId||!this.newEntry.subject||(this.mock.addTimetableEntry(Me({},this.newEntry)),this.rows=this.mock.getTimetable(),this.newEntry={id:0,classId:"",subject:"",teacher:"",day:"",time:""},this.applyFilters(),this.refreshSummary())}deleteEntry(t){this.mock.deleteTimetableEntry(t),this.rows=this.mock.getTimetable(),this.applyFilters(),this.refreshSummary()}applyFilters(){this.flagConflicts();let t=this.search.trim().toLowerCase(),e=this.rows.filter(i=>{let o=!t||i.subject.toLowerCase().includes(t)||i.teacher.toLowerCase().includes(t)||i.classId.toLowerCase().includes(t),r=!this.filterClass||i.classId===this.filterClass,P=!this.filterDay||i.day===this.filterDay,k=!this.showConflictsOnly||!!i.conflict;return o&&r&&P&&k});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}refreshSummary(){this.classCount=new Set(this.rows.map(i=>i.classId)).size;let t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],e=this.rows.map(i=>i.day).filter(Boolean).sort((i,o)=>t.indexOf(i)-t.indexOf(o));this.nextDay=e[0]||"",this.conflictCount=this.rows.filter(i=>i.conflict).length}flagConflicts(){let t=P=>`${P.classId}-${P.day}-${P.time}`,e=P=>`${P.teacher}-${P.day}-${P.time}`,i=new Map,o=new Map;this.rows.forEach(P=>{let k=t(P),A=e(P);i.set(k,[...i.get(k)||[],P]),o.set(A,[...o.get(A)||[],P]),P.conflict=!1,P.conflictReason=""});let r=(P,k)=>{P.length>1&&P.forEach(A=>{A.conflict=!0,A.conflictReason=k})};i.forEach(P=>r(P,"Class overlap")),o.forEach(P=>r(P,"Teacher overlap"))}exportCsv(){let t=["Class","Subject","Teacher","Day","Time","Conflict","Reason"],e=this.dataSource.data.map(k=>[k.classId,`"${(k.subject||"").replace(/"/g,'""')}"`,`"${(k.teacher||"").replace(/"/g,'""')}"`,k.day,k.time,k.conflict?"Yes":"No",k.conflictReason||""].join(",")),i=[t.join(","),...e].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="timetable.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(s.\u0275\u0275directiveInject(F))};static \u0275cmp=s.\u0275\u0275defineComponent({type:n,selectors:[["app-timetable"]],viewQuery:function(e,i){if(e&1&&(s.\u0275\u0275viewQuery(Rl,5),s.\u0275\u0275viewQuery(Ll,5)),e&2){let o;s.\u0275\u0275queryRefresh(o=s.\u0275\u0275loadQuery())&&(i.paginator=o.first),s.\u0275\u0275queryRefresh(o=s.\u0275\u0275loadQuery())&&(i.sort=o.first)}},decls:142,vars:25,consts:[[1,"fees-page","timetable-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["viewBox","0 0 24 24",1,"icon"],["d","M3 5h18v2H3V5zm2 4h14v2H5V9zm-2 4h18v2H3v-2zm2 4h14v2H5v-2z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M4 4h16v2H4V4zm0 5h16v2H4V9zm0 5h16v2H4v-2zm0 5h16v2H4v-2z","fill","currentColor"],[1,"metric-icon","warn"],["d","M19 3H5a2 2 0 0 0-2 2v14l4-4h12a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z","fill","currentColor"],[1,"metric-value","warn-text"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","subject, teacher, class",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"structure-header"],["appearance","fill",1,"class-select"],[3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","placeholder","09:00",3,"ngModelChange","ngModel"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","classId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","teacher"],["matColumnDef","day"],["matColumnDef","time"],["matColumnDef","conflict"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["color","warn","selected","",4,"ngIf"],[4,"ngIf"],["color","warn","selected",""],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],[1,"cell-title"],["selected","",3,"color"],[1,"cell-meta"],[1,"action-row"]],template:function(e,i){e&1&&(s.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),s.\u0275\u0275text(4,"School Management"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"div",4),s.\u0275\u0275text(6,"Timetable"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(10,"svg",8),s.\u0275\u0275element(11,"path",9),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(12,"div",10)(13,"div",11),s.\u0275\u0275text(14,"Entries"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"div",12),s.\u0275\u0275text(16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"div",13),s.\u0275\u0275text(18,"Across all classes"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(21,"svg",8),s.\u0275\u0275element(22,"path",15),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(23,"div",10)(24,"div",11),s.\u0275\u0275text(25,"Classes"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"div",12),s.\u0275\u0275text(27),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(28,"div",13),s.\u0275\u0275text(29,"With scheduled slots"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",16),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(32,"svg",8),s.\u0275\u0275element(33,"path",17),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(34,"div",10)(35,"div",11),s.\u0275\u0275text(36,"Next day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(37,"div",18),s.\u0275\u0275text(38),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(39,"div",13),s.\u0275\u0275text(40,"Earliest scheduled day"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(41,"mat-card",6)(42,"div",16),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(43,"svg",8),s.\u0275\u0275element(44,"path",19),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(45,"div",10)(46,"div",11),s.\u0275\u0275text(47,"Conflicts"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(48,"div",18),s.\u0275\u0275text(49),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(50,"div",13),s.\u0275\u0275text(51,"Check class/teacher overlaps"),s.\u0275\u0275elementEnd()()()(),s.\u0275\u0275elementStart(52,"mat-card",20)(53,"div",21)(54,"mat-form-field",22)(55,"mat-label"),s.\u0275\u0275text(56,"Search subject/teacher"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(57,"span",23),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(58,"svg",8),s.\u0275\u0275element(59,"path",24),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(60,"input",25),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),s.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(61,Bl,3,0,"button",26),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(62,"mat-form-field",27)(63,"mat-label"),s.\u0275\u0275text(64,"Class"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(65,"mat-select",28),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.filterClass,r)||(i.filterClass=r),r}),s.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),s.\u0275\u0275elementStart(66,"mat-option",29),s.\u0275\u0275text(67,"All"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(68,zl,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(69,"mat-form-field",27)(70,"mat-label"),s.\u0275\u0275text(71,"Day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(72,"mat-select",28),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.filterDay,r)||(i.filterDay=r),r}),s.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),s.\u0275\u0275elementStart(73,"mat-option",29),s.\u0275\u0275text(74,"All"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(75,Vl,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(76,"mat-checkbox",31),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.showConflictsOnly,r)||(i.showConflictsOnly=r),r}),s.\u0275\u0275listener("change",function(){return i.applyFilters()}),s.\u0275\u0275text(77,"Show conflicts only"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(78,"button",32),s.\u0275\u0275listener("click",function(){return i.exportCsv()}),s.\u0275\u0275text(79,"Export CSV"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(80,"mat-card",20)(81,"div",33)(82,"mat-form-field",34)(83,"mat-label"),s.\u0275\u0275text(84,"Class"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(85,"mat-select",35),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.newEntry.classId,r)||(i.newEntry.classId=r),r}),s.\u0275\u0275template(86,Hl,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(87,"mat-form-field",34)(88,"mat-label"),s.\u0275\u0275text(89,"Subject"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(90,"input",36),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.newEntry.subject,r)||(i.newEntry.subject=r),r}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(91,"mat-form-field",34)(92,"mat-label"),s.\u0275\u0275text(93,"Teacher"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(94,"input",36),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.newEntry.teacher,r)||(i.newEntry.teacher=r),r}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(95,"mat-form-field",34)(96,"mat-label"),s.\u0275\u0275text(97,"Day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(98,"mat-select",35),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.newEntry.day,r)||(i.newEntry.day=r),r}),s.\u0275\u0275template(99,jl,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(100,"mat-form-field",34)(101,"mat-label"),s.\u0275\u0275text(102,"Time"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(103,"input",37),s.\u0275\u0275twoWayListener("ngModelChange",function(r){return s.\u0275\u0275twoWayBindingSet(i.newEntry.time,r)||(i.newEntry.time=r),r}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(104,"button",38),s.\u0275\u0275listener("click",function(){return i.addEntry()}),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(105,"svg",8),s.\u0275\u0275element(106,"path",39),s.\u0275\u0275elementEnd(),s.\u0275\u0275text(107," Add slot "),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(108,"mat-card",40)(109,"mat-card-title"),s.\u0275\u0275text(110,"Schedule"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(111,"mat-card-subtitle"),s.\u0275\u0275text(112,"Class-wise sessions with filters."),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(113,"div",41)(114,"table",42),s.\u0275\u0275elementContainerStart(115,43),s.\u0275\u0275template(116,Wl,2,0,"th",44)(117,$l,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(118,46),s.\u0275\u0275template(119,Ul,2,0,"th",44)(120,Gl,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(121,47),s.\u0275\u0275template(122,ql,2,0,"th",44)(123,Ql,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(124,48),s.\u0275\u0275template(125,Yl,2,0,"th",44)(126,Jl,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(127,49),s.\u0275\u0275template(128,Kl,2,0,"th",44)(129,Zl,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(130,50),s.\u0275\u0275template(131,Xl,2,0,"th",51)(132,ns,3,2,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(133,52),s.\u0275\u0275template(134,is,1,0,"th",51)(135,as,3,0,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275template(136,os,1,0,"tr",53)(137,rs,1,0,"tr",54)(138,ls,4,1,"tr",55),s.\u0275\u0275elementEnd()(),s.\u0275\u0275element(139,"mat-paginator",56),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(140,"mat-card",57),s.\u0275\u0275template(141,ss,15,8,"div",58),s.\u0275\u0275elementEnd()()),e&2&&(s.\u0275\u0275advance(16),s.\u0275\u0275textInterpolate(i.rows.length),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(i.classCount),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(i.nextDay||"--"),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(i.conflictCount),s.\u0275\u0275advance(11),s.\u0275\u0275twoWayProperty("ngModel",i.search),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",i.search),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.filterClass),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngForOf",i.classes),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.filterDay),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngForOf",i.days),s.\u0275\u0275advance(),s.\u0275\u0275twoWayProperty("ngModel",i.showConflictsOnly),s.\u0275\u0275advance(9),s.\u0275\u0275twoWayProperty("ngModel",i.newEntry.classId),s.\u0275\u0275advance(),s.\u0275\u0275property("ngForOf",i.classes),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.newEntry.subject),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.newEntry.teacher),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.newEntry.day),s.\u0275\u0275advance(),s.\u0275\u0275property("ngForOf",i.days),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",i.newEntry.time),s.\u0275\u0275advance(11),s.\u0275\u0275property("dataSource",i.dataSource),s.\u0275\u0275advance(22),s.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),s.\u0275\u0275advance(),s.\u0275\u0275property("matRowDefColumns",i.displayedColumns),s.\u0275\u0275advance(2),s.\u0275\u0275property("pageSize",8)("pageSizeOptions",s.\u0275\u0275pureFunction0(24,Nl)),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",i.dataSource.data))},dependencies:[Dl,Ht.NgForOf,Ht.NgIf,Fl,Ne.DefaultValueAccessor,Ne.NgControlStatus,Ne.NgModel,D,jt.MatButton,jt.MatIconButton,ue.MatInput,ue.MatFormField,ue.MatLabel,ue.MatPrefix,ue.MatSuffix,Wt.MatSelect,Wt.MatOption,W.MatTable,W.MatHeaderCellDef,W.MatHeaderRowDef,W.MatColumnDef,W.MatCellDef,W.MatRowDef,W.MatHeaderCell,W.MatCell,W.MatHeaderRow,W.MatRow,W.MatNoDataRow,Be.MatCard,Be.MatCardSubtitle,Be.MatCardTitle,hi.MatToolbar,Ci.MatCheckbox,bi.MatChip,xi.MatPaginator,$t.MatSort,$t.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".timetable-page[_ngcontent-%COMP%]{padding:0}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as cs}from"@angular/common";import{FormsModule as ds}from"@angular/forms";import*as _ from"@angular/core";import*as Gt from"@angular/common";import*as _e from"@angular/forms";import*as qt from"@angular/material/button";import*as ge from"@angular/material/input";import*as Qt from"@angular/material/select";import*as ze from"@angular/material/card";import*as Mi from"@angular/material/toolbar";import*as vi from"@angular/material/chips";function ms(n,t){if(n&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",39),_.\u0275\u0275listener("click",function(){_.\u0275\u0275restoreView(e);let o=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(o.clearSearch())}),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(1,"svg",8),_.\u0275\u0275element(2,"path",40),_.\u0275\u0275elementEnd()()}}function ps(n,t){if(n&1&&(_.\u0275\u0275elementStart(0,"mat-option",41),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;_.\u0275\u0275property("value",e.id),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function us(n,t){if(n&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"div",48),_.\u0275\u0275text(3),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(4,"div",49),_.\u0275\u0275text(5),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(6,"td")(7,"mat-form-field",50)(8,"mat-label"),_.\u0275\u0275text(9,"Marks"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(10,"input",51),_.\u0275\u0275twoWayListener("ngModelChange",function(o){let r=_.\u0275\u0275restoreView(e).$implicit;return _.\u0275\u0275twoWayBindingSet(r.marks,o)||(r.marks=o),_.\u0275\u0275resetView(o)}),_.\u0275\u0275elementEnd()()()()}if(n&2){let e=t.$implicit,i=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(3),_.\u0275\u0275textInterpolate(i.studentName(e.studentId)),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1("ID #",e.studentId),_.\u0275\u0275advance(5),_.\u0275\u0275twoWayProperty("ngModel",e.marks)}}function gs(n,t){if(n&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"mat-card",42)(1,"mat-card-title"),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"mat-card-subtitle"),_.\u0275\u0275text(4),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(5,"div",43)(6,"table",44)(7,"thead")(8,"tr")(9,"th"),_.\u0275\u0275text(10,"Student"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(11,"th"),_.\u0275\u0275text(12,"Marks"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(13,"tbody"),_.\u0275\u0275template(14,us,11,3,"tr",45),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(15,"div",46)(16,"button",33),_.\u0275\u0275listener("click",function(){let o=_.\u0275\u0275restoreView(e).$implicit,r=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(r.saveMarks(o))}),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(17,"svg",8),_.\u0275\u0275element(18,"path",47),_.\u0275\u0275elementEnd(),_.\u0275\u0275text(19," Save marks "),_.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(e.title),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate2("",e.date," \uFFFD ",(e.studentMarks==null?null:e.studentMarks.length)||0," students"),_.\u0275\u0275advance(10),_.\u0275\u0275property("ngForOf",e.studentMarks)}}function fs(n,t){if(n&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",57)(1,"div",49),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"mat-form-field",50)(4,"mat-label"),_.\u0275\u0275text(5,"Marks"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(6,"input",51),_.\u0275\u0275twoWayListener("ngModelChange",function(o){let r=_.\u0275\u0275restoreView(e).$implicit;return _.\u0275\u0275twoWayBindingSet(r.marks,o)||(r.marks=o),_.\u0275\u0275resetView(o)}),_.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=_.\u0275\u0275nextContext(2);_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(i.studentName(e.studentId)),_.\u0275\u0275advance(4),_.\u0275\u0275twoWayProperty("ngModel",e.marks)}}function _s(n,t){if(n&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"div",52)(1,"div",53)(2,"div",48),_.\u0275\u0275text(3),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(4,"mat-chip",54),_.\u0275\u0275text(5),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(6,"div",55),_.\u0275\u0275text(7),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(8,fs,7,2,"div",56),_.\u0275\u0275elementStart(9,"div",46)(10,"button",33),_.\u0275\u0275listener("click",function(){let o=_.\u0275\u0275restoreView(e).$implicit,r=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(r.saveMarks(o))}),_.\u0275\u0275text(11," Save marks "),_.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit;_.\u0275\u0275advance(3),_.\u0275\u0275textInterpolate(e.title),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(e.date),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1("Students: ",(e.studentMarks==null?null:e.studentMarks.length)||0),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",e.studentMarks)}}var Ut=class n{constructor(t){this.mock=t;this.exams=t.getExams(),this.students=t.getStudents(),this.refreshMetrics()}exams=[];students=[];search="";dateFilter="";newTitle="";newDate=new Date().toISOString().slice(0,10);selectedStudentIds=[];metrics={nextExam:"",totalMarks:0};get filteredExams(){let t=this.search.trim().toLowerCase();return this.exams.filter(e=>{let i=!t||e.title.toLowerCase().includes(t)||e.date.includes(t),o=!this.dateFilter||e.date===this.dateFilter;return i&&o})}clearSearch(){this.search="",this.applyFilters()}applyFilters(){this.exams=this.mock.getExams()}studentName(t){let e=this.students.find(i=>i.id===t);return e?`${e.firstName} ${e.lastName}`:t}createExam(){this.newTitle&&(this.mock.createExam(this.newTitle,this.newDate,this.selectedStudentIds),this.exams=this.mock.getExams(),this.newTitle="",this.selectedStudentIds=[],this.refreshMetrics())}saveMarks(t){let e=t.studentMarks.map(i=>({studentId:i.studentId,marks:Number(i.marks)}));this.mock.recordMarks(t.id,e),this.exams=this.mock.getExams(),this.refreshMetrics()}refreshMetrics(){let t=this.exams.map(e=>e.date).filter(Boolean).sort();this.metrics.nextExam=t[0]||"",this.metrics.totalMarks=this.exams.reduce((e,i)=>e+(i.studentMarks?.length||0),0)}static \u0275fac=function(e){return new(e||n)(_.\u0275\u0275directiveInject(F))};static \u0275cmp=_.\u0275\u0275defineComponent({type:n,selectors:[["app-exams"]],decls:78,vars:12,consts:[[1,"fees-page","exams-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["viewBox","0 0 24 24",1,"icon"],["d","M5 4v3h5.5v12h3V7H19V4z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 5h2v4h4v2h-6V7z","fill","currentColor"],[1,"metric-icon","warn"],["d","M7 5h14v2H7V5zm0 4h14v2H7V9zm0 4h14v2H7v-2zm0 4h14v2H7v-2zM3 5h2v2H3V5zm0 4h2v2H3V9zm0 4h2v2H3v-2zm0 4h2v2H3v-2z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","title or date",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],["matInput","","type","date",3,"ngModelChange","ngModel"],[1,"structure-header"],["appearance","fill",1,"class-select"],["matInput","",3,"ngModelChange","ngModel"],["multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"exam-grid","desktop-only"],["class","table-card mat-elevation-z2",4,"ngFor","ngForOf"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],[1,"table-card","mat-elevation-z2"],[1,"table-wrap"],[1,"fees-table"],[4,"ngFor","ngForOf"],[1,"card-actions"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15-4-4 1.41-1.41L10 14.17l6.59-6.58L18 9l-8 8z","fill","currentColor"],[1,"cell-title"],[1,"cell-meta"],["appearance","fill",1,"compact-number"],["matInput","","type","number",3,"ngModelChange","ngModel"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""],[1,"cell-sub"],["class","mobile-marks",4,"ngFor","ngForOf"],[1,"mobile-marks"]],template:function(e,i){e&1&&(_.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),_.\u0275\u0275text(4,"School Management"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(5,"div",4),_.\u0275\u0275text(6,"Exams & Results"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(10,"svg",8),_.\u0275\u0275element(11,"path",9),_.\u0275\u0275elementEnd()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(12,"div",10)(13,"div",11),_.\u0275\u0275text(14,"Total exams"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(15,"div",12),_.\u0275\u0275text(16),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(17,"div",13),_.\u0275\u0275text(18,"Managed in this module"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(21,"svg",8),_.\u0275\u0275element(22,"path",15),_.\u0275\u0275elementEnd()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(23,"div",10)(24,"div",11),_.\u0275\u0275text(25,"Next exam"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(26,"div",12),_.\u0275\u0275text(27),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(28,"div",13),_.\u0275\u0275text(29,"Sorted by date"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",16),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(32,"svg",8),_.\u0275\u0275element(33,"path",17),_.\u0275\u0275elementEnd()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(34,"div",10)(35,"div",11),_.\u0275\u0275text(36,"Students marked"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(37,"div",18),_.\u0275\u0275text(38),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(39,"div",13),_.\u0275\u0275text(40,"Across all exams"),_.\u0275\u0275elementEnd()()()(),_.\u0275\u0275elementStart(41,"mat-card",19)(42,"div",20)(43,"mat-form-field",21)(44,"mat-label"),_.\u0275\u0275text(45,"Search exam"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(46,"span",22),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(47,"svg",8),_.\u0275\u0275element(48,"path",23),_.\u0275\u0275elementEnd()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(49,"input",24),_.\u0275\u0275twoWayListener("ngModelChange",function(r){return _.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),_.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(50,ms,3,0,"button",25),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(51,"mat-form-field",26)(52,"mat-label"),_.\u0275\u0275text(53,"Date"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(54,"input",27),_.\u0275\u0275twoWayListener("ngModelChange",function(r){return _.\u0275\u0275twoWayBindingSet(i.dateFilter,r)||(i.dateFilter=r),r}),_.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),_.\u0275\u0275elementEnd()()()(),_.\u0275\u0275elementStart(55,"mat-card",19)(56,"div",28)(57,"mat-form-field",29)(58,"mat-label"),_.\u0275\u0275text(59,"Title"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(60,"input",30),_.\u0275\u0275twoWayListener("ngModelChange",function(r){return _.\u0275\u0275twoWayBindingSet(i.newTitle,r)||(i.newTitle=r),r}),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(61,"mat-form-field",29)(62,"mat-label"),_.\u0275\u0275text(63,"Date"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(64,"input",27),_.\u0275\u0275twoWayListener("ngModelChange",function(r){return _.\u0275\u0275twoWayBindingSet(i.newDate,r)||(i.newDate=r),r}),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(65,"mat-form-field",29)(66,"mat-label"),_.\u0275\u0275text(67,"Assign students"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(68,"mat-select",31),_.\u0275\u0275twoWayListener("ngModelChange",function(r){return _.\u0275\u0275twoWayBindingSet(i.selectedStudentIds,r)||(i.selectedStudentIds=r),r}),_.\u0275\u0275template(69,ps,2,3,"mat-option",32),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(70,"button",33),_.\u0275\u0275listener("click",function(){return i.createExam()}),_.\u0275\u0275namespaceSVG(),_.\u0275\u0275elementStart(71,"svg",8),_.\u0275\u0275element(72,"path",34),_.\u0275\u0275elementEnd(),_.\u0275\u0275text(73," Create exam "),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275namespaceHTML(),_.\u0275\u0275elementStart(74,"div",35),_.\u0275\u0275template(75,gs,20,4,"mat-card",36),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(76,"div",37),_.\u0275\u0275template(77,_s,12,4,"div",38),_.\u0275\u0275elementEnd()()),e&2&&(_.\u0275\u0275advance(16),_.\u0275\u0275textInterpolate(i.exams.length),_.\u0275\u0275advance(11),_.\u0275\u0275textInterpolate(i.metrics.nextExam||"--"),_.\u0275\u0275advance(11),_.\u0275\u0275textInterpolate(i.metrics.totalMarks),_.\u0275\u0275advance(11),_.\u0275\u0275twoWayProperty("ngModel",i.search),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",i.search),_.\u0275\u0275advance(4),_.\u0275\u0275twoWayProperty("ngModel",i.dateFilter),_.\u0275\u0275advance(6),_.\u0275\u0275twoWayProperty("ngModel",i.newTitle),_.\u0275\u0275advance(4),_.\u0275\u0275twoWayProperty("ngModel",i.newDate),_.\u0275\u0275advance(4),_.\u0275\u0275twoWayProperty("ngModel",i.selectedStudentIds),_.\u0275\u0275advance(),_.\u0275\u0275property("ngForOf",i.students),_.\u0275\u0275advance(6),_.\u0275\u0275property("ngForOf",i.filteredExams),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngForOf",i.filteredExams))},dependencies:[cs,Gt.NgForOf,Gt.NgIf,ds,_e.DefaultValueAccessor,_e.NumberValueAccessor,_e.NgControlStatus,_e.NgModel,D,qt.MatButton,qt.MatIconButton,ge.MatInput,ge.MatFormField,ge.MatLabel,ge.MatPrefix,ge.MatSuffix,Qt.MatSelect,Qt.MatOption,ze.MatCard,ze.MatCardSubtitle,ze.MatCardTitle,Mi.MatToolbar,vi.MatChip],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".exams-page[_ngcontent-%COMP%]{padding:0}.exam-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%], .mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.mobile-marks[_ngcontent-%COMP%]{display:grid;gap:4px}@media (max-width: 768px){.exam-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as hs}from"@angular/common";import{FormsModule as Cs}from"@angular/forms";import*as O from"@angular/core";import*as Ve from"@angular/forms";import*as yi from"@angular/material/button";import*as he from"@angular/material/input";import*as $ from"@angular/material/table";import*as Jt from"@angular/material/card";import*as He from"@angular/material/chips";function bs(n,t){n&1&&(O.\u0275\u0275elementStart(0,"th",29),O.\u0275\u0275text(1,"Name"),O.\u0275\u0275elementEnd())}function xs(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"td",30),O.\u0275\u0275text(1),O.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;O.\u0275\u0275advance(),O.\u0275\u0275textInterpolate(e.name)}}function Ms(n,t){n&1&&(O.\u0275\u0275elementStart(0,"th",29),O.\u0275\u0275text(1,"Class"),O.\u0275\u0275elementEnd())}function vs(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"td",30),O.\u0275\u0275text(1),O.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;O.\u0275\u0275advance(),O.\u0275\u0275textInterpolate(e.class)}}function ys(n,t){n&1&&(O.\u0275\u0275elementStart(0,"th",29),O.\u0275\u0275text(1,"Status"),O.\u0275\u0275elementEnd())}function ws(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"td",30)(1,"mat-chip",31),O.\u0275\u0275text(2),O.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;O.\u0275\u0275advance(),O.\u0275\u0275property("color",e.status==="verified"?"primary":e.status==="rejected"?"warn":void 0),O.\u0275\u0275advance(),O.\u0275\u0275textInterpolate1(" ",e.status," ")}}function Ss(n,t){n&1&&(O.\u0275\u0275elementStart(0,"th",29),O.\u0275\u0275text(1,"Submitted"),O.\u0275\u0275elementEnd())}function Ps(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"td",30),O.\u0275\u0275text(1),O.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;O.\u0275\u0275advance(),O.\u0275\u0275textInterpolate(e.submitted)}}function Os(n,t){n&1&&(O.\u0275\u0275elementStart(0,"th",29),O.\u0275\u0275text(1,"Notes"),O.\u0275\u0275elementEnd())}function Es(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"td",30),O.\u0275\u0275text(1),O.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;O.\u0275\u0275advance(),O.\u0275\u0275textInterpolate(e.notes||"--")}}function ks(n,t){n&1&&O.\u0275\u0275element(0,"th",29)}function Ts(n,t){if(n&1){let e=O.\u0275\u0275getCurrentView();O.\u0275\u0275elementStart(0,"td",30)(1,"button",32),O.\u0275\u0275listener("click",function(){let o=O.\u0275\u0275restoreView(e).$implicit,r=O.\u0275\u0275nextContext();return O.\u0275\u0275resetView(r.update(o,"verified"))}),O.\u0275\u0275text(2,"Verify"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(3,"button",33),O.\u0275\u0275listener("click",function(){let o=O.\u0275\u0275restoreView(e).$implicit,r=O.\u0275\u0275nextContext();return O.\u0275\u0275resetView(r.update(o,"rejected"))}),O.\u0275\u0275text(4,"Reject"),O.\u0275\u0275elementEnd()()}}function Is(n,t){n&1&&O.\u0275\u0275element(0,"tr",34)}function Ds(n,t){n&1&&O.\u0275\u0275element(0,"tr",35)}function Fs(n,t){if(n&1&&(O.\u0275\u0275elementStart(0,"tr",36)(1,"td"),O.\u0275\u0275text(2,"No admissions match your filters."),O.\u0275\u0275elementEnd()()),n&2){let e=O.\u0275\u0275nextContext();O.\u0275\u0275advance(),O.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}var Yt=class n{constructor(t){this.mock=t;this.refresh()}admissions=[];filtered=[];displayedColumns=["name","class","status","submitted","notes","actions"];search="";statusFilter="all";refresh(){this.admissions=this.mock.getAdmissions(),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.admissions.filter(e=>{let i=!t||e.name.toLowerCase().includes(t)||(e.class||"").toLowerCase().includes(t),o=this.statusFilter==="all"||e.status===this.statusFilter;return i&&o})}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}update(t,e){this.mock.updateAdmission(t.id,e),this.refresh()}static \u0275fac=function(e){return new(e||n)(O.\u0275\u0275directiveInject(F))};static \u0275cmp=O.\u0275\u0275defineComponent({type:n,selectors:[["app-admissions"]],decls:54,vars:5,consts:[[1,"admissions-page"],[1,"admissions-hero","mat-elevation-z2"],[1,"hero-text"],[1,"eyebrow"],[1,"title"],["mat-flat-button","","color","accent",1,"hero-action",3,"click"],[1,"icon-wrap"],[2,"display","flex","gap","12px","align-items","center","flex-wrap","wrap"],["appearance","fill",2,"flex","1 1 260px"],["matPrefix","",1,"icon-wrap"],["matInput","","placeholder","name or class",3,"ngModelChange","ngModel"],[3,"selectionChange","value"],["value","all"],["value","new"],["value","verified"],["value","rejected"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z1",2,"width","100%",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","status"],["matColumnDef","submitted"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"]],template:function(e,i){e&1&&(O.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),O.\u0275\u0275text(4,"School Management"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(5,"div",4),O.\u0275\u0275text(6,"Admissions"),O.\u0275\u0275elementEnd()(),O.\u0275\u0275elementStart(7,"button",5),O.\u0275\u0275listener("click",function(){return i.refresh()}),O.\u0275\u0275elementStart(8,"span",6),O.\u0275\u0275text(9,"+"),O.\u0275\u0275elementEnd(),O.\u0275\u0275text(10," Refresh "),O.\u0275\u0275elementEnd()(),O.\u0275\u0275elementStart(11,"mat-card")(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),O.\u0275\u0275text(15,"Search"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(16,"span",9),O.\u0275\u0275text(17,"\u{1F50D}"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(18,"input",10),O.\u0275\u0275twoWayListener("ngModelChange",function(r){return O.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),O.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),O.\u0275\u0275elementEnd()(),O.\u0275\u0275elementStart(19,"mat-chip-listbox",11),O.\u0275\u0275listener("selectionChange",function(r){return i.onStatusChange(r)}),O.\u0275\u0275elementStart(20,"mat-chip-option",12),O.\u0275\u0275text(21,"All"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(22,"mat-chip-option",13),O.\u0275\u0275text(23,"New"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(24,"mat-chip-option",14),O.\u0275\u0275text(25,"Verified"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(26,"mat-chip-option",15),O.\u0275\u0275text(27,"Rejected"),O.\u0275\u0275elementEnd()()()(),O.\u0275\u0275elementStart(28,"mat-card")(29,"mat-card-title"),O.\u0275\u0275text(30,"Admissions queue"),O.\u0275\u0275elementEnd(),O.\u0275\u0275elementStart(31,"div",16)(32,"table",17),O.\u0275\u0275elementContainerStart(33,18),O.\u0275\u0275template(34,bs,2,0,"th",19)(35,xs,2,1,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275elementContainerStart(36,21),O.\u0275\u0275template(37,Ms,2,0,"th",19)(38,vs,2,1,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275elementContainerStart(39,22),O.\u0275\u0275template(40,ys,2,0,"th",19)(41,ws,3,2,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275elementContainerStart(42,23),O.\u0275\u0275template(43,Ss,2,0,"th",19)(44,Ps,2,1,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275elementContainerStart(45,24),O.\u0275\u0275template(46,Os,2,0,"th",19)(47,Es,2,1,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275elementContainerStart(48,25),O.\u0275\u0275template(49,ks,1,0,"th",19)(50,Ts,5,0,"td",20),O.\u0275\u0275elementContainerEnd(),O.\u0275\u0275template(51,Is,1,0,"tr",26)(52,Ds,1,0,"tr",27)(53,Fs,3,1,"tr",28),O.\u0275\u0275elementEnd()()()()),e&2&&(O.\u0275\u0275advance(18),O.\u0275\u0275twoWayProperty("ngModel",i.search),O.\u0275\u0275advance(),O.\u0275\u0275property("value",i.statusFilter),O.\u0275\u0275advance(13),O.\u0275\u0275property("dataSource",i.filtered),O.\u0275\u0275advance(19),O.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),O.\u0275\u0275advance(),O.\u0275\u0275property("matRowDefColumns",i.displayedColumns))},dependencies:[hs,Cs,Ve.DefaultValueAccessor,Ve.NgControlStatus,Ve.NgModel,D,yi.MatButton,he.MatInput,he.MatFormField,he.MatLabel,he.MatPrefix,$.MatTable,$.MatHeaderCellDef,$.MatHeaderRowDef,$.MatColumnDef,$.MatCellDef,$.MatRowDef,$.MatHeaderCell,$.MatCell,$.MatHeaderRow,$.MatRow,$.MatNoDataRow,Jt.MatCard,Jt.MatCardTitle,He.MatChip,He.MatChipListbox,He.MatChipOption],styles:[".admissions-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.admissions-hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;border-radius:16px;background:linear-gradient(90deg,#3b5998,#1e88e5);color:#fff}.hero-text[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.hero-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.hero-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0ea5c6);color:#0b1221;font-weight:700;border-radius:12px;padding:10px 16px;box-shadow:0 10px 25px #06b6d44d}.hero-action[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-right:6px;font-weight:900}.table-wrap[_ngcontent-%COMP%]{overflow:auto}"]})};import{CommonModule as As}from"@angular/common";import{FormsModule as Rs}from"@angular/forms";import*as l from"@angular/core";import*as Ce from"@angular/material/dialog";import*as Zt from"@angular/common";import*as je from"@angular/forms";import*as wi from"@angular/material/button";import*as Si from"@angular/material/icon";import*as We from"@angular/material/input";import*as Xt from"@angular/material/select";import*as U from"@angular/material/table";import*as Pi from"@angular/material/card";import*as Oi from"@angular/material/checkbox";import*as en from"@angular/material/chips";var Ls=["incidentDialog"];function Ns(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"mat-chip")(1,"mat-icon",11),l.\u0275\u0275text(2,"trending_up"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(3),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate2(" ",e.type," (",e.count,") ")}}function Bs(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"mat-option",44),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275property("value",e),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e)}}function zs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Student"),l.\u0275\u0275elementEnd())}function Vs(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46)(1,"div",47),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"div",48),l.\u0275\u0275text(4),l.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.studentName),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.class)}}function Hs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Date"),l.\u0275\u0275elementEnd())}function js(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e.date)}}function Ws(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Type"),l.\u0275\u0275elementEnd())}function $s(n,t){n&1&&(l.\u0275\u0275elementStart(0,"mat-chip",50),l.\u0275\u0275text(1,"Repeat"),l.\u0275\u0275elementEnd())}function Us(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46),l.\u0275\u0275text(1),l.\u0275\u0275template(2,$s,2,0,"mat-chip",49),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",e.type," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",e.isRepeat)}}function Gs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Severity"),l.\u0275\u0275elementEnd())}function qs(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46)(1,"mat-chip",51),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275property("color",i.severityColor(e.severity)),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate1(" ",e.severity," ")}}function Qs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Action taken"),l.\u0275\u0275elementEnd())}function Ys(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e.actionTaken)}}function Js(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Staff"),l.\u0275\u0275elementEnd())}function Ks(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e.staff)}}function Zs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"th",45),l.\u0275\u0275text(1,"Follow-up"),l.\u0275\u0275elementEnd())}function Xs(n,t){n&1&&(l.\u0275\u0275elementStart(0,"mat-icon",54),l.\u0275\u0275text(1,"check_circle"),l.\u0275\u0275elementEnd())}function ec(n,t){n&1&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1,"Parent notified"),l.\u0275\u0275elementEnd())}function tc(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"td",46)(1,"div",47),l.\u0275\u0275text(2),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"div",48),l.\u0275\u0275template(4,Xs,2,0,"mat-icon",52)(5,ec,2,0,"span",53),l.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.followUpDate||"\u2014"),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",e.parentNotified),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",e.parentNotified)}}function nc(n,t){n&1&&l.\u0275\u0275element(0,"th",45)}function ic(n,t){if(n&1){let e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"td",46)(1,"button",6),l.\u0275\u0275listener("click",function(){let o=l.\u0275\u0275restoreView(e).$implicit,r=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(r.openDialog(o))}),l.\u0275\u0275text(2,"Add follow-up"),l.\u0275\u0275elementEnd()()}}function ac(n,t){n&1&&l.\u0275\u0275element(0,"tr",55)}function oc(n,t){n&1&&l.\u0275\u0275element(0,"tr",56)}function rc(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"tr",57)(1,"td"),l.\u0275\u0275text(2,"No incidents match your filters."),l.\u0275\u0275elementEnd()()),n&2){let e=l.\u0275\u0275nextContext();l.\u0275\u0275advance(),l.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function lc(n,t){n&1&&(l.\u0275\u0275elementStart(0,"span",62),l.\u0275\u0275text(1,"Repeat"),l.\u0275\u0275elementEnd())}function sc(n,t){n&1&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1,"\xB7 Parent notified"),l.\u0275\u0275elementEnd())}function cc(n,t){if(n&1){let e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",58)(1,"div",59)(2,"div")(3,"div",47),l.\u0275\u0275text(4),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"div",48),l.\u0275\u0275text(6),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(7,"mat-chip",51),l.\u0275\u0275text(8),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(9,"div",48),l.\u0275\u0275text(10),l.\u0275\u0275template(11,lc,2,0,"span",60),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(12,"div",48),l.\u0275\u0275text(13),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(14,"div",48),l.\u0275\u0275text(15),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(16,"div",48),l.\u0275\u0275text(17),l.\u0275\u0275template(18,sc,2,0,"span",53),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(19,"div",61)(20,"button",6),l.\u0275\u0275listener("click",function(){let o=l.\u0275\u0275restoreView(e).$implicit,r=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(r.openDialog(o))}),l.\u0275\u0275text(21,"Add follow-up"),l.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=l.\u0275\u0275nextContext();l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate(e.studentName),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate2("",e.class," \xB7 ",e.date),l.\u0275\u0275advance(),l.\u0275\u0275property("color",i.severityColor(e.severity)),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e.severity),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("Type: ",e.type," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",e.isRepeat),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("Action: ",e.actionTaken),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("Staff: ",e.staff),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate1("Follow-up: ",e.followUpDate||"\u2014"," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngIf",e.parentNotified)}}function dc(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"mat-option",44),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275property("value",e.id),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function mc(n,t){if(n&1&&(l.\u0275\u0275elementStart(0,"mat-option",44),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;l.\u0275\u0275property("value",e.name),l.\u0275\u0275advance(),l.\u0275\u0275textInterpolate(e.name)}}function pc(n,t){if(n&1){let e=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"h2",63),l.\u0275\u0275text(1,"Log behavior incident"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(2,"mat-dialog-content",64)(3,"div",65)(4,"mat-form-field",66)(5,"mat-label"),l.\u0275\u0275text(6,"Student"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(7,"mat-select",67),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.studentId,o)||(r.form.studentId=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275template(8,dc,2,3,"mat-option",20),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(9,"mat-form-field",66)(10,"mat-label"),l.\u0275\u0275text(11,"Type"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(12,"input",68),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.type,o)||(r.form.type=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(13,"mat-form-field",66)(14,"mat-label"),l.\u0275\u0275text(15,"Severity"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(16,"mat-select",67),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.severity,o)||(r.form.severity=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275elementStart(17,"mat-option",21),l.\u0275\u0275text(18,"Low"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(19,"mat-option",22),l.\u0275\u0275text(20,"Medium"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(21,"mat-option",23),l.\u0275\u0275text(22,"High"),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(23,"mat-form-field",66)(24,"mat-label"),l.\u0275\u0275text(25,"Date"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(26,"input",69),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.date,o)||(r.form.date=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(27,"mat-form-field",66)(28,"mat-label"),l.\u0275\u0275text(29,"Follow-up date"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(30,"input",69),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.followUpDate,o)||(r.form.followUpDate=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(31,"mat-form-field",66)(32,"mat-label"),l.\u0275\u0275text(33,"Staff"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(34,"mat-select",67),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.staff,o)||(r.form.staff=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275template(35,mc,2,2,"mat-option",20),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(36,"mat-form-field",70)(37,"mat-label"),l.\u0275\u0275text(38,"Action / Notes"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(39,"textarea",71),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.actionTaken,o)||(r.form.actionTaken=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(40,"mat-checkbox",67),l.\u0275\u0275twoWayListener("ngModelChange",function(o){l.\u0275\u0275restoreView(e);let r=l.\u0275\u0275nextContext();return l.\u0275\u0275twoWayBindingSet(r.form.parentNotified,o)||(r.form.parentNotified=o),l.\u0275\u0275resetView(o)}),l.\u0275\u0275text(41,"Parent notified"),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(42,"mat-dialog-actions",72)(43,"button",73),l.\u0275\u0275listener("click",function(){let o=l.\u0275\u0275restoreView(e).$implicit;return l.\u0275\u0275resetView(o.close())}),l.\u0275\u0275text(44,"Cancel"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(45,"button",74),l.\u0275\u0275listener("click",function(){let o=l.\u0275\u0275restoreView(e).$implicit,r=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(r.save(o))}),l.\u0275\u0275text(46,"Save"),l.\u0275\u0275elementEnd()()}if(n&2){let e=l.\u0275\u0275nextContext();l.\u0275\u0275advance(7),l.\u0275\u0275twoWayProperty("ngModel",e.form.studentId),l.\u0275\u0275advance(),l.\u0275\u0275property("ngForOf",e.students),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",e.form.type),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",e.form.severity),l.\u0275\u0275advance(10),l.\u0275\u0275twoWayProperty("ngModel",e.form.date),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",e.form.followUpDate),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",e.form.staff),l.\u0275\u0275advance(),l.\u0275\u0275property("ngForOf",e.staff),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",e.form.actionTaken),l.\u0275\u0275advance(),l.\u0275\u0275twoWayProperty("ngModel",e.form.parentNotified),l.\u0275\u0275advance(5),l.\u0275\u0275property("disabled",!e.form.studentId||!e.form.type)}}var Kt=class n{constructor(t,e){this.mock=t;this.dialog=e;this.students=this.mock.getStudents(),this.staff=this.mock.getStaff(),this.refresh()}incidentDialog;incidents=[];filtered=[];displayedColumns=["student","date","type","severity","action","staff","followUp","actions"];classes=[];students=[];staff=[];search="";classFilter="all";severityFilter="all";startDate="";endDate="";metrics={openFollowUps:0,incidentsThisMonth:0,topCauses:[]};form={};refresh(){this.incidents=this.mock.getBehaviorIncidents(),this.classes=Array.from(new Set(this.incidents.map(t=>t.class).filter(Boolean))),this.applyFilters(),this.computeMetrics()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.startDate?new Date(this.startDate):null,i=this.endDate?new Date(this.endDate):null;this.filtered=this.incidents.filter(o=>{let r=!t||[o.studentName,o.type,o.staff].some(ne=>(ne||"").toLowerCase().includes(t)),P=this.classFilter==="all"||o.class===this.classFilter,k=this.severityFilter==="all"||o.severity===this.severityFilter,A=new Date(o.date),ie=!e||A>=e,L=!i||A<=i;return r&&P&&k&&ie&&L})}computeMetrics(){let t=new Date,e=t.toISOString().slice(0,7);this.metrics.incidentsThisMonth=this.incidents.filter(o=>(o.date||"").startsWith(e)).length,this.metrics.openFollowUps=this.incidents.filter(o=>o.followUpDate?new Date(o.followUpDate)>=t:!1).length;let i={};this.incidents.forEach(o=>{i[o.type]=(i[o.type]||0)+1}),this.metrics.topCauses=Object.entries(i).sort((o,r)=>r[1]-o[1]).slice(0,3).map(([o,r])=>({type:o,count:r}))}severityColor(t){return t==="high"?"warn":t==="medium"?"accent":"primary"}openDialog(t){let e=new Date().toISOString().slice(0,10);this.form={studentId:t?.studentId||(this.students[0]?.id??null),type:t?.type||"General",severity:t?.severity||"medium",date:e,followUpDate:t?.followUpDate||"",staff:t?.staff||(this.staff[0]?.name??""),actionTaken:t?.actionTaken||""},this.dialog.open(this.incidentDialog,{width:"520px"})}save(t){let e=this.students.find(i=>i.id===this.form.studentId);this.mock.addBehaviorIncident({studentId:this.form.studentId,studentName:e?`${e.firstName} ${e.lastName}`:void 0,class:e?.class,type:this.form.type,severity:this.form.severity,date:this.form.date,followUpDate:this.form.followUpDate,staff:this.form.staff,actionTaken:this.form.actionTaken||"Logged",parentNotified:!!this.form.parentNotified}),this.refresh(),t.close()}exportCsv(){let t=["Student","Class","Date","Type","Severity","Action","Staff","FollowUp","ParentNotified","Repeat"],e=this.filtered.map(k=>[k.studentName,k.class,k.date,k.type,k.severity,k.actionTaken,k.staff,k.followUpDate||"",k.parentNotified?"Yes":"No",k.isRepeat?"Yes":"No"]),i=[t,...e].map(k=>k.map(A=>`"${(A??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="behavior-incidents.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(l.\u0275\u0275directiveInject(F),l.\u0275\u0275directiveInject(Ce.MatDialog))};static \u0275cmp=l.\u0275\u0275defineComponent({type:n,selectors:[["app-behavior"]],viewQuery:function(e,i){if(e&1&&l.\u0275\u0275viewQuery(Ls,5),e&2){let o;l.\u0275\u0275queryRefresh(o=l.\u0275\u0275loadQuery())&&(i.incidentDialog=o.first)}},decls:94,vars:13,consts:[["incidentDialog",""],[1,"behavior-page","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"icon"],[1,"chips","mat-elevation-z1"],["color","accent","selected",""],["inline",""],["color","primary","selected",""],[4,"ngFor","ngForOf"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","student, type, staff",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["value","low"],["value","medium"],["value","high"],["matInput","","type","date",3,"ngModelChange","change","ngModel"],[1,"table-card"],[1,"table-title"],[1,"table-wrap","desktop-only"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","type"],["matColumnDef","severity"],["matColumnDef","action"],["matColumnDef","staff"],["matColumnDef","followUp"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["color","warn","selected","","class","chip-tight",4,"ngIf"],["color","warn","selected","",1,"chip-tight"],["selected","",1,"chip-tight",3,"color"],["inline","true","aria-label","Parent notified",4,"ngIf"],[4,"ngIf"],["inline","true","aria-label","Parent notified"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["class","pill-warn",4,"ngIf"],[1,"action-row"],[1,"pill-warn"],["mat-dialog-title",""],[1,"dialog-content"],[1,"dialog-grid"],["appearance","outline"],[3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","type","date",3,"ngModelChange","ngModel"],["appearance","outline",1,"full-row"],["matInput","","rows","3",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,i){if(e&1){let o=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),l.\u0275\u0275text(4,"School Management"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"div",4),l.\u0275\u0275text(6,"Behavior"),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(7,"div",5)(8,"button",6),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.exportCsv())}),l.\u0275\u0275text(9,"Export CSV"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(10,"button",7),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.openDialog())}),l.\u0275\u0275elementStart(11,"span",8),l.\u0275\u0275text(12,"+"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(13," Log incident "),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(14,"mat-card",9)(15,"mat-chip-set")(16,"mat-chip",10)(17,"mat-icon",11),l.\u0275\u0275text(18,"schedule"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(19),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(20,"mat-chip",12)(21,"mat-icon",11),l.\u0275\u0275text(22,"event"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(23),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(24,Ns,4,2,"mat-chip",13),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(25,"mat-card",14)(26,"div",15)(27,"mat-form-field",16)(28,"mat-label"),l.\u0275\u0275text(29,"Search"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(30,"input",17),l.\u0275\u0275twoWayListener("ngModelChange",function(P){return l.\u0275\u0275restoreView(o),l.\u0275\u0275twoWayBindingSet(i.search,P)||(i.search=P),l.\u0275\u0275resetView(P)}),l.\u0275\u0275listener("ngModelChange",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.applyFilters())}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(31,"mat-form-field",16)(32,"mat-label"),l.\u0275\u0275text(33,"Class"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(34,"mat-select",18),l.\u0275\u0275twoWayListener("ngModelChange",function(P){return l.\u0275\u0275restoreView(o),l.\u0275\u0275twoWayBindingSet(i.classFilter,P)||(i.classFilter=P),l.\u0275\u0275resetView(P)}),l.\u0275\u0275listener("selectionChange",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.applyFilters())}),l.\u0275\u0275elementStart(35,"mat-option",19),l.\u0275\u0275text(36,"All"),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(37,Bs,2,2,"mat-option",20),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(38,"mat-form-field",16)(39,"mat-label"),l.\u0275\u0275text(40,"Severity"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(41,"mat-select",18),l.\u0275\u0275twoWayListener("ngModelChange",function(P){return l.\u0275\u0275restoreView(o),l.\u0275\u0275twoWayBindingSet(i.severityFilter,P)||(i.severityFilter=P),l.\u0275\u0275resetView(P)}),l.\u0275\u0275listener("selectionChange",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.applyFilters())}),l.\u0275\u0275elementStart(42,"mat-option",19),l.\u0275\u0275text(43,"All"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(44,"mat-option",21),l.\u0275\u0275text(45,"Low"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(46,"mat-option",22),l.\u0275\u0275text(47,"Medium"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(48,"mat-option",23),l.\u0275\u0275text(49,"High"),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(50,"mat-form-field",16)(51,"mat-label"),l.\u0275\u0275text(52,"Start date"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(53,"input",24),l.\u0275\u0275twoWayListener("ngModelChange",function(P){return l.\u0275\u0275restoreView(o),l.\u0275\u0275twoWayBindingSet(i.startDate,P)||(i.startDate=P),l.\u0275\u0275resetView(P)}),l.\u0275\u0275listener("change",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.applyFilters())}),l.\u0275\u0275elementEnd()(),l.\u0275\u0275elementStart(54,"mat-form-field",16)(55,"mat-label"),l.\u0275\u0275text(56,"End date"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(57,"input",24),l.\u0275\u0275twoWayListener("ngModelChange",function(P){return l.\u0275\u0275restoreView(o),l.\u0275\u0275twoWayBindingSet(i.endDate,P)||(i.endDate=P),l.\u0275\u0275resetView(P)}),l.\u0275\u0275listener("change",function(){return l.\u0275\u0275restoreView(o),l.\u0275\u0275resetView(i.applyFilters())}),l.\u0275\u0275elementEnd()()()(),l.\u0275\u0275elementStart(58,"mat-card",25)(59,"div",26),l.\u0275\u0275text(60,"Behavior incidents"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(61,"div",27)(62,"table",28),l.\u0275\u0275elementContainerStart(63,29),l.\u0275\u0275template(64,zs,2,0,"th",30)(65,Vs,5,2,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(66,32),l.\u0275\u0275template(67,Hs,2,0,"th",30)(68,js,2,1,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(69,33),l.\u0275\u0275template(70,Ws,2,0,"th",30)(71,Us,3,2,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(72,34),l.\u0275\u0275template(73,Gs,2,0,"th",30)(74,qs,3,2,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(75,35),l.\u0275\u0275template(76,Qs,2,0,"th",30)(77,Ys,2,1,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(78,36),l.\u0275\u0275template(79,Js,2,0,"th",30)(80,Ks,2,1,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(81,37),l.\u0275\u0275template(82,Zs,2,0,"th",30)(83,tc,6,3,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementContainerStart(84,38),l.\u0275\u0275template(85,nc,1,0,"th",30)(86,ic,3,0,"td",31),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275template(87,ac,1,0,"tr",39)(88,oc,1,0,"tr",40)(89,rc,3,1,"tr",41),l.\u0275\u0275elementEnd()()(),l.\u0275\u0275elementStart(90,"mat-card",42),l.\u0275\u0275template(91,cc,22,11,"div",43),l.\u0275\u0275elementEnd()(),l.\u0275\u0275template(92,pc,47,11,"ng-template",null,0,l.\u0275\u0275templateRefExtractor)}e&2&&(l.\u0275\u0275advance(19),l.\u0275\u0275textInterpolate1(" Open follow-ups: ",i.metrics.openFollowUps," "),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate1(" This month: ",i.metrics.incidentsThisMonth," "),l.\u0275\u0275advance(),l.\u0275\u0275property("ngForOf",i.metrics.topCauses),l.\u0275\u0275advance(6),l.\u0275\u0275twoWayProperty("ngModel",i.search),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",i.classFilter),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngForOf",i.classes),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",i.severityFilter),l.\u0275\u0275advance(12),l.\u0275\u0275twoWayProperty("ngModel",i.startDate),l.\u0275\u0275advance(4),l.\u0275\u0275twoWayProperty("ngModel",i.endDate),l.\u0275\u0275advance(5),l.\u0275\u0275property("dataSource",i.filtered),l.\u0275\u0275advance(25),l.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),l.\u0275\u0275advance(),l.\u0275\u0275property("matRowDefColumns",i.displayedColumns),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[As,Zt.NgForOf,Zt.NgIf,Rs,je.DefaultValueAccessor,je.NgControlStatus,je.NgModel,D,wi.MatButton,Si.MatIcon,We.MatInput,We.MatFormField,We.MatLabel,Xt.MatSelect,Xt.MatOption,U.MatTable,U.MatHeaderCellDef,U.MatHeaderRowDef,U.MatColumnDef,U.MatCellDef,U.MatRowDef,U.MatHeaderCell,U.MatCell,U.MatHeaderRow,U.MatRow,U.MatNoDataRow,Pi.MatCard,Ce.MatDialogTitle,Ce.MatDialogActions,Ce.MatDialogContent,Oi.MatCheckbox,en.MatChip,en.MatChipSet],styles:[".behavior-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#3353c6,#1b82e8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.icon[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-right:4px}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 .25rem}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.8rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.chip-tight[_ngcontent-%COMP%]{height:26px;line-height:26px;margin-left:6px}.dialog-content[_ngcontent-%COMP%]{min-width:480px}.dialog-grid[_ngcontent-%COMP%]{display:grid;gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.full-row[_ngcontent-%COMP%]{grid-column:1/-1}@media (max-width: 768px){.behavior-page[_ngcontent-%COMP%]{padding:.25rem}.chips[_ngcontent-%COMP%]{padding:0 .5rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.pill-warn[_ngcontent-%COMP%]{background:#f443361a;color:#c62828;padding:2px 8px;border-radius:999px;font-size:12px;margin-left:6px}}"]})};import{CommonModule as uc}from"@angular/common";import{FormsModule as gc}from"@angular/forms";import*as m from"@angular/core";import*as be from"@angular/material/dialog";import*as Ei from"@angular/common";import*as $e from"@angular/forms";import*as ki from"@angular/material/button";import*as Ue from"@angular/material/input";import*as nn from"@angular/material/select";import*as G from"@angular/material/table";import*as Ti from"@angular/material/card";import*as Ii from"@angular/material/chips";var fc=["announceDialog"];function _c(n,t){n&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Title"),m.\u0275\u0275elementEnd())}function hc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"td",38)(1,"div",39),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(3,"div",40),m.\u0275\u0275text(4),m.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.title),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.body)}}function Cc(n,t){n&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Audience"),m.\u0275\u0275elementEnd())}function bc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.audience)}}function xc(n,t){n&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Priority"),m.\u0275\u0275elementEnd())}function Mc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"td",38)(1,"mat-chip",41),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=m.\u0275\u0275nextContext();m.\u0275\u0275advance(),m.\u0275\u0275property("color",i.priorityColor(e.priority)),m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.priority)}}function vc(n,t){n&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Date"),m.\u0275\u0275elementEnd())}function yc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.date)}}function wc(n,t){n&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Author"),m.\u0275\u0275elementEnd())}function Sc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.author)}}function Pc(n,t){n&1&&m.\u0275\u0275element(0,"tr",42)}function Oc(n,t){n&1&&m.\u0275\u0275element(0,"tr",43)}function Ec(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"tr",44)(1,"td"),m.\u0275\u0275text(2,"No announcements match your filters."),m.\u0275\u0275elementEnd()()),n&2){let e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(),m.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function kc(n,t){if(n&1&&(m.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div",39),m.\u0275\u0275text(3),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"mat-chip",41),m.\u0275\u0275text(5),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(6,"div",40),m.\u0275\u0275text(7),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(8,"div",40),m.\u0275\u0275text(9),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(10,"div",40),m.\u0275\u0275text(11),m.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=m.\u0275\u0275nextContext();m.\u0275\u0275advance(3),m.\u0275\u0275textInterpolate(e.title),m.\u0275\u0275advance(),m.\u0275\u0275property("color",i.priorityColor(e.priority)),m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.priority),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate2("",e.audience," \xB7 ",e.date),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.body),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1("Author: ",e.author)}}function Tc(n,t){if(n&1){let e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"h2",47),m.\u0275\u0275text(1,"New announcement"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"mat-dialog-content",48)(3,"div",49)(4,"mat-form-field",50)(5,"mat-label"),m.\u0275\u0275text(6,"Title"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"input",51),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.title,o)||(r.form.title=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(8,"mat-form-field",50)(9,"mat-label"),m.\u0275\u0275text(10,"Audience"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(11,"mat-select",52),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.audience,o)||(r.form.audience=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementStart(12,"mat-option",14),m.\u0275\u0275text(13,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(14,"mat-option",15),m.\u0275\u0275text(15,"Students"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(16,"mat-option",16),m.\u0275\u0275text(17,"Teachers"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(18,"mat-form-field",50)(19,"mat-label"),m.\u0275\u0275text(20,"Priority"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(21,"mat-select",52),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.priority,o)||(r.form.priority=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementStart(22,"mat-option",17),m.\u0275\u0275text(23,"Low"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(24,"mat-option",18),m.\u0275\u0275text(25,"Normal"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(26,"mat-option",19),m.\u0275\u0275text(27,"High"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(28,"mat-form-field",50)(29,"mat-label"),m.\u0275\u0275text(30,"Date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(31,"input",53),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.date,o)||(r.form.date=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(32,"mat-form-field",50)(33,"mat-label"),m.\u0275\u0275text(34,"Author"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(35,"input",51),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.author,o)||(r.form.author=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(36,"mat-form-field",54)(37,"mat-label"),m.\u0275\u0275text(38,"Body"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(39,"textarea",55),m.\u0275\u0275twoWayListener("ngModelChange",function(o){m.\u0275\u0275restoreView(e);let r=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(r.form.body,o)||(r.form.body=o),m.\u0275\u0275resetView(o)}),m.\u0275\u0275elementEnd()()()(),m.\u0275\u0275elementStart(40,"mat-dialog-actions",56)(41,"button",57),m.\u0275\u0275listener("click",function(){let o=m.\u0275\u0275restoreView(e).$implicit;return m.\u0275\u0275resetView(o.close())}),m.\u0275\u0275text(42,"Cancel"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(43,"button",58),m.\u0275\u0275listener("click",function(){let o=m.\u0275\u0275restoreView(e).$implicit,r=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(r.save(o))}),m.\u0275\u0275text(44,"Save"),m.\u0275\u0275elementEnd()()}if(n&2){let e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(7),m.\u0275\u0275twoWayProperty("ngModel",e.form.title),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.audience),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",e.form.priority),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",e.form.date),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.author),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.body),m.\u0275\u0275advance(4),m.\u0275\u0275property("disabled",!e.form.title)}}var tn=class n{constructor(t,e){this.mock=t;this.dialog=e;this.refresh()}announceDialog;announcements=[];filtered=[];displayedColumns=["title","audience","priority","date","author"];search="";audience="all";priority="all";startDate="";endDate="";form={};refresh(){this.announcements=this.mock.getAnnouncements()||[],this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.startDate?new Date(this.startDate):null,i=this.endDate?new Date(this.endDate):null;this.filtered=this.announcements.filter(o=>{let r=!t||[o.title,o.body,o.author].some(ne=>(ne||"").toLowerCase().includes(t)),P=this.audience==="all"||o.audience===this.audience,k=this.priority==="all"||o.priority===this.priority,A=new Date(o.date),ie=!e||A>=e,L=!i||A<=i;return r&&P&&k&&ie&&L})}priorityColor(t){return t==="high"?"warn":t==="normal"?"primary":"accent"}openDialog(){let t=new Date().toISOString().slice(0,10);this.form={title:"",audience:"all",priority:"normal",date:t,author:"Admin",body:""},this.dialog.open(this.announceDialog,{width:"520px"})}save(t){this.mock.addAnnouncement(this.form),this.refresh(),t.close()}exportCsv(){let t=["Title","Audience","Priority","Date","Author","Body"],e=this.filtered.map(k=>[k.title,k.audience,k.priority,k.date,k.author,k.body]),i=[t,...e].map(k=>k.map(A=>`"${(A??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="announcements.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(m.\u0275\u0275directiveInject(F),m.\u0275\u0275directiveInject(be.MatDialog))};static \u0275cmp=m.\u0275\u0275defineComponent({type:n,selectors:[["app-announcements"]],viewQuery:function(e,i){if(e&1&&m.\u0275\u0275viewQuery(fc,5),e&2){let o;m.\u0275\u0275queryRefresh(o=m.\u0275\u0275loadQuery())&&(i.announceDialog=o.first)}},decls:77,vars:9,consts:[["announceDialog",""],[1,"announcements","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"icon"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","title or body",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","students"],["value","teachers"],["value","low"],["value","normal"],["value","high"],["matInput","","type","date",3,"ngModelChange","change","ngModel"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","audience"],["matColumnDef","priority"],["matColumnDef","date"],["matColumnDef","author"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["mat-dialog-title",""],[1,"dialog-content"],[1,"dialog-grid"],["appearance","outline"],["matInput","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["matInput","","type","date",3,"ngModelChange","ngModel"],["appearance","outline",1,"full-row"],["matInput","","rows","3",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,i){if(e&1){let o=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),m.\u0275\u0275text(4,"School Management"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(5,"div",4),m.\u0275\u0275text(6,"Announcements"),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(7,"div",5)(8,"button",6),m.\u0275\u0275listener("click",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.exportCsv())}),m.\u0275\u0275text(9,"Export CSV"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(10,"button",7),m.\u0275\u0275listener("click",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.openDialog())}),m.\u0275\u0275elementStart(11,"span",8),m.\u0275\u0275text(12,"+"),m.\u0275\u0275elementEnd(),m.\u0275\u0275text(13," New announcement "),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(14,"mat-card",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),m.\u0275\u0275text(18,"Search"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(19,"input",12),m.\u0275\u0275twoWayListener("ngModelChange",function(P){return m.\u0275\u0275restoreView(o),m.\u0275\u0275twoWayBindingSet(i.search,P)||(i.search=P),m.\u0275\u0275resetView(P)}),m.\u0275\u0275listener("ngModelChange",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.applyFilters())}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(20,"mat-form-field",11)(21,"mat-label"),m.\u0275\u0275text(22,"Audience"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(23,"mat-select",13),m.\u0275\u0275twoWayListener("ngModelChange",function(P){return m.\u0275\u0275restoreView(o),m.\u0275\u0275twoWayBindingSet(i.audience,P)||(i.audience=P),m.\u0275\u0275resetView(P)}),m.\u0275\u0275listener("selectionChange",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.applyFilters())}),m.\u0275\u0275elementStart(24,"mat-option",14),m.\u0275\u0275text(25,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(26,"mat-option",15),m.\u0275\u0275text(27,"Students"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(28,"mat-option",16),m.\u0275\u0275text(29,"Teachers"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(30,"mat-form-field",11)(31,"mat-label"),m.\u0275\u0275text(32,"Priority"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(33,"mat-select",13),m.\u0275\u0275twoWayListener("ngModelChange",function(P){return m.\u0275\u0275restoreView(o),m.\u0275\u0275twoWayBindingSet(i.priority,P)||(i.priority=P),m.\u0275\u0275resetView(P)}),m.\u0275\u0275listener("selectionChange",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.applyFilters())}),m.\u0275\u0275elementStart(34,"mat-option",14),m.\u0275\u0275text(35,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(36,"mat-option",17),m.\u0275\u0275text(37,"Low"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(38,"mat-option",18),m.\u0275\u0275text(39,"Normal"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(40,"mat-option",19),m.\u0275\u0275text(41,"High"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(42,"mat-form-field",11)(43,"mat-label"),m.\u0275\u0275text(44,"Start date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(45,"input",20),m.\u0275\u0275twoWayListener("ngModelChange",function(P){return m.\u0275\u0275restoreView(o),m.\u0275\u0275twoWayBindingSet(i.startDate,P)||(i.startDate=P),m.\u0275\u0275resetView(P)}),m.\u0275\u0275listener("change",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.applyFilters())}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(46,"mat-form-field",11)(47,"mat-label"),m.\u0275\u0275text(48,"End date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(49,"input",20),m.\u0275\u0275twoWayListener("ngModelChange",function(P){return m.\u0275\u0275restoreView(o),m.\u0275\u0275twoWayBindingSet(i.endDate,P)||(i.endDate=P),m.\u0275\u0275resetView(P)}),m.\u0275\u0275listener("change",function(){return m.\u0275\u0275restoreView(o),m.\u0275\u0275resetView(i.applyFilters())}),m.\u0275\u0275elementEnd()()()(),m.\u0275\u0275elementStart(50,"mat-card",21)(51,"div",22),m.\u0275\u0275text(52,"Recent announcements"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(53,"div",23)(54,"table",24),m.\u0275\u0275elementContainerStart(55,25),m.\u0275\u0275template(56,_c,2,0,"th",26)(57,hc,5,2,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(58,28),m.\u0275\u0275template(59,Cc,2,0,"th",26)(60,bc,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(61,29),m.\u0275\u0275template(62,xc,2,0,"th",26)(63,Mc,3,2,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(64,30),m.\u0275\u0275template(65,vc,2,0,"th",26)(66,yc,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(67,31),m.\u0275\u0275template(68,wc,2,0,"th",26)(69,Sc,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275template(70,Pc,1,0,"tr",32)(71,Oc,1,0,"tr",33)(72,Ec,3,1,"tr",34),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(73,"mat-card",35),m.\u0275\u0275template(74,kc,12,7,"div",36),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(75,Tc,45,7,"ng-template",null,0,m.\u0275\u0275templateRefExtractor)}e&2&&(m.\u0275\u0275advance(19),m.\u0275\u0275twoWayProperty("ngModel",i.search),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",i.audience),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",i.priority),m.\u0275\u0275advance(12),m.\u0275\u0275twoWayProperty("ngModel",i.startDate),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",i.endDate),m.\u0275\u0275advance(5),m.\u0275\u0275property("dataSource",i.filtered),m.\u0275\u0275advance(16),m.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),m.\u0275\u0275advance(),m.\u0275\u0275property("matRowDefColumns",i.displayedColumns),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[uc,Ei.NgForOf,gc,$e.DefaultValueAccessor,$e.NgControlStatus,$e.NgModel,D,ki.MatButton,Ue.MatInput,Ue.MatFormField,Ue.MatLabel,nn.MatSelect,nn.MatOption,G.MatTable,G.MatHeaderCellDef,G.MatHeaderRowDef,G.MatColumnDef,G.MatCellDef,G.MatRowDef,G.MatHeaderCell,G.MatCell,G.MatHeaderRow,G.MatRow,G.MatNoDataRow,Ti.MatCard,be.MatDialogTitle,be.MatDialogActions,be.MatDialogContent,Ii.MatChip],styles:[".announcements[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#334ac6,#2185e3);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.icon[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-right:4px}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.announcements[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}.dialog-content[_ngcontent-%COMP%]{min-width:480px}.dialog-grid[_ngcontent-%COMP%]{display:grid;gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.full-row[_ngcontent-%COMP%]{grid-column:1/-1}"]})};import{CommonModule as Ic}from"@angular/common";import{FormsModule as Dc}from"@angular/forms";import*as b from"@angular/core";import*as on from"@angular/common";import*as Ge from"@angular/forms";import*as Di from"@angular/material/button";import*as qe from"@angular/material/input";import*as rn from"@angular/material/select";import*as q from"@angular/material/table";import*as Fi from"@angular/material/card";import*as Ai from"@angular/material/chips";function Fc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"mat-option",31),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;b.\u0275\u0275property("value",e),b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate(e)}}function Ac(n,t){n&1&&(b.\u0275\u0275elementStart(0,"th",32),b.\u0275\u0275text(1,"Title"),b.\u0275\u0275elementEnd())}function Rc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"td",33)(1,"div",34),b.\u0275\u0275text(2),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(3,"div",35),b.\u0275\u0275text(4),b.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate(e.title),b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate(e.author)}}function Lc(n,t){n&1&&(b.\u0275\u0275elementStart(0,"th",32),b.\u0275\u0275text(1,"Category"),b.\u0275\u0275elementEnd())}function Nc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"td",33),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate(e.category)}}function Bc(n,t){n&1&&(b.\u0275\u0275elementStart(0,"th",32),b.\u0275\u0275text(1,"Status"),b.\u0275\u0275elementEnd())}function zc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"td",33)(1,"mat-chip",36),b.\u0275\u0275text(2),b.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;b.\u0275\u0275advance(),b.\u0275\u0275property("color",e.status==="available"?"primary":"warn"),b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate(e.status)}}function Vc(n,t){n&1&&(b.\u0275\u0275elementStart(0,"th",32),b.\u0275\u0275text(1,"Borrower"),b.\u0275\u0275elementEnd())}function Hc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"div")(1,"div",34),b.\u0275\u0275text(2),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(3,"div",35),b.\u0275\u0275text(4),b.\u0275\u0275elementEnd()()),n&2){let e=b.\u0275\u0275nextContext().$implicit;b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate(e.borrower),b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate1("Due ",e.dueDate||"--")}}function jc(n,t){n&1&&(b.\u0275\u0275elementStart(0,"span"),b.\u0275\u0275text(1,"\u2014"),b.\u0275\u0275elementEnd())}function Wc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"td",33),b.\u0275\u0275template(1,Hc,5,2,"div",37)(2,jc,2,0,"span",37),b.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="checked-out"),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="available")}}function $c(n,t){n&1&&b.\u0275\u0275element(0,"th",32)}function Uc(n,t){if(n&1){let e=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"button",5),b.\u0275\u0275listener("click",function(){b.\u0275\u0275restoreView(e);let o=b.\u0275\u0275nextContext().$implicit,r=b.\u0275\u0275nextContext();return b.\u0275\u0275resetView(r.quickCheckout(o))}),b.\u0275\u0275text(1,"Checkout"),b.\u0275\u0275elementEnd()}}function Gc(n,t){if(n&1){let e=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"button",40),b.\u0275\u0275listener("click",function(){b.\u0275\u0275restoreView(e);let o=b.\u0275\u0275nextContext().$implicit,r=b.\u0275\u0275nextContext();return b.\u0275\u0275resetView(r.markReturned(o))}),b.\u0275\u0275text(1,"Return"),b.\u0275\u0275elementEnd()}}function qc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"td",33),b.\u0275\u0275template(1,Uc,2,0,"button",38)(2,Gc,2,0,"button",39),b.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="available"),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="checked-out")}}function Qc(n,t){n&1&&b.\u0275\u0275element(0,"tr",41)}function Yc(n,t){n&1&&b.\u0275\u0275element(0,"tr",42)}function Jc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"tr",43)(1,"td"),b.\u0275\u0275text(2,"No books match your filters."),b.\u0275\u0275elementEnd()()),n&2){let e=b.\u0275\u0275nextContext();b.\u0275\u0275advance(),b.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Kc(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"div",35),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),n&2){let e=b.\u0275\u0275nextContext().$implicit;b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate2("Borrower: ",e.borrower," \xB7 Due ",e.dueDate||"--")}}function Zc(n,t){n&1&&(b.\u0275\u0275elementStart(0,"div",35),b.\u0275\u0275text(1,"Available for checkout"),b.\u0275\u0275elementEnd())}function Xc(n,t){if(n&1){let e=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"button",5),b.\u0275\u0275listener("click",function(){b.\u0275\u0275restoreView(e);let o=b.\u0275\u0275nextContext().$implicit,r=b.\u0275\u0275nextContext();return b.\u0275\u0275resetView(r.quickCheckout(o))}),b.\u0275\u0275text(1,"Checkout"),b.\u0275\u0275elementEnd()}}function ed(n,t){if(n&1){let e=b.\u0275\u0275getCurrentView();b.\u0275\u0275elementStart(0,"button",40),b.\u0275\u0275listener("click",function(){b.\u0275\u0275restoreView(e);let o=b.\u0275\u0275nextContext().$implicit,r=b.\u0275\u0275nextContext();return b.\u0275\u0275resetView(r.markReturned(o))}),b.\u0275\u0275text(1,"Return"),b.\u0275\u0275elementEnd()}}function td(n,t){if(n&1&&(b.\u0275\u0275elementStart(0,"div",44)(1,"div",45)(2,"div")(3,"div",34),b.\u0275\u0275text(4),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(5,"div",35),b.\u0275\u0275text(6),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(7,"mat-chip",36),b.\u0275\u0275text(8),b.\u0275\u0275elementEnd()(),b.\u0275\u0275template(9,Kc,2,2,"div",46)(10,Zc,2,0,"div",46),b.\u0275\u0275elementStart(11,"div",47),b.\u0275\u0275template(12,Xc,2,0,"button",38)(13,ed,2,0,"button",39),b.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;b.\u0275\u0275advance(4),b.\u0275\u0275textInterpolate(e.title),b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate2("",e.author," \xB7 ",e.category),b.\u0275\u0275advance(),b.\u0275\u0275property("color",e.status==="available"?"primary":"warn"),b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate(e.status),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="checked-out"),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="available"),b.\u0275\u0275advance(2),b.\u0275\u0275property("ngIf",e.status==="available"),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",e.status==="checked-out")}}var an=class n{constructor(t){this.mock=t;this.refresh()}items=[];filtered=[];categories=[];displayedColumns=["title","category","status","borrower","actions"];search="";status="all";category="all";refresh(){this.items=this.mock.getLibraryItems()||[],this.categories=Array.from(new Set(this.items.map(t=>t.category).filter(Boolean))),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.items.filter(e=>{let i=!t||[e.title,e.author,e.borrower].some(P=>(P||"").toLowerCase().includes(t)),o=this.status==="all"||e.status===this.status,r=this.category==="all"||e.category===this.category;return i&&o&&r})}quickCheckout(t){let e=t.borrower||"Student",i=t.dueDate||new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10);this.mock.checkoutBook(t.id,e,i),this.refresh()}markReturned(t){this.mock.returnBook(t.id),this.refresh()}exportCsv(){let t=["Title","Author","Category","Status","Borrower","DueDate"],e=this.filtered.map(k=>[k.title,k.author,k.category,k.status,k.borrower||"",k.dueDate||""]),i=[t,...e].map(k=>k.map(A=>`"${(A??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="library-catalog.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(b.\u0275\u0275directiveInject(F))};static \u0275cmp=b.\u0275\u0275defineComponent({type:n,selectors:[["app-library"]],decls:58,vars:8,consts:[[1,"library","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","title, author, borrower",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","available"],["value","checked-out"],[3,"value",4,"ngFor","ngForOf"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","borrower"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],[4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["class","cell-sub",4,"ngIf"],[1,"action-row"]],template:function(e,i){e&1&&(b.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),b.\u0275\u0275text(4,"School Management"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(5,"div",3),b.\u0275\u0275text(6,"Library"),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(7,"div",4)(8,"button",5),b.\u0275\u0275listener("click",function(){return i.exportCsv()}),b.\u0275\u0275text(9,"Export CSV"),b.\u0275\u0275elementEnd()()(),b.\u0275\u0275elementStart(10,"mat-card",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),b.\u0275\u0275text(14,"Search"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(15,"input",9),b.\u0275\u0275twoWayListener("ngModelChange",function(r){return b.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),b.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(16,"mat-form-field",8)(17,"mat-label"),b.\u0275\u0275text(18,"Status"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(19,"mat-select",10),b.\u0275\u0275twoWayListener("ngModelChange",function(r){return b.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),b.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),b.\u0275\u0275elementStart(20,"mat-option",11),b.\u0275\u0275text(21,"All"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(22,"mat-option",12),b.\u0275\u0275text(23,"Available"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(24,"mat-option",13),b.\u0275\u0275text(25,"Checked out"),b.\u0275\u0275elementEnd()()(),b.\u0275\u0275elementStart(26,"mat-form-field",8)(27,"mat-label"),b.\u0275\u0275text(28,"Category"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(29,"mat-select",10),b.\u0275\u0275twoWayListener("ngModelChange",function(r){return b.\u0275\u0275twoWayBindingSet(i.category,r)||(i.category=r),r}),b.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),b.\u0275\u0275elementStart(30,"mat-option",11),b.\u0275\u0275text(31,"All"),b.\u0275\u0275elementEnd(),b.\u0275\u0275template(32,Fc,2,2,"mat-option",14),b.\u0275\u0275elementEnd()()()(),b.\u0275\u0275elementStart(33,"mat-card",15)(34,"div",16),b.\u0275\u0275text(35,"Catalog"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(36,"div",17)(37,"table",18),b.\u0275\u0275elementContainerStart(38,19),b.\u0275\u0275template(39,Ac,2,0,"th",20)(40,Rc,5,2,"td",21),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(41,22),b.\u0275\u0275template(42,Lc,2,0,"th",20)(43,Nc,2,1,"td",21),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(44,23),b.\u0275\u0275template(45,Bc,2,0,"th",20)(46,zc,3,2,"td",21),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(47,24),b.\u0275\u0275template(48,Vc,2,0,"th",20)(49,Wc,3,2,"td",21),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275elementContainerStart(50,25),b.\u0275\u0275template(51,$c,1,0,"th",20)(52,qc,3,2,"td",21),b.\u0275\u0275elementContainerEnd(),b.\u0275\u0275template(53,Qc,1,0,"tr",26)(54,Yc,1,0,"tr",27)(55,Jc,3,1,"tr",28),b.\u0275\u0275elementEnd()()(),b.\u0275\u0275elementStart(56,"mat-card",29),b.\u0275\u0275template(57,td,14,9,"div",30),b.\u0275\u0275elementEnd()()),e&2&&(b.\u0275\u0275advance(15),b.\u0275\u0275twoWayProperty("ngModel",i.search),b.\u0275\u0275advance(4),b.\u0275\u0275twoWayProperty("ngModel",i.status),b.\u0275\u0275advance(10),b.\u0275\u0275twoWayProperty("ngModel",i.category),b.\u0275\u0275advance(3),b.\u0275\u0275property("ngForOf",i.categories),b.\u0275\u0275advance(5),b.\u0275\u0275property("dataSource",i.filtered),b.\u0275\u0275advance(16),b.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),b.\u0275\u0275advance(),b.\u0275\u0275property("matRowDefColumns",i.displayedColumns),b.\u0275\u0275advance(3),b.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[Ic,on.NgForOf,on.NgIf,Dc,Ge.DefaultValueAccessor,Ge.NgControlStatus,Ge.NgModel,D,Di.MatButton,qe.MatInput,qe.MatFormField,qe.MatLabel,rn.MatSelect,rn.MatOption,q.MatTable,q.MatHeaderCellDef,q.MatHeaderRowDef,q.MatColumnDef,q.MatCellDef,q.MatRowDef,q.MatHeaderCell,q.MatCell,q.MatHeaderRow,q.MatRow,q.MatNoDataRow,Fi.MatCard,Ai.MatChip],styles:[".library[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#3353c6,#1b82e8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.library[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}"]})};import{CommonModule as nd}from"@angular/common";import{FormsModule as id}from"@angular/forms";import*as h from"@angular/core";import*as Ri from"@angular/common";import*as Qe from"@angular/forms";import*as Li from"@angular/material/button";import*as Ye from"@angular/material/input";import*as sn from"@angular/material/select";import*as Q from"@angular/material/table";import*as Ni from"@angular/material/card";import*as Bi from"@angular/material/chips";import*as zi from"@angular/material/progress-bar";function ad(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"mat-option",33),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;h.\u0275\u0275property("value",e),h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e)}}function od(n,t){n&1&&(h.\u0275\u0275elementStart(0,"th",34),h.\u0275\u0275text(1,"Route"),h.\u0275\u0275elementEnd())}function rd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"td",35)(1,"div",36),h.\u0275\u0275text(2),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(3,"div",37),h.\u0275\u0275text(4),h.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate(e.routeName),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("Driver: ",e.driver)}}function ld(n,t){n&1&&(h.\u0275\u0275elementStart(0,"th",34),h.\u0275\u0275text(1,"Times"),h.\u0275\u0275elementEnd())}function sd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"td",35)(1,"div",36),h.\u0275\u0275text(2),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(3,"div",37),h.\u0275\u0275text(4),h.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("Depart ",e.departure),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("Return ",e.returnTime)}}function cd(n,t){n&1&&(h.\u0275\u0275elementStart(0,"th",34),h.\u0275\u0275text(1,"Capacity"),h.\u0275\u0275elementEnd())}function dd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"td",35)(1,"div",36),h.\u0275\u0275text(2),h.\u0275\u0275elementEnd(),h.\u0275\u0275element(3,"mat-progress-bar",38),h.\u0275\u0275elementEnd()),n&2){let e=t.$implicit,i=h.\u0275\u0275nextContext();h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate2("",e.assigned,"/",e.capacity),h.\u0275\u0275advance(),h.\u0275\u0275property("value",i.utilization(e))}}function md(n,t){n&1&&(h.\u0275\u0275elementStart(0,"th",34),h.\u0275\u0275text(1,"Status"),h.\u0275\u0275elementEnd())}function pd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"td",35)(1,"mat-chip",39),h.\u0275\u0275text(2),h.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=h.\u0275\u0275nextContext();h.\u0275\u0275advance(),h.\u0275\u0275property("color",i.statusColor(e.status)),h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.status)}}function ud(n,t){n&1&&(h.\u0275\u0275elementStart(0,"th",34),h.\u0275\u0275text(1,"Notes"),h.\u0275\u0275elementEnd())}function gd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"td",35),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.notes||"\u2014")}}function fd(n,t){n&1&&h.\u0275\u0275element(0,"th",34)}function _d(n,t){if(n&1){let e=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"td",35)(1,"button",5),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"on-time"))}),h.\u0275\u0275text(2,"On time"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(3,"button",40),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"delayed"))}),h.\u0275\u0275text(4,"Delay"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(5,"button",41),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"maintenance"))}),h.\u0275\u0275text(6,"Maintenance"),h.\u0275\u0275elementEnd()()}}function hd(n,t){n&1&&h.\u0275\u0275element(0,"tr",42)}function Cd(n,t){n&1&&h.\u0275\u0275element(0,"tr",43)}function bd(n,t){if(n&1&&(h.\u0275\u0275elementStart(0,"tr",44)(1,"td"),h.\u0275\u0275text(2,"No routes match your filters."),h.\u0275\u0275elementEnd()()),n&2){let e=h.\u0275\u0275nextContext();h.\u0275\u0275advance(),h.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function xd(n,t){if(n&1){let e=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div")(3,"div",36),h.\u0275\u0275text(4),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(5,"div",37),h.\u0275\u0275text(6),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(7,"mat-chip",39),h.\u0275\u0275text(8),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(9,"div",37),h.\u0275\u0275text(10),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(11,"div",37),h.\u0275\u0275text(12),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(13,"div",37),h.\u0275\u0275text(14),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(15,"div",47)(16,"button",5),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"on-time"))}),h.\u0275\u0275text(17,"On time"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(18,"button",40),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"delayed"))}),h.\u0275\u0275text(19,"Delay"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(20,"button",41),h.\u0275\u0275listener("click",function(){let o=h.\u0275\u0275restoreView(e).$implicit,r=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(r.setStatus(o,"maintenance"))}),h.\u0275\u0275text(21,"Maintenance"),h.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=h.\u0275\u0275nextContext();h.\u0275\u0275advance(4),h.\u0275\u0275textInterpolate(e.routeName),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("Driver: ",e.driver),h.\u0275\u0275advance(),h.\u0275\u0275property("color",i.statusColor(e.status)),h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.status),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate2("Depart ",e.departure," \xB7 Return ",e.returnTime),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate2("Capacity: ",e.assigned,"/",e.capacity),h.\u0275\u0275advance(2),h.\u0275\u0275textInterpolate1("Notes: ",e.notes||"\u2014")}}var ln=class n{constructor(t){this.mock=t;this.refresh()}routes=[];filtered=[];drivers=[];displayedColumns=["route","times","capacity","status","notes","actions"];search="";status="all";driver="all";refresh(){this.routes=this.mock.getTransportRoutes()||[],this.drivers=Array.from(new Set(this.routes.map(t=>t.driver).filter(Boolean))),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.routes.filter(e=>{let i=!t||[e.routeName,e.driver,e.notes].some(P=>(P||"").toLowerCase().includes(t)),o=this.status==="all"||e.status===this.status,r=this.driver==="all"||e.driver===this.driver;return i&&o&&r})}utilization(t){return t.capacity?Math.min(100,Math.round(t.assigned/t.capacity*100)):0}statusColor(t){return t==="on-time"?"primary":t==="delayed"?"accent":"warn"}setStatus(t,e){this.mock.updateRouteStatus(t.id,e),this.refresh()}exportCsv(){let t=["Route","Driver","Departure","Return","Capacity","Assigned","Status","Notes"],e=this.filtered.map(k=>[k.routeName,k.driver,k.departure,k.returnTime,k.capacity,k.assigned,k.status,k.notes||""]),i=[t,...e].map(k=>k.map(A=>`"${(A??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(o),P=document.createElement("a");P.href=r,P.download="transport-routes.csv",P.click(),URL.revokeObjectURL(r)}static \u0275fac=function(e){return new(e||n)(h.\u0275\u0275directiveInject(F))};static \u0275cmp=h.\u0275\u0275defineComponent({type:n,selectors:[["app-transport"]],decls:63,vars:8,consts:[[1,"transport","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","route, driver, note",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","on-time"],["value","delayed"],["value","maintenance"],[3,"value",4,"ngFor","ngForOf"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","route"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","times"],["matColumnDef","capacity"],["matColumnDef","status"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["mode","determinate",3,"value"],["selected","",3,"color"],["mat-stroked-button","","color","accent",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],[1,"action-row"]],template:function(e,i){e&1&&(h.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),h.\u0275\u0275text(4,"School Management"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(5,"div",3),h.\u0275\u0275text(6,"Transport"),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(7,"div",4)(8,"button",5),h.\u0275\u0275listener("click",function(){return i.exportCsv()}),h.\u0275\u0275text(9,"Export CSV"),h.\u0275\u0275elementEnd()()(),h.\u0275\u0275elementStart(10,"mat-card",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),h.\u0275\u0275text(14,"Search"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(15,"input",9),h.\u0275\u0275twoWayListener("ngModelChange",function(r){return h.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),h.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(16,"mat-form-field",8)(17,"mat-label"),h.\u0275\u0275text(18,"Status"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(19,"mat-select",10),h.\u0275\u0275twoWayListener("ngModelChange",function(r){return h.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),h.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),h.\u0275\u0275elementStart(20,"mat-option",11),h.\u0275\u0275text(21,"All"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(22,"mat-option",12),h.\u0275\u0275text(23,"On time"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(24,"mat-option",13),h.\u0275\u0275text(25,"Delayed"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(26,"mat-option",14),h.\u0275\u0275text(27,"Maintenance"),h.\u0275\u0275elementEnd()()(),h.\u0275\u0275elementStart(28,"mat-form-field",8)(29,"mat-label"),h.\u0275\u0275text(30,"Driver"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(31,"mat-select",10),h.\u0275\u0275twoWayListener("ngModelChange",function(r){return h.\u0275\u0275twoWayBindingSet(i.driver,r)||(i.driver=r),r}),h.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),h.\u0275\u0275elementStart(32,"mat-option",11),h.\u0275\u0275text(33,"All"),h.\u0275\u0275elementEnd(),h.\u0275\u0275template(34,ad,2,2,"mat-option",15),h.\u0275\u0275elementEnd()()()(),h.\u0275\u0275elementStart(35,"mat-card",16)(36,"div",17),h.\u0275\u0275text(37,"Routes"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(38,"div",18)(39,"table",19),h.\u0275\u0275elementContainerStart(40,20),h.\u0275\u0275template(41,od,2,0,"th",21)(42,rd,5,2,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(43,23),h.\u0275\u0275template(44,ld,2,0,"th",21)(45,sd,5,2,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(46,24),h.\u0275\u0275template(47,cd,2,0,"th",21)(48,dd,4,3,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(49,25),h.\u0275\u0275template(50,md,2,0,"th",21)(51,pd,3,2,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(52,26),h.\u0275\u0275template(53,ud,2,0,"th",21)(54,gd,2,1,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(55,27),h.\u0275\u0275template(56,fd,1,0,"th",21)(57,_d,7,0,"td",22),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275template(58,hd,1,0,"tr",28)(59,Cd,1,0,"tr",29)(60,bd,3,1,"tr",30),h.\u0275\u0275elementEnd()()(),h.\u0275\u0275elementStart(61,"mat-card",31),h.\u0275\u0275template(62,xd,22,9,"div",32),h.\u0275\u0275elementEnd()()),e&2&&(h.\u0275\u0275advance(15),h.\u0275\u0275twoWayProperty("ngModel",i.search),h.\u0275\u0275advance(4),h.\u0275\u0275twoWayProperty("ngModel",i.status),h.\u0275\u0275advance(12),h.\u0275\u0275twoWayProperty("ngModel",i.driver),h.\u0275\u0275advance(3),h.\u0275\u0275property("ngForOf",i.drivers),h.\u0275\u0275advance(5),h.\u0275\u0275property("dataSource",i.filtered),h.\u0275\u0275advance(19),h.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),h.\u0275\u0275advance(),h.\u0275\u0275property("matRowDefColumns",i.displayedColumns),h.\u0275\u0275advance(3),h.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[nd,Ri.NgForOf,id,Qe.DefaultValueAccessor,Qe.NgControlStatus,Qe.NgModel,D,Li.MatButton,Ye.MatInput,Ye.MatFormField,Ye.MatLabel,sn.MatSelect,sn.MatOption,Q.MatTable,Q.MatHeaderCellDef,Q.MatHeaderRowDef,Q.MatColumnDef,Q.MatCellDef,Q.MatRowDef,Q.MatHeaderCell,Q.MatCell,Q.MatHeaderRow,Q.MatRow,Q.MatNoDataRow,Ni.MatCard,Bi.MatChip,zi.MatProgressBar],styles:[".transport[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#2f60c6,#1a8be8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}@media (max-width: 768px){.transport[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as Md}from"@angular/common";import{FormsModule as vd}from"@angular/forms";import*as E from"@angular/core";import*as Vi from"@angular/common";import*as Je from"@angular/forms";import*as Hi from"@angular/material/button";import*as Ke from"@angular/material/input";import*as dn from"@angular/material/select";import*as ji from"@angular/material/card";import*as Wi from"@angular/material/toolbar";import*as $i from"@angular/material/chips";function yd(n,t){if(n&1&&(E.\u0275\u0275elementStart(0,"mat-option",19),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;E.\u0275\u0275property("value",e),E.\u0275\u0275advance(),E.\u0275\u0275textInterpolate(e)}}function wd(n,t){if(n&1&&(E.\u0275\u0275elementStart(0,"mat-option",19),E.\u0275\u0275text(1),E.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;E.\u0275\u0275property("value",e),E.\u0275\u0275advance(),E.\u0275\u0275textInterpolate(e)}}function Sd(n,t){if(n&1&&(E.\u0275\u0275elementStart(0,"mat-card",20)(1,"div",21)(2,"div")(3,"div",22),E.\u0275\u0275text(4),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",23),E.\u0275\u0275text(6),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(7,"mat-chip",24),E.\u0275\u0275text(8),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(9,"div",25)(10,"div")(11,"strong"),E.\u0275\u0275text(12,"Advisor:"),E.\u0275\u0275elementEnd(),E.\u0275\u0275text(13),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(14,"div")(15,"strong"),E.\u0275\u0275text(16,"Members:"),E.\u0275\u0275elementEnd(),E.\u0275\u0275text(17),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(18,"div")(19,"strong"),E.\u0275\u0275text(20,"Next event:"),E.\u0275\u0275elementEnd(),E.\u0275\u0275text(21),E.\u0275\u0275elementEnd()()()),n&2){let e=t.$implicit;E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate(e.name),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.category||"General"),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.meetingDay),E.\u0275\u0275advance(5),E.\u0275\u0275textInterpolate1(" ",e.advisor),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",e.members),E.\u0275\u0275advance(4),E.\u0275\u0275textInterpolate1(" ",e.nextEvent||"--")}}function Pd(n,t){if(n&1&&(E.\u0275\u0275elementStart(0,"div",26)(1,"div",27)(2,"div",28),E.\u0275\u0275text(3),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(4,"mat-chip",24),E.\u0275\u0275text(5),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(6,"div",29),E.\u0275\u0275text(7),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(8,"div",29),E.\u0275\u0275text(9),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(10,"div",29),E.\u0275\u0275text(11),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(12,"div",29),E.\u0275\u0275text(13),E.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;E.\u0275\u0275advance(3),E.\u0275\u0275textInterpolate(e.name),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.meetingDay),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate(e.category||"General"),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate1("Advisor: ",e.advisor),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate1("Members: ",e.members),E.\u0275\u0275advance(2),E.\u0275\u0275textInterpolate1("Next: ",e.nextEvent||"--")}}var cn=class n{constructor(t){this.mock=t;this.clubs=this.mock.getClubs(),this.categories=Array.from(new Set(this.clubs.map(e=>e.category||"").filter(Boolean))),this.applyFilters()}clubs=[];filtered=[];categories=[];days=["Mon","Tue","Wed","Thu","Fri","Sat"];search="";category="all";meetingDay="all";applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.clubs.filter(e=>{let i=!t||[e.name,e.advisor,e.category].some(P=>(P||"").toLowerCase().includes(t)),o=this.category==="all"||e.category===this.category,r=this.meetingDay==="all"||e.meetingDay===this.meetingDay;return i&&o&&r})}addClub(){this.mock.addClub({name:"New Club",advisor:"Advisor",meetingDay:"Mon",members:0}),this.clubs=this.mock.getClubs(),this.categories=Array.from(new Set(this.clubs.map(t=>t.category||"").filter(Boolean))),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(E.\u0275\u0275directiveInject(F))};static \u0275cmp=E.\u0275\u0275defineComponent({type:n,selectors:[["app-clubs"]],decls:36,vars:7,consts:[[1,"fees-page","clubs-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","name, advisor, category",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","desktop-only"],["class","club-card mat-elevation-z2",4,"ngFor","ngForOf"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],[1,"club-card","mat-elevation-z2"],[1,"card-head"],[1,"club-name"],[1,"club-meta"],["color","primary","selected",""],[1,"club-body"],[1,"mobile-card"],[1,"card-row"],[1,"cell-title"],[1,"cell-meta"]],template:function(e,i){e&1&&(E.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),E.\u0275\u0275text(4,"School Management"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(5,"div",4),E.\u0275\u0275text(6,"Clubs & Activities"),E.\u0275\u0275elementEnd()(),E.\u0275\u0275element(7,"span",5),E.\u0275\u0275elementStart(8,"button",6),E.\u0275\u0275listener("click",function(){return i.addClub()}),E.\u0275\u0275elementStart(9,"span",7),E.\u0275\u0275text(10,"+"),E.\u0275\u0275elementEnd(),E.\u0275\u0275text(11," Add club "),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),E.\u0275\u0275text(16,"Search"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(17,"input",11),E.\u0275\u0275twoWayListener("ngModelChange",function(r){return E.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),E.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),E.\u0275\u0275text(20,"Category"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(21,"mat-select",12),E.\u0275\u0275twoWayListener("ngModelChange",function(r){return E.\u0275\u0275twoWayBindingSet(i.category,r)||(i.category=r),r}),E.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),E.\u0275\u0275elementStart(22,"mat-option",13),E.\u0275\u0275text(23,"All"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(24,yd,2,2,"mat-option",14),E.\u0275\u0275elementEnd()(),E.\u0275\u0275elementStart(25,"mat-form-field",10)(26,"mat-label"),E.\u0275\u0275text(27,"Meeting day"),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(28,"mat-select",12),E.\u0275\u0275twoWayListener("ngModelChange",function(r){return E.\u0275\u0275twoWayBindingSet(i.meetingDay,r)||(i.meetingDay=r),r}),E.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),E.\u0275\u0275elementStart(29,"mat-option",13),E.\u0275\u0275text(30,"All"),E.\u0275\u0275elementEnd(),E.\u0275\u0275template(31,wd,2,2,"mat-option",14),E.\u0275\u0275elementEnd()()()(),E.\u0275\u0275elementStart(32,"div",15),E.\u0275\u0275template(33,Sd,22,6,"mat-card",16),E.\u0275\u0275elementEnd(),E.\u0275\u0275elementStart(34,"div",17),E.\u0275\u0275template(35,Pd,14,6,"div",18),E.\u0275\u0275elementEnd()()),e&2&&(E.\u0275\u0275advance(17),E.\u0275\u0275twoWayProperty("ngModel",i.search),E.\u0275\u0275advance(4),E.\u0275\u0275twoWayProperty("ngModel",i.category),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",i.categories),E.\u0275\u0275advance(4),E.\u0275\u0275twoWayProperty("ngModel",i.meetingDay),E.\u0275\u0275advance(3),E.\u0275\u0275property("ngForOf",i.days),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",i.filtered),E.\u0275\u0275advance(2),E.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[Md,Vi.NgForOf,vd,Je.DefaultValueAccessor,Je.NgControlStatus,Je.NgModel,D,Hi.MatButton,Ke.MatInput,Ke.MatFormField,Ke.MatLabel,dn.MatSelect,dn.MatOption,ji.MatCard,Wi.MatToolbar,$i.MatChip],styles:[".fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.clubs-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}.club-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.card-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.club-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.club-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.club-body[_ngcontent-%COMP%]{margin-top:8px;display:grid;gap:4px;font-size:.95rem}.desktop-only[_ngcontent-%COMP%]{display:block!important}.mobile-only[_ngcontent-%COMP%]{display:none!important}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:grid!important;gap:12px}.fees-page[_ngcontent-%COMP%]{padding:10px}}"]})};import{CommonModule as Od}from"@angular/common";import{FormsModule as Ed}from"@angular/forms";import*as S from"@angular/core";import*as Ui from"@angular/common";import*as Ze from"@angular/forms";import*as Gi from"@angular/material/button";import*as Xe from"@angular/material/input";import*as pn from"@angular/material/select";import*as Y from"@angular/material/table";import*as un from"@angular/material/card";import*as qi from"@angular/material/toolbar";import*as Qi from"@angular/material/chips";function kd(n,t){n&1&&(S.\u0275\u0275elementStart(0,"th",31),S.\u0275\u0275text(1,"Name"),S.\u0275\u0275elementEnd())}function Td(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"td",32)(1,"div",33),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",34),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.name),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("Prefers: ",e.preferredChannel||"email")}}function Id(n,t){n&1&&(S.\u0275\u0275elementStart(0,"th",31),S.\u0275\u0275text(1,"Students"),S.\u0275\u0275elementEnd())}function Dd(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"div",34),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;S.\u0275\u0275advance(),S.\u0275\u0275textInterpolate(e)}}function Fd(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"td",32),S.\u0275\u0275template(1,Dd,2,1,"div",35),S.\u0275\u0275elementEnd()),n&2){let e=t.$implicit,i=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275property("ngForOf",i.studentNames(e.studentIds))}}function Ad(n,t){n&1&&(S.\u0275\u0275elementStart(0,"th",31),S.\u0275\u0275text(1,"Contact"),S.\u0275\u0275elementEnd())}function Rd(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"td",32)(1,"div"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",34),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.email||"--"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.phone||"--")}}function Ld(n,t){n&1&&(S.\u0275\u0275elementStart(0,"th",31),S.\u0275\u0275text(1,"Last contact"),S.\u0275\u0275elementEnd())}function Nd(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"td",32),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;S.\u0275\u0275advance(),S.\u0275\u0275textInterpolate(e.lastContact||"--")}}function Bd(n,t){n&1&&S.\u0275\u0275element(0,"th",31)}function zd(n,t){if(n&1){let e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"td",32)(1,"button",36),S.\u0275\u0275listener("click",function(){let o=S.\u0275\u0275restoreView(e).$implicit,r=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(r.sendMessage(o))}),S.\u0275\u0275text(2,"Message"),S.\u0275\u0275elementEnd()()}}function Vd(n,t){n&1&&S.\u0275\u0275element(0,"tr",37)}function Hd(n,t){n&1&&S.\u0275\u0275element(0,"tr",38)}function jd(n,t){if(n&1&&(S.\u0275\u0275elementStart(0,"tr",39)(1,"td")(2,"div",40),S.\u0275\u0275text(3,"No parents match your filters."),S.\u0275\u0275elementEnd()()()),n&2){let e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(),S.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Wd(n,t){if(n&1){let e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",41)(1,"div",42)(2,"div",33),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"mat-chip",43),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd()(),S.\u0275\u0275elementStart(6,"div",34),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"div",34),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"div",34),S.\u0275\u0275text(11),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",34),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"div",44)(15,"button",45),S.\u0275\u0275listener("click",function(){let o=S.\u0275\u0275restoreView(e).$implicit,r=S.\u0275\u0275nextContext();return S.\u0275\u0275resetView(r.sendMessage(o))}),S.\u0275\u0275text(16,"Message"),S.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(e.name),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.preferredChannel||"email"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("Students: ",i.studentNames(e.studentIds).join(", ")||"--"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("Email: ",e.email||"--"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("Phone: ",e.phone||"--"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("Last contact: ",e.lastContact||"--")}}var mn=class n{constructor(t){this.mock=t;t.getStudents().forEach(i=>this.studentsMap.set(i.id,`${i.firstName} ${i.lastName}`)),this.parents=t.getParents(),this.applyFilters()}parents=[];filtered=[];studentsMap=new Map;search="";channel="all";displayedColumns=["name","students","contact","lastContact","actions"];studentNames(t){return(t||[]).map(e=>this.studentsMap.get(e)||`ID ${e}`)}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.parents.filter(e=>{let i=!t||[e.name,e.email,e.phone].some(r=>(r||"").toLowerCase().includes(t))||this.studentNames(e.studentIds).some(r=>r.toLowerCase().includes(t)),o=this.channel==="all"||e.preferredChannel===this.channel;return i&&o})}addParent(){this.mock.addParent({name:"New Parent",email:"parent@example.com",preferredChannel:"email"}),this.parents=this.mock.getParents(),this.applyFilters()}sendMessage(t){t.lastContact=new Date().toISOString().slice(0,10),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(S.\u0275\u0275directiveInject(F))};static \u0275cmp=S.\u0275\u0275defineComponent({type:n,selectors:[["app-parents"]],decls:53,vars:6,consts:[[1,"fees-page","parents-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","name, student, email",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","email"],["value","sms"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"fees-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","students"],["matColumnDef","contact"],["matColumnDef","lastContact"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["class","cell-meta",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""],[1,"action-row"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){e&1&&(S.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),S.\u0275\u0275text(4,"School Management"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"div",4),S.\u0275\u0275text(6,"Parents & Messaging"),S.\u0275\u0275elementEnd()(),S.\u0275\u0275element(7,"span",5),S.\u0275\u0275elementStart(8,"button",6),S.\u0275\u0275listener("click",function(){return i.addParent()}),S.\u0275\u0275elementStart(9,"span",7),S.\u0275\u0275text(10,"+"),S.\u0275\u0275elementEnd(),S.\u0275\u0275text(11," Add parent "),S.\u0275\u0275elementEnd()(),S.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),S.\u0275\u0275text(16,"Search"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"input",11),S.\u0275\u0275twoWayListener("ngModelChange",function(r){return S.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),S.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),S.\u0275\u0275elementEnd()(),S.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),S.\u0275\u0275text(20,"Channel"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"mat-select",12),S.\u0275\u0275twoWayListener("ngModelChange",function(r){return S.\u0275\u0275twoWayBindingSet(i.channel,r)||(i.channel=r),r}),S.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),S.\u0275\u0275elementStart(22,"mat-option",13),S.\u0275\u0275text(23,"All"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(24,"mat-option",14),S.\u0275\u0275text(25,"Email"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(26,"mat-option",15),S.\u0275\u0275text(27,"SMS"),S.\u0275\u0275elementEnd()()()()(),S.\u0275\u0275elementStart(28,"mat-card",16)(29,"mat-card-title"),S.\u0275\u0275text(30,"Parent directory"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(31,"div",17)(32,"table",18),S.\u0275\u0275elementContainerStart(33,19),S.\u0275\u0275template(34,kd,2,0,"th",20)(35,Td,5,2,"td",21),S.\u0275\u0275elementContainerEnd(),S.\u0275\u0275elementContainerStart(36,22),S.\u0275\u0275template(37,Id,2,0,"th",20)(38,Fd,2,1,"td",21),S.\u0275\u0275elementContainerEnd(),S.\u0275\u0275elementContainerStart(39,23),S.\u0275\u0275template(40,Ad,2,0,"th",20)(41,Rd,5,2,"td",21),S.\u0275\u0275elementContainerEnd(),S.\u0275\u0275elementContainerStart(42,24),S.\u0275\u0275template(43,Ld,2,0,"th",20)(44,Nd,2,1,"td",21),S.\u0275\u0275elementContainerEnd(),S.\u0275\u0275elementContainerStart(45,25),S.\u0275\u0275template(46,Bd,1,0,"th",20)(47,zd,3,0,"td",21),S.\u0275\u0275elementContainerEnd(),S.\u0275\u0275template(48,Vd,1,0,"tr",26)(49,Hd,1,0,"tr",27)(50,jd,4,1,"tr",28),S.\u0275\u0275elementEnd()()(),S.\u0275\u0275elementStart(51,"mat-card",29),S.\u0275\u0275template(52,Wd,17,6,"div",30),S.\u0275\u0275elementEnd()()),e&2&&(S.\u0275\u0275advance(17),S.\u0275\u0275twoWayProperty("ngModel",i.search),S.\u0275\u0275advance(4),S.\u0275\u0275twoWayProperty("ngModel",i.channel),S.\u0275\u0275advance(11),S.\u0275\u0275property("dataSource",i.filtered),S.\u0275\u0275advance(16),S.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),S.\u0275\u0275advance(),S.\u0275\u0275property("matRowDefColumns",i.displayedColumns),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[Od,Ui.NgForOf,Ed,Ze.DefaultValueAccessor,Ze.NgControlStatus,Ze.NgModel,D,Gi.MatButton,Xe.MatInput,Xe.MatFormField,Xe.MatLabel,pn.MatSelect,pn.MatOption,Y.MatTable,Y.MatHeaderCellDef,Y.MatHeaderRowDef,Y.MatColumnDef,Y.MatCellDef,Y.MatRowDef,Y.MatHeaderCell,Y.MatCell,Y.MatHeaderRow,Y.MatRow,Y.MatNoDataRow,un.MatCard,un.MatCardTitle,qi.MatToolbar,Qi.MatChip],styles:[".fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.parents-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.filters-card[_ngcontent-%COMP%]{border-radius:12px}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as $d}from"@angular/common";import{FormsModule as Ud}from"@angular/forms";import*as C from"@angular/core";import*as Yi from"@angular/common";import*as et from"@angular/forms";import*as Ji from"@angular/material/button";import*as tt from"@angular/material/input";import*as fn from"@angular/material/select";import*as J from"@angular/material/table";import*as _n from"@angular/material/card";import*as Ki from"@angular/material/toolbar";import*as Zi from"@angular/material/checkbox";import*as Xi from"@angular/material/chips";function Gd(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"mat-option",36),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275property("value",e),C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e)}}function qd(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Student"),C.\u0275\u0275elementEnd())}function Qd(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38)(1,"div",39),C.\u0275\u0275text(2),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(3,"div",40),C.\u0275\u0275text(4),C.\u0275\u0275elementEnd()()),n&2){let e,i=t.$implicit,o=C.\u0275\u0275nextContext();C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate(i.studentName),C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate(((e=o.profile(i.studentId))==null?null:e.conditions)||"\u2014")}}function Yd(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Date"),C.\u0275\u0275elementEnd())}function Jd(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.date)}}function Kd(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Symptom"),C.\u0275\u0275elementEnd())}function Zd(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.symptom)}}function Xd(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Action"),C.\u0275\u0275elementEnd())}function em(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.actionTaken)}}function tm(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Notified"),C.\u0275\u0275elementEnd())}function nm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38)(1,"mat-chip",41),C.\u0275\u0275text(2),C.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275property("color",e.notifiedParent?"primary":"warn"),C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate1(" ",e.notifiedParent?"Yes":"No"," ")}}function im(n,t){n&1&&C.\u0275\u0275element(0,"tr",42)}function am(n,t){n&1&&C.\u0275\u0275element(0,"tr",43)}function om(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"tr",44)(1,"td"),C.\u0275\u0275text(2,"No incidents match your filters."),C.\u0275\u0275elementEnd()()),n&2){let e=C.\u0275\u0275nextContext();C.\u0275\u0275advance(),C.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function rm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div",39),C.\u0275\u0275text(3),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(4,"mat-chip",41),C.\u0275\u0275text(5),C.\u0275\u0275elementEnd()(),C.\u0275\u0275elementStart(6,"div",40),C.\u0275\u0275text(7),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(8,"div",40),C.\u0275\u0275text(9),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(10,"div",40),C.\u0275\u0275text(11),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(12,"div",40),C.\u0275\u0275text(13),C.\u0275\u0275elementEnd()()),n&2){let e,i=t.$implicit,o=C.\u0275\u0275nextContext();C.\u0275\u0275advance(3),C.\u0275\u0275textInterpolate(i.studentName),C.\u0275\u0275advance(),C.\u0275\u0275property("color",i.notifiedParent?"primary":"warn"),C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate1(" ",i.notifiedParent?"Notified":"Pending"," "),C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate(((e=o.profile(i.studentId))==null?null:e.conditions)||"\u2014"),C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate1("Symptom: ",i.symptom),C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate1("Action: ",i.actionTaken),C.\u0275\u0275advance(2),C.\u0275\u0275textInterpolate1("Date: ",i.date)}}function lm(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Student"),C.\u0275\u0275elementEnd())}function sm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit,i=C.\u0275\u0275nextContext();C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(i.studentName(e.studentId))}}function cm(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Conditions"),C.\u0275\u0275elementEnd())}function dm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.conditions||"\u2014")}}function mm(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Allergies"),C.\u0275\u0275elementEnd())}function pm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.allergies||"\u2014")}}function um(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Medications"),C.\u0275\u0275elementEnd())}function gm(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.medications||"\u2014")}}function fm(n,t){n&1&&(C.\u0275\u0275elementStart(0,"th",37),C.\u0275\u0275text(1,"Emergency contact"),C.\u0275\u0275elementEnd())}function _m(n,t){if(n&1&&(C.\u0275\u0275elementStart(0,"td",38),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;C.\u0275\u0275advance(),C.\u0275\u0275textInterpolate(e.emergencyContact||"\u2014")}}function hm(n,t){n&1&&C.\u0275\u0275element(0,"tr",42)}function Cm(n,t){n&1&&C.\u0275\u0275element(0,"tr",43)}var gn=class n{constructor(t){this.mock=t;this.students=this.mock.getStudents(),this.incidents=t.getHealthIncidents(),this.profiles=t.getHealthProfiles(),this.conditions=Array.from(new Set(this.profiles.map(e=>e.conditions||"").filter(Boolean))),this.applyFilters()}incidents=[];filtered=[];profiles=[];students=[];conditions=[];search="";condition="all";notifiedOnly=!1;displayedColumns=["student","date","symptom","action","notified"];profileCols=["student","conditions","allergies","meds","emergency"];studentName(t){let e=this.students.find(i=>i.id===t);return e?`${e.firstName} ${e.lastName}`:`ID ${t}`}profile(t){return this.profiles.find(e=>e.studentId===t)}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.incidents.filter(e=>{let i=!t||[e.studentName,e.symptom,e.actionTaken,this.profile(e.studentId)?.conditions||""].some(P=>(P||"").toLowerCase().includes(t)),o=this.condition==="all"||(this.profile(e.studentId)?.conditions||"")===this.condition,r=!this.notifiedOnly||e.notifiedParent;return i&&o&&r})}addIncident(){this.mock.addHealthIncident({studentName:"New Student",studentId:0,symptom:"Symptom",actionTaken:"Logged",notifiedParent:!1}),this.incidents=this.mock.getHealthIncidents(),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(C.\u0275\u0275directiveInject(F))};static \u0275cmp=C.\u0275\u0275defineComponent({type:n,selectors:[["app-health"]],decls:74,vars:11,consts:[[1,"fees-page","health-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","student, symptom, condition",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","symptom"],["matColumnDef","action"],["matColumnDef","notified"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","conditions"],["matColumnDef","allergies"],["matColumnDef","meds"],["matColumnDef","emergency"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"]],template:function(e,i){e&1&&(C.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),C.\u0275\u0275text(4,"School Management"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(5,"div",4),C.\u0275\u0275text(6,"Health & Medical"),C.\u0275\u0275elementEnd()(),C.\u0275\u0275element(7,"span",5),C.\u0275\u0275elementStart(8,"button",6),C.\u0275\u0275listener("click",function(){return i.addIncident()}),C.\u0275\u0275elementStart(9,"span",7),C.\u0275\u0275text(10,"+"),C.\u0275\u0275elementEnd(),C.\u0275\u0275text(11," Log incident "),C.\u0275\u0275elementEnd()(),C.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),C.\u0275\u0275text(16,"Search"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(17,"input",11),C.\u0275\u0275twoWayListener("ngModelChange",function(r){return C.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),C.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),C.\u0275\u0275elementEnd()(),C.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),C.\u0275\u0275text(20,"Condition"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(21,"mat-select",12),C.\u0275\u0275twoWayListener("ngModelChange",function(r){return C.\u0275\u0275twoWayBindingSet(i.condition,r)||(i.condition=r),r}),C.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),C.\u0275\u0275elementStart(22,"mat-option",13),C.\u0275\u0275text(23,"All"),C.\u0275\u0275elementEnd(),C.\u0275\u0275template(24,Gd,2,2,"mat-option",14),C.\u0275\u0275elementEnd()(),C.\u0275\u0275elementStart(25,"mat-checkbox",15),C.\u0275\u0275twoWayListener("ngModelChange",function(r){return C.\u0275\u0275twoWayBindingSet(i.notifiedOnly,r)||(i.notifiedOnly=r),r}),C.\u0275\u0275listener("change",function(){return i.applyFilters()}),C.\u0275\u0275text(26,"Parent notified"),C.\u0275\u0275elementEnd()()(),C.\u0275\u0275elementStart(27,"mat-card",16)(28,"mat-card-title"),C.\u0275\u0275text(29,"Health incidents"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(30,"div",17)(31,"table",18),C.\u0275\u0275elementContainerStart(32,19),C.\u0275\u0275template(33,qd,2,0,"th",20)(34,Qd,5,2,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(35,22),C.\u0275\u0275template(36,Yd,2,0,"th",20)(37,Jd,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(38,23),C.\u0275\u0275template(39,Kd,2,0,"th",20)(40,Zd,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(41,24),C.\u0275\u0275template(42,Xd,2,0,"th",20)(43,em,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(44,25),C.\u0275\u0275template(45,tm,2,0,"th",20)(46,nm,3,2,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275template(47,im,1,0,"tr",26)(48,am,1,0,"tr",27)(49,om,3,1,"tr",28),C.\u0275\u0275elementEnd()()(),C.\u0275\u0275elementStart(50,"mat-card",29),C.\u0275\u0275template(51,rm,14,7,"div",30),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(52,"mat-card",16)(53,"mat-card-title"),C.\u0275\u0275text(54,"Health profiles"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(55,"div",17)(56,"table",31),C.\u0275\u0275elementContainerStart(57,19),C.\u0275\u0275template(58,lm,2,0,"th",20)(59,sm,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(60,32),C.\u0275\u0275template(61,cm,2,0,"th",20)(62,dm,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(63,33),C.\u0275\u0275template(64,mm,2,0,"th",20)(65,pm,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(66,34),C.\u0275\u0275template(67,um,2,0,"th",20)(68,gm,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275elementContainerStart(69,35),C.\u0275\u0275template(70,fm,2,0,"th",20)(71,_m,2,1,"td",21),C.\u0275\u0275elementContainerEnd(),C.\u0275\u0275template(72,hm,1,0,"tr",26)(73,Cm,1,0,"tr",27),C.\u0275\u0275elementEnd()()()()),e&2&&(C.\u0275\u0275advance(17),C.\u0275\u0275twoWayProperty("ngModel",i.search),C.\u0275\u0275advance(4),C.\u0275\u0275twoWayProperty("ngModel",i.condition),C.\u0275\u0275advance(3),C.\u0275\u0275property("ngForOf",i.conditions),C.\u0275\u0275advance(),C.\u0275\u0275twoWayProperty("ngModel",i.notifiedOnly),C.\u0275\u0275advance(6),C.\u0275\u0275property("dataSource",i.filtered),C.\u0275\u0275advance(16),C.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),C.\u0275\u0275advance(),C.\u0275\u0275property("matRowDefColumns",i.displayedColumns),C.\u0275\u0275advance(3),C.\u0275\u0275property("ngForOf",i.filtered),C.\u0275\u0275advance(5),C.\u0275\u0275property("dataSource",i.profiles),C.\u0275\u0275advance(16),C.\u0275\u0275property("matHeaderRowDef",i.profileCols),C.\u0275\u0275advance(),C.\u0275\u0275property("matRowDefColumns",i.profileCols))},dependencies:[$d,Yi.NgForOf,Ud,et.DefaultValueAccessor,et.NgControlStatus,et.NgModel,D,Ji.MatButton,tt.MatInput,tt.MatFormField,tt.MatLabel,fn.MatSelect,fn.MatOption,J.MatTable,J.MatHeaderCellDef,J.MatHeaderRowDef,J.MatColumnDef,J.MatCellDef,J.MatRowDef,J.MatHeaderCell,J.MatCell,J.MatHeaderRow,J.MatRow,J.MatNoDataRow,_n.MatCard,_n.MatCardTitle,Ki.MatToolbar,Zi.MatCheckbox,Xi.MatChip],styles:[".health-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as bm}from"@angular/common";import{FormsModule as xm}from"@angular/forms";import*as x from"@angular/core";import*as ea from"@angular/common";import*as nt from"@angular/forms";import*as ta from"@angular/material/button";import*as it from"@angular/material/input";import*as Cn from"@angular/material/select";import*as K from"@angular/material/table";import*as bn from"@angular/material/card";import*as na from"@angular/material/toolbar";import*as ia from"@angular/material/chips";function Mm(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"mat-option",35),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;x.\u0275\u0275property("value",e),x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e)}}function vm(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"ID"),x.\u0275\u0275elementEnd())}function ym(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e.id)}}function wm(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"Name"),x.\u0275\u0275elementEnd())}function Sm(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37)(1,"div",38),x.\u0275\u0275text(2),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(3,"div",39),x.\u0275\u0275text(4),x.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate(e.name),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate(e.category)}}function Pm(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"Status"),x.\u0275\u0275elementEnd())}function Om(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37)(1,"mat-chip",40),x.\u0275\u0275text(2),x.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=x.\u0275\u0275nextContext();x.\u0275\u0275advance(),x.\u0275\u0275property("color",i.statusColor(e.status)),x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e.status)}}function Em(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"Assigned"),x.\u0275\u0275elementEnd())}function km(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37)(1,"div",38),x.\u0275\u0275text(2),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(3,"div",39),x.\u0275\u0275text(4),x.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate(e.assignedTo||"\u2014"),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate(e.assignedType||"")}}function Tm(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"Location"),x.\u0275\u0275elementEnd())}function Im(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e.location||"\u2014")}}function Dm(n,t){n&1&&(x.\u0275\u0275elementStart(0,"th",36),x.\u0275\u0275text(1,"Due"),x.\u0275\u0275elementEnd())}function Fm(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"td",37),x.\u0275\u0275text(1),x.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e.dueDate||"\u2014")}}function Am(n,t){n&1&&x.\u0275\u0275element(0,"th",36)}function Rm(n,t){if(n&1){let e=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"td",37)(1,"button",41),x.\u0275\u0275listener("click",function(){let o=x.\u0275\u0275restoreView(e).$implicit,r=x.\u0275\u0275nextContext();return x.\u0275\u0275resetView(r.toggleAssign(o))}),x.\u0275\u0275text(2,"Toggle assign"),x.\u0275\u0275elementEnd()()}}function Lm(n,t){n&1&&x.\u0275\u0275element(0,"tr",42)}function Nm(n,t){n&1&&x.\u0275\u0275element(0,"tr",43)}function Bm(n,t){if(n&1&&(x.\u0275\u0275elementStart(0,"tr",44)(1,"td"),x.\u0275\u0275text(2,"No assets match your filters."),x.\u0275\u0275elementEnd()()),n&2){let e=x.\u0275\u0275nextContext();x.\u0275\u0275advance(),x.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function zm(n,t){if(n&1){let e=x.\u0275\u0275getCurrentView();x.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div",38),x.\u0275\u0275text(3),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(4,"mat-chip",40),x.\u0275\u0275text(5),x.\u0275\u0275elementEnd()(),x.\u0275\u0275elementStart(6,"div",39),x.\u0275\u0275text(7),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(8,"div",39),x.\u0275\u0275text(9),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(10,"div",39),x.\u0275\u0275text(11),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(12,"div",39),x.\u0275\u0275text(13),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(14,"div",47)(15,"button",41),x.\u0275\u0275listener("click",function(){let o=x.\u0275\u0275restoreView(e).$implicit,r=x.\u0275\u0275nextContext();return x.\u0275\u0275resetView(r.toggleAssign(o))}),x.\u0275\u0275text(16,"Toggle assign"),x.\u0275\u0275elementEnd()()()}if(n&2){let e=t.$implicit,i=x.\u0275\u0275nextContext();x.\u0275\u0275advance(3),x.\u0275\u0275textInterpolate(e.name),x.\u0275\u0275advance(),x.\u0275\u0275property("color",i.statusColor(e.status)),x.\u0275\u0275advance(),x.\u0275\u0275textInterpolate(e.status),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate2("",e.id," \xB7 ",e.category),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate2("Assigned: ",e.assignedTo||"\u2014"," ",e.assignedType?"("+e.assignedType+")":""),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate1("Location: ",e.location||"\u2014"),x.\u0275\u0275advance(2),x.\u0275\u0275textInterpolate1("Due: ",e.dueDate||"\u2014")}}var hn=class n{constructor(t){this.mock=t;this.assets=this.mock.getAssets(),this.categories=Array.from(new Set(this.assets.map(e=>e.category))),this.applyFilters()}assets=[];filtered=[];categories=[];search="";category="all";status="all";displayedColumns=["id","name","status","assigned","location","due","actions"];statusColor(t){return t==="maintenance"?"warn":t==="assigned"?"accent":"primary"}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.assets.filter(e=>{let i=!t||[e.name,e.id,e.assignedTo,e.location,e.category].some(P=>(P||"").toLowerCase().includes(t)),o=this.category==="all"||e.category===this.category,r=this.status==="all"||e.status===this.status;return i&&o&&r})}toggleAssign(t){t.status==="assigned"?this.mock.updateAsset(t.id,{status:"available",assignedTo:void 0,assignedType:void 0,dueDate:void 0}):this.mock.updateAsset(t.id,{status:"assigned",assignedTo:"Student",assignedType:"student",dueDate:new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10)}),this.assets=this.mock.getAssets(),this.applyFilters()}addAsset(){this.mock.addAsset({name:"New Asset",category:"General",status:"available",location:"Store"}),this.assets=this.mock.getAssets(),this.categories=Array.from(new Set(this.assets.map(t=>t.category))),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(x.\u0275\u0275directiveInject(F))};static \u0275cmp=x.\u0275\u0275defineComponent({type:n,selectors:[["app-assets"]],decls:68,vars:8,consts:[[1,"fees-page","assets-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","name, id, assigned",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["value","available"],["value","assigned"],["value","maintenance"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","status"],["matColumnDef","assigned"],["matColumnDef","location"],["matColumnDef","due"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],[1,"action-row"]],template:function(e,i){e&1&&(x.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),x.\u0275\u0275text(4,"School Management"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(5,"div",4),x.\u0275\u0275text(6,"Assets & Inventory"),x.\u0275\u0275elementEnd()(),x.\u0275\u0275element(7,"span",5),x.\u0275\u0275elementStart(8,"button",6),x.\u0275\u0275listener("click",function(){return i.addAsset()}),x.\u0275\u0275elementStart(9,"span",7),x.\u0275\u0275text(10,"+"),x.\u0275\u0275elementEnd(),x.\u0275\u0275text(11," Add asset "),x.\u0275\u0275elementEnd()(),x.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),x.\u0275\u0275text(16,"Search"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(17,"input",11),x.\u0275\u0275twoWayListener("ngModelChange",function(r){return x.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),x.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),x.\u0275\u0275elementEnd()(),x.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),x.\u0275\u0275text(20,"Category"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(21,"mat-select",12),x.\u0275\u0275twoWayListener("ngModelChange",function(r){return x.\u0275\u0275twoWayBindingSet(i.category,r)||(i.category=r),r}),x.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),x.\u0275\u0275elementStart(22,"mat-option",13),x.\u0275\u0275text(23,"All"),x.\u0275\u0275elementEnd(),x.\u0275\u0275template(24,Mm,2,2,"mat-option",14),x.\u0275\u0275elementEnd()(),x.\u0275\u0275elementStart(25,"mat-form-field",10)(26,"mat-label"),x.\u0275\u0275text(27,"Status"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(28,"mat-select",12),x.\u0275\u0275twoWayListener("ngModelChange",function(r){return x.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),x.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),x.\u0275\u0275elementStart(29,"mat-option",13),x.\u0275\u0275text(30,"All"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(31,"mat-option",15),x.\u0275\u0275text(32,"Available"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(33,"mat-option",16),x.\u0275\u0275text(34,"Assigned"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(35,"mat-option",17),x.\u0275\u0275text(36,"Maintenance"),x.\u0275\u0275elementEnd()()()()(),x.\u0275\u0275elementStart(37,"mat-card",18)(38,"mat-card-title"),x.\u0275\u0275text(39,"Asset catalog"),x.\u0275\u0275elementEnd(),x.\u0275\u0275elementStart(40,"div",19)(41,"table",20),x.\u0275\u0275elementContainerStart(42,21),x.\u0275\u0275template(43,vm,2,0,"th",22)(44,ym,2,1,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(45,24),x.\u0275\u0275template(46,wm,2,0,"th",22)(47,Sm,5,2,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(48,25),x.\u0275\u0275template(49,Pm,2,0,"th",22)(50,Om,3,2,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(51,26),x.\u0275\u0275template(52,Em,2,0,"th",22)(53,km,5,2,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(54,27),x.\u0275\u0275template(55,Tm,2,0,"th",22)(56,Im,2,1,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(57,28),x.\u0275\u0275template(58,Dm,2,0,"th",22)(59,Fm,2,1,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275elementContainerStart(60,29),x.\u0275\u0275template(61,Am,1,0,"th",22)(62,Rm,3,0,"td",23),x.\u0275\u0275elementContainerEnd(),x.\u0275\u0275template(63,Lm,1,0,"tr",30)(64,Nm,1,0,"tr",31)(65,Bm,3,1,"tr",32),x.\u0275\u0275elementEnd()()(),x.\u0275\u0275elementStart(66,"mat-card",33),x.\u0275\u0275template(67,zm,17,9,"div",34),x.\u0275\u0275elementEnd()()),e&2&&(x.\u0275\u0275advance(17),x.\u0275\u0275twoWayProperty("ngModel",i.search),x.\u0275\u0275advance(4),x.\u0275\u0275twoWayProperty("ngModel",i.category),x.\u0275\u0275advance(3),x.\u0275\u0275property("ngForOf",i.categories),x.\u0275\u0275advance(4),x.\u0275\u0275twoWayProperty("ngModel",i.status),x.\u0275\u0275advance(13),x.\u0275\u0275property("dataSource",i.filtered),x.\u0275\u0275advance(22),x.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),x.\u0275\u0275advance(),x.\u0275\u0275property("matRowDefColumns",i.displayedColumns),x.\u0275\u0275advance(3),x.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[bm,ea.NgForOf,xm,nt.DefaultValueAccessor,nt.NgControlStatus,nt.NgModel,D,ta.MatButton,it.MatInput,it.MatFormField,it.MatLabel,Cn.MatSelect,Cn.MatOption,K.MatTable,K.MatHeaderCellDef,K.MatHeaderRowDef,K.MatColumnDef,K.MatCellDef,K.MatRowDef,K.MatHeaderCell,K.MatCell,K.MatHeaderRow,K.MatRow,K.MatNoDataRow,bn.MatCard,bn.MatCardTitle,na.MatToolbar,ia.MatChip],styles:[".assets-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as Vm}from"@angular/common";import{FormsModule as Hm}from"@angular/forms";import*as y from"@angular/core";import*as aa from"@angular/common";import*as at from"@angular/forms";import*as oa from"@angular/material/button";import*as ot from"@angular/material/input";import*as Mn from"@angular/material/select";import*as Z from"@angular/material/table";import*as vn from"@angular/material/card";import*as ra from"@angular/material/toolbar";import*as la from"@angular/material/chips";var sa=()=>[];function jm(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"Title"),y.\u0275\u0275elementEnd())}function Wm(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36)(1,"div",37),y.\u0275\u0275text(2),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(3,"div",38),y.\u0275\u0275text(4),y.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate(e.title),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate(e.category||"General")}}function $m(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"Date"),y.\u0275\u0275elementEnd())}function Um(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36),y.\u0275\u0275text(1),y.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;y.\u0275\u0275advance(),y.\u0275\u0275textInterpolate2("",e.date," ",e.time||"")}}function Gm(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"Location"),y.\u0275\u0275elementEnd())}function qm(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36),y.\u0275\u0275text(1),y.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;y.\u0275\u0275advance(),y.\u0275\u0275textInterpolate(e.location||"\u2014")}}function Qm(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"Audience"),y.\u0275\u0275elementEnd())}function Ym(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36),y.\u0275\u0275text(1),y.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;y.\u0275\u0275advance(),y.\u0275\u0275textInterpolate(e.audience)}}function Jm(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"Status"),y.\u0275\u0275elementEnd())}function Km(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36)(1,"mat-chip",39),y.\u0275\u0275text(2),y.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;y.\u0275\u0275advance(),y.\u0275\u0275property("color",e.status==="completed"?"accent":"primary"),y.\u0275\u0275advance(),y.\u0275\u0275textInterpolate(e.status)}}function Zm(n,t){n&1&&(y.\u0275\u0275elementStart(0,"th",35),y.\u0275\u0275text(1,"RSVPs"),y.\u0275\u0275elementEnd())}function Xm(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"td",36),y.\u0275\u0275text(1),y.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;y.\u0275\u0275advance(),y.\u0275\u0275textInterpolate((e.rsvps||y.\u0275\u0275pureFunction0(1,sa)).length)}}function e0(n,t){n&1&&y.\u0275\u0275element(0,"tr",40)}function t0(n,t){n&1&&y.\u0275\u0275element(0,"tr",41)}function n0(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"tr",42)(1,"td"),y.\u0275\u0275text(2,"No events match your filters."),y.\u0275\u0275elementEnd()()),n&2){let e=y.\u0275\u0275nextContext();y.\u0275\u0275advance(),y.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function i0(n,t){if(n&1&&(y.\u0275\u0275elementStart(0,"div",43)(1,"div",44)(2,"div",37),y.\u0275\u0275text(3),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(4,"mat-chip",45),y.\u0275\u0275text(5),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(6,"div",38),y.\u0275\u0275text(7),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(8,"div",38),y.\u0275\u0275text(9),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(10,"div",38),y.\u0275\u0275text(11),y.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;y.\u0275\u0275advance(3),y.\u0275\u0275textInterpolate(e.title),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate(e.status||"upcoming"),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate3("",e.date," ",e.time||""," \xB7 ",e.location||"\u2014"),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate2("",e.category||"General"," \xB7 ",e.audience),y.\u0275\u0275advance(2),y.\u0275\u0275textInterpolate1("RSVPs: ",(e.rsvps||y.\u0275\u0275pureFunction0(8,sa)).length)}}var xn=class n{constructor(t){this.mock=t;this.events=t.getEvents(),this.categories=Array.from(new Set(this.events.map(e=>e.category||"").filter(Boolean))),this.applyFilters()}events=[];filtered=[];categories=[];search="";audience="all";status="all";displayedColumns=["title","date","location","audience","status","rsvps"];applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.events.filter(e=>{let i=!t||[e.title,e.location,e.category,e.audience].some(P=>(P||"").toLowerCase().includes(t)),o=this.audience==="all"||e.audience===this.audience,r=this.status==="all"||e.status===this.status;return i&&o&&r})}addEvent(){this.mock.addEvent({title:"New Event",date:new Date().toISOString().slice(0,10),audience:"all",status:"upcoming"}),this.events=this.mock.getEvents(),this.categories=Array.from(new Set(this.events.map(t=>t.category||"").filter(Boolean))),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(y.\u0275\u0275directiveInject(F))};static \u0275cmp=y.\u0275\u0275defineComponent({type:n,selectors:[["app-events"]],decls:68,vars:7,consts:[[1,"fees-page","events-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","title, location, audience",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","students"],["value","teachers"],["value","parents"],["value","upcoming"],["value","completed"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","location"],["matColumnDef","audience"],["matColumnDef","status"],["matColumnDef","rsvps"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""]],template:function(e,i){e&1&&(y.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),y.\u0275\u0275text(4,"School Management"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(5,"div",4),y.\u0275\u0275text(6,"Events & Calendar"),y.\u0275\u0275elementEnd()(),y.\u0275\u0275element(7,"span",5),y.\u0275\u0275elementStart(8,"button",6),y.\u0275\u0275listener("click",function(){return i.addEvent()}),y.\u0275\u0275elementStart(9,"span",7),y.\u0275\u0275text(10,"+"),y.\u0275\u0275elementEnd(),y.\u0275\u0275text(11," Add event "),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),y.\u0275\u0275text(16,"Search"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(17,"input",11),y.\u0275\u0275twoWayListener("ngModelChange",function(r){return y.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),y.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),y.\u0275\u0275elementEnd()(),y.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),y.\u0275\u0275text(20,"Audience"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(21,"mat-select",12),y.\u0275\u0275twoWayListener("ngModelChange",function(r){return y.\u0275\u0275twoWayBindingSet(i.audience,r)||(i.audience=r),r}),y.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),y.\u0275\u0275elementStart(22,"mat-option",13),y.\u0275\u0275text(23,"All"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(24,"mat-option",14),y.\u0275\u0275text(25,"Students"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(26,"mat-option",15),y.\u0275\u0275text(27,"Teachers"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(28,"mat-option",16),y.\u0275\u0275text(29,"Parents"),y.\u0275\u0275elementEnd()()(),y.\u0275\u0275elementStart(30,"mat-form-field",10)(31,"mat-label"),y.\u0275\u0275text(32,"Status"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(33,"mat-select",12),y.\u0275\u0275twoWayListener("ngModelChange",function(r){return y.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),y.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),y.\u0275\u0275elementStart(34,"mat-option",13),y.\u0275\u0275text(35,"All"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(36,"mat-option",17),y.\u0275\u0275text(37,"Upcoming"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(38,"mat-option",18),y.\u0275\u0275text(39,"Completed"),y.\u0275\u0275elementEnd()()()()(),y.\u0275\u0275elementStart(40,"mat-card",19)(41,"mat-card-title"),y.\u0275\u0275text(42,"Events"),y.\u0275\u0275elementEnd(),y.\u0275\u0275elementStart(43,"div",20)(44,"table",21),y.\u0275\u0275elementContainerStart(45,22),y.\u0275\u0275template(46,jm,2,0,"th",23)(47,Wm,5,2,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275elementContainerStart(48,25),y.\u0275\u0275template(49,$m,2,0,"th",23)(50,Um,2,2,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275elementContainerStart(51,26),y.\u0275\u0275template(52,Gm,2,0,"th",23)(53,qm,2,1,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275elementContainerStart(54,27),y.\u0275\u0275template(55,Qm,2,0,"th",23)(56,Ym,2,1,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275elementContainerStart(57,28),y.\u0275\u0275template(58,Jm,2,0,"th",23)(59,Km,3,2,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275elementContainerStart(60,29),y.\u0275\u0275template(61,Zm,2,0,"th",23)(62,Xm,2,2,"td",24),y.\u0275\u0275elementContainerEnd(),y.\u0275\u0275template(63,e0,1,0,"tr",30)(64,t0,1,0,"tr",31)(65,n0,3,1,"tr",32),y.\u0275\u0275elementEnd()()(),y.\u0275\u0275elementStart(66,"mat-card",33),y.\u0275\u0275template(67,i0,12,9,"div",34),y.\u0275\u0275elementEnd()()),e&2&&(y.\u0275\u0275advance(17),y.\u0275\u0275twoWayProperty("ngModel",i.search),y.\u0275\u0275advance(4),y.\u0275\u0275twoWayProperty("ngModel",i.audience),y.\u0275\u0275advance(12),y.\u0275\u0275twoWayProperty("ngModel",i.status),y.\u0275\u0275advance(11),y.\u0275\u0275property("dataSource",i.filtered),y.\u0275\u0275advance(19),y.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),y.\u0275\u0275advance(),y.\u0275\u0275property("matRowDefColumns",i.displayedColumns),y.\u0275\u0275advance(3),y.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[Vm,aa.NgForOf,Hm,at.DefaultValueAccessor,at.NgControlStatus,at.NgModel,D,oa.MatButton,ot.MatInput,ot.MatFormField,ot.MatLabel,Mn.MatSelect,Mn.MatOption,Z.MatTable,Z.MatHeaderCellDef,Z.MatHeaderRowDef,Z.MatColumnDef,Z.MatCellDef,Z.MatRowDef,Z.MatHeaderCell,Z.MatCell,Z.MatHeaderRow,Z.MatRow,Z.MatNoDataRow,vn.MatCard,vn.MatCardTitle,ra.MatToolbar,la.MatChip],styles:[".events-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as a0}from"@angular/common";import{FormsModule as o0}from"@angular/forms";import*as v from"@angular/core";import*as ca from"@angular/common";import*as rt from"@angular/forms";import*as da from"@angular/material/button";import*as lt from"@angular/material/input";import*as wn from"@angular/material/select";import*as X from"@angular/material/table";import*as Sn from"@angular/material/card";import*as ma from"@angular/material/toolbar";import*as pa from"@angular/material/chips";function r0(n,t){n&1&&(v.\u0275\u0275elementStart(0,"th",35),v.\u0275\u0275text(1,"Resource"),v.\u0275\u0275elementEnd())}function l0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"td",36)(1,"div",37),v.\u0275\u0275text(2),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(3,"div",38),v.\u0275\u0275text(4),v.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=v.\u0275\u0275nextContext();v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(e.resourceName),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate(i.resourceType(e.resourceId))}}function s0(n,t){n&1&&(v.\u0275\u0275elementStart(0,"th",35),v.\u0275\u0275text(1,"Date"),v.\u0275\u0275elementEnd())}function c0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"td",36),v.\u0275\u0275text(1),v.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;v.\u0275\u0275advance(),v.\u0275\u0275textInterpolate3("",e.date," ",e.start,"-",e.end)}}function d0(n,t){n&1&&(v.\u0275\u0275elementStart(0,"th",35),v.\u0275\u0275text(1,"Requester"),v.\u0275\u0275elementEnd())}function m0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"td",36),v.\u0275\u0275text(1),v.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;v.\u0275\u0275advance(),v.\u0275\u0275textInterpolate(e.requester)}}function p0(n,t){n&1&&(v.\u0275\u0275elementStart(0,"th",35),v.\u0275\u0275text(1,"Purpose"),v.\u0275\u0275elementEnd())}function u0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"td",36),v.\u0275\u0275text(1),v.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;v.\u0275\u0275advance(),v.\u0275\u0275textInterpolate(e.purpose)}}function g0(n,t){n&1&&(v.\u0275\u0275elementStart(0,"th",35),v.\u0275\u0275text(1,"Status"),v.\u0275\u0275elementEnd())}function f0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"td",36)(1,"mat-chip",39),v.\u0275\u0275text(2),v.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;v.\u0275\u0275advance(),v.\u0275\u0275property("color",e.conflict?"warn":e.status==="approved"?"primary":"accent"),v.\u0275\u0275advance(),v.\u0275\u0275textInterpolate1(" ",e.conflict?"Conflict":e.status," ")}}function _0(n,t){n&1&&v.\u0275\u0275element(0,"th",35)}function h0(n,t){if(n&1){let e=v.\u0275\u0275getCurrentView();v.\u0275\u0275elementStart(0,"td",36)(1,"button",40),v.\u0275\u0275listener("click",function(){let o=v.\u0275\u0275restoreView(e).$implicit,r=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(r.approve(o))}),v.\u0275\u0275text(2,"Approve"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(3,"button",41),v.\u0275\u0275listener("click",function(){let o=v.\u0275\u0275restoreView(e).$implicit,r=v.\u0275\u0275nextContext();return v.\u0275\u0275resetView(r.toggleConflict(o))}),v.\u0275\u0275text(4,"Toggle conflict"),v.\u0275\u0275elementEnd()()}}function C0(n,t){n&1&&v.\u0275\u0275element(0,"tr",42)}function b0(n,t){n&1&&v.\u0275\u0275element(0,"tr",43)}function x0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"tr",44)(1,"td"),v.\u0275\u0275text(2,"No bookings match your filters."),v.\u0275\u0275elementEnd()()),n&2){let e=v.\u0275\u0275nextContext();v.\u0275\u0275advance(),v.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function M0(n,t){if(n&1&&(v.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div",37),v.\u0275\u0275text(3),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(4,"mat-chip",39),v.\u0275\u0275text(5),v.\u0275\u0275elementEnd()(),v.\u0275\u0275elementStart(6,"div",38),v.\u0275\u0275text(7),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(8,"div",38),v.\u0275\u0275text(9),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(10,"div",38),v.\u0275\u0275text(11),v.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;v.\u0275\u0275advance(3),v.\u0275\u0275textInterpolate(e.resourceName),v.\u0275\u0275advance(),v.\u0275\u0275property("color",e.conflict?"warn":e.status==="approved"?"primary":"accent"),v.\u0275\u0275advance(),v.\u0275\u0275textInterpolate1(" ",e.conflict?"Conflict":e.status," "),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate3("",e.date," ",e.start,"-",e.end),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate1("Requester: ",e.requester),v.\u0275\u0275advance(2),v.\u0275\u0275textInterpolate1("Purpose: ",e.purpose)}}var yn=class n{constructor(t){this.mock=t;this.resources=t.getResources(),this.bookings=t.getBookings(),this.applyFilters()}resources=[];bookings=[];filtered=[];search="";type="all";status="all";displayedColumns=["resource","date","requester","purpose","status","actions"];resourceType(t){let e=this.resources.find(i=>i.id===t);return e?e.type:""}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.bookings.filter(e=>{let i=!t||[e.resourceName,e.requester,e.purpose].some(P=>(P||"").toLowerCase().includes(t)),o=this.type==="all"||this.resourceType(e.resourceId)===this.type,r=this.status==="all"||e.status===this.status;return i&&o&&r})}approve(t){this.mock.updateBooking(t.id,{status:"approved",conflict:!1}),this.bookings=this.mock.getBookings(),this.applyFilters()}toggleConflict(t){this.mock.updateBooking(t.id,{conflict:!t.conflict}),this.bookings=this.mock.getBookings(),this.applyFilters()}addBooking(){this.mock.addBooking({resourceId:this.resources[0]?.id||0,resourceName:this.resources[0]?.name||"Room",requester:"Requester",purpose:"Meeting"}),this.bookings=this.mock.getBookings(),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(v.\u0275\u0275directiveInject(F))};static \u0275cmp=v.\u0275\u0275defineComponent({type:n,selectors:[["app-resources"]],decls:68,vars:7,consts:[[1,"fees-page","resources-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],[1,"icon"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","resource or requester",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","room"],["value","lab"],["value","ground"],["value","approved"],["value","pending"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","resource"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","requester"],["matColumnDef","purpose"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"]],template:function(e,i){e&1&&(v.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),v.\u0275\u0275text(4,"School Management"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(5,"div",4),v.\u0275\u0275text(6,"Resources & Bookings"),v.\u0275\u0275elementEnd()(),v.\u0275\u0275element(7,"span",5),v.\u0275\u0275elementStart(8,"button",6),v.\u0275\u0275listener("click",function(){return i.addBooking()}),v.\u0275\u0275elementStart(9,"span",7),v.\u0275\u0275text(10,"+"),v.\u0275\u0275elementEnd(),v.\u0275\u0275text(11," New booking "),v.\u0275\u0275elementEnd()(),v.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),v.\u0275\u0275text(16,"Search"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(17,"input",11),v.\u0275\u0275twoWayListener("ngModelChange",function(r){return v.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),v.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),v.\u0275\u0275elementEnd()(),v.\u0275\u0275elementStart(18,"mat-form-field",10)(19,"mat-label"),v.\u0275\u0275text(20,"Type"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(21,"mat-select",12),v.\u0275\u0275twoWayListener("ngModelChange",function(r){return v.\u0275\u0275twoWayBindingSet(i.type,r)||(i.type=r),r}),v.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),v.\u0275\u0275elementStart(22,"mat-option",13),v.\u0275\u0275text(23,"All"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(24,"mat-option",14),v.\u0275\u0275text(25,"Room"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(26,"mat-option",15),v.\u0275\u0275text(27,"Lab"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(28,"mat-option",16),v.\u0275\u0275text(29,"Ground"),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275elementStart(30,"mat-form-field",10)(31,"mat-label"),v.\u0275\u0275text(32,"Status"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(33,"mat-select",12),v.\u0275\u0275twoWayListener("ngModelChange",function(r){return v.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),v.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),v.\u0275\u0275elementStart(34,"mat-option",13),v.\u0275\u0275text(35,"All"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(36,"mat-option",17),v.\u0275\u0275text(37,"Approved"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(38,"mat-option",18),v.\u0275\u0275text(39,"Pending"),v.\u0275\u0275elementEnd()()()()(),v.\u0275\u0275elementStart(40,"mat-card",19)(41,"mat-card-title"),v.\u0275\u0275text(42,"Bookings"),v.\u0275\u0275elementEnd(),v.\u0275\u0275elementStart(43,"div",20)(44,"table",21),v.\u0275\u0275elementContainerStart(45,22),v.\u0275\u0275template(46,r0,2,0,"th",23)(47,l0,5,2,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275elementContainerStart(48,25),v.\u0275\u0275template(49,s0,2,0,"th",23)(50,c0,2,3,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275elementContainerStart(51,26),v.\u0275\u0275template(52,d0,2,0,"th",23)(53,m0,2,1,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275elementContainerStart(54,27),v.\u0275\u0275template(55,p0,2,0,"th",23)(56,u0,2,1,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275elementContainerStart(57,28),v.\u0275\u0275template(58,g0,2,0,"th",23)(59,f0,3,2,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275elementContainerStart(60,29),v.\u0275\u0275template(61,_0,1,0,"th",23)(62,h0,5,0,"td",24),v.\u0275\u0275elementContainerEnd(),v.\u0275\u0275template(63,C0,1,0,"tr",30)(64,b0,1,0,"tr",31)(65,x0,3,1,"tr",32),v.\u0275\u0275elementEnd()()(),v.\u0275\u0275elementStart(66,"mat-card",33),v.\u0275\u0275template(67,M0,12,8,"div",34),v.\u0275\u0275elementEnd()()),e&2&&(v.\u0275\u0275advance(17),v.\u0275\u0275twoWayProperty("ngModel",i.search),v.\u0275\u0275advance(4),v.\u0275\u0275twoWayProperty("ngModel",i.type),v.\u0275\u0275advance(12),v.\u0275\u0275twoWayProperty("ngModel",i.status),v.\u0275\u0275advance(11),v.\u0275\u0275property("dataSource",i.filtered),v.\u0275\u0275advance(19),v.\u0275\u0275property("matHeaderRowDef",i.displayedColumns),v.\u0275\u0275advance(),v.\u0275\u0275property("matRowDefColumns",i.displayedColumns),v.\u0275\u0275advance(3),v.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[a0,ca.NgForOf,o0,rt.DefaultValueAccessor,rt.NgControlStatus,rt.NgModel,D,da.MatButton,lt.MatInput,lt.MatFormField,lt.MatLabel,wn.MatSelect,wn.MatOption,X.MatTable,X.MatHeaderCellDef,X.MatHeaderRowDef,X.MatColumnDef,X.MatCellDef,X.MatRowDef,X.MatHeaderCell,X.MatCell,X.MatHeaderRow,X.MatRow,X.MatNoDataRow,Sn.MatCard,Sn.MatCardTitle,ma.MatToolbar,pa.MatChip],styles:[".resources-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as v0}from"@angular/common";import{FormsModule as y0}from"@angular/forms";import*as f from"@angular/core";import*as ua from"@angular/common";import*as st from"@angular/forms";import*as ct from"@angular/material/input";import*as On from"@angular/material/select";import*as ee from"@angular/material/table";import*as En from"@angular/material/card";import*as ga from"@angular/material/toolbar";import*as fa from"@angular/material/chips";function w0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Teacher"),f.\u0275\u0275elementEnd())}function S0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.teacherName)}}function P0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Goal"),f.\u0275\u0275elementEnd())}function O0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.title)}}function E0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Due"),f.\u0275\u0275elementEnd())}function k0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.dueDate)}}function T0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Status"),f.\u0275\u0275elementEnd())}function I0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34)(1,"mat-chip",35),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275property("color",i.statusColor(e.status)),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.status)}}function D0(n,t){n&1&&f.\u0275\u0275element(0,"tr",36)}function F0(n,t){n&1&&f.\u0275\u0275element(0,"tr",37)}function A0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"tr",38)(1,"td"),f.\u0275\u0275text(2,"No goals match your filters."),f.\u0275\u0275elementEnd()()),n&2){let e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275attribute("colspan",e.goalCols.length)}}function R0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Teacher"),f.\u0275\u0275elementEnd())}function L0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.teacherName)}}function N0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Date"),f.\u0275\u0275elementEnd())}function B0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.date)}}function z0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Observer"),f.\u0275\u0275elementEnd())}function V0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.observer)}}function H0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Summary"),f.\u0275\u0275elementEnd())}function j0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.summary)}}function W0(n,t){n&1&&f.\u0275\u0275element(0,"tr",36)}function $0(n,t){n&1&&f.\u0275\u0275element(0,"tr",37)}function U0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"tr",38)(1,"td"),f.\u0275\u0275text(2,"No feedback logged."),f.\u0275\u0275elementEnd()()),n&2){let e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275attribute("colspan",e.feedbackCols.length)}}function G0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Teacher"),f.\u0275\u0275elementEnd())}function q0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.teacherName)}}function Q0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Course"),f.\u0275\u0275elementEnd())}function Y0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.title)}}function J0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Hours"),f.\u0275\u0275elementEnd())}function K0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.hours)}}function Z0(n,t){n&1&&(f.\u0275\u0275elementStart(0,"th",33),f.\u0275\u0275text(1,"Status"),f.\u0275\u0275elementEnd())}function X0(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"td",34)(1,"mat-chip",35),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275property("color",i.pdColor(e.status)),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.status)}}function ep(n,t){n&1&&f.\u0275\u0275element(0,"tr",36)}function tp(n,t){n&1&&f.\u0275\u0275element(0,"tr",37)}function np(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"tr",38)(1,"td"),f.\u0275\u0275text(2,"No professional development records."),f.\u0275\u0275elementEnd()()),n&2){let e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275attribute("colspan",e.pdCols.length)}}function ip(n,t){if(n&1&&(f.\u0275\u0275elementStart(0,"div",39)(1,"div",40)(2,"div",41),f.\u0275\u0275text(3),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"mat-chip",35),f.\u0275\u0275text(5),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(6,"div",42),f.\u0275\u0275text(7),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(8,"div",42),f.\u0275\u0275text(9),f.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=f.\u0275\u0275nextContext();f.\u0275\u0275advance(3),f.\u0275\u0275textInterpolate(e.teacherName),f.\u0275\u0275advance(),f.\u0275\u0275property("color",i.statusColor(e.status)),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.status),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(e.title),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Due: ",e.dueDate)}}var Pn=class n{constructor(t){this.mock=t;this.goals=t.getTeacherGoals(),this.feedback=t.getTeacherFeedback(),this.pd=t.getTeacherPd(),this.applyFilters()}goals=[];filteredGoals=[];feedback=[];pd=[];search="";status="all";goalCols=["teacher","title","due","status"];feedbackCols=["teacher","date","observer","summary"];pdCols=["teacher","title","hours","status"];statusColor(t){return t==="at-risk"?"warn":t==="completed"?"accent":"primary"}pdColor(t){return t==="completed"?"primary":t==="in-progress"?"accent":"warn"}applyFilters(){let t=this.search.trim().toLowerCase();this.filteredGoals=this.goals.filter(e=>{let i=!t||[e.teacherName,e.title].some(r=>(r||"").toLowerCase().includes(t)),o=this.status==="all"||e.status===this.status;return i&&o})}static \u0275fac=function(e){return new(e||n)(f.\u0275\u0275directiveInject(F))};static \u0275cmp=f.\u0275\u0275defineComponent({type:n,selectors:[["app-performance"]],decls:87,vars:12,consts:[[1,"fees-page","performance-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","teacher or goal",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","on-track"],["value","at-risk"],["value","completed"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","teacher"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","due"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","date"],["matColumnDef","observer"],["matColumnDef","summary"],["matColumnDef","hours"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],[1,"cell-strong"],[1,"cell-sub"]],template:function(e,i){e&1&&(f.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),f.\u0275\u0275text(4,"School Management"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(5,"div",4),f.\u0275\u0275text(6,"Staff Performance & Goals"),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(7,"mat-card",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),f.\u0275\u0275text(11,"Search"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(12,"input",8),f.\u0275\u0275twoWayListener("ngModelChange",function(r){return f.\u0275\u0275twoWayBindingSet(i.search,r)||(i.search=r),r}),f.\u0275\u0275listener("ngModelChange",function(){return i.applyFilters()}),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(13,"mat-form-field",7)(14,"mat-label"),f.\u0275\u0275text(15,"Status"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(16,"mat-select",9),f.\u0275\u0275twoWayListener("ngModelChange",function(r){return f.\u0275\u0275twoWayBindingSet(i.status,r)||(i.status=r),r}),f.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),f.\u0275\u0275elementStart(17,"mat-option",10),f.\u0275\u0275text(18,"All"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(19,"mat-option",11),f.\u0275\u0275text(20,"On track"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(21,"mat-option",12),f.\u0275\u0275text(22,"At risk"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(23,"mat-option",13),f.\u0275\u0275text(24,"Completed"),f.\u0275\u0275elementEnd()()()()(),f.\u0275\u0275elementStart(25,"mat-card",14)(26,"mat-card-title"),f.\u0275\u0275text(27,"Goals"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(28,"div",15)(29,"table",16),f.\u0275\u0275elementContainerStart(30,17),f.\u0275\u0275template(31,w0,2,0,"th",18)(32,S0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(33,20),f.\u0275\u0275template(34,P0,2,0,"th",18)(35,O0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(36,21),f.\u0275\u0275template(37,E0,2,0,"th",18)(38,k0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(39,22),f.\u0275\u0275template(40,T0,2,0,"th",18)(41,I0,3,2,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275template(42,D0,1,0,"tr",23)(43,F0,1,0,"tr",24)(44,A0,3,1,"tr",25),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(45,"mat-card",14)(46,"mat-card-title"),f.\u0275\u0275text(47,"Feedback"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(48,"div",15)(49,"table",26),f.\u0275\u0275elementContainerStart(50,17),f.\u0275\u0275template(51,R0,2,0,"th",18)(52,L0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(53,27),f.\u0275\u0275template(54,N0,2,0,"th",18)(55,B0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(56,28),f.\u0275\u0275template(57,z0,2,0,"th",18)(58,V0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(59,29),f.\u0275\u0275template(60,H0,2,0,"th",18)(61,j0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275template(62,W0,1,0,"tr",23)(63,$0,1,0,"tr",24)(64,U0,3,1,"tr",25),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(65,"mat-card",14)(66,"mat-card-title"),f.\u0275\u0275text(67,"Professional Development"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(68,"div",15)(69,"table",26),f.\u0275\u0275elementContainerStart(70,17),f.\u0275\u0275template(71,G0,2,0,"th",18)(72,q0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(73,20),f.\u0275\u0275template(74,Q0,2,0,"th",18)(75,Y0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(76,30),f.\u0275\u0275template(77,J0,2,0,"th",18)(78,K0,2,1,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(79,22),f.\u0275\u0275template(80,Z0,2,0,"th",18)(81,X0,3,2,"td",19),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275template(82,ep,1,0,"tr",23)(83,tp,1,0,"tr",24)(84,np,3,1,"tr",25),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(85,"mat-card",31),f.\u0275\u0275template(86,ip,10,5,"div",32),f.\u0275\u0275elementEnd()()),e&2&&(f.\u0275\u0275advance(12),f.\u0275\u0275twoWayProperty("ngModel",i.search),f.\u0275\u0275advance(4),f.\u0275\u0275twoWayProperty("ngModel",i.status),f.\u0275\u0275advance(13),f.\u0275\u0275property("dataSource",i.filteredGoals),f.\u0275\u0275advance(13),f.\u0275\u0275property("matHeaderRowDef",i.goalCols),f.\u0275\u0275advance(),f.\u0275\u0275property("matRowDefColumns",i.goalCols),f.\u0275\u0275advance(6),f.\u0275\u0275property("dataSource",i.feedback),f.\u0275\u0275advance(13),f.\u0275\u0275property("matHeaderRowDef",i.feedbackCols),f.\u0275\u0275advance(),f.\u0275\u0275property("matRowDefColumns",i.feedbackCols),f.\u0275\u0275advance(6),f.\u0275\u0275property("dataSource",i.pd),f.\u0275\u0275advance(13),f.\u0275\u0275property("matHeaderRowDef",i.pdCols),f.\u0275\u0275advance(),f.\u0275\u0275property("matRowDefColumns",i.pdCols),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngForOf",i.filteredGoals))},dependencies:[v0,ua.NgForOf,y0,st.DefaultValueAccessor,st.NgControlStatus,st.NgModel,D,ct.MatInput,ct.MatFormField,ct.MatLabel,On.MatSelect,On.MatOption,ee.MatTable,ee.MatHeaderCellDef,ee.MatHeaderRowDef,ee.MatColumnDef,ee.MatCellDef,ee.MatRowDef,ee.MatHeaderCell,ee.MatCell,ee.MatHeaderRow,ee.MatRow,ee.MatNoDataRow,En.MatCard,En.MatCardTitle,ga.MatToolbar,fa.MatChip],styles:[".performance-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as ap}from"@angular/common";import*as M from"@angular/core";import*as Tn from"@angular/common";import*as In from"@angular/material/card";import*as _a from"@angular/material/toolbar";import*as Dn from"@angular/material/chips";function op(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",26)(1,"span",27),M.\u0275\u0275text(2),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(3,"span",28),M.\u0275\u0275text(4),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275styleProp("height",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("",e.value,"%")}}function rp(n,t){if(n&1&&(M.\u0275\u0275namespaceSVG(),M.\u0275\u0275elementContainerStart(0),M.\u0275\u0275element(1,"circle",29),M.\u0275\u0275elementContainerEnd()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275attribute("stroke-dasharray",e.dash)("stroke-dashoffset",e.offset)("stroke",e.color)}}function lp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",30),M.\u0275\u0275element(1,"span",31),M.\u0275\u0275elementStart(2,"span"),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(4,"span",32),M.\u0275\u0275text(5),M.\u0275\u0275pipe(6,"currency"),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(M.\u0275\u0275pipeBind1(6,4,e.value))}}function sp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"span",27),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(4,"span",35),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("width",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.value)}}function cp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",26)(1,"span",27),M.\u0275\u0275text(2),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(3,"span",28),M.\u0275\u0275text(4),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275styleProp("height",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("",e.value,"%")}}function dp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"span",27),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(4,"span",35),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("width",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("",e.value,"h")}}function mp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"span",27),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(4,"span",35),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("width",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.count)}}function pp(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"span",27),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(4,"span",35),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("width",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.count)}}function up(n,t){if(n&1&&(M.\u0275\u0275elementStart(0,"div",33)(1,"div",34)(2,"span",27),M.\u0275\u0275text(3),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(4,"span",35),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;M.\u0275\u0275advance(),M.\u0275\u0275styleProp("width",e.value,"%")("background",e.color),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.label),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate(e.count)}}var kn=class n{constructor(t){this.mock=t;this.computeStudentStatus(),this.computeFees(),this.computeAttendance(),this.computeIncidents(),this.computeExams(),this.computePd(),this.computeResources(),this.computeConflicts(),this.computeAdmissions(),this.computeStats(),this.buildGauge()}studentStatus=[];feeSlices=[];feeLegend=[];attendanceRate=0;incidentTypes=[];examAverages=[];gaugePath="";pdHours=[];resourceStatus=[];conflicts=[];admissions=[];stats={totalStudents:0,activeStudents:0,outstanding:0,upcomingEvents:0};computeStudentStatus(){let t=this.mock.getStudents(),e=t.length||1,i=t.filter(r=>(r.status||"").toLowerCase()==="active").length,o=e-i;this.studentStatus=[{label:"Active",value:Math.round(i/e*100),color:"#4ade80"},{label:"Inactive",value:Math.round(o/e*100),color:"#f97316"}]}computeFees(){let t=this.mock.getFees(),e=t.reduce((k,A)=>k+(Number(A.balance)||0),0),i=t.filter(k=>(k.balance||0)===0).length,o=t.length-i;this.feeLegend=[{label:"Outstanding",value:e,color:"#6366f1"},{label:"Cleared",value:i,color:"#22c55e"},{label:"Due count",value:o,color:"#f97316"}];let r=this.feeLegend.reduce((k,A)=>k+(Number(A.value)||0),0)||1,P=25;this.feeSlices=this.feeLegend.map(k=>{let A=Math.max(1,Math.round((Number(k.value)||0)/r*100)),L={dash:`${A} ${100-A}`,offset:`${P}`,color:k.color};return P-=A,L})}computeAttendance(){let t=this.mock.getAttendance(),e=new Date().toISOString().slice(0,10),i=t.filter(P=>P.date===e),o=i.filter(P=>P.status==="present").length,r=i.length||1;this.attendanceRate=Math.round(o/r*100)}computeIncidents(){let t=this.mock.getBehaviorIncidents?.()||[],e={};t.forEach(i=>{e[i.type]=(e[i.type]||0)+1}),this.incidentTypes=Object.entries(e).map(([i,o],r)=>({label:i,value:o,color:["#f97316","#22c55e","#6366f1","#eab308"][r%4]}))}computeExams(){let t=this.mock.getExams();this.examAverages=t.map((e,i)=>{let o=e.studentMarks||[],r=o.length?Math.round(o.reduce((P,k)=>P+(k.marks||0),0)/o.length):0;return{label:e.title||`Exam ${i+1}`,value:r,color:["#6366f1","#22c55e","#f97316"][i%3]}})}computePd(){let t=this.mock.getTeacherPd?.()||[];this.pdHours=t.map((e,i)=>({label:e.teacherName||`Teacher ${i+1}`,value:e.hours||0,color:["#10b981","#3b82f6","#a855f7","#f97316"][i%4]}))}computeResources(){let t=this.mock.getResources?.()||[],e={};t.forEach(r=>{e[r.status||"available"]=(e[r.status||"available"]||0)+1});let i=t.length||1,o={available:"#22c55e","in-use":"#3b82f6",maintenance:"#f97316"};this.resourceStatus=Object.entries(e).map(([r,P])=>({label:r,count:P,value:Math.round(P/i*100),color:o[r]||"#6b7280"}))}computeConflicts(){let t=this.mock.getTimetable?.()||[],e=t.filter(r=>r.conflict).length,i=t.length-e,o=t.length||1;this.conflicts=[{label:"Conflicts",count:e,value:Math.round(e/o*100),color:"#f97316"},{label:"OK",count:i,value:Math.round(i/o*100),color:"#22c55e"}]}computeAdmissions(){let t=this.mock.getAdmissions?.()||[],e={};t.forEach(P=>{e[P.status||"new"]=(e[P.status||"new"]||0)+1});let i=t.length||1,o=["#6366f1","#22c55e","#f97316","#0ea5e9"],r=0;this.admissions=Object.entries(e).map(([P,k])=>({label:P,count:k,value:Math.round(k/i*100),color:o[r++%o.length]}))}computeStats(){let t=this.mock.getStudents()||[],e=this.mock.getFees()||[],i=this.mock.getEvents?.()||[];this.stats.totalStudents=t.length,this.stats.activeStudents=t.filter(o=>(o.status||"").toLowerCase()==="active").length,this.stats.outstanding=e.reduce((o,r)=>o+(Number(r.balance)||0),0),this.stats.upcomingEvents=i.length}buildGauge(){let t=Math.min(100,Math.max(0,this.attendanceRate)),e=t/100*Math.PI,i=18+16*Math.cos(Math.PI-e),o=18-16*Math.sin(Math.PI-e),r=t>50?1:0;this.gaugePath=`M2 18 A16 16 0 ${r} 1 ${i.toFixed(2)} ${o.toFixed(2)}`}static \u0275fac=function(e){return new(e||n)(M.\u0275\u0275directiveInject(F))};static \u0275cmp=M.\u0275\u0275defineComponent({type:n,selectors:[["app-analytics"]],decls:72,vars:17,consts:[[1,"fees-page","analytics-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"stats-row","mat-elevation-z2"],["color","primary","selected",""],["color","accent","selected",""],["color","warn","selected",""],[1,"charts-grid"],[1,"chart-card","mat-elevation-z2"],[1,"bar-chart"],["class","bar",3,"height","background",4,"ngFor","ngForOf"],[1,"donut"],["viewBox","0 0 36 36"],["cx","18","cy","18","r","15.9155",1,"bg"],[4,"ngFor","ngForOf"],[1,"donut-legend"],["class","legend-row",4,"ngFor","ngForOf"],[1,"gauge"],["viewBox","0 0 36 18"],["d","M2 18 A16 16 0 0 1 34 18",1,"gauge-bg"],["stroke-linecap","round",1,"gauge-fill"],[1,"gauge-value"],[1,"bar-chart","horizontal"],["class","bar-row",4,"ngFor","ngForOf"],[1,"bar"],[1,"bar-label"],[1,"bar-value"],["cx","18","cy","18","r","15.9155",1,"slice"],[1,"legend-row"],[1,"legend-dot"],[1,"legend-value"],[1,"bar-row"],[1,"bar","horizontal"],[1,"bar-val"]],template:function(e,i){e&1&&(M.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),M.\u0275\u0275text(4,"School Management"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(5,"div",4),M.\u0275\u0275text(6,"Visual Analytics"),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(7,"mat-card",5)(8,"mat-chip-set")(9,"mat-chip",6),M.\u0275\u0275text(10),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(11,"mat-chip",7),M.\u0275\u0275text(12),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(13,"mat-chip",8),M.\u0275\u0275text(14),M.\u0275\u0275pipe(15,"currency"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(16,"mat-chip",6),M.\u0275\u0275text(17),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(18,"div",9)(19,"mat-card",10)(20,"mat-card-title"),M.\u0275\u0275text(21,"Students status"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(22,"div",11),M.\u0275\u0275template(23,op,5,6,"div",12),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(24,"mat-card",10)(25,"mat-card-title"),M.\u0275\u0275text(26,"Fees breakdown"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(27,"div",13),M.\u0275\u0275namespaceSVG(),M.\u0275\u0275elementStart(28,"svg",14),M.\u0275\u0275element(29,"circle",15),M.\u0275\u0275template(30,rp,2,3,"ng-container",16),M.\u0275\u0275elementEnd(),M.\u0275\u0275namespaceHTML(),M.\u0275\u0275elementStart(31,"div",17),M.\u0275\u0275template(32,lp,7,6,"div",18),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(33,"mat-card",10)(34,"mat-card-title"),M.\u0275\u0275text(35,"Attendance today"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(36,"div",19),M.\u0275\u0275namespaceSVG(),M.\u0275\u0275elementStart(37,"svg",20),M.\u0275\u0275element(38,"path",21)(39,"path",22),M.\u0275\u0275elementEnd(),M.\u0275\u0275namespaceHTML(),M.\u0275\u0275elementStart(40,"div",23),M.\u0275\u0275text(41),M.\u0275\u0275elementEnd()()(),M.\u0275\u0275elementStart(42,"mat-card",10)(43,"mat-card-title"),M.\u0275\u0275text(44,"Incidents by type"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(45,"div",24),M.\u0275\u0275template(46,sp,6,6,"div",25),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(47,"mat-card",10)(48,"mat-card-title"),M.\u0275\u0275text(49,"Exam averages"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(50,"div",11),M.\u0275\u0275template(51,cp,5,6,"div",12),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(52,"mat-card",10)(53,"mat-card-title"),M.\u0275\u0275text(54,"PD hours by teacher"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(55,"div",24),M.\u0275\u0275template(56,dp,6,6,"div",25),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(57,"mat-card",10)(58,"mat-card-title"),M.\u0275\u0275text(59,"Resource status"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(60,"div",24),M.\u0275\u0275template(61,mp,6,6,"div",25),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(62,"mat-card",10)(63,"mat-card-title"),M.\u0275\u0275text(64,"Timetable conflicts"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(65,"div",24),M.\u0275\u0275template(66,pp,6,6,"div",25),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(67,"mat-card",10)(68,"mat-card-title"),M.\u0275\u0275text(69,"Admissions status"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(70,"div",24),M.\u0275\u0275template(71,up,6,6,"div",25),M.\u0275\u0275elementEnd()()()()),e&2&&(M.\u0275\u0275advance(10),M.\u0275\u0275textInterpolate1("Students: ",i.stats.totalStudents),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("Active: ",i.stats.activeStudents),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("Outstanding: ",M.\u0275\u0275pipeBind1(15,15,i.stats.outstanding)),M.\u0275\u0275advance(3),M.\u0275\u0275textInterpolate1("Events: ",i.stats.upcomingEvents),M.\u0275\u0275advance(6),M.\u0275\u0275property("ngForOf",i.studentStatus),M.\u0275\u0275advance(7),M.\u0275\u0275property("ngForOf",i.feeSlices),M.\u0275\u0275advance(2),M.\u0275\u0275property("ngForOf",i.feeLegend),M.\u0275\u0275advance(7),M.\u0275\u0275attribute("d",i.gaugePath),M.\u0275\u0275advance(2),M.\u0275\u0275textInterpolate1("",i.attendanceRate,"%"),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.incidentTypes),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.examAverages),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.pdHours),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.resourceStatus),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.conflicts),M.\u0275\u0275advance(5),M.\u0275\u0275property("ngForOf",i.admissions))},dependencies:[ap,Tn.NgForOf,D,In.MatCard,In.MatCardTitle,_a.MatToolbar,Dn.MatChip,Dn.MatChipSet,Tn.CurrencyPipe],styles:['.analytics-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}.stats-row[_ngcontent-%COMP%]{padding:8px 12px;border-radius:12px}.chart-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.bar-chart[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-end;height:180px}.bar[_ngcontent-%COMP%]{flex:1;min-width:50px;border-radius:8px 8px 0 0;background:#6366f1;position:relative;display:grid;place-items:center;padding-top:8px}.bar-label[_ngcontent-%COMP%]{position:absolute;bottom:-22px;font-size:12px;color:#475569}.bar-value[_ngcontent-%COMP%]{font-weight:700;color:#fff}.bar-chart.horizontal[_ngcontent-%COMP%]{flex-direction:column;height:auto}.bar.horizontal[_ngcontent-%COMP%]{height:32px;border-radius:8px;justify-content:flex-start;padding-left:12px;min-width:40%}.bar-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:6px 0;width:100%}.bar-row[_ngcontent-%COMP%]   .bar-label[_ngcontent-%COMP%]{position:static;font-size:12px;color:#475569}.bar-val[_ngcontent-%COMP%]{min-width:40px;font-weight:700;color:#0f172a;text-align:right}.bar-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{position:relative}.bar-row[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:8px;opacity:.08;background:#0f172a;pointer-events:none}.donut[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.donut[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:120px;height:120px}.donut[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{fill:none;stroke:#e2e8f0;stroke-width:3.8}.donut[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%]{fill:none;stroke-width:3.8;stroke-linecap:round;transform:rotate(-90deg);transform-origin:center}.donut-legend[_ngcontent-%COMP%]{display:grid;gap:4px}.legend-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:6px;align-items:center}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block}.legend-value[_ngcontent-%COMP%]{font-weight:600}.gauge[_ngcontent-%COMP%]{display:grid;place-items:center;gap:8px}.gauge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:140px;height:70px}.gauge-bg[_ngcontent-%COMP%]{fill:none;stroke:#e2e8f0;stroke-width:3}.gauge-fill[_ngcontent-%COMP%]{fill:none;stroke:#22c55e;stroke-width:3}.gauge-value[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};import{CommonModule as gp}from"@angular/common";import{FormsModule as fp}from"@angular/forms";import*as w from"@angular/core";import*as ha from"@angular/common";import*as dt from"@angular/forms";import*as Ca from"@angular/material/button";import*as mt from"@angular/material/input";import*as An from"@angular/material/select";import*as te from"@angular/material/table";import*as Rn from"@angular/material/card";import*as ba from"@angular/material/toolbar";import*as xa from"@angular/material/chips";function _p(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"mat-card",31)(1,"div",32)(2,"div")(3,"div",33),w.\u0275\u0275text(4),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(5,"div",34),w.\u0275\u0275text(6),w.\u0275\u0275elementEnd()(),w.\u0275\u0275elementStart(7,"mat-chip",35),w.\u0275\u0275text(8),w.\u0275\u0275elementEnd()(),w.\u0275\u0275elementStart(9,"div",36),w.\u0275\u0275text(10),w.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit;w.\u0275\u0275classProp("fade-in",!0),w.\u0275\u0275advance(4),w.\u0275\u0275textInterpolate(e.name),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(e.role),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate(e.email||"\u2014"),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate1("Phone: ",e.phone||"\u2014")}}function hp(n,t){n&1&&(w.\u0275\u0275elementStart(0,"th",37),w.\u0275\u0275text(1,"Date"),w.\u0275\u0275elementEnd())}function Cp(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"td",38),w.\u0275\u0275text(1),w.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.date)}}function bp(n,t){n&1&&(w.\u0275\u0275elementStart(0,"th",37),w.\u0275\u0275text(1,"Class"),w.\u0275\u0275elementEnd())}function xp(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"td",38),w.\u0275\u0275text(1),w.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.classId)}}function Mp(n,t){n&1&&(w.\u0275\u0275elementStart(0,"th",37),w.\u0275\u0275text(1,"Subject"),w.\u0275\u0275elementEnd())}function vp(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"td",38),w.\u0275\u0275text(1),w.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.subject)}}function yp(n,t){n&1&&(w.\u0275\u0275elementStart(0,"th",37),w.\u0275\u0275text(1,"Requester"),w.\u0275\u0275elementEnd())}function wp(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"td",38),w.\u0275\u0275text(1),w.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.requester)}}function Sp(n,t){n&1&&(w.\u0275\u0275elementStart(0,"th",37),w.\u0275\u0275text(1,"Status"),w.\u0275\u0275elementEnd())}function Pp(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"td",38)(1,"mat-chip",39),w.\u0275\u0275text(2),w.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=w.\u0275\u0275nextContext();w.\u0275\u0275advance(),w.\u0275\u0275property("color",i.statusColor(e.status)),w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.status)}}function Op(n,t){n&1&&w.\u0275\u0275element(0,"th",37)}function Ep(n,t){if(n&1){let e=w.\u0275\u0275getCurrentView();w.\u0275\u0275elementStart(0,"td",38)(1,"button",40),w.\u0275\u0275listener("click",function(){let o=w.\u0275\u0275restoreView(e).$implicit,r=w.\u0275\u0275nextContext();return w.\u0275\u0275resetView(r.assign(o))}),w.\u0275\u0275text(2,"Assign"),w.\u0275\u0275elementEnd()()}}function kp(n,t){n&1&&w.\u0275\u0275element(0,"tr",41)}function Tp(n,t){n&1&&w.\u0275\u0275element(0,"tr",42)}function Ip(n,t){if(n&1&&(w.\u0275\u0275elementStart(0,"div",43)(1,"div",32)(2,"div",44),w.\u0275\u0275text(3),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(4,"mat-chip",39),w.\u0275\u0275text(5),w.\u0275\u0275elementEnd()(),w.\u0275\u0275elementStart(6,"div",45),w.\u0275\u0275text(7),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(8,"div",45),w.\u0275\u0275text(9),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(10,"div",45),w.\u0275\u0275text(11),w.\u0275\u0275elementEnd()()),n&2){let e=t.$implicit,i=w.\u0275\u0275nextContext();w.\u0275\u0275advance(3),w.\u0275\u0275textInterpolate2("",e.classId," \xB7 ",e.subject),w.\u0275\u0275advance(),w.\u0275\u0275property("color",i.statusColor(e.status)),w.\u0275\u0275advance(),w.\u0275\u0275textInterpolate(e.status),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate2("",e.date," \xB7 ",e.period),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate1("Requester: ",e.requester),w.\u0275\u0275advance(2),w.\u0275\u0275textInterpolate1("Sub: ",e.substitute||"Unassigned")}}var Fn=class n{constructor(t){this.mock=t;this.staff=t.getStaff(),this.coverage=t.getCoverageRequests(),this.filterStaff(),this.filterCoverage()}staff=[];filteredStaff=[];coverage=[];filteredCoverage=[];coverageCols=["date","class","subject","requester","status","actions"];staffSearch="";coverageStatus="all";filterStaff(){let t=this.staffSearch.trim().toLowerCase();this.filteredStaff=this.staff.filter(e=>!t||[e.name,e.role,e.email,e.phone].some(i=>(i||"").toLowerCase().includes(t)))}filterCoverage(){this.filteredCoverage=this.coverage.filter(t=>this.coverageStatus==="all"||t.status===this.coverageStatus)}statusColor(t){return t==="open"?"warn":t==="assigned"?"accent":"primary"}assign(t){this.mock.updateCoverage(t.id,{status:"assigned",substitute:"Available staff"}),this.coverage=this.mock.getCoverageRequests(),this.filterCoverage()}static \u0275fac=function(e){return new(e||n)(w.\u0275\u0275directiveInject(F))};static \u0275cmp=w.\u0275\u0275defineComponent({type:n,selectors:[["app-staffing"]],decls:54,vars:7,consts:[[1,"fees-page","staffing-page","mat-typography"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","name or role",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","open"],["value","assigned"],["value","closed"],[1,"cards-grid"],["class","staff-card mat-elevation-z2",3,"fade-in",4,"ngFor","ngForOf"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","subject"],["matColumnDef","requester"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mobile-only","mobile-card-list"],["class","mobile-card fade-in",4,"ngFor","ngForOf"],[1,"staff-card","mat-elevation-z2"],[1,"card-row"],[1,"staff-name"],[1,"staff-role"],["color","primary","selected",""],[1,"card-meta"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mobile-card","fade-in"],[1,"cell-strong"],[1,"cell-sub"]],template:function(e,i){e&1&&(w.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),w.\u0275\u0275text(4,"School Management"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(5,"div",4),w.\u0275\u0275text(6,"Staff Directory & Coverage"),w.\u0275\u0275elementEnd()()(),w.\u0275\u0275elementStart(7,"mat-card",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),w.\u0275\u0275text(11,"Search staff"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(12,"input",8),w.\u0275\u0275twoWayListener("ngModelChange",function(r){return w.\u0275\u0275twoWayBindingSet(i.staffSearch,r)||(i.staffSearch=r),r}),w.\u0275\u0275listener("ngModelChange",function(){return i.filterStaff()}),w.\u0275\u0275elementEnd()(),w.\u0275\u0275elementStart(13,"mat-form-field",7)(14,"mat-label"),w.\u0275\u0275text(15,"Coverage status"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(16,"mat-select",9),w.\u0275\u0275twoWayListener("ngModelChange",function(r){return w.\u0275\u0275twoWayBindingSet(i.coverageStatus,r)||(i.coverageStatus=r),r}),w.\u0275\u0275listener("selectionChange",function(){return i.filterCoverage()}),w.\u0275\u0275elementStart(17,"mat-option",10),w.\u0275\u0275text(18,"All"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(19,"mat-option",11),w.\u0275\u0275text(20,"Open"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(21,"mat-option",12),w.\u0275\u0275text(22,"Assigned"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(23,"mat-option",13),w.\u0275\u0275text(24,"Closed"),w.\u0275\u0275elementEnd()()()()(),w.\u0275\u0275elementStart(25,"div",14),w.\u0275\u0275template(26,_p,11,6,"mat-card",15),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(27,"mat-card",16)(28,"mat-card-title"),w.\u0275\u0275text(29,"Coverage requests"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(30,"div",17)(31,"table",18),w.\u0275\u0275elementContainerStart(32,19),w.\u0275\u0275template(33,hp,2,0,"th",20)(34,Cp,2,1,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementContainerStart(35,22),w.\u0275\u0275template(36,bp,2,0,"th",20)(37,xp,2,1,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementContainerStart(38,23),w.\u0275\u0275template(39,Mp,2,0,"th",20)(40,vp,2,1,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementContainerStart(41,24),w.\u0275\u0275template(42,yp,2,0,"th",20)(43,wp,2,1,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementContainerStart(44,25),w.\u0275\u0275template(45,Sp,2,0,"th",20)(46,Pp,3,2,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275elementContainerStart(47,26),w.\u0275\u0275template(48,Op,1,0,"th",20)(49,Ep,3,0,"td",21),w.\u0275\u0275elementContainerEnd(),w.\u0275\u0275template(50,kp,1,0,"tr",27)(51,Tp,1,0,"tr",28),w.\u0275\u0275elementEnd()()(),w.\u0275\u0275elementStart(52,"mat-card",29),w.\u0275\u0275template(53,Ip,12,8,"div",30),w.\u0275\u0275elementEnd()()),e&2&&(w.\u0275\u0275advance(12),w.\u0275\u0275twoWayProperty("ngModel",i.staffSearch),w.\u0275\u0275advance(4),w.\u0275\u0275twoWayProperty("ngModel",i.coverageStatus),w.\u0275\u0275advance(10),w.\u0275\u0275property("ngForOf",i.filteredStaff),w.\u0275\u0275advance(5),w.\u0275\u0275property("dataSource",i.filteredCoverage),w.\u0275\u0275advance(19),w.\u0275\u0275property("matHeaderRowDef",i.coverageCols),w.\u0275\u0275advance(),w.\u0275\u0275property("matRowDefColumns",i.coverageCols),w.\u0275\u0275advance(2),w.\u0275\u0275property("ngForOf",i.filteredCoverage))},dependencies:[gp,ha.NgForOf,fp,dt.DefaultValueAccessor,dt.NgControlStatus,dt.NgModel,D,Ca.MatButton,mt.MatInput,mt.MatFormField,mt.MatLabel,An.MatSelect,An.MatOption,te.MatTable,te.MatHeaderCellDef,te.MatHeaderRowDef,te.MatColumnDef,te.MatCellDef,te.MatRowDef,te.MatHeaderCell,te.MatCell,te.MatHeaderRow,te.MatRow,Rn.MatCard,Rn.MatCardTitle,ba.MatToolbar,xa.MatChip],styles:[".staffing-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}.staff-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px;overflow:hidden;position:relative}.staff-card.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.staff-name[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.staff-role[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem}.card-meta[_ngcontent-%COMP%]{color:#475569;font-size:.9rem;margin-top:6px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as Dp}from"@angular/common";import{FormsModule as Fp}from"@angular/forms";import{RouterLink as Ap}from"@angular/router";import*as T from"@angular/core";import*as pt from"@angular/common";import*as Nn from"@angular/forms";import*as Ma from"@angular/material/button";import*as Bn from"@angular/material/input";import*as zn from"@angular/material/select";import*as va from"@angular/material/card";import*as ya from"@angular/material/checkbox";import*as wa from"@angular/material/chips";var Rp=n=>({"pill-unread":n});function Lp(n,t){if(n&1&&(T.\u0275\u0275elementStart(0,"a",31),T.\u0275\u0275text(1,"Open"),T.\u0275\u0275elementEnd()),n&2){let e=T.\u0275\u0275nextContext().$implicit;T.\u0275\u0275property("routerLink",e.link)}}function Np(n,t){if(n&1){let e=T.\u0275\u0275getCurrentView();T.\u0275\u0275elementStart(0,"mat-card",21)(1,"div",22)(2,"mat-chip",23),T.\u0275\u0275text(3),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(4,"div",24),T.\u0275\u0275text(5),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(6,"div",25),T.\u0275\u0275text(7),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(8,"div",26),T.\u0275\u0275text(9),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(10,"div",27),T.\u0275\u0275text(11),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(12,"div",28)(13,"button",29),T.\u0275\u0275listener("click",function(){let o=T.\u0275\u0275restoreView(e).$implicit,r=T.\u0275\u0275nextContext();return T.\u0275\u0275resetView(r.markRead(o))}),T.\u0275\u0275text(14,"Mark read"),T.\u0275\u0275elementEnd(),T.\u0275\u0275template(15,Lp,2,1,"a",30),T.\u0275\u0275elementEnd()()}if(n&2){let e=t.$implicit,i=T.\u0275\u0275nextContext();T.\u0275\u0275advance(2),T.\u0275\u0275property("color",i.chipColor(e.priority)),T.\u0275\u0275advance(),T.\u0275\u0275textInterpolate(e.type),T.\u0275\u0275advance(),T.\u0275\u0275property("ngClass",T.\u0275\u0275pureFunction1(8,Rp,e.unread)),T.\u0275\u0275advance(),T.\u0275\u0275textInterpolate(e.unread?"Unread":"Read"),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(e.title),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(e.message),T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate1("Date: ",e.date),T.\u0275\u0275advance(4),T.\u0275\u0275property("ngIf",e.link)}}var Ln=class n{constructor(t){this.mock=t;this.notifications=t.getNotifications(),this.applyFilters()}notifications=[];filtered=[];typeFilter="all";unreadOnly=!1;chipColor(t){return t==="high"?"warn":t==="low"?"accent":"primary"}applyFilters(){this.filtered=this.notifications.filter(t=>{let e=this.typeFilter==="all"||t.type===this.typeFilter,i=!this.unreadOnly||!!t.unread;return e&&i})}markRead(t){this.mock.updateNotification(t.id,{unread:!1}),this.notifications=this.mock.getNotifications(),this.applyFilters()}markAllRead(){this.notifications.forEach(t=>this.mock.updateNotification(t.id,{unread:!1})),this.notifications=this.mock.getNotifications(),this.applyFilters()}static \u0275fac=function(e){return new(e||n)(T.\u0275\u0275directiveInject(F))};static \u0275cmp=T.\u0275\u0275defineComponent({type:n,selectors:[["app-notifications"]],decls:34,vars:3,consts:[[1,"notifications-page","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"hero-text"],[1,"eyebrow"],[1,"title"],[1,"subtitle"],[1,"hero-actions"],["mat-flat-button","","color","primary",3,"click"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","fee"],["value","attendance"],["value","behavior"],["value","coverage"],["value","event"],[3,"ngModelChange","change","ngModel"],[1,"cards-grid"],["class","notif-card mat-elevation-z2 fade-in",4,"ngFor","ngForOf"],[1,"notif-card","mat-elevation-z2","fade-in"],[1,"card-row"],["selected","",3,"color"],[1,"pill",3,"ngClass"],[1,"notif-title"],[1,"notif-body"],[1,"notif-meta"],[1,"action-row"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],["class","ghost-link",3,"routerLink",4,"ngIf"],[1,"ghost-link",3,"routerLink"]],template:function(e,i){e&1&&(T.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),T.\u0275\u0275text(4,"School Management"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(5,"div",4),T.\u0275\u0275text(6,"Notifications Center"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(7,"div",5),T.\u0275\u0275text(8,"Stay on top of fees, attendance, behavior, and events"),T.\u0275\u0275elementEnd()(),T.\u0275\u0275elementStart(9,"div",6)(10,"button",7),T.\u0275\u0275listener("click",function(){return i.markAllRead()}),T.\u0275\u0275text(11,"Mark all read"),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275elementStart(12,"mat-card",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),T.\u0275\u0275text(16,"Filter by type"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(17,"mat-select",11),T.\u0275\u0275twoWayListener("ngModelChange",function(r){return T.\u0275\u0275twoWayBindingSet(i.typeFilter,r)||(i.typeFilter=r),r}),T.\u0275\u0275listener("selectionChange",function(){return i.applyFilters()}),T.\u0275\u0275elementStart(18,"mat-option",12),T.\u0275\u0275text(19,"All"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(20,"mat-option",13),T.\u0275\u0275text(21,"Fees"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(22,"mat-option",14),T.\u0275\u0275text(23,"Attendance"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(24,"mat-option",15),T.\u0275\u0275text(25,"Behavior"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(26,"mat-option",16),T.\u0275\u0275text(27,"Coverage"),T.\u0275\u0275elementEnd(),T.\u0275\u0275elementStart(28,"mat-option",17),T.\u0275\u0275text(29,"Events"),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275elementStart(30,"mat-checkbox",18),T.\u0275\u0275twoWayListener("ngModelChange",function(r){return T.\u0275\u0275twoWayBindingSet(i.unreadOnly,r)||(i.unreadOnly=r),r}),T.\u0275\u0275listener("change",function(){return i.applyFilters()}),T.\u0275\u0275text(31,"Unread only"),T.\u0275\u0275elementEnd()()(),T.\u0275\u0275elementStart(32,"div",19),T.\u0275\u0275template(33,Np,16,10,"mat-card",20),T.\u0275\u0275elementEnd()()),e&2&&(T.\u0275\u0275advance(17),T.\u0275\u0275twoWayProperty("ngModel",i.typeFilter),T.\u0275\u0275advance(13),T.\u0275\u0275twoWayProperty("ngModel",i.unreadOnly),T.\u0275\u0275advance(3),T.\u0275\u0275property("ngForOf",i.filtered))},dependencies:[Dp,pt.NgClass,pt.NgForOf,pt.NgIf,Fp,Nn.NgControlStatus,Nn.NgModel,D,Ma.MatButton,Bn.MatFormField,Bn.MatLabel,zn.MatSelect,zn.MatOption,va.MatCard,ya.MatCheckbox,wa.MatChip,Ap],styles:['.notifications-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;background:radial-gradient(circle at 10% 10%,rgba(26,115,232,.05),transparent 35%),#f7f9fb}.hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:14px 18px;border-radius:16px;background:linear-gradient(90deg,#3650c2,#2185e7);color:#fff}.hero-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-weight:700;font-size:12px;opacity:.9}.title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.subtitle[_ngcontent-%COMP%]{opacity:.9}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.filters-card[_ngcontent-%COMP%]{padding:12px;border:1px solid #e3e8f0;border-radius:12px}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;align-items:center}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}.notif-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;border:1px solid #e3e8f0;border-left:4px solid #1e88e5;background:#fff;border-radius:12px;padding:10px 12px;box-shadow:0 6px 18px #11269214;transition:transform .12s ease,box-shadow .12s ease;position:relative;overflow:hidden}.notif-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#2188e50f,#fff0);pointer-events:none}.notif-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 22px #1126921f}.card-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding-bottom:6px;border-bottom:1px solid #eef1f6}.pill[_ngcontent-%COMP%]{padding:4px 10px;border-radius:999px;background:#e6edf7;color:#1b3556;font-weight:600;font-size:12px}.pill-unread[_ngcontent-%COMP%]{background:#ffe8e6;color:#b71c1c}.notif-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.notif-body[_ngcontent-%COMP%]{color:#42526e;line-height:1.4}.notif-meta[_ngcontent-%COMP%]{font-size:12px;color:#607089;font-weight:600}.action-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:10px}.ghost-link[_ngcontent-%COMP%]{color:#1e88e5;font-weight:700;text-decoration:none}.ghost-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .22s ease-in}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.hero[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.action-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}']})};var Sa=[{path:"",component:gt},{path:"dashboard",component:gt},{path:"admissions",component:Yt},{path:"students",component:bt},{path:"teachers",component:wt},{path:"classes",component:Tt},{path:"attendance",component:It},{path:"fees",component:Lt},{path:"timetable",component:Vt},{path:"exams",component:Ut},{path:"behavior",component:Kt},{path:"announcements",component:tn},{path:"library",component:an},{path:"transport",component:ln},{path:"clubs",component:cn},{path:"parents",component:mn},{path:"health",component:gn},{path:"assets",component:hn},{path:"events",component:xn},{path:"resources",component:yn},{path:"performance",component:Pn},{path:"analytics",component:kn},{path:"staffing",component:Fn},{path:"notifications",component:Ln},{path:"**",redirectTo:""}];var Pa=(n,t)=>{try{let e=localStorage.getItem("auth_token")||localStorage.getItem("shellAuthToken"),i=localStorage.getItem("tenant_id")||ve.multiTenant?.defaultTenant,o=n.headers;e&&(o=o.set("Authorization",`Bearer ${e}`)),i&&(o=o.set("X-Tenant-ID",i));let P=/^https?:\/\//i.test(n.url)?n.url:`${ve.apiUrl.replace(/\/$/,"")}/${n.url.replace(/^\//,"")}`,k=n.clone({headers:o,url:P});return t(k)}catch{return t(n)}};var Oa={providers:[Bp(),zp({eventCoalescing:!0}),Vp(),Hp(Sa),jp(Wp([Pa]))]};import{signal as Qp,inject as ka}from"@angular/core";import{RouterOutlet as Yp,RouterModule as Jp,Router as Kp}from"@angular/router";import{ActivatedRoute as Zp}from"@angular/router";import{CommonModule as $p}from"@angular/common";import{FormsModule as Up}from"@angular/forms";import*as I from"@angular/core";import*as Hn from"@angular/common";import*as jn from"@angular/forms";import*as Wn from"@angular/material/input";import*as $n from"@angular/material/select";import*as Ea from"@angular/material/checkbox";function Gp(n,t){if(n&1&&(I.\u0275\u0275elementStart(0,"mat-option",9),I.\u0275\u0275text(1),I.\u0275\u0275pipe(2,"titlecase"),I.\u0275\u0275elementEnd()),n&2){let e=t.$implicit;I.\u0275\u0275property("value",e),I.\u0275\u0275advance(),I.\u0275\u0275textInterpolate(I.\u0275\u0275pipeBind1(2,2,e))}}function qp(n,t){if(n&1){let e=I.\u0275\u0275getCurrentView();I.\u0275\u0275elementStart(0,"div",10)(1,"mat-checkbox",11),I.\u0275\u0275listener("change",function(){let o=I.\u0275\u0275restoreView(e).$implicit,r=I.\u0275\u0275nextContext();return I.\u0275\u0275resetView(r.toggleFeature(o))}),I.\u0275\u0275text(2),I.\u0275\u0275elementEnd()()}if(n&2){let e=t.$implicit,i=I.\u0275\u0275nextContext();I.\u0275\u0275advance(),I.\u0275\u0275property("checked",i.features[e]),I.\u0275\u0275advance(),I.\u0275\u0275textInterpolate(e)}}var Vn=class n{constructor(t){this.tenant=t;let e=this.tenant.getCurrentTenant();this.currentPlan=e?.subscription?.plan??"enterprise",this.features=Object.assign({},e?.features||{})}plans=["free","basic","premium","enterprise"];currentPlan="enterprise";features={};setPlan(t){this.currentPlan=t,this.tenant.setPlan(t);let e=this.tenant.getCurrentTenant();this.features=Object.assign({},e?.features||{})}toggleFeature(t){this.features[t]=!this.features[t];let e={};e[t]=this.features[t],this.tenant.updateFeatures(e)}get keys(){return Object.keys(this.features||{})}static \u0275fac=function(e){return new(e||n)(I.\u0275\u0275directiveInject(le))};static \u0275cmp=I.\u0275\u0275defineComponent({type:n,selectors:[["app-tenant-switcher"]],decls:14,vars:4,consts:[[1,"tenant-switcher"],[1,"tenant-header"],[1,"tenant-name"],[1,"plan-select"],["appearance","outline"],["id","plan",3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"feature-list"],["class","feature",4,"ngFor","ngForOf"],[3,"value"],[1,"feature"],[3,"change","checked"]],template:function(e,i){if(e&1&&(I.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),I.\u0275\u0275text(3,"Tenant: "),I.\u0275\u0275elementStart(4,"strong"),I.\u0275\u0275text(5),I.\u0275\u0275elementEnd()(),I.\u0275\u0275elementStart(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),I.\u0275\u0275text(9,"Plan"),I.\u0275\u0275elementEnd(),I.\u0275\u0275elementStart(10,"mat-select",5),I.\u0275\u0275twoWayListener("ngModelChange",function(r){return I.\u0275\u0275twoWayBindingSet(i.currentPlan,r)||(i.currentPlan=r),r}),I.\u0275\u0275listener("selectionChange",function(r){return i.setPlan(r.value)}),I.\u0275\u0275template(11,Gp,3,4,"mat-option",6),I.\u0275\u0275elementEnd()()()(),I.\u0275\u0275elementStart(12,"div",7),I.\u0275\u0275template(13,qp,3,2,"div",8),I.\u0275\u0275elementEnd()()),e&2){let o;I.\u0275\u0275advance(5),I.\u0275\u0275textInterpolate(((o=i.tenant.getCurrentTenant())==null?null:o.displayName)||"Default"),I.\u0275\u0275advance(5),I.\u0275\u0275twoWayProperty("ngModel",i.currentPlan),I.\u0275\u0275advance(),I.\u0275\u0275property("ngForOf",i.plans),I.\u0275\u0275advance(2),I.\u0275\u0275property("ngForOf",i.keys)}},dependencies:[$p,Hn.NgForOf,Up,jn.NgControlStatus,jn.NgModel,D,Wn.MatFormField,Wn.MatLabel,$n.MatSelect,$n.MatOption,Ea.MatCheckbox,Hn.TitleCasePipe],styles:[".tenant-switcher[_ngcontent-%COMP%]{padding:8px 12px;border-bottom:1px solid rgba(0,0,0,.06)}.tenant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.tenant-name[_ngcontent-%COMP%]{font-size:13px}.plan-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;font-size:13px}.feature-list[_ngcontent-%COMP%]{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px}.feature[_ngcontent-%COMP%]{font-size:12px;background:#00000008;padding:4px 6px;border-radius:4px}"]})};import*as R from"@angular/core";import*as Ta from"@angular/router";import*as Ia from"@angular/material/toolbar";import*as Gn from"@angular/material/list";import*as ut from"@angular/material/sidenav";var Un=class n{title=Qp("buildaq-schools");router=ka(Kp);route=ka(Zp);constructor(){}ngOnInit(){let t=new URLSearchParams(window.location.search),e=t.get("authToken");if(e){localStorage.setItem("shellAuthToken",e),localStorage.setItem("auth_token",e),window.parent!==window&&window.parent.postMessage({type:"schools-ready",token:e},"*");let o=new URL(window.location.href);o.searchParams.delete("authToken"),window.history.replaceState({},"",o.pathname+o.hash)}let i=t.get("goto");if(i)try{setTimeout(()=>{try{this.router.navigate([i])}catch(o){console.warn("goto navigation failed",o)}},50)}catch(o){console.warn("Failed to process goto query param",o)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=R.\u0275\u0275defineComponent({type:n,selectors:[["app-root"]],decls:26,vars:0,consts:[[1,"app-shell"],[1,"app-sidenav-container"],["mode","side","opened","",1,"app-sidebar"],["color","primary",1,"brand"],["mat-list-item","","routerLink","/dashboard"],["mat-list-item","","routerLink","/students"],["mat-list-item","","routerLink","/teachers"],["mat-list-item","","routerLink","/classes"],["mat-list-item","","routerLink","/attendance"],["mat-list-item","","routerLink","/fees"],["mat-list-item","","routerLink","/timetable"],["mat-list-item","","routerLink","/exams"],[1,"app-main"]],template:function(e,i){e&1&&(R.\u0275\u0275elementStart(0,"div",0)(1,"mat-sidenav-container",1)(2,"mat-sidenav",2)(3,"mat-toolbar",3),R.\u0275\u0275text(4,"BuildAQ Schools"),R.\u0275\u0275elementEnd(),R.\u0275\u0275element(5,"app-tenant-switcher"),R.\u0275\u0275elementStart(6,"mat-nav-list")(7,"a",4),R.\u0275\u0275text(8,"\u{1F3E0} Dashboard"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(9,"a",5),R.\u0275\u0275text(10,"\u{1F468}\u200D\u{1F393} Students"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(11,"a",6),R.\u0275\u0275text(12,"\u{1F469}\u200D\u{1F3EB} Teachers"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(13,"a",7),R.\u0275\u0275text(14,"\u{1F3EB} Classes"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(15,"a",8),R.\u0275\u0275text(16,"\u{1F552} Attendance"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(17,"a",9),R.\u0275\u0275text(18,"\u{1F4B3} Fees"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(19,"a",10),R.\u0275\u0275text(20,"\u{1F4C5} Timetable"),R.\u0275\u0275elementEnd(),R.\u0275\u0275elementStart(21,"a",11),R.\u0275\u0275text(22,"\u{1F4DD} Exams"),R.\u0275\u0275elementEnd()()(),R.\u0275\u0275elementStart(23,"mat-sidenav-content")(24,"main",12),R.\u0275\u0275element(25,"router-outlet"),R.\u0275\u0275elementEnd()()()())},dependencies:[Yp,Jp,Ta.RouterLink,Vn,D,Ia.MatToolbar,Gn.MatNavList,Gn.MatListItem,ut.MatSidenav,ut.MatSidenavContainer,ut.MatSidenavContent],styles:[".app-shell[_ngcontent-%COMP%]{display:flex}.app-sidebar[_ngcontent-%COMP%]{width:220px;background:#1f2937;color:#fff;min-height:100vh;padding:1rem}.brand[_ngcontent-%COMP%]{font-weight:700;margin-bottom:1rem}.nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.nav-link[_ngcontent-%COMP%]{color:#d1d5db;text-decoration:none;padding:.5rem;border-radius:6px}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff0a;color:#fff}.app-main[_ngcontent-%COMP%]{flex:1;padding:1rem;background:#f3f4f6;min-height:100vh}.page[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:10px;box-shadow:0 4px 12px #0206170f}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px solid #eee;text-align:left}.class-card[_ngcontent-%COMP%]{background:#f8fafc;padding:.75rem;border-radius:8px;margin-bottom:.5rem}"]})};Xp(Un,Oa).catch(n=>console.error(n));
