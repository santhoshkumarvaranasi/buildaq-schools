<!DOCTYPE html>
<html>
<head>
    <title>Debug Console</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
        h1 { color: #4ec9b0; }
        .log { margin: 5px 0; padding: 8px; background: #252526; border-left: 3px solid #007acc; }
        .error { border-left-color: #f44336; color: #f44336; }
        .warn { border-left-color: #ff9800; color: #ff9800; }
        .info { border-left-color: #2196f3; color: #2196f3; }
        .success { border-left-color: #4caf50; color: #4caf50; }
        iframe { width: 100%; height: 400px; border: 2px solid #333; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üîç Angular App Debug Console</h1>
    <div id="console-output"></div>
    <h2>App Preview:</h2>
    <iframe id="app-frame" src="/"></iframe>
    
    <script>
        const output = document.getElementById('console-output');
        const frame = document.getElementById('app-frame');
        
        function addLog(message, type = 'log') {
            const div = document.createElement('div');
            div.className = 'log ' + type;
            div.textContent = new Date().toLocaleTimeString() + ' - ' + message;
            output.appendChild(div);
        }
        
        addLog('Debug console initialized', 'success');
        
        // Capture iframe console messages
        frame.onload = function() {
            try {
                const iframeWindow = frame.contentWindow;
                const originalConsole = {
                    log: iframeWindow.console.log,
                    error: iframeWindow.console.error,
                    warn: iframeWindow.console.warn,
                    info: iframeWindow.console.info
                };
                
                iframeWindow.console.log = function(...args) {
                    addLog(args.join(' '), 'info');
                    originalConsole.log.apply(iframeWindow.console, args);
                };
                
                iframeWindow.console.error = function(...args) {
                    addLog('ERROR: ' + args.join(' '), 'error');
                    originalConsole.error.apply(iframeWindow.console, args);
                };
                
                iframeWindow.console.warn = function(...args) {
                    addLog('WARN: ' + args.join(' '), 'warn');
                    originalConsole.warn.apply(iframeWindow.console, args);
                };
                
                iframeWindow.console.info = function(...args) {
                    addLog('INFO: ' + args.join(' '), 'info');
                    originalConsole.info.apply(iframeWindow.console, args);
                };
                
                // Capture global errors
                iframeWindow.addEventListener('error', function(e) {
                    addLog('UNCAUGHT ERROR: ' + e.message + ' at ' + e.filename + ':' + e.lineno, 'error');
                });
                
                iframeWindow.addEventListener('unhandledrejection', function(e) {
                    addLog('UNHANDLED PROMISE REJECTION: ' + e.reason, 'error');
                });
                
                addLog('Console capture initialized for iframe', 'success');
            } catch (e) {
                addLog('Could not access iframe console (CORS): ' + e.message, 'error');
            }
        };
        
        frame.onerror = function(e) {
            addLog('Iframe load error: ' + e, 'error');
        };
    </script>
</body>
</html>
