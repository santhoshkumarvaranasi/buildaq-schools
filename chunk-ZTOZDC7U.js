import{a as ne}from"./chunk-AETU5EI4.js";import{a as te,b as At}from"./chunk-2VMXMS7J.js";import{bootstrapApplication as hs}from"@angular/platform-browser";import{provideBrowserGlobalErrorListeners as is,provideZoneChangeDetection as as}from"@angular/core";import{provideAnimations as os}from"@angular/platform-browser/animations";import{provideRouter as rs}from"@angular/router";import{provideHttpClient as ls,withInterceptors as ss}from"@angular/common/http";import{CommonModule as Gn}from"@angular/common";import{RouterLink as qn}from"@angular/router";import{MatButtonModule as Tn}from"@angular/material/button";import{MatIconModule as kn}from"@angular/material/icon";import{MatInputModule as Dn}from"@angular/material/input";import{MatFormFieldModule as In}from"@angular/material/form-field";import{MatSelectModule as Fn}from"@angular/material/select";import{MatTableModule as An}from"@angular/material/table";import{MatCardModule as Rn}from"@angular/material/card";import{MatToolbarModule as Vn}from"@angular/material/toolbar";import{MatDialogModule as Ln}from"@angular/material/dialog";import{MatListModule as Bn}from"@angular/material/list";import{MatCheckboxModule as zn}from"@angular/material/checkbox";import{MatSidenavModule as Nn}from"@angular/material/sidenav";import{MatChipsModule as jn}from"@angular/material/chips";import{MatPaginatorModule as Hn}from"@angular/material/paginator";import{MatSortModule as Wn}from"@angular/material/sort";import{MatTooltipModule as Un}from"@angular/material/tooltip";import{MatProgressBarModule as $n}from"@angular/material/progress-bar";import*as Fe from"@angular/core";var v=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Fe.\u0275\u0275defineNgModule({type:a});static \u0275inj=Fe.\u0275\u0275defineInjector({imports:[Tn,kn,Dn,In,Fn,An,Rn,Vn,Ln,Bn,zn,Nn,jn,Hn,Wn,Un,$n]})};import*as b from"@angular/core";import{BehaviorSubject as Ft}from"rxjs";import*as Ae from"@angular/core";import*as Rt from"@angular/common/http";var N=class a{constructor(t){this.http=t;console.log("TenantService constructor - starting..."),this.loadDefaultTenant()}currentTenantSubject=new Ft(null);currentTenant$=this.currentTenantSubject.asObservable();loadingSubject=new Ft(!1);loading$=this.loadingSubject.asObservable();errorSubject=new Ft(null);error$=this.errorSubject.asObservable();tenantId="";isInitialized=!1;loadDefaultTenant(){console.log("Loading default tenant configuration..."),this.setLoading(!0);let t={id:"default",name:"School Management System",displayName:"BuildAQ Schools",domain:window.location.hostname,status:"active",adminEmail:"admin@buildaq.com",adminName:"System Administrator",features:{gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0},branding:{logo:"",favicon:"/favicon.ico",primaryColor:"#3498db",secondaryColor:"#2ecc71",accentColor:"#f39c12",logoUrl:"",fontFamily:"Inter, sans-serif"},settings:{timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD",language:"en-US",academicYear:{start:"2025-08-15",end:"2026-06-15"},gradingScale:{A:90,B:80,C:70,D:60,F:0},classPeriods:{1:"08:00-08:50",2:"09:00-09:50",3:"10:00-10:50",4:"11:00-11:50",5:"12:00-12:50",6:"13:00-13:50",7:"14:00-14:50",8:"15:00-15:50"},schoolHours:{start:"07:30",end:"16:00"}},subscription:{plan:"enterprise",status:"active",limits:{maxStudents:1e4,maxTeachers:1e3,maxClasses:2e3,maxStorageGB:100,maxApiCalls:1e5},usage:{students:0,teachers:0,classes:0,storageGB:0,apiCalls:0}},createdAt:new Date,updatedAt:new Date,dataRegion:"US-East",complianceLevel:"ferpa",ssoEnabled:!1,mfaRequired:!1};this.setCurrentTenant(t),this.applyTenantConfiguration(t),this.isInitialized=!0,this.setLoading(!1),console.log("Default tenant loaded successfully:",t.name)}setCurrentTenant(t){this.currentTenantSubject.next(t)}applyTenantConfiguration(t){this.applyBranding(t.branding),this.updatePageTitle(t.displayName),this.updateFavicon(t.branding.favicon)}applyBranding(t){let e=document.documentElement;e.style.setProperty("--primary-color",t.primaryColor),e.style.setProperty("--secondary-color",t.secondaryColor),e.style.setProperty("--accent-color",t.accentColor||t.primaryColor),t.fontFamily&&e.style.setProperty("--font-family",t.fontFamily)}updatePageTitle(t){document.title=`${t} - School Management`}updateFavicon(t){if(t){let e=document.querySelector('link[rel="icon"]');e||(e=document.createElement("link"),e.rel="icon",document.head.appendChild(e)),e.href=t}}getCurrentTenant(){return this.currentTenantSubject.value}getTenantId(){return this.tenantId||"default"}isFeatureEnabled(t){return this.getCurrentTenant()?.features[t]||!1}isReady(){return this.isInitialized&&this.currentTenantSubject.value!==null}updateFeatures(t){let e=this.getCurrentTenant();e&&(e.features=Object.assign({},e.features,t),e.updatedAt=new Date,this.setCurrentTenant(e))}setPlan(t){let e=this.getCurrentTenant();if(e){switch(e.subscription.plan=t,t){case"free":e.features={gradebook:!1,reports:!1,analytics:!1,bulkOperations:!1,dataExport:!1,realTimeUpdates:!1,notifications:!1,customBranding:!1,apiAccess:!1,advancedReporting:!1};break;case"basic":e.features={gradebook:!0,reports:!0,analytics:!1,bulkOperations:!0,dataExport:!1,realTimeUpdates:!1,notifications:!0,customBranding:!1,apiAccess:!0,advancedReporting:!1};break;case"premium":e.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break;case"enterprise":default:e.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break}e.updatedAt=new Date,this.setCurrentTenant(e),this.applyTenantConfiguration(e)}}setLoading(t){this.loadingSubject.next(t)}setError(t){this.errorSubject.next(t)}static \u0275fac=function(e){return new(e||a)(Ae.\u0275\u0275inject(Rt.HttpClient))};static \u0275prov=Ae.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})};import*as Vt from"@angular/core";var P=class a{students=[{id:1,firstName:"Jane",lastName:"Doe",email:"jane.doe@example.com",grade:"10",section:"A",class:"10A",enrollmentDate:"2023-06-01",status:"active"},{id:2,firstName:"John",lastName:"Smith",email:"john.smith@example.com",grade:"9",section:"B",class:"9B",enrollmentDate:"2022-08-15",status:"active"},{id:3,firstName:"Priya",lastName:"Kumar",email:"priya.kumar@example.com",grade:"11",section:"A",class:"11A",enrollmentDate:"2021-04-10",status:"inactive"}];staff=[{id:1,name:"Alice Brown",role:"Teacher",email:"alice.brown@example.com",phone:"+1-555-1001"},{id:2,name:"Robert Green",role:"Accountant",email:"robert.green@example.com"}];classes=[{id:"10A",name:"Class 10 A",capacity:40,teacher:"Alice Brown"},{id:"9B",name:"Class 9 B",capacity:38,teacher:"Robert Green"}];fees=[{studentId:1,balance:1200,lastPaid:"2025-03-15"},{studentId:2,balance:0,lastPaid:"2025-06-01"}];discounts=[{id:"D-001",studentId:1,studentName:"Jane Doe",type:"Scholarship",amount:200,reason:"Merit",validUntil:"2025-12-31",status:"active"},{id:"D-002",studentId:2,studentName:"John Smith",type:"Sibling",amount:150,reason:"Sibling concession",validUntil:"2025-09-30",status:"active"}];receipts=[{id:"R-1001",studentId:1,studentName:"Jane Doe",date:"2025-06-01",amount:1200,method:"Online"},{id:"R-1002",studentId:2,studentName:"John Smith",date:"2025-06-02",amount:800,method:"Cash"}];attendance=[{id:1,studentId:1,date:"2025-11-20",status:"present"},{id:2,studentId:2,date:"2025-11-20",status:"absent"}];timetable=[{id:1,classId:"10A",subject:"Mathematics",teacher:"Alice Brown",day:"Mon",time:"09:00"},{id:2,classId:"9B",subject:"Science",teacher:"Robert Green",day:"Tue",time:"10:00"}];exams=[{id:1,title:"Midterm 2025",date:"2025-10-15",studentMarks:[{studentId:1,marks:78},{studentId:2,marks:85}]}];admissions=[{id:1,name:"Ravi Patel",class:"8A",status:"new",submitted:"2025-06-10",notes:"Needs guardian contact"},{id:2,name:"Sara Lee",class:"9B",status:"verified",submitted:"2025-06-05",notes:"All docs uploaded"}];behaviorIncidents=[{id:1,studentId:1,studentName:"Jane Doe",class:"10A",date:"2025-11-10",type:"Late submission",severity:"low",actionTaken:"Reminder sent",staff:"Alice Brown",followUpDate:"2025-11-20",parentNotified:!1},{id:2,studentId:1,studentName:"Jane Doe",class:"10A",date:"2025-11-18",type:"Class disruption",severity:"medium",actionTaken:"Counseling scheduled",staff:"Alice Brown",followUpDate:"2025-11-25",parentNotified:!0},{id:3,studentId:2,studentName:"John Smith",class:"9B",date:"2025-11-05",type:"Absence",severity:"low",actionTaken:"Called guardian",staff:"Robert Green",followUpDate:"2025-11-12",parentNotified:!0},{id:4,studentId:3,studentName:"Priya Kumar",class:"11A",date:"2025-10-28",type:"Cheating",severity:"high",actionTaken:"Incident report filed",staff:"Robert Green",followUpDate:"2025-11-05",parentNotified:!0}];announcements=[{id:1,title:"PTA Meeting",audience:"all",priority:"normal",date:"2025-12-05",author:"Principal",body:"Parent Teacher meeting at 4 PM in auditorium."},{id:2,title:"Exam Schedule",audience:"students",priority:"high",date:"2025-12-10",author:"Exam Cell",body:"Midterm schedule released. Check Exams page."},{id:3,title:"Workshop Invite",audience:"teachers",priority:"low",date:"2025-11-28",author:"Academics",body:"Teaching with AI tools workshop in Lab 2."}];library=[{id:1,title:"Algebra Essentials",author:"K. Sharma",category:"Mathematics",status:"available"},{id:2,title:"World History",author:"L. Peters",category:"History",status:"checked-out",borrower:"Jane Doe",dueDate:"2025-12-05"},{id:3,title:"Chemistry Basics",author:"R. Gupta",category:"Science",status:"available"},{id:4,title:"English Grammar",author:"S. White",category:"Language",status:"checked-out",borrower:"John Smith",dueDate:"2025-12-02"}];transportRoutes=[{id:1,routeName:"Route A - North",driver:"Daniel Carter",capacity:40,assigned:32,status:"on-time",departure:"07:30",returnTime:"15:15",notes:"Stop at Maple Ave closed Friday"},{id:2,routeName:"Route B - East",driver:"Emily Davis",capacity:36,assigned:30,status:"delayed",departure:"07:45",returnTime:"15:30",notes:"Detour near bridge repairs"},{id:3,routeName:"Route C - South",driver:"Carlos Ruiz",capacity:42,assigned:38,status:"on-time",departure:"07:25",returnTime:"15:10"},{id:4,routeName:"Route D - West",driver:"Sofia Lee",capacity:30,assigned:18,status:"maintenance",departure:"\u2014",returnTime:"\u2014",notes:"Bus in service bay"}];getStudents(){return this.students}getStaff(){return this.staff}getClasses(){return this.classes}getFees(){return this.fees}getAttendance(){return this.attendance}getTimetable(){return this.timetable}getExams(){return this.exams}getDiscounts(){return this.discounts}getReceipts(){return this.receipts}getBehaviorIncidents(){let t={};return this.behaviorIncidents.forEach(e=>{t[e.studentId]=(t[e.studentId]||0)+1}),this.behaviorIncidents.map(e=>Object.assign({},e,{isRepeat:(t[e.studentId]||0)>1}))}addBehaviorIncident(t){let e=(this.behaviorIncidents.reduce((l,C)=>Math.max(l,C.id),0)||0)+1,n=this.students.find(l=>l.id===t.studentId),r=Object.assign({id:e,studentId:t.studentId||0,studentName:t.studentName||(n?`${n.firstName} ${n.lastName}`:"Unknown"),class:t.class||n&&n.class||"",date:t.date||new Date().toISOString().slice(0,10),type:t.type||"General",severity:t.severity||"medium",actionTaken:t.actionTaken||"Logged",staff:t.staff||"Counselor",followUpDate:t.followUpDate,parentNotified:!!t.parentNotified});return this.behaviorIncidents.unshift(r),r}getAnnouncements(){return this.announcements}addAnnouncement(t){let e=(this.announcements.reduce((r,l)=>Math.max(r,l.id),0)||0)+1,n=Object.assign({id:e,title:t.title||"Untitled",audience:t.audience||"all",priority:t.priority||"normal",date:t.date||new Date().toISOString().slice(0,10),author:t.author||"Admin",body:t.body||""});return this.announcements.unshift(n),n}getLibraryItems(){return this.library}checkoutBook(t,e,n){let r=this.library.find(l=>l.id===t);return r?(r.status="checked-out",r.borrower=e,r.dueDate=n,r):null}returnBook(t){let e=this.library.find(n=>n.id===t);return e?(e.status="available",e.borrower=void 0,e.dueDate=void 0,e):null}getTransportRoutes(){return this.transportRoutes}updateRouteStatus(t,e){let n=this.transportRoutes.find(r=>r.id===t);return n?(n.status=e,n):null}addDiscount(t){let e=Object.assign({id:`D-${(this.discounts.length+1).toString().padStart(3,"0")}`,status:"active"},t);return this.discounts.unshift(e),e}updateDiscountStatus(t,e){let n=this.discounts.findIndex(r=>r.id===t);return n===-1?null:(this.discounts[n].status=e,this.discounts[n])}getAdmissions(){return this.admissions}updateAdmission(t,e){let n=this.admissions.findIndex(r=>r.id===t);return n===-1?null:(this.admissions[n].status=e,this.admissions[n])}createStudent(t){let e=(this.students.reduce((r,l)=>Math.max(r,l.id),0)||0)+1,n=Object.assign({id:e,status:"active"},t);return n.firstName=n.firstName||"",n.lastName=n.lastName||"",this.students.unshift(n),n}updateStudent(t,e){let n=this.students.findIndex(l=>l.id===t);if(n===-1)return null;let r=Object.assign({},this.students[n],e);return this.students[n]=r,r}deleteStudent(t){let e=this.students.findIndex(n=>n.id===t);return e===-1?!1:(this.students.splice(e,1),!0)}createStaff(t){let e=(this.staff.reduce((r,l)=>Math.max(r,l.id),0)||0)+1,n=Object.assign({id:e},t);return n.name=n.name||"",this.staff.unshift(n),n}updateStaff(t,e){let n=this.staff.findIndex(l=>l.id===t);if(n===-1)return null;let r=Object.assign({},this.staff[n],e);return this.staff[n]=r,r}deleteStaff(t){let e=this.staff.findIndex(n=>n.id===t);return e===-1?!1:(this.staff.splice(e,1),!0)}addAttendance(t,e,n){let l={id:(this.attendance.reduce((C,x)=>Math.max(C,x.id),0)||0)+1,studentId:t,date:e,status:n};return this.attendance.unshift(l),l}updateAttendanceStatus(t,e){let n=this.attendance.findIndex(r=>r.id===t);return n===-1?null:(this.attendance[n].status=e,this.attendance[n])}payFee(t,e,n){let r=this.fees.findIndex(C=>C.studentId===t);if(r===-1){let C={studentId:t,balance:Math.max(0,0-e),lastPaid:n};return this.fees.unshift(C),C}let l=this.fees[r];return l.balance=Math.max(0,(l.balance||0)-e),l.lastPaid=n,l}addTimetableEntry(t){let e=(this.timetable.reduce((r,l)=>Math.max(r,l.id),0)||0)+1,n=Object.assign({id:e},t);return this.timetable.unshift(n),n}deleteTimetableEntry(t){let e=this.timetable.findIndex(n=>n.id===t);return e===-1?!1:(this.timetable.splice(e,1),!0)}createExam(t,e,n){let r=(this.exams.reduce((x,y)=>Math.max(x,y.id),0)||0)+1,l=n.map(x=>({studentId:x,marks:null})),C={id:r,title:t,date:e,studentMarks:l};return this.exams.unshift(C),C}recordMarks(t,e){let n=this.exams.find(r=>r.id===t);return n?(e.forEach(r=>{let l=n.studentMarks.find(C=>C.studentId===r.studentId);l?l.marks=r.marks:n.studentMarks.push({studentId:r.studentId,marks:r.marks})}),n):null}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Vt.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})};import*as ie from"@angular/common";import*as Lt from"@angular/material/button";import*as Ve from"@angular/material/card";function Qn(a,t){if(a&1&&(b.\u0275\u0275elementStart(0,"button",10),b.\u0275\u0275text(1),b.\u0275\u0275elementEnd()),a&2){let e=t.$implicit,n=b.\u0275\u0275nextContext();b.\u0275\u0275property("routerLink",n.getLink(e.path)),b.\u0275\u0275advance(),b.\u0275\u0275textInterpolate(e.label)}}function Yn(a,t){if(a&1&&(b.\u0275\u0275elementStart(0,"div",14)(1,"span"),b.\u0275\u0275text(2),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(3,"span",15),b.\u0275\u0275text(4),b.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate(e.type),b.\u0275\u0275advance(2),b.\u0275\u0275textInterpolate(e.count)}}function Jn(a,t){if(a&1&&(b.\u0275\u0275elementStart(0,"mat-card",11)(1,"mat-card-title"),b.\u0275\u0275text(2,"Top behavior causes"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(3,"div",12),b.\u0275\u0275template(4,Yn,5,2,"div",13),b.\u0275\u0275elementEnd()()),a&2){let e=b.\u0275\u0275nextContext();b.\u0275\u0275advance(4),b.\u0275\u0275property("ngForOf",e.metrics.behaviorTopCauses)}}var De=class a{constructor(t,e){this.tenantService=t;this.mock=e}tenant=null;isShell=window.location.pathname.startsWith("/schools");metrics={students:0,activeStudents:0,teachers:0,attendanceToday:0,feesOutstanding:0,behaviorFollowUps:0,behaviorThisMonth:0,behaviorTopCauses:[]};quickLinks=[{label:"Admissions",path:"admissions"},{label:"Students",path:"students"},{label:"Attendance",path:"attendance"},{label:"Behavior",path:"behavior"},{label:"Collect Fees",path:"fees/collect"},{label:"Timetable",path:"timetable"},{label:"Exams",path:"exams"}];ngOnInit(){this.tenantService.currentTenant$.subscribe(t=>{this.tenant=t}),this.computeMetrics()}getLink(t){return this.isShell?`/schools/${t}`:`/${t}`}computeMetrics(){let t=this.mock.getStudents()||[],e=this.mock.getStaff()||[],n=this.mock.getAttendance()||[],r=this.mock.getFees()||[],l=this.mock.getBehaviorIncidents()||[];this.metrics.students=t.length,this.metrics.activeStudents=t.filter(S=>(S.status||"").toLowerCase()==="active").length,this.metrics.teachers=e.length;let C=new Date().toISOString().slice(0,10);this.metrics.attendanceToday=n.filter(S=>S.date===C&&S.status==="present").length,this.metrics.feesOutstanding=r.reduce((S,Q)=>S+(Number(Q.balance)||0),0);let x=C.slice(0,7);this.metrics.behaviorThisMonth=l.filter(S=>(S.date||"").startsWith(x)).length;let y=new Date;this.metrics.behaviorFollowUps=l.filter(S=>S.followUpDate&&new Date(S.followUpDate)>=y).length;let ee={};l.forEach(S=>{ee[S.type]=(ee[S.type]||0)+1}),this.metrics.behaviorTopCauses=Object.entries(ee).sort((S,Q)=>Q[1]-S[1]).slice(0,3).map(([S,Q])=>({type:S,count:Q}))}static \u0275fac=function(e){return new(e||a)(b.\u0275\u0275directiveInject(N),b.\u0275\u0275directiveInject(P))};static \u0275cmp=b.\u0275\u0275defineComponent({type:a,selectors:[["app-schools-dashboard"]],decls:47,vars:12,consts:[[1,"dashboard-container"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"quick-links"],["mat-stroked-button","","color","primary",3,"routerLink",4,"ngFor","ngForOf"],[1,"metrics"],[1,"metric-card","mat-elevation-z2"],[1,"metric-label"],[1,"metric-value"],["class","top-causes mat-elevation-z1",4,"ngIf"],["mat-stroked-button","","color","primary",3,"routerLink"],[1,"top-causes","mat-elevation-z1"],[1,"causes-list"],["class","cause-row",4,"ngFor","ngForOf"],[1,"cause-row"],[1,"pill"]],template:function(e,n){e&1&&(b.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),b.\u0275\u0275text(4,"School Management"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(5,"h1"),b.\u0275\u0275text(6),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(7,"div",3),b.\u0275\u0275template(8,Qn,2,2,"button",4),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(9,"div",5)(10,"mat-card",6)(11,"div",7),b.\u0275\u0275text(12,"Students"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(13,"div",8),b.\u0275\u0275text(14),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(15,"mat-card",6)(16,"div",7),b.\u0275\u0275text(17,"Active"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(18,"div",8),b.\u0275\u0275text(19),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(20,"mat-card",6)(21,"div",7),b.\u0275\u0275text(22,"Teachers"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(23,"div",8),b.\u0275\u0275text(24),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(25,"mat-card",6)(26,"div",7),b.\u0275\u0275text(27,"Present today"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(28,"div",8),b.\u0275\u0275text(29),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",7),b.\u0275\u0275text(32,"Fees outstanding"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(33,"div",8),b.\u0275\u0275text(34),b.\u0275\u0275pipe(35,"currency"),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(36,"mat-card",6)(37,"div",7),b.\u0275\u0275text(38,"Behavior follow-ups"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(39,"div",8),b.\u0275\u0275text(40),b.\u0275\u0275elementEnd()(),b.\u0275\u0275elementStart(41,"mat-card",6)(42,"div",7),b.\u0275\u0275text(43,"Incidents this month"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(44,"div",8),b.\u0275\u0275text(45),b.\u0275\u0275elementEnd()()(),b.\u0275\u0275template(46,Jn,5,1,"mat-card",9),b.\u0275\u0275elementEnd()),e&2&&(b.\u0275\u0275advance(6),b.\u0275\u0275textInterpolate((n.tenant==null?null:n.tenant.displayName)||"School Management System"),b.\u0275\u0275advance(2),b.\u0275\u0275property("ngForOf",n.quickLinks),b.\u0275\u0275advance(6),b.\u0275\u0275textInterpolate(n.metrics.students),b.\u0275\u0275advance(5),b.\u0275\u0275textInterpolate(n.metrics.activeStudents),b.\u0275\u0275advance(5),b.\u0275\u0275textInterpolate(n.metrics.teachers),b.\u0275\u0275advance(5),b.\u0275\u0275textInterpolate(n.metrics.attendanceToday),b.\u0275\u0275advance(5),b.\u0275\u0275textInterpolate(b.\u0275\u0275pipeBind1(35,10,n.metrics.feesOutstanding)),b.\u0275\u0275advance(6),b.\u0275\u0275textInterpolate(n.metrics.behaviorFollowUps),b.\u0275\u0275advance(5),b.\u0275\u0275textInterpolate(n.metrics.behaviorThisMonth),b.\u0275\u0275advance(),b.\u0275\u0275property("ngIf",n.metrics.behaviorTopCauses.length))},dependencies:[Gn,ie.NgForOf,ie.NgIf,qn,v,Lt.MatButton,Ve.MatCard,Ve.MatCardTitle,ie.CurrencyPipe],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px;border-radius:16px;background:linear-gradient(90deg,#3b5998,#1e88e5);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.quick-links[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px}.metric-label[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#6b7280}.metric-value[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#0f172a}.top-causes[_ngcontent-%COMP%]{padding:12px 12px 16px;border-radius:12px}.causes-list[_ngcontent-%COMP%]{display:grid;gap:8px;margin-top:8px}.cause-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;border:1px solid #e5e7eb;border-radius:8px}.pill[_ngcontent-%COMP%]{background:#e5efff;color:#0b63f6;font-weight:700;border-radius:999px;padding:2px 10px;font-size:12px}"]})};import{CommonModule as Zn}from"@angular/common";import{FormsModule as Kn}from"@angular/forms";import{MatPaginator as Xn}from"@angular/material/paginator";import{MatSort as ei}from"@angular/material/sort";import{MatTableDataSource as ti}from"@angular/material/table";import*as d from"@angular/core";import*as Be from"@angular/common";import*as ae from"@angular/forms";import*as ze from"@angular/material/button";import*as j from"@angular/material/input";import*as Ne from"@angular/material/select";import*as O from"@angular/material/table";import*as oe from"@angular/material/card";import*as Bt from"@angular/material/toolbar";import*as re from"@angular/material/chips";import*as zt from"@angular/material/paginator";import*as je from"@angular/material/sort";var ni=()=>[10,25,50];function ii(a,t){if(a&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",60),d.\u0275\u0275listener("click",function(){d.\u0275\u0275restoreView(e);let r=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(r.clearSearch())}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(1,"svg",8),d.\u0275\u0275element(2,"path",61),d.\u0275\u0275elementEnd()()}}function ai(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"mat-option",62),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275property("value",e),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e)}}function oi(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",63),d.\u0275\u0275text(1,"Name"),d.\u0275\u0275elementEnd())}function ri(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64)(1,"div",65),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"div",66),d.\u0275\u0275text(4),d.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate(e.name),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("ID #",e.id)}}function li(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",63),d.\u0275\u0275text(1,"Class"),d.\u0275\u0275elementEnd())}function si(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.class||"--")}}function ci(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",63),d.\u0275\u0275text(1,"Section"),d.\u0275\u0275elementEnd())}function di(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.section||"--")}}function mi(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",63),d.\u0275\u0275text(1,"Roll No"),d.\u0275\u0275elementEnd())}function pi(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.rollNo||"--")}}function ui(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",67),d.\u0275\u0275text(1,"Status"),d.\u0275\u0275elementEnd())}function gi(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64)(1,"mat-chip",68),d.\u0275\u0275text(2),d.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1(" ",e.status||"unknown"," ")}}function fi(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",67),d.\u0275\u0275text(1,"Email"),d.\u0275\u0275elementEnd())}function _i(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.email||"--")}}function Ci(a,t){a&1&&(d.\u0275\u0275elementStart(0,"th",63),d.\u0275\u0275text(1,"Enrolled"),d.\u0275\u0275elementEnd())}function hi(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"td",64),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate(e.enrollmentDate||"--")}}function bi(a,t){a&1&&d.\u0275\u0275element(0,"th",67)}function xi(a,t){if(a&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"td",64)(1,"div",69)(2,"button",70),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.editStudent(r))}),d.\u0275\u0275text(3,"Edit"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"button",39),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.toggleTransfer(r))}),d.\u0275\u0275text(5),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(6,"button",71),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.deleteStudent(r))}),d.\u0275\u0275text(7,"Delete"),d.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;d.\u0275\u0275advance(5),d.\u0275\u0275textInterpolate1(" ",(e.status||"").toLowerCase()==="transferred"?"Restore":"Transfer"," ")}}function Mi(a,t){a&1&&d.\u0275\u0275element(0,"tr",72)}function wi(a,t){a&1&&d.\u0275\u0275element(0,"tr",73)}function yi(a,t){if(a&1&&(d.\u0275\u0275elementStart(0,"tr",74)(1,"td")(2,"div",75),d.\u0275\u0275text(3,"No students match your filters."),d.\u0275\u0275elementEnd()()()),a&2){let e=d.\u0275\u0275nextContext();d.\u0275\u0275advance(),d.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function vi(a,t){if(a&1){let e=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",76)(1,"div",77)(2,"div",65),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"mat-chip",68),d.\u0275\u0275text(5),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(6,"div",66),d.\u0275\u0275text(7),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",66),d.\u0275\u0275text(9),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(10,"div",66),d.\u0275\u0275text(11),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(12,"div",69)(13,"button",70),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.editStudent(r))}),d.\u0275\u0275text(14,"Edit"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(15,"button",39),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.toggleTransfer(r))}),d.\u0275\u0275text(16),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(17,"button",71),d.\u0275\u0275listener("click",function(){let r=d.\u0275\u0275restoreView(e).$implicit,l=d.\u0275\u0275nextContext();return d.\u0275\u0275resetView(l.deleteStudent(r))}),d.\u0275\u0275text(18,"Delete"),d.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate(e.name),d.\u0275\u0275advance(),d.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),d.\u0275\u0275advance(),d.\u0275\u0275textInterpolate1(" ",e.status||"unknown"," "),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate3("ID #",e.id," \xB7 Class ",e.class||"--"," \xB7 Section ",e.section||"--"),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate2("Roll ",e.rollNo||"--"," \xB7 Enrolled ",e.enrollmentDate||"--"),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1("Email: ",e.email||"--"),d.\u0275\u0275advance(5),d.\u0275\u0275textInterpolate1(" ",(e.status||"").toLowerCase()==="transferred"?"Restore":"Transfer"," ")}}var Le=class a{constructor(t,e){this.mock=t;this.tenantService=e;this.loadRows()}rows=[];dataSource=new ti([]);displayedColumns=["name","class","section","rollNo","status","email","enrolled","actions"];classes=[];search="";classFilter="";statusFilter="all";metrics={total:0,active:0,inactive:0};paginator;sort;ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=this.mock.getStudents()||[];this.rows=t.map(e=>({id:e.id,name:`${e.firstName||""} ${e.lastName||""}`.trim(),rollNo:e.rollNo||e.roll_number||"",class:e.class,section:e.section,status:e.status||"active",email:e.email,enrollmentDate:e.enrollmentDate})),this.classes=Array.from(new Set(this.rows.map(e=>e.class).filter(Boolean))),this.refreshMetrics(),this.applyFilters()}refreshMetrics(){this.metrics.total=this.rows.length,this.metrics.active=this.rows.filter(t=>(t.status||"").toLowerCase()==="active").length,this.metrics.inactive=this.rows.length-this.metrics.active}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(n=>{let r=!t||n.name.toLowerCase().includes(t)||String(n.id).includes(t)||(n.rollNo||"").toLowerCase().includes(t),l=!this.classFilter||n.class===this.classFilter,C=this.statusFilter==="all"||(n.status||"").toLowerCase()===this.statusFilter;return r&&l&&C});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addStudent(){alert("Implement add student flow")}editStudent(t){alert(`Edit student ${t.name}`)}deleteStudent(t){confirm("Delete this student?")&&(this.mock.deleteStudent(t.id),this.loadRows())}toggleTransfer(t){let e=(t.status||"").toLowerCase()==="transferred"?"active":"transferred";this.mock.updateStudent(t.id,{status:e}),this.loadRows()}exportCsv(){let t=["Id","Name","Class","Section","Roll","Status","Email","Enrolled"],e=this.dataSource.data.map(x=>[x.id,`"${(x.name||"").replace(/"/g,'""')}"`,x.class||"",x.section||"",x.rollNo||"",x.status||"",x.email||"",x.enrollmentDate||""].join(",")),n=[t.join(","),...e].join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="students.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(d.\u0275\u0275directiveInject(P),d.\u0275\u0275directiveInject(N))};static \u0275cmp=d.\u0275\u0275defineComponent({type:a,selectors:[["app-students"]],viewQuery:function(e,n){if(e&1&&(d.\u0275\u0275viewQuery(Xn,5),d.\u0275\u0275viewQuery(ei,5)),e&2){let r;d.\u0275\u0275queryRefresh(r=d.\u0275\u0275loadQuery())&&(n.paginator=r.first),d.\u0275\u0275queryRefresh(r=d.\u0275\u0275loadQuery())&&(n.sort=r.first)}},decls:112,vars:15,consts:[[1,"fees-page","students-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["viewBox","0 0 24 24",1,"icon"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["d","M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-7 9v-1a6 6 0 0 1 12 0v1H5z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 14-4-4 1.41-1.41L11 13.17l5.59-5.58L18 9l-7 7z","fill","currentColor"],[1,"metric-icon","warn"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 9h-2V7h2v4zm0 4h-2v-2h2v2z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name, id, roll no",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","active"],["value","inactive"],["value","transferred"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"table-card","mat-elevation-z2"],[1,"table-wrap","desktop-only"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","section"],["matColumnDef","rollNo"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","enrolled"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],[1,"action-row"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"]],template:function(e,n){e&1&&(d.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),d.\u0275\u0275text(4,"School Management"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",4),d.\u0275\u0275text(6,"Students"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275element(7,"span",5),d.\u0275\u0275elementStart(8,"div",6)(9,"button",7),d.\u0275\u0275listener("click",function(){return n.addStudent()}),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(10,"svg",8),d.\u0275\u0275element(11,"path",9),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(12," Add Student "),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(13,"div",10)(14,"mat-card",11)(15,"div",12),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(16,"svg",8),d.\u0275\u0275element(17,"path",13),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(18,"div",14)(19,"div",15),d.\u0275\u0275text(20,"Total"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(21,"div",16),d.\u0275\u0275text(22),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(23,"div",17),d.\u0275\u0275text(24,"Students"),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(25,"mat-card",11)(26,"div",18),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(27,"svg",8),d.\u0275\u0275element(28,"path",19),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(29,"div",14)(30,"div",15),d.\u0275\u0275text(31,"Active"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(32,"div",16),d.\u0275\u0275text(33),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(34,"div",17),d.\u0275\u0275text(35,"Currently enrolled"),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(36,"mat-card",11)(37,"div",20),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(38,"svg",8),d.\u0275\u0275element(39,"path",21),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(40,"div",14)(41,"div",15),d.\u0275\u0275text(42,"Inactive"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(43,"div",22),d.\u0275\u0275text(44),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(45,"div",17),d.\u0275\u0275text(46,"Need attention"),d.\u0275\u0275elementEnd()()()(),d.\u0275\u0275elementStart(47,"mat-card",23)(48,"div",24)(49,"mat-form-field",25)(50,"mat-label"),d.\u0275\u0275text(51,"Search"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(52,"span",26),d.\u0275\u0275namespaceSVG(),d.\u0275\u0275elementStart(53,"svg",8),d.\u0275\u0275element(54,"path",27),d.\u0275\u0275elementEnd()(),d.\u0275\u0275namespaceHTML(),d.\u0275\u0275elementStart(55,"input",28),d.\u0275\u0275twoWayListener("ngModelChange",function(l){return d.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),d.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(56,ii,3,0,"button",29),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(57,"mat-form-field",30)(58,"mat-label"),d.\u0275\u0275text(59,"Class"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(60,"mat-select",31),d.\u0275\u0275twoWayListener("ngModelChange",function(l){return d.\u0275\u0275twoWayBindingSet(n.classFilter,l)||(n.classFilter=l),l}),d.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),d.\u0275\u0275elementStart(61,"mat-option",32),d.\u0275\u0275text(62,"All"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(63,ai,2,2,"mat-option",33),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(64,"mat-chip-listbox",34),d.\u0275\u0275listener("selectionChange",function(l){return n.onStatusChange(l)}),d.\u0275\u0275elementStart(65,"mat-chip-option",35),d.\u0275\u0275text(66,"All"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(67,"mat-chip-option",36),d.\u0275\u0275text(68,"Active"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(69,"mat-chip-option",37),d.\u0275\u0275text(70,"Inactive"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(71,"mat-chip-option",38),d.\u0275\u0275text(72,"Transferred"),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(73,"button",39),d.\u0275\u0275listener("click",function(){return n.exportCsv()}),d.\u0275\u0275text(74," Export CSV "),d.\u0275\u0275elementEnd()()(),d.\u0275\u0275elementStart(75,"mat-card",40)(76,"mat-card-title"),d.\u0275\u0275text(77,"Student roster"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(78,"mat-card-subtitle"),d.\u0275\u0275text(79,"Full list with class and status."),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(80,"div",41)(81,"table",42),d.\u0275\u0275elementContainerStart(82,43),d.\u0275\u0275template(83,oi,2,0,"th",44)(84,ri,5,2,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(85,46),d.\u0275\u0275template(86,li,2,0,"th",44)(87,si,2,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(88,47),d.\u0275\u0275template(89,ci,2,0,"th",44)(90,di,2,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(91,48),d.\u0275\u0275template(92,mi,2,0,"th",44)(93,pi,2,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(94,49),d.\u0275\u0275template(95,ui,2,0,"th",50)(96,gi,3,2,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(97,51),d.\u0275\u0275template(98,fi,2,0,"th",50)(99,_i,2,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(100,52),d.\u0275\u0275template(101,Ci,2,0,"th",44)(102,hi,2,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275elementContainerStart(103,53),d.\u0275\u0275template(104,bi,1,0,"th",50)(105,xi,8,1,"td",45),d.\u0275\u0275elementContainerEnd(),d.\u0275\u0275template(106,Mi,1,0,"tr",54)(107,wi,1,0,"tr",55)(108,yi,4,1,"tr",56),d.\u0275\u0275elementEnd()(),d.\u0275\u0275elementStart(109,"div",57),d.\u0275\u0275template(110,vi,19,10,"div",58),d.\u0275\u0275elementEnd(),d.\u0275\u0275element(111,"mat-paginator",59),d.\u0275\u0275elementEnd()()),e&2&&(d.\u0275\u0275advance(22),d.\u0275\u0275textInterpolate(n.metrics.total),d.\u0275\u0275advance(11),d.\u0275\u0275textInterpolate(n.metrics.active),d.\u0275\u0275advance(11),d.\u0275\u0275textInterpolate(n.metrics.inactive),d.\u0275\u0275advance(11),d.\u0275\u0275twoWayProperty("ngModel",n.search),d.\u0275\u0275advance(),d.\u0275\u0275property("ngIf",n.search),d.\u0275\u0275advance(4),d.\u0275\u0275twoWayProperty("ngModel",n.classFilter),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",n.classes),d.\u0275\u0275advance(),d.\u0275\u0275property("value",n.statusFilter),d.\u0275\u0275advance(17),d.\u0275\u0275property("dataSource",n.dataSource),d.\u0275\u0275advance(25),d.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),d.\u0275\u0275advance(),d.\u0275\u0275property("matRowDefColumns",n.displayedColumns),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",n.dataSource.data),d.\u0275\u0275advance(),d.\u0275\u0275property("pageSize",10)("pageSizeOptions",d.\u0275\u0275pureFunction0(14,ni)))},dependencies:[Zn,Be.NgForOf,Be.NgIf,Kn,ae.DefaultValueAccessor,ae.NgControlStatus,ae.NgModel,v,ze.MatButton,ze.MatIconButton,j.MatInput,j.MatFormField,j.MatLabel,j.MatPrefix,j.MatSuffix,Ne.MatSelect,Ne.MatOption,O.MatTable,O.MatHeaderCellDef,O.MatHeaderRowDef,O.MatColumnDef,O.MatCellDef,O.MatRowDef,O.MatHeaderCell,O.MatCell,O.MatHeaderRow,O.MatRow,O.MatNoDataRow,oe.MatCard,oe.MatCardSubtitle,oe.MatCardTitle,Bt.MatToolbar,re.MatChip,re.MatChipListbox,re.MatChipOption,zt.MatPaginator,je.MatSort,je.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".students-page[_ngcontent-%COMP%]{padding:0}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px}.students-page[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:180px}.students-page[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{text-transform:capitalize}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.students-page[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.students-page[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.students-page[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:640px}.students-page[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-end}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.mobile-card[_ngcontent-%COMP%]   .action-row[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})};import{CommonModule as Pi}from"@angular/common";import{FormsModule as Si}from"@angular/forms";import{MatPaginator as Oi}from"@angular/material/paginator";import{MatSort as Ei}from"@angular/material/sort";import{MatTableDataSource as Ti}from"@angular/material/table";import*as u from"@angular/core";import*as We from"@angular/common";import*as le from"@angular/forms";import*as Ue from"@angular/material/button";import*as H from"@angular/material/input";import*as E from"@angular/material/table";import*as se from"@angular/material/card";import*as Nt from"@angular/material/toolbar";import*as ce from"@angular/material/chips";import*as jt from"@angular/material/paginator";import*as $e from"@angular/material/sort";var ki=()=>[10,25,50];function Di(a,t){if(a&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"button",51),u.\u0275\u0275listener("click",function(){u.\u0275\u0275restoreView(e);let r=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(r.clearSearch())}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(1,"svg",8),u.\u0275\u0275element(2,"path",52),u.\u0275\u0275elementEnd()()}}function Ii(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",53),u.\u0275\u0275text(1,"Name"),u.\u0275\u0275elementEnd())}function Fi(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54)(1,"div",55),u.\u0275\u0275text(2),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(3,"div",56),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(e.name),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("ID #",e.id)}}function Ai(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",53),u.\u0275\u0275text(1,"Role"),u.\u0275\u0275elementEnd())}function Ri(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.role)}}function Vi(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",57),u.\u0275\u0275text(1,"Classes"),u.\u0275\u0275elementEnd())}function Li(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.classes||"--")}}function Bi(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",57),u.\u0275\u0275text(1,"Email"),u.\u0275\u0275elementEnd())}function zi(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.email||"--")}}function Ni(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",57),u.\u0275\u0275text(1,"Phone"),u.\u0275\u0275elementEnd())}function ji(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate(e.phone||"--")}}function Hi(a,t){a&1&&(u.\u0275\u0275elementStart(0,"th",57),u.\u0275\u0275text(1,"Status"),u.\u0275\u0275elementEnd())}function Wi(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"td",54)(1,"mat-chip",58),u.\u0275\u0275text(2),u.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;u.\u0275\u0275advance(),u.\u0275\u0275property("color",(e.status||"").toLowerCase()==="active"?"primary":"warn"),u.\u0275\u0275advance(),u.\u0275\u0275textInterpolate1(" ",e.status||"active"," ")}}function Ui(a,t){a&1&&u.\u0275\u0275element(0,"th",57)}function $i(a,t){if(a&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"td",54)(1,"div",59)(2,"button",60),u.\u0275\u0275listener("click",function(){let r=u.\u0275\u0275restoreView(e).$implicit,l=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(l.editTeacher(r))}),u.\u0275\u0275text(3,"Edit"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"button",61),u.\u0275\u0275listener("click",function(){let r=u.\u0275\u0275restoreView(e).$implicit,l=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(l.deleteTeacher(r))}),u.\u0275\u0275text(5,"Delete"),u.\u0275\u0275elementEnd()()()}}function Gi(a,t){a&1&&u.\u0275\u0275element(0,"tr",62)}function qi(a,t){a&1&&u.\u0275\u0275element(0,"tr",63)}function Qi(a,t){if(a&1&&(u.\u0275\u0275elementStart(0,"tr",64)(1,"td")(2,"div",65),u.\u0275\u0275text(3,"No teachers match your filters."),u.\u0275\u0275elementEnd()()()),a&2){let e=u.\u0275\u0275nextContext();u.\u0275\u0275advance(),u.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Yi(a,t){if(a&1){let e=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",66)(1,"div",67)(2,"div",55),u.\u0275\u0275text(3),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"mat-chip",68),u.\u0275\u0275text(5),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(6,"div",56),u.\u0275\u0275text(7),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(8,"div",56),u.\u0275\u0275text(9),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(10,"div",59)(11,"button",60),u.\u0275\u0275listener("click",function(){let r=u.\u0275\u0275restoreView(e).$implicit,l=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(l.editTeacher(r))}),u.\u0275\u0275text(12,"Edit"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(13,"button",61),u.\u0275\u0275listener("click",function(){let r=u.\u0275\u0275restoreView(e).$implicit,l=u.\u0275\u0275nextContext();return u.\u0275\u0275resetView(l.deleteTeacher(r))}),u.\u0275\u0275text(14,"Delete"),u.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(e.name),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(e.role||"Teacher"),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("Email: ",e.email||"--"),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate1("Phone: ",e.phone||"--")}}var He=class a{constructor(t){this.mock=t;this.loadRows()}rows=[];dataSource=new Ti([]);displayedColumns=["name","role","classes","email","phone","status","actions"];search="";statusFilter="all";metrics={total:0,active:0};paginator;sort;ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=this.mock.getStaff()||[];this.rows=t.map(e=>({id:e.id,name:e.name,role:e.role,email:e.email,phone:e.phone,classes:"",status:"active"})),this.refreshMetrics(),this.applyFilters()}refreshMetrics(){this.metrics.total=this.rows.length,this.metrics.active=this.rows.length}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(n=>{let r=!t||n.name.toLowerCase().includes(t)||String(n.id).includes(t),l=this.statusFilter==="all"||(n.status||"").toLowerCase()===this.statusFilter;return r&&l});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addTeacher(){alert("Implement add teacher flow")}editTeacher(t){alert(`Edit ${t.name}`)}deleteTeacher(t){confirm("Delete this teacher?")&&alert("Deleted (mock)")}exportCsv(){let t=["Id","Name","Role","Classes","Email","Phone","Status"],e=this.dataSource.data.map(x=>[x.id,`"${(x.name||"").replace(/"/g,'""')}"`,x.role||"",x.classes||"",x.email||"",x.phone||"",x.status||""].join(",")),n=[t.join(","),...e].join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="teachers.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(u.\u0275\u0275directiveInject(P))};static \u0275cmp=u.\u0275\u0275defineComponent({type:a,selectors:[["app-teachers"]],viewQuery:function(e,n){if(e&1&&(u.\u0275\u0275viewQuery(Oi,5),u.\u0275\u0275viewQuery(Ei,5)),e&2){let r;u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n.paginator=r.first),u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n.sort=r.first)}},decls:89,vars:12,consts:[[1,"fees-page","teachers-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["viewBox","0 0 24 24",1,"icon"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["d","M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-7 9v-1a6 6 0 0 1 12 0v1H5z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 14-4-4 1.41-1.41L11 13.17l5.59-5.58L18 9l-7 7z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name or id",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","active"],["value","inactive"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"table-card","mat-elevation-z2"],[1,"table-wrap","desktop-only"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","classes"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],[1,"action-row"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""]],template:function(e,n){e&1&&(u.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),u.\u0275\u0275text(4,"School Management"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"div",4),u.\u0275\u0275text(6,"Teachers"),u.\u0275\u0275elementEnd()(),u.\u0275\u0275element(7,"span",5),u.\u0275\u0275elementStart(8,"div",6)(9,"button",7),u.\u0275\u0275listener("click",function(){return n.addTeacher()}),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(10,"svg",8),u.\u0275\u0275element(11,"path",9),u.\u0275\u0275elementEnd(),u.\u0275\u0275text(12," Add Teacher "),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(13,"div",10)(14,"mat-card",11)(15,"div",12),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(16,"svg",8),u.\u0275\u0275element(17,"path",13),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(18,"div",14)(19,"div",15),u.\u0275\u0275text(20,"Total"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(21,"div",16),u.\u0275\u0275text(22),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(23,"div",17),u.\u0275\u0275text(24,"Teachers"),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(25,"mat-card",11)(26,"div",18),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(27,"svg",8),u.\u0275\u0275element(28,"path",19),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(29,"div",14)(30,"div",15),u.\u0275\u0275text(31,"Active"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(32,"div",16),u.\u0275\u0275text(33),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(34,"div",17),u.\u0275\u0275text(35,"Available"),u.\u0275\u0275elementEnd()()()(),u.\u0275\u0275elementStart(36,"mat-card",20)(37,"div",21)(38,"mat-form-field",22)(39,"mat-label"),u.\u0275\u0275text(40,"Search"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(41,"span",23),u.\u0275\u0275namespaceSVG(),u.\u0275\u0275elementStart(42,"svg",8),u.\u0275\u0275element(43,"path",24),u.\u0275\u0275elementEnd()(),u.\u0275\u0275namespaceHTML(),u.\u0275\u0275elementStart(44,"input",25),u.\u0275\u0275twoWayListener("ngModelChange",function(l){return u.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),u.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(45,Di,3,0,"button",26),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(46,"mat-chip-listbox",27),u.\u0275\u0275listener("selectionChange",function(l){return n.onStatusChange(l)}),u.\u0275\u0275elementStart(47,"mat-chip-option",28),u.\u0275\u0275text(48,"All"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(49,"mat-chip-option",29),u.\u0275\u0275text(50,"Active"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(51,"mat-chip-option",30),u.\u0275\u0275text(52,"Inactive"),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(53,"button",31),u.\u0275\u0275listener("click",function(){return n.exportCsv()}),u.\u0275\u0275text(54," Export CSV "),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(55,"mat-card",32)(56,"mat-card-title"),u.\u0275\u0275text(57,"Teacher roster"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(58,"mat-card-subtitle"),u.\u0275\u0275text(59,"All teaching staff with contact."),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(60,"div",33)(61,"table",34),u.\u0275\u0275elementContainerStart(62,35),u.\u0275\u0275template(63,Ii,2,0,"th",36)(64,Fi,5,2,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(65,38),u.\u0275\u0275template(66,Ai,2,0,"th",36)(67,Ri,2,1,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(68,39),u.\u0275\u0275template(69,Vi,2,0,"th",40)(70,Li,2,1,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(71,41),u.\u0275\u0275template(72,Bi,2,0,"th",40)(73,zi,2,1,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(74,42),u.\u0275\u0275template(75,Ni,2,0,"th",40)(76,ji,2,1,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(77,43),u.\u0275\u0275template(78,Hi,2,0,"th",40)(79,Wi,3,2,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(80,44),u.\u0275\u0275template(81,Ui,1,0,"th",40)(82,$i,6,0,"td",37),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275template(83,Gi,1,0,"tr",45)(84,qi,1,0,"tr",46)(85,Qi,4,1,"tr",47),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(86,"div",48),u.\u0275\u0275template(87,Yi,15,4,"div",49),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(88,"mat-paginator",50),u.\u0275\u0275elementEnd()()),e&2&&(u.\u0275\u0275advance(22),u.\u0275\u0275textInterpolate(n.metrics.total),u.\u0275\u0275advance(11),u.\u0275\u0275textInterpolate(n.metrics.active),u.\u0275\u0275advance(11),u.\u0275\u0275twoWayProperty("ngModel",n.search),u.\u0275\u0275advance(),u.\u0275\u0275property("ngIf",n.search),u.\u0275\u0275advance(),u.\u0275\u0275property("value",n.statusFilter),u.\u0275\u0275advance(15),u.\u0275\u0275property("dataSource",n.dataSource),u.\u0275\u0275advance(22),u.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),u.\u0275\u0275advance(),u.\u0275\u0275property("matRowDefColumns",n.displayedColumns),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngForOf",n.dataSource.data),u.\u0275\u0275advance(),u.\u0275\u0275property("pageSize",10)("pageSizeOptions",u.\u0275\u0275pureFunction0(11,ki)))},dependencies:[Pi,We.NgForOf,We.NgIf,Si,le.DefaultValueAccessor,le.NgControlStatus,le.NgModel,v,Ue.MatButton,Ue.MatIconButton,H.MatInput,H.MatFormField,H.MatLabel,H.MatPrefix,H.MatSuffix,E.MatTable,E.MatHeaderCellDef,E.MatHeaderRowDef,E.MatColumnDef,E.MatCellDef,E.MatRowDef,E.MatHeaderCell,E.MatCell,E.MatHeaderRow,E.MatRow,E.MatNoDataRow,se.MatCard,se.MatCardSubtitle,se.MatCardTitle,Nt.MatToolbar,ce.MatChip,ce.MatChipListbox,ce.MatChipOption,jt.MatPaginator,$e.MatSort,$e.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".teachers-page[_ngcontent-%COMP%]{padding:0}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px}.teachers-page[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{min-width:180px}.teachers-page[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{text-transform:capitalize}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.teachers-page[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.teachers-page[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.teachers-page[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:640px}.teachers-page[_ngcontent-%COMP%]   .toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-end}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}}"]})};import{CommonModule as na}from"@angular/common";import{FormsModule as ia}from"@angular/forms";import*as i from"@angular/core";import{BehaviorSubject as Ji}from"rxjs";import*as Ht from"@angular/core";var Ge=class a{records=[];records$=new Ji([]);getAttendanceRecords(){return this.records$.asObservable()}addRecord(t){this.records.push(t),this.records$.next(this.records)}updateRecord(t,e){let n=this.records.findIndex(r=>r.id===t);n>-1&&(this.records[n]=te(te({},this.records[n]),e),this.records$.next(this.records))}getRecordsForClass(t,e){return this.records.filter(n=>n.classId===t&&n.date===e)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Ht.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})};import*as Gt from"@angular/common/http";import{HttpHeaders as Ki}from"@angular/common/http";import{throwError as Xi,BehaviorSubject as Wt}from"rxjs";import{catchError as de,retry as ea,tap as z,map as Ut}from"rxjs/operators";import*as Ie from"@angular/core";import*as $t from"@angular/common/http";var qe=class a{constructor(t,e){this.http=t;this.tenantService=e}baseUrl=ne.apiUrl;version=ne.apiVersion;loadingSubject=new Wt(!1);loading$=this.loadingSubject.asObservable();errorSubject=new Wt(null);error$=this.errorSubject.asObservable();get(t,e){this.setLoading(!0);let n=this.buildUrl(t),r={headers:this.getHeaders(),params:this.buildParams(e)};return this.http.get(n,r).pipe(ea(2),z(l=>{this.setLoading(!1),this.clearError(),l==null&&console.warn("ApiService.get: received null response for",t)}),Ut(l=>l==null?{}:l.data!==void 0?l.data:l),de(l=>this.handleError(l)))}post(t,e,n){this.setLoading(!0);let r=this.buildUrl(t),l={headers:this.getHeaders()};return n&&(l.params=this.buildParams(n)),this.http.post(r,e,l).pipe(z(()=>this.setLoading(!1)),z(()=>this.clearError()),de(C=>this.handleError(C)))}put(t,e,n){this.setLoading(!0);let r=this.buildUrl(t),l={headers:this.getHeaders()};return n&&(l.params=this.buildParams(n)),this.http.put(r,e,l).pipe(z(()=>this.setLoading(!1)),z(()=>this.clearError()),de(C=>this.handleError(C)))}delete(t,e){this.setLoading(!0);let n=this.buildUrl(t),r={headers:this.getHeaders()};return e&&(r.params=this.buildParams(e)),this.http.delete(n,r).pipe(z(()=>this.setLoading(!1)),z(()=>this.clearError()),de(l=>this.handleError(l)))}uploadFile(t,e,n){this.setLoading(!0);let r=this.buildUrl(t),l=new FormData;l.append("file",e),n&&Object.keys(n).forEach(x=>{l.append(x,n[x])});let C=this.getHeaders();return C.delete("Content-Type"),this.http.post(r,l,{headers:C}).pipe(z(()=>this.setLoading(!1)),z(()=>this.clearError()),de(x=>this.handleError(x)))}downloadFile(t,e){this.setLoading(!0);let n=this.buildUrl(t),r={headers:this.getHeaders(),responseType:"blob"};return this.http.get(n,r).pipe(Ut(l=>l),z(()=>this.setLoading(!1)),z(l=>{e&&this.saveFile(l,e)}),de(l=>this.handleError(l)))}buildUrl(t){let e=t.startsWith("/")?t.slice(1):t;return`${this.baseUrl}/${this.version}/${e}`}getHeaders(){let t=new Ki({"Content-Type":"application/json",Accept:"application/json"}),e=this.getAuthToken();e&&(t=t.set("Authorization",`Bearer ${e}`));let n=this.getTenantId();return n&&(t=t.set("X-Tenant-ID",n)),t}buildParams(t){if(!t)return;let e={};return Object.keys(t).forEach(n=>{t[n]!==null&&t[n]!==void 0&&t[n]!==""&&(e[n]=t[n])}),e}handleError(t){this.setLoading(!1);let e;return t.error instanceof ErrorEvent?e={code:"CLIENT_ERROR",message:"A client-side error occurred. Please check your internet connection.",details:t.error.message,timestamp:new Date().toISOString()}:e={code:t.error?.code||`HTTP_${t.status}`,message:t.error?.message||this.getErrorMessage(t.status),details:t.error?.details||t.message,timestamp:new Date().toISOString()},this.setError(e),console.error("API Error:",e),Xi(()=>e)}getErrorMessage(t){switch(t){case 400:return"Invalid request. Please check your input.";case 401:return"You are not authorized. Please log in again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"Conflict. The resource already exists or is being used.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Internal server error. Please try again later.";case 502:return"Bad gateway. The server is temporarily unavailable.";case 503:return"Service unavailable. Please try again later.";case 504:return"Gateway timeout. The server took too long to respond.";default:return"An unexpected error occurred. Please try again."}}getAuthToken(){return typeof window<"u"?localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")||localStorage.getItem("shellAuthToken")||sessionStorage.getItem("shellAuthToken"):null}getTenantId(){return this.tenantService.getTenantId()}saveFile(t,e){if(typeof window<"u"){let n=document.createElement("a"),r=window.URL.createObjectURL(t);n.href=r,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}}setLoading(t){this.loadingSubject.next(t)}setError(t){this.errorSubject.next(t)}clearError(){this.errorSubject.next(null)}clearCurrentError(){this.clearError()}shouldUseMockData(){return!1}static \u0275fac=function(e){return new(e||a)(Ie.\u0275\u0275inject($t.HttpClient),Ie.\u0275\u0275inject(N))};static \u0275prov=Ie.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})};import*as Y from"@angular/common";import*as B from"@angular/forms";function aa(a,t){if(a&1){let e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",55),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);let r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.clearSearch())}),i.\u0275\u0275text(1,"\u2715"),i.\u0275\u0275elementEnd()}}function oa(a,t){if(a&1&&(i.\u0275\u0275elementStart(0,"option",56),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;i.\u0275\u0275property("value",e),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(e)}}function ra(a,t){if(a&1&&(i.\u0275\u0275elementStart(0,"option",56),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;i.\u0275\u0275property("value",e),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate(e)}}function la(a,t){if(a&1&&(i.\u0275\u0275elementStart(0,"span",85),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate2(" ",e.day.substring(0,3)," ",e.startTime," ")}}function sa(a,t){if(a&1){let e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tr",57),i.\u0275\u0275listener("click",function(){let r=i.\u0275\u0275restoreView(e).$implicit,l=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(l.selectClass(r))}),i.\u0275\u0275elementStart(1,"td",58)(2,"strong"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(4,"td",59)(5,"div",60)(6,"strong"),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"small",61),i.\u0275\u0275text(9),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(10,"td",62)(11,"span",63),i.\u0275\u0275text(12),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(13,"td",64),i.\u0275\u0275text(14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"td",65),i.\u0275\u0275text(16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"td",66)(18,"div",67)(19,"span",68),i.\u0275\u0275text(20),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(21,"div",69),i.\u0275\u0275element(22,"div",70),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(23,"small",71),i.\u0275\u0275text(24),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(25,"td",72)(26,"div",73),i.\u0275\u0275template(27,la,2,2,"span",74),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(28,"td",75)(29,"span",76)(30,"span",77),i.\u0275\u0275text(31),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(32),i.\u0275\u0275pipe(33,"titlecase"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(34,"td")(35,"button",78),i.\u0275\u0275listener("click",function(){let r=i.\u0275\u0275restoreView(e).$implicit,l=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(l.showAttendance(r))}),i.\u0275\u0275text(36,"Attendance"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(37,"td",79)(38,"div",80)(39,"button",81),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().viewClass(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275text(40,"\u{1F441}\uFE0F"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(41,"button",82),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().editClass(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275text(42,"\u270F\uFE0F"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(43,"button",83),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().manageEnrollment(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275text(44,"\u{1F465}"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"button",84),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().generateReport(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275text(46,"\u{1F4CA}"),i.\u0275\u0275elementEnd()()()()}if(a&2){let e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("highlighted",n.isClassSelected(e)),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.code),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(e.name),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",e.semester," ",e.year),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.department),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.teacherName),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.credits),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate2("",e.enrolledStudents,"/",e.maxStudents),i.\u0275\u0275advance(2),i.\u0275\u0275styleProp("width",n.getCapacityPercentage(e),"%"),i.\u0275\u0275property("ngClass",n.getCapacityClass(e)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1("",n.getCapacityPercentage(e),"%"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",e.schedule),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",n.getStatusClass(e.status)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.getStatusIcon(e.status)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(33,19,e.status)," ")}}function ca(a,t){a&1&&(i.\u0275\u0275elementStart(0,"div",86)(1,"span",87),i.\u0275\u0275text(2,"\u2190 Scroll horizontally to see more \u2192"),i.\u0275\u0275elementEnd()())}function da(a,t){if(a&1&&(i.\u0275\u0275elementStart(0,"div",114)(1,"span",115),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"span",116),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",117),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.day),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate2("",e.startTime,"-",e.endTime),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.room)}}function ma(a,t){if(a&1&&(i.\u0275\u0275elementStart(0,"div",95)(1,"div",99)(2,"span",97),i.\u0275\u0275text(3,"\u{1F4CB} Prerequisites"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"span",98),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd()()()),a&2){let e=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(n.formatPrerequisites(e.prerequisites))}}function pa(a,t){if(a&1){let e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",88),i.\u0275\u0275listener("click",function(){let r=i.\u0275\u0275restoreView(e).$implicit,l=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(l.selectClass(r))}),i.\u0275\u0275elementStart(1,"div",89)(2,"div",90)(3,"h3",91),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",92),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(7,"div",93)(8,"span",76)(9,"span",77),i.\u0275\u0275text(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"titlecase"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(13,"div",94)(14,"div",95)(15,"div",96)(16,"span",97),i.\u0275\u0275text(17,"\u{1F3EB} Department"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"span",98)(19,"span",63),i.\u0275\u0275text(20),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(21,"div",95)(22,"div",96)(23,"span",97),i.\u0275\u0275text(24,"\u{1F468}\u200D\u{1F3EB} Teacher"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"span",98),i.\u0275\u0275text(26),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(27,"div",95)(28,"div",96)(29,"span",97),i.\u0275\u0275text(30,"\u{1F4DA} Credits"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(31,"span",98),i.\u0275\u0275text(32),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(33,"div",96)(34,"span",97),i.\u0275\u0275text(35,"\u{1F4C5} Semester"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(36,"span",98),i.\u0275\u0275text(37),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(38,"div",95)(39,"div",99)(40,"span",97),i.\u0275\u0275text(41,"\u{1F465} Enrollment"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(42,"div",100)(43,"span",68),i.\u0275\u0275text(44),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"div",101),i.\u0275\u0275element(46,"div",102),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(47,"small",103),i.\u0275\u0275text(48),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(49,"div",95)(50,"div",99)(51,"span",97),i.\u0275\u0275text(52,"\u{1F552} Schedule"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(53,"div",104),i.\u0275\u0275template(54,da,7,4,"div",105),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(55,ma,6,1,"div",106),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(56,"div",107)(57,"button",108),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().viewClass(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275elementStart(58,"span",109),i.\u0275\u0275text(59,"\u{1F441}\uFE0F"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(60,"span",110),i.\u0275\u0275text(61,"View"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(62,"button",111),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().manageEnrollment(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275elementStart(63,"span",109),i.\u0275\u0275text(64,"\u{1F465}"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(65,"span",110),i.\u0275\u0275text(66,"Enrollment"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(67,"button",112),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().viewSchedule(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275elementStart(68,"span",109),i.\u0275\u0275text(69,"\u{1F4C5}"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(70,"span",110),i.\u0275\u0275text(71,"Schedule"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(72,"button",113),i.\u0275\u0275listener("click",function(r){let l=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().duplicateClass(l),i.\u0275\u0275resetView(r.stopPropagation())}),i.\u0275\u0275elementStart(73,"span",109),i.\u0275\u0275text(74,"\u{1F4CB}"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(75,"span",110),i.\u0275\u0275text(76,"Duplicate"),i.\u0275\u0275elementEnd()()()()}if(a&2){let e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("selected",n.isClassSelected(e)),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(e.name),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(e.code),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",n.getStatusClass(e.status)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.getStatusIcon(e.status)),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(12,20,e.status)," "),i.\u0275\u0275advance(9),i.\u0275\u0275textInterpolate(e.department),i.\u0275\u0275advance(6),i.\u0275\u0275textInterpolate(e.teacherName),i.\u0275\u0275advance(6),i.\u0275\u0275textInterpolate1("",e.credits," credits"),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate2("",e.semester," ",e.year),i.\u0275\u0275advance(7),i.\u0275\u0275textInterpolate2("",e.enrolledStudents,"/",e.maxStudents," students"),i.\u0275\u0275advance(2),i.\u0275\u0275styleProp("width",n.getCapacityPercentage(e),"%"),i.\u0275\u0275property("ngClass",n.getCapacityClass(e)),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(n.getEnrollmentStatus(e)),i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",e.schedule),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",e.prerequisites&&e.prerequisites.length>0)}}function ua(a,t){if(a&1){let e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",118)(1,"button",119),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);let r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.loadMoreClasses())}),i.\u0275\u0275elementStart(2,"span",109),i.\u0275\u0275text(3,"\u2B07\uFE0F"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd()()}if(a&2){let e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" Load More Classes (",e.filteredClasses.length-e.displayLimit," remaining) ")}}function ga(a,t){if(a&1){let e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",120)(1,"div",121)(2,"h3"),i.\u0275\u0275text(3,"\u{1F4DA} No Classes Found"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"p"),i.\u0275\u0275text(5,"No classes match your current search criteria."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",122)(7,"button",123),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);let r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.clearFilters())}),i.\u0275\u0275text(8,"Clear Filters"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"button",124),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);let r=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(r.addClass())}),i.\u0275\u0275text(10,"Add New Class"),i.\u0275\u0275elementEnd()()()()}}var Qe=class a{constructor(t,e,n,r,l){this.attendanceService=t;this.http=e;this.api=n;this.cdr=r;this.zone=l;try{console.log("ClassesComponent constructor")}catch{}}classes=[];enrollments=[];filteredClasses=[];selectedClass=null;showEnrollmentModal=!1;searchTerm="";selectedDepartment="";selectedSemester="";selectedStatus="";viewMode="table";displayLimit=20;sortField="name";currentSort={field:"name",direction:"asc"};newEnrollmentStudentId=null;allStudents=[];selectedEnrollmentClass=null;selectedAttendanceClass=null;attendanceDate=new Date().toISOString();showScrollIndicator=!1;showMobileFilters=!1;departments=[];semesters=[];displayedColumns=["code","name","department","teacher","credits","capacity","schedule","status","attendance","actions"];ngAfterViewInit(){try{console.log("ClassesComponent ngAfterViewInit")}catch{}}ngOnInit(){this.fetchClasses(),this.fetchEnrollments()}fetchClasses(){try{console.log("Fetching classes via ApiService")}catch{}this.api.get("classes/summary").subscribe({next:t=>{let e=[];Array.isArray(t)?e=t:t&&Array.isArray(t.data)?e=t.data:t&&Array.isArray(t.classes)?e=t.classes:console.warn("Unexpected /classes response \u2014 expected array, got:",t),this.classes=Array.isArray(e)?e:[];try{this.zone.run(()=>{this.departments=Array.from(new Set(this.classes.map(n=>n.department).filter(Boolean))).sort(),this.semesters=Array.from(new Set(this.classes.map(n=>n.semester).filter(Boolean))).sort(),this.applyFilters()})}catch{this.departments=Array.from(new Set(this.classes.map(r=>r.department).filter(Boolean))).sort(),this.semesters=Array.from(new Set(this.classes.map(r=>r.semester).filter(Boolean))).sort(),this.applyFilters()}try{console.log("Classes fetched:",{count:this.classes.length,departments:this.departments.slice(0,50),semesters:this.semesters.slice(0,50),filtered:this.filteredClasses.length})}catch{}try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}try{if(!this.departments||this.departments.length<=1){try{console.log("Departments list small, fetching via ApiService")}catch{}this.api.get("departments").subscribe({next:n=>{let r=n?.data;if(Array.isArray(r)&&r.length){this.departments=Array.from(new Set(r.filter(Boolean))).sort();try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}}},error:n=>{}})}}catch{}},error:t=>console.error("Error fetching classes",t)})}fetchEnrollments(){this.api.get("enrollments/summary").subscribe({next:t=>{if(Array.isArray(t))this.enrollments=t;else{console.warn("Unexpected /enrollments response \u2014 expected array, got:",t);let e=t||{};this.enrollments=Array.isArray(e.enrollments)?e.enrollments:[]}try{console.log("Enrollments fetched:",{count:this.enrollments.length}),this.zone.run(()=>{})}catch{}try{setTimeout(()=>{try{this.cdr.detectChanges()}catch{}},0)}catch{try{this.cdr.detectChanges()}catch{}}},error:t=>console.error("Error fetching enrollments",t)})}applyFilters(){let t=[...this.classes],e=this.searchTerm?.trim().toLowerCase();e&&(t=t.filter(l=>(l.name||"").toLowerCase().includes(e)||(l.code||"").toLowerCase().includes(e))),this.selectedDepartment&&(t=t.filter(l=>l.department===this.selectedDepartment)),this.selectedSemester&&(t=t.filter(l=>l.semester===this.selectedSemester)),this.selectedStatus&&(t=t.filter(l=>l.status===this.selectedStatus));let n=this.currentSort.field||this.sortField,r=this.currentSort.direction==="desc"?-1:1;t.sort((l,C)=>{let x=l&&l[n]||"",y=C&&C[n]||"";return x<y?-1*r:x>y?1*r:0}),this.filteredClasses=t}exportClassList(){let t=[["ID","Code","Name","Department","Semester","Year","Credits","Status"]];this.classes.forEach(C=>t.push([String(C.id),C.code||"",C.name||"",C.department||"",C.semester||"",String(C.year||""),String(C.credits||""),C.status||""]));let e=t.map(C=>C.map(x=>'"'+String(x).replace(/"/g,'""')+'"').join(",")).join(`
`),n=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download="classes.csv",l.click(),URL.revokeObjectURL(r)}toggleMobileFilters(){this.showMobileFilters=!this.showMobileFilters}filterClasses(){this.applyFilters()}sortClasses(){this.sortByField(this.sortField)}getActiveCount(){return this.classes.filter(t=>t.status==="active").length}getTotalEnrollments(){return this.enrollments.filter(t=>t.status==="enrolled").length}getAverageCapacity(){if(!this.classes.length)return 0;let t=this.classes.map(n=>this.getCapacityPercentage(n));return Math.round(t.reduce((n,r)=>n+r,0)/t.length)}getDepartmentCount(){return this.departments.length}getEnrollmentStatus(t){if(!t.maxStudents)return"unknown";let e=this.getCapacityPercentage(t);return e>=100?"full":e>=90?"nearly-full":"open"}formatPrerequisites(t){return!t||t.length===0?"None":t.join(", ")}viewSchedule(t){}duplicateClass(t){let e=At(te({},t),{id:Date.now()});this.classes.push(e),this.applyFilters()}openEnrollmentModal(t){this.selectedClass=t,this.showEnrollmentModal=!0}closeEnrollmentModal(){this.selectedClass=null,this.showEnrollmentModal=!1}getEnrolledForClass(t){return this.enrollments.filter(e=>e.classId===t&&e.status==="enrolled")}ensureAttendanceRecordsForClass(t){let e=this.getEnrolledForClass(t),r=new Date().toISOString();e.forEach(l=>{this.attendanceService.getRecordsForClass(t,r).find(x=>x.studentId===l.studentId)||this.attendanceService.addRecord({id:Date.now(),studentId:l.studentId,studentName:l.studentName,classId:t,className:this.classes.find(x=>x.id===t)?.name||"",date:r,status:"present",notes:""})})}onSearch(t){t!==void 0&&(this.searchTerm=t),this.applyFilters()}clearSearch(){this.searchTerm="",this.applyFilters()}checkScrollIndicator(){}setViewMode(t){this.viewMode=t}sortByField(t){this.currentSort.field===t?this.currentSort.direction=this.currentSort.direction==="asc"?"desc":"asc":(this.currentSort.field=t,this.currentSort.direction="asc"),this.applyFilters()}trackByClassId(t,e){return e.id}get dataSource(){return this.filteredClasses}isClassSelected(t){return!!this.selectedClass&&this.selectedClass.id===t.id}selectClass(t){this.selectedClass=t}getCapacityPercentage(t){return t.maxStudents?Math.round((t.enrolledStudents||0)/t.maxStudents*100):0}getCapacityClass(t){let e=this.getCapacityPercentage(t);return e>=90?"capacity-high":e>=60?"capacity-medium":"capacity-low"}getStatusClass(t){switch(t){case"active":return"status-active";case"cancelled":return"status-cancelled";case"completed":return"status-completed";default:return""}}getStatusIcon(t){switch(t){case"active":return"\u2705";case"cancelled":return"\u274C";case"completed":return"\u{1F3C1}";default:return""}}showAttendance(t){this.selectedAttendanceClass=t,this.ensureAttendanceRecordsForClass(t.id)}closeAttendance(){this.selectedAttendanceClass=null}viewClass(t){}editClass(t){}manageEnrollment(t){this.selectedEnrollmentClass=t,this.showEnrollmentModal=!0}getEnrolledStudents(t){return this.enrollments.filter(e=>e.classId===t&&e.status==="enrolled")}removeStudentFromClass(t){let e=this.enrollments.findIndex(n=>n.id===t);e>-1&&(this.enrollments[e].status="dropped")}addStudentToClass(){if(!this.selectedEnrollmentClass||!this.newEnrollmentStudentId)return;let t=this.allStudents.find(e=>e.studentId===this.newEnrollmentStudentId);t&&(this.enrollments.push({id:Date.now(),studentId:t.studentId,studentName:t.studentName,classId:this.selectedEnrollmentClass.id,status:"enrolled"}),this.newEnrollmentStudentId=null)}generateReport(t){}loadMoreClasses(){this.displayLimit+=20}clearFilters(){this.selectedDepartment="",this.selectedSemester="",this.selectedStatus="",this.searchTerm="",this.applyFilters()}addClass(){}static \u0275fac=function(e){return new(e||a)(i.\u0275\u0275directiveInject(Ge),i.\u0275\u0275directiveInject(Gt.HttpClient),i.\u0275\u0275directiveInject(qe),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(i.NgZone))};static \u0275cmp=i.\u0275\u0275defineComponent({type:a,selectors:[["app-classes"]],decls:154,vars:55,consts:[[1,"classes-container"],[1,"classes-header"],[1,"header-search"],[1,"search-wrapper"],["type","text","placeholder","\u{1F50D} Search classes...",1,"form-input","header-search-input",3,"ngModelChange","input","ngModel"],["class","clear-search-btn",3,"click",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary","export-btn",3,"click"],[1,"btn","btn-primary","add-class-btn",3,"click"],[1,"filters-section"],[1,"mobile-filter-toggle",3,"click"],[1,"filter-icon"],[1,"filter-row"],[1,"mobile-filter-row"],[1,"filter-group"],[1,"filter-label"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","active"],["value","cancelled"],["value","completed"],["value","draft"],[1,"filter-actions"],[1,"btn","btn-secondary","clear-filters",3,"click"],[1,"sort-options"],["value","name"],["value","code"],["value","department"],["value","teacher"],["value","credits"],["value","enrollment"],["value","capacity"],["value","status"],[1,"quick-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"classes-table-container"],[1,"view-controls"],[1,"classes-count"],[1,"view-toggle-buttons"],["title","Table View",1,"view-toggle-btn",3,"click"],["title","Card View",1,"view-toggle-btn",3,"click"],[1,"table-wrapper"],[1,"table-scroll-container"],[1,"classes-table"],[1,"sortable",3,"click"],[1,"sort-indicator"],["class","class-row",3,"highlighted","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","scroll-indicator",4,"ngIf"],[1,"mobile-cards"],["class","class-card",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-section",4,"ngIf"],["class","no-classes",4,"ngIf"],[1,"clear-search-btn",3,"click"],[3,"value"],[1,"class-row",3,"click"],[1,"class-code"],[1,"class-name"],[1,"name-wrapper"],[1,"class-semester"],[1,"department-cell"],[1,"department-badge"],[1,"teacher-cell"],[1,"credits-cell"],[1,"capacity-cell"],[1,"capacity-info"],[1,"capacity-numbers"],[1,"capacity-bar"],[1,"capacity-fill",3,"ngClass"],[1,"capacity-percentage"],[1,"schedule-cell"],[1,"schedule-summary"],["class","schedule-item",4,"ngFor","ngForOf"],[1,"status-cell"],[1,"status-badge",3,"ngClass"],[1,"status-icon"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"actions-cell"],[1,"action-buttons"],["title","View Details",1,"btn-action","btn-view",3,"click"],["title","Edit Class",1,"btn-action","btn-edit",3,"click"],["title","Manage Enrollment",1,"btn-action","btn-enrollment",3,"click"],["title","Generate Report",1,"btn-action","btn-more",3,"click"],[1,"schedule-item"],[1,"scroll-indicator"],[1,"scroll-text"],[1,"class-card",3,"click"],[1,"class-card-header"],[1,"class-info"],[1,"class-card-name"],[1,"class-card-code"],[1,"class-card-status"],[1,"class-card-body"],[1,"card-row"],[1,"class-card-field"],[1,"class-card-label"],[1,"class-card-value"],[1,"class-card-field","full-width"],[1,"capacity-info-mobile"],[1,"capacity-bar-mobile"],[1,"capacity-fill-mobile",3,"ngClass"],[1,"enrollment-status"],[1,"schedule-mobile"],["class","schedule-item-mobile",4,"ngFor","ngForOf"],["class","card-row",4,"ngIf"],[1,"class-card-actions"],["title","View Details",1,"card-action-btn","primary",3,"click"],[1,"btn-icon"],[1,"btn-text"],["title","Manage Enrollment",1,"card-action-btn","secondary",3,"click"],["title","Schedule",1,"card-action-btn","tertiary",3,"click"],["title","Duplicate Class",1,"card-action-btn","quaternary",3,"click"],[1,"schedule-item-mobile"],[1,"schedule-day"],[1,"schedule-time"],[1,"schedule-room"],[1,"load-more-section"],[1,"btn","btn-outline","load-more-btn",3,"click"],[1,"no-classes"],[1,"empty-state"],[1,"empty-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),i.\u0275\u0275text(3,"\u{1F4DA} Classes Management"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",2)(5,"div",3)(6,"input",4),i.\u0275\u0275twoWayListener("ngModelChange",function(l){return i.\u0275\u0275twoWayBindingSet(n.searchTerm,l)||(n.searchTerm=l),l}),i.\u0275\u0275listener("input",function(){return n.onSearch()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,aa,2,0,"button",5),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(8,"div",6)(9,"button",7),i.\u0275\u0275listener("click",function(){return n.exportClassList()}),i.\u0275\u0275text(10," \u{1F4CA} Export "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"button",8),i.\u0275\u0275listener("click",function(){return n.addClass()}),i.\u0275\u0275text(12," \u2795 Add New Class "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(13,"div",9)(14,"div",10),i.\u0275\u0275listener("click",function(){return n.toggleMobileFilters()}),i.\u0275\u0275elementStart(15,"span"),i.\u0275\u0275text(16,"\u{1F50D} Filters & Search"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"span",11),i.\u0275\u0275text(18,"\u25BC"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(19,"div",12)(20,"div",13)(21,"div",14)(22,"label",15),i.\u0275\u0275text(23,"Department"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"select",16),i.\u0275\u0275twoWayListener("ngModelChange",function(l){return i.\u0275\u0275twoWayBindingSet(n.selectedDepartment,l)||(n.selectedDepartment=l),l}),i.\u0275\u0275listener("change",function(){return n.filterClasses()}),i.\u0275\u0275elementStart(25,"option",17),i.\u0275\u0275text(26,"All Departments"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(27,oa,2,2,"option",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(28,"div",14)(29,"label",15),i.\u0275\u0275text(30,"Semester"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(31,"select",16),i.\u0275\u0275twoWayListener("ngModelChange",function(l){return i.\u0275\u0275twoWayBindingSet(n.selectedSemester,l)||(n.selectedSemester=l),l}),i.\u0275\u0275listener("change",function(){return n.filterClasses()}),i.\u0275\u0275elementStart(32,"option",17),i.\u0275\u0275text(33,"All Semesters"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(34,ra,2,2,"option",18),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(35,"div",14)(36,"label",15),i.\u0275\u0275text(37,"Status"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(38,"select",16),i.\u0275\u0275twoWayListener("ngModelChange",function(l){return i.\u0275\u0275twoWayBindingSet(n.selectedStatus,l)||(n.selectedStatus=l),l}),i.\u0275\u0275listener("change",function(){return n.filterClasses()}),i.\u0275\u0275elementStart(39,"option",17),i.\u0275\u0275text(40,"All Status"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(41,"option",19),i.\u0275\u0275text(42,"Active"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(43,"option",20),i.\u0275\u0275text(44,"Cancelled"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(45,"option",21),i.\u0275\u0275text(46,"Completed"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(47,"option",22),i.\u0275\u0275text(48,"Draft"),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(49,"div",23)(50,"button",24),i.\u0275\u0275listener("click",function(){return n.clearFilters()}),i.\u0275\u0275text(51," \u{1F5D1}\uFE0F Clear Filters "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(52,"div",25)(53,"label",15),i.\u0275\u0275text(54,"Sort By"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(55,"select",16),i.\u0275\u0275twoWayListener("ngModelChange",function(l){return i.\u0275\u0275twoWayBindingSet(n.sortField,l)||(n.sortField=l),l}),i.\u0275\u0275listener("change",function(){return n.sortClasses()}),i.\u0275\u0275elementStart(56,"option",26),i.\u0275\u0275text(57,"Name (A-Z)"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(58,"option",27),i.\u0275\u0275text(59,"Code"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(60,"option",28),i.\u0275\u0275text(61,"Department"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(62,"option",29),i.\u0275\u0275text(63,"Teacher"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(64,"option",30),i.\u0275\u0275text(65,"Credits"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(66,"option",31),i.\u0275\u0275text(67,"Enrollment"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(68,"option",32),i.\u0275\u0275text(69,"Capacity"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(70,"option",33),i.\u0275\u0275text(71,"Status"),i.\u0275\u0275elementEnd()()()()(),i.\u0275\u0275elementStart(72,"div",34)(73,"div",35)(74,"span",36),i.\u0275\u0275text(75),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(76,"span",37),i.\u0275\u0275text(77,"Showing"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(78,"div",35)(79,"span",36),i.\u0275\u0275text(80),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(81,"span",37),i.\u0275\u0275text(82,"Active"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(83,"div",35)(84,"span",36),i.\u0275\u0275text(85),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(86,"span",37),i.\u0275\u0275text(87,"Total Enrolled"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(88,"div",35)(89,"span",36),i.\u0275\u0275text(90),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(91,"span",37),i.\u0275\u0275text(92,"Avg. Capacity"),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(93,"div",35)(94,"span",36),i.\u0275\u0275text(95),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(96,"span",37),i.\u0275\u0275text(97,"Departments"),i.\u0275\u0275elementEnd()()()(),i.\u0275\u0275elementStart(98,"div",38)(99,"div",39)(100,"div",40)(101,"p"),i.\u0275\u0275text(102),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(103,"div",41)(104,"button",42),i.\u0275\u0275listener("click",function(){return n.setViewMode("table")}),i.\u0275\u0275text(105," \u{1F4CA} "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(106,"button",43),i.\u0275\u0275listener("click",function(){return n.setViewMode("cards")}),i.\u0275\u0275text(107," \u{1F0CF} "),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(108,"div",44)(109,"div",45)(110,"table",46)(111,"thead")(112,"tr")(113,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("code")}),i.\u0275\u0275text(114," Code "),i.\u0275\u0275elementStart(115,"span",48),i.\u0275\u0275text(116),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(117,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("name")}),i.\u0275\u0275text(118," Class Name "),i.\u0275\u0275elementStart(119,"span",48),i.\u0275\u0275text(120),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(121,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("department")}),i.\u0275\u0275text(122," Department "),i.\u0275\u0275elementStart(123,"span",48),i.\u0275\u0275text(124),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(125,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("teacher")}),i.\u0275\u0275text(126," Teacher "),i.\u0275\u0275elementStart(127,"span",48),i.\u0275\u0275text(128),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(129,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("credits")}),i.\u0275\u0275text(130," Credits "),i.\u0275\u0275elementStart(131,"span",48),i.\u0275\u0275text(132),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(133,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("capacity")}),i.\u0275\u0275text(134," Capacity "),i.\u0275\u0275elementStart(135,"span",48),i.\u0275\u0275text(136),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(137,"th"),i.\u0275\u0275text(138,"Schedule"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(139,"th",47),i.\u0275\u0275listener("click",function(){return n.sortByField("status")}),i.\u0275\u0275text(140," Status "),i.\u0275\u0275elementStart(141,"span",48),i.\u0275\u0275text(142),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(143,"th"),i.\u0275\u0275text(144,"Attendance"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(145,"th"),i.\u0275\u0275text(146,"Actions"),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275elementStart(147,"tbody"),i.\u0275\u0275template(148,sa,47,21,"tr",49),i.\u0275\u0275elementEnd()()(),i.\u0275\u0275template(149,ca,3,0,"div",50),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(150,"div",51),i.\u0275\u0275template(151,pa,77,22,"div",52)(152,ua,5,1,"div",53),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(153,ga,11,0,"div",54),i.\u0275\u0275elementEnd()()),e&2&&(i.\u0275\u0275advance(6),i.\u0275\u0275twoWayProperty("ngModel",n.searchTerm),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.searchTerm),i.\u0275\u0275advance(10),i.\u0275\u0275classProp("rotated",n.showMobileFilters),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("mobile-expanded",n.showMobileFilters),i.\u0275\u0275advance(5),i.\u0275\u0275twoWayProperty("ngModel",n.selectedDepartment),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",n.departments),i.\u0275\u0275advance(4),i.\u0275\u0275twoWayProperty("ngModel",n.selectedSemester),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",n.semesters),i.\u0275\u0275advance(4),i.\u0275\u0275twoWayProperty("ngModel",n.selectedStatus),i.\u0275\u0275advance(17),i.\u0275\u0275twoWayProperty("ngModel",n.sortField),i.\u0275\u0275advance(20),i.\u0275\u0275textInterpolate(n.filteredClasses.length),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(n.getActiveCount()),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(n.getTotalEnrollments()),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1("",n.getAverageCapacity(),"%"),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate(n.getDepartmentCount()),i.\u0275\u0275advance(7),i.\u0275\u0275textInterpolate2("Showing ",n.filteredClasses.length," of ",n.classes.length," classes"),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("active",n.viewMode==="table"),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("active",n.viewMode==="cards"),i.\u0275\u0275advance(2),i.\u0275\u0275styleProp("display",n.viewMode==="cards"?"none":"block"),i.\u0275\u0275advance(7),i.\u0275\u0275classProp("active",n.currentSort.field==="code"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="code"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("active",n.currentSort.field==="name"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="name"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("active",n.currentSort.field==="department"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="department"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("active",n.currentSort.field==="teacher"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="teacher"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("active",n.currentSort.field==="credits"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="credits"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(3),i.\u0275\u0275classProp("active",n.currentSort.field==="capacity"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="capacity"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(5),i.\u0275\u0275classProp("active",n.currentSort.field==="status"),i.\u0275\u0275advance(),i.\u0275\u0275textInterpolate1(" ",n.currentSort.field==="status"?n.currentSort.direction==="asc"?"\u25B2":"\u25BC":"\u2195\uFE0F"," "),i.\u0275\u0275advance(6),i.\u0275\u0275property("ngForOf",n.filteredClasses)("ngForTrackBy",n.trackByClassId),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.showScrollIndicator),i.\u0275\u0275advance(),i.\u0275\u0275styleProp("display",n.viewMode==="cards"?"block":"none"),i.\u0275\u0275advance(),i.\u0275\u0275property("ngForOf",n.filteredClasses)("ngForTrackBy",n.trackByClassId),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.filteredClasses.length>n.displayLimit),i.\u0275\u0275advance(),i.\u0275\u0275property("ngIf",n.filteredClasses.length===0))},dependencies:[na,Y.NgClass,Y.NgForOf,Y.NgIf,ia,B.NgSelectOption,B.\u0275NgSelectMultipleOption,B.DefaultValueAccessor,B.SelectControlValueAccessor,B.NgControlStatus,B.NgModel,v,Y.TitleCasePipe],styles:[".classes-container[_ngcontent-%COMP%]{padding:16px;background:#f8f9fa;min-height:100vh}@media (min-width: 768px){.classes-container[_ngcontent-%COMP%]{padding:24px}}@media (min-width: 1024px){.classes-container[_ngcontent-%COMP%]{padding:32px}}.classes-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;gap:20px}}.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#2c3e50;margin:0;font-weight:600}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px}}@media (min-width: 1024px){.classes-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:32px}}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:12px}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]{width:220px;min-height:44px;padding:10px 14px;border:2px solid #bdc3c7;border-radius:8px;font-size:15px;transition:width .18s ease}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%)}@media (max-width: 900px){.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]{width:140px}.classes-header[_ngcontent-%COMP%]   .header-search[_ngcontent-%COMP%]   .header-search-input[_ngcontent-%COMP%]:focus{width:100%}}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}@media (min-width: 768px){.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{align-items:center}}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#9b59b6;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:hover, .classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #9b59b666}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .export-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(155,89,182,.5);outline-offset:2px}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:hover, .classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .add-class-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:24px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden}.filters-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}@media (max-width: 767px){.mobile-filter-toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#ecf0f1;cursor:pointer;border-bottom:1px solid #bdc3c7;font-weight:500;color:#2c3e50;-webkit-user-select:none;user-select:none}.mobile-filter-toggle[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{transition:transform .3s ease;font-size:12px}.mobile-filter-toggle[_ngcontent-%COMP%]   .filter-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.mobile-filter-toggle[_ngcontent-%COMP%]:hover{background:#e6e6e6}.mobile-filter-toggle[_ngcontent-%COMP%]:active{background:#d9d9d9}}@media (min-width: 768px){.mobile-filter-toggle[_ngcontent-%COMP%]{display:none}}.filter-row[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:20px}@media (max-width: 767px){.filter-row[_ngcontent-%COMP%]{display:none}.filter-row.mobile-expanded[_ngcontent-%COMP%]{display:flex}}@media (min-width: 768px){.filter-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:20px}}@media (min-width: 1024px){.filter-row[_ngcontent-%COMP%]{flex-wrap:nowrap;gap:24px}}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 48px 12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;transition:border-color .3s ease}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:#7f8c8d;color:#fff;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center}.search-box[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .clear-search-btn[_ngcontent-%COMP%]:hover{background:#e74c3c}.mobile-filter-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}@media (min-width: 768px){.mobile-filter-row[_ngcontent-%COMP%]{flex-direction:row;gap:20px;flex-wrap:wrap}}@media (min-width: 1024px){.mobile-filter-row[_ngcontent-%COMP%]{flex-wrap:nowrap;gap:24px}}.filter-group[_ngcontent-%COMP%]{flex:1;min-width:180px}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:14px}.filter-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;background:#fff;cursor:pointer;transition:border-color .3s ease}.filter-group[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}.filter-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}@media (min-width: 768px){.filter-actions[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-end;gap:16px}}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;white-space:nowrap}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:hover, .filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:active{transform:translateY(0)}.filter-actions[_ngcontent-%COMP%]   .clear-filters[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.filter-actions[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]{min-width:180px}.filter-actions[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#2c3e50;font-size:14px}.quick-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;padding:16px 20px;background:#ecf0f1;border-top:1px solid #bdc3c7}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]{justify-content:space-around;gap:20px}}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:1;min-width:80px}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#3498db;line-height:1}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:24px}}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d;margin-top:4px;text-align:center}@media (min-width: 768px){.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px}}.classes-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden}.classes-table-container[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.view-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #bdc3c7;background:#ecf0f1}.view-controls[_ngcontent-%COMP%]   .classes-count[_ngcontent-%COMP%]{margin:0}.view-controls[_ngcontent-%COMP%]   .classes-count[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:14px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]{min-height:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:44px;padding:10px;font-size:18px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:hover, .view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.view-controls[_ngcontent-%COMP%]   .view-toggle-buttons[_ngcontent-%COMP%]   .view-toggle-btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff}.table-wrapper.hidden[_ngcontent-%COMP%]{display:none}.table-scroll-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ecf0f1}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bdc3c7;border-radius:4px}.table-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#7f8c8d}.classes-table[_ngcontent-%COMP%]{width:100%;min-width:1000px;border-collapse:collapse}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#ecf0f1}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;text-align:left;font-weight:600;color:#2c3e50;border-bottom:2px solid #bdc3c7;white-space:nowrap}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .3s ease}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background:#e0e0e0}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   .sort-indicator[_ngcontent-%COMP%]{margin-left:8px;font-size:12px;opacity:.6}.classes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   .sort-indicator.active[_ngcontent-%COMP%]{opacity:1;color:#3498db}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s ease}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]:hover{background:#e3f2fd}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row.highlighted[_ngcontent-%COMP%]{background:#bbdefb}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #bdc3c7;vertical-align:middle}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-code[_ngcontent-%COMP%]{font-weight:600;color:#3498db}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-name[_ngcontent-%COMP%]   .name-wrapper[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#2c3e50;font-size:16px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.class-name[_ngcontent-%COMP%]   .name-wrapper[_ngcontent-%COMP%]   .class-semester[_ngcontent-%COMP%]{color:#7f8c8d;font-size:12px;margin-top:2px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.department-cell[_ngcontent-%COMP%]   .department-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.teacher-cell[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.credits-cell[_ngcontent-%COMP%]{font-weight:600;color:#9b59b6}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-numbers[_ngcontent-%COMP%]{display:block;font-size:12px;color:#2c3e50;font-weight:500;margin-bottom:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]{width:80px;height:6px;background:#e9ecef;border-radius:3px;overflow:hidden;margin-bottom:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill[_ngcontent-%COMP%]{height:100%;border-radius:3px;transition:width .3s ease}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-low[_ngcontent-%COMP%]{background:#2ecc71}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-medium[_ngcontent-%COMP%]{background:#f39c12}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-high[_ngcontent-%COMP%]{background:#e67e22}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-bar[_ngcontent-%COMP%]   .capacity-fill.capacity-full[_ngcontent-%COMP%]{background:#e74c3c}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.capacity-cell[_ngcontent-%COMP%]   .capacity-info[_ngcontent-%COMP%]   .capacity-percentage[_ngcontent-%COMP%]{font-size:11px;color:#7f8c8d}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.schedule-cell[_ngcontent-%COMP%]   .schedule-summary[_ngcontent-%COMP%]   .schedule-item[_ngcontent-%COMP%]{background:#f7fbfe;color:#217dbb;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500;white-space:nowrap}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:6px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:14px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#d1f5e0;color:#25a25a}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fbdedb;color:#d62c1a}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#e6d5ed;color:#804399}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.status-cell[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#d0d5d5;color:#667273}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{min-height:44px;min-width:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-width:36px;min-height:36px;padding:8px;font-size:14px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:hover, .classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:active{transform:translateY(0)}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-view[_ngcontent-%COMP%]{background:#9b59b6}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-edit[_ngcontent-%COMP%]{background:#f39c12}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-enrollment[_ngcontent-%COMP%]{background:#2ecc71}.classes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .class-row[_ngcontent-%COMP%]   td.actions-cell[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-more[_ngcontent-%COMP%]{background:#3498db}.scroll-indicator[_ngcontent-%COMP%]{text-align:center;padding:12px;background:#ecf0f1;color:#7f8c8d;font-size:12px}@media (min-width: 768px){.scroll-indicator[_ngcontent-%COMP%]{display:none}}.mobile-cards[_ngcontent-%COMP%]{display:none;padding:16px 20px}.mobile-cards.visible[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.mobile-cards[_ngcontent-%COMP%]{padding:20px}}.class-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:box-shadow .3s ease;overflow:hidden;cursor:pointer;transition:all .3s ease;position:relative}.class-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.class-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.class-card[_ngcontent-%COMP%]:active{transform:scale(.98)}.class-card.selected[_ngcontent-%COMP%]{border:2px solid #3498db;box-shadow:0 4px 16px #3498db4d}.class-card-header[_ngcontent-%COMP%]{padding:16px 20px 0;display:flex;justify-content:space-between;align-items:flex-start;gap:12px}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]{flex:1}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   .class-card-name[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#2c3e50;line-height:1.3}.class-card-header[_ngcontent-%COMP%]   .class-info[_ngcontent-%COMP%]   .class-card-code[_ngcontent-%COMP%]{font-size:12px;color:#3498db;font-weight:600;background:#3498db1a;padding:2px 8px;border-radius:4px;margin-top:4px;display:inline-block}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-flex;align-items:center;gap:6px}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:14px}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#d1f5e0;color:#25a25a}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#fbdedb;color:#d62c1a}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#e6d5ed;color:#804399}.class-card-header[_ngcontent-%COMP%]   .class-card-status[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#d0d5d5;color:#667273}.class-card-body[_ngcontent-%COMP%]{padding:16px 20px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;margin-bottom:12px;gap:16px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field.full-width[_ngcontent-%COMP%]{width:100%}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-label[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]{font-size:14px;color:#2c3e50;font-weight:500}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .department-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;display:inline-block}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-numbers[_ngcontent-%COMP%]{display:block;font-size:14px;color:#2c3e50;margin-bottom:6px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]{width:100%;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;margin-bottom:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-low[_ngcontent-%COMP%]{background:#2ecc71}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-medium[_ngcontent-%COMP%]{background:#f39c12}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-high[_ngcontent-%COMP%]{background:#e67e22}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .capacity-bar-mobile[_ngcontent-%COMP%]   .capacity-fill-mobile.capacity-full[_ngcontent-%COMP%]{background:#e74c3c}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .capacity-info-mobile[_ngcontent-%COMP%]   .enrollment-status[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f7fbfe;padding:6px 12px;border-radius:6px;margin-bottom:4px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]:last-child{margin-bottom:0}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-day[_ngcontent-%COMP%]{font-weight:600;color:#217dbb;font-size:12px}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]{font-size:11px;color:#258cd1}.class-card-body[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .class-card-field[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]   .schedule-mobile[_ngcontent-%COMP%]   .schedule-item-mobile[_ngcontent-%COMP%]   .schedule-room[_ngcontent-%COMP%]{font-size:10px;color:#3498db;font-weight:600}.class-card-actions[_ngcontent-%COMP%]{padding:16px 20px 20px;display:flex;gap:8px;flex-wrap:wrap}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;background:#7f8c8d;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;flex:1;min-width:calc(50% - 4px);font-size:12px;padding:10px 8px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:hover, .class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #7f8c8d66}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(127,140,141,.5);outline-offset:2px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:14px}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.primary[_ngcontent-%COMP%]{background:#3498db}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.secondary[_ngcontent-%COMP%]{background:#2ecc71}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.tertiary[_ngcontent-%COMP%]{background:#9b59b6}.class-card-actions[_ngcontent-%COMP%]   .card-action-btn.quaternary[_ngcontent-%COMP%]{background:#f39c12}.load-more-section[_ngcontent-%COMP%]{text-align:center;padding:20px}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;background:transparent;color:#3498db;border:2px solid #3498db}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover, .load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover, .load-more-section[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:focus{background:#3498db;color:#fff}.no-classes[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;color:#7f8c8d;margin-bottom:12px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-bottom:24px;font-size:16px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.no-classes[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#7f8c8d}.btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;padding:12px 16px;background:#3498db;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{transform:translateY(-2px);box-shadow:0 4px 12px #3498db66}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn[_ngcontent-%COMP%]:focus{outline:2px solid rgba(52,152,219,.5);outline-offset:2px}.btn.btn-secondary[_ngcontent-%COMP%]{background:#7f8c8d}.btn.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#3498db;border:2px solid #3498db}.btn.btn-outline[_ngcontent-%COMP%]:hover, .btn.btn-outline[_ngcontent-%COMP%]:focus{background:#3498db;color:#fff}.form-input[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:12px 16px;border:2px solid #bdc3c7;border-radius:8px;font-size:16px;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none;box-shadow:0 0 0 3px #3498db1a}*[_ngcontent-%COMP%]:focus{outline:2px solid #3498db;outline-offset:2px}@media (prefers-contrast: high){.class-card[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{border:2px solid #2c3e50}.status-badge[_ngcontent-%COMP%]{border:1px solid #2c3e50!important}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-color-scheme: dark){.classes-container[_ngcontent-%COMP%]{background:#233140;color:#fff}.class-card[_ngcontent-%COMP%], .classes-table[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{background:#2c3e50;color:#fff}.class-card-body[_ngcontent-%COMP%]   .class-card-value[_ngcontent-%COMP%]{color:#fff}}"]})};import{CommonModule as fa}from"@angular/common";import{FormsModule as _a}from"@angular/forms";import{MatTableDataSource as Ca}from"@angular/material/table";import{MatPaginator as ha}from"@angular/material/paginator";import{MatSort as ba}from"@angular/material/sort";import*as p from"@angular/core";import*as Je from"@angular/common";import*as me from"@angular/forms";import*as Ze from"@angular/material/button";import*as W from"@angular/material/input";import*as Ke from"@angular/material/select";import*as T from"@angular/material/table";import*as pe from"@angular/material/card";import*as qt from"@angular/material/toolbar";import*as ue from"@angular/material/chips";import*as Qt from"@angular/material/paginator";import*as Xe from"@angular/material/sort";var xa=()=>[8,15,25];function Ma(a,t){if(a&1){let e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"button",57),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(e);let r=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(r.clearSearch())}),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(1,"svg",8),p.\u0275\u0275element(2,"path",58),p.\u0275\u0275elementEnd()()}}function wa(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"mat-option",59),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;p.\u0275\u0275property("value",e.id),p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function ya(a,t){a&1&&(p.\u0275\u0275elementStart(0,"th",60),p.\u0275\u0275text(1,"Student"),p.\u0275\u0275elementEnd())}function va(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"td",61)(1,"div",62),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",63),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(e.studentName),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("ID #",e.studentId)}}function Pa(a,t){a&1&&(p.\u0275\u0275elementStart(0,"th",60),p.\u0275\u0275text(1,"Class"),p.\u0275\u0275elementEnd())}function Sa(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"td",61),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate(e.class||"--")}}function Oa(a,t){a&1&&(p.\u0275\u0275elementStart(0,"th",60),p.\u0275\u0275text(1,"Date"),p.\u0275\u0275elementEnd())}function Ea(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"td",61),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate(e.date)}}function Ta(a,t){a&1&&(p.\u0275\u0275elementStart(0,"th",64),p.\u0275\u0275text(1,"Status"),p.\u0275\u0275elementEnd())}function ka(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"td",61)(1,"mat-chip",65),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;p.\u0275\u0275advance(),p.\u0275\u0275property("color",e.status==="present"?"primary":"warn"),p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate1(" ",e.status," ")}}function Da(a,t){a&1&&(p.\u0275\u0275elementStart(0,"th",64),p.\u0275\u0275text(1,"Actions"),p.\u0275\u0275elementEnd())}function Ia(a,t){if(a&1){let e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"td",61)(1,"button",66),p.\u0275\u0275listener("click",function(){let r=p.\u0275\u0275restoreView(e).$implicit,l=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(l.toggleStatus(r))}),p.\u0275\u0275text(2," Toggle "),p.\u0275\u0275elementEnd()()}}function Fa(a,t){a&1&&p.\u0275\u0275element(0,"tr",67)}function Aa(a,t){a&1&&p.\u0275\u0275element(0,"tr",68)}function Ra(a,t){if(a&1&&(p.\u0275\u0275elementStart(0,"tr",69)(1,"td")(2,"div",70),p.\u0275\u0275text(3,"No attendance matches your filters."),p.\u0275\u0275elementEnd()()()),a&2){let e=p.\u0275\u0275nextContext();p.\u0275\u0275advance(),p.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Va(a,t){if(a&1){let e=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",71)(1,"div",72)(2,"div",62),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"mat-chip",65),p.\u0275\u0275text(5),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(6,"div",63),p.\u0275\u0275text(7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"div",63),p.\u0275\u0275text(9),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"div",73)(11,"button",66),p.\u0275\u0275listener("click",function(){let r=p.\u0275\u0275restoreView(e).$implicit,l=p.\u0275\u0275nextContext();return p.\u0275\u0275resetView(l.toggleStatus(r))}),p.\u0275\u0275text(12," Toggle "),p.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate(e.studentName),p.\u0275\u0275advance(),p.\u0275\u0275property("color",e.status==="present"?"primary":"warn"),p.\u0275\u0275advance(),p.\u0275\u0275textInterpolate1(" ",e.status," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate2("ID #",e.studentId," \xB7 ",e.class||"--"),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("Date: ",e.date)}}var Ye=class a{constructor(t){this.mock=t;this.attendance=t.getAttendance()}attendance=[];students=[];rows=[];dataSource=new Ca([]);displayedColumns=["student","class","date","status","actions"];search="";statusFilter="all";newStudentId=null;newDate=new Date().toISOString().slice(0,10);newStatus="present";summary={present:0,absent:0,total:0};today=new Date().toISOString().slice(0,10);paginator;sort;ngOnInit(){this.students=this.mock.getStudents(),this.students.length&&(this.newStudentId=this.students[0].id),this.loadRows()}ngAfterViewInit(){this.attachTableHelpers()}loadRows(){let t=new Map(this.students.map(e=>[e.id,e]));this.rows=this.attendance.map(e=>{let n=t.get(e.studentId);return{id:e.id,studentId:e.studentId,studentName:n?`${n.firstName} ${n.lastName}`:`Student ${e.studentId}`,class:n?.class,date:e.date,status:e.status}}),this.applyFilters(),this.refreshSummary()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.rows.filter(n=>{let r=!t||n.studentName.toLowerCase().includes(t)||String(n.studentId).includes(t),l=this.statusFilter==="all"||n.status===this.statusFilter,C=!this.newDate||n.date===this.newDate;return r&&l&&C});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}addAttendance(){this.newStudentId&&(this.mock.addAttendance(this.newStudentId,this.newDate,this.newStatus),this.attendance=this.mock.getAttendance(),this.loadRows())}toggleStatus(t){let e=t.status==="present"?"absent":"present";this.mock.updateAttendanceStatus(t.id,e),this.attendance=this.mock.getAttendance(),this.loadRows()}refreshSummary(){this.summary.present=this.rows.filter(t=>t.status==="present").length,this.summary.absent=this.rows.filter(t=>t.status==="absent").length,this.summary.total=this.students.length}exportCsv(){let t=this.dataSource.data,e=["Id","Student","Class","Date","Status"],n=t.map(y=>[y.id,`"${(y.studentName||"").replace(/"/g,'""')}"`,y.class||"",y.date,y.status].join(",")),r=[e.join(","),...n].join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),C=URL.createObjectURL(l),x=document.createElement("a");x.href=C,x.download="attendance.csv",x.click(),URL.revokeObjectURL(C)}static \u0275fac=function(e){return new(e||a)(p.\u0275\u0275directiveInject(P))};static \u0275cmp=p.\u0275\u0275defineComponent({type:a,selectors:[["app-attendance"]],viewQuery:function(e,n){if(e&1&&(p.\u0275\u0275viewQuery(ha,5),p.\u0275\u0275viewQuery(ba,5)),e&2){let r;p.\u0275\u0275queryRefresh(r=p.\u0275\u0275loadQuery())&&(n.paginator=r.first),p.\u0275\u0275queryRefresh(r=p.\u0275\u0275loadQuery())&&(n.sort=r.first)}},decls:112,vars:19,consts:[[1,"fees-page","attendance-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon","success"],["viewBox","0 0 24 24",1,"icon"],["d","M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm-2 15-4-4 1.4-1.4 2.6 2.6 5.6-5.6L17 10l-7 7z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","warn"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"metric-icon"],["d","M12 8v5h4v-2h-2V8z","fill","currentColor"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name or id",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],["matInput","","type","date",3,"ngModelChange","ngModel"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","present"],["value","absent"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"structure-header"],["appearance","fill",1,"class-select"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","date"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],[1,"action-row"]],template:function(e,n){e&1&&(p.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),p.\u0275\u0275text(4,"School Management"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",4),p.\u0275\u0275text(6,"Attendance"),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(10,"svg",8),p.\u0275\u0275element(11,"path",9),p.\u0275\u0275elementEnd()(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(12,"div",10)(13,"div",11),p.\u0275\u0275text(14,"Present today"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"div",12),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"div",13),p.\u0275\u0275text(18),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(21,"svg",8),p.\u0275\u0275element(22,"path",15),p.\u0275\u0275elementEnd()(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(23,"div",10)(24,"div",11),p.\u0275\u0275text(25,"Absent"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(26,"div",16),p.\u0275\u0275text(27),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(28,"div",13),p.\u0275\u0275text(29),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",17),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(32,"svg",8),p.\u0275\u0275element(33,"path",18)(34,"path",19),p.\u0275\u0275elementEnd()(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(35,"div",10)(36,"div",11),p.\u0275\u0275text(37,"Marked"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(38,"div",12),p.\u0275\u0275text(39),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(40,"div",13),p.\u0275\u0275text(41,"Entries recorded"),p.\u0275\u0275elementEnd()()()(),p.\u0275\u0275elementStart(42,"mat-card",20)(43,"div",21)(44,"mat-form-field",22)(45,"mat-label"),p.\u0275\u0275text(46,"Search student"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(47,"span",23),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(48,"svg",8),p.\u0275\u0275element(49,"path",24),p.\u0275\u0275elementEnd()(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(50,"input",25),p.\u0275\u0275twoWayListener("ngModelChange",function(l){return p.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),p.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(51,Ma,3,0,"button",26),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(52,"mat-form-field",27)(53,"mat-label"),p.\u0275\u0275text(54,"Date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(55,"input",28),p.\u0275\u0275twoWayListener("ngModelChange",function(l){return p.\u0275\u0275twoWayBindingSet(n.newDate,l)||(n.newDate=l),l}),p.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(56,"mat-chip-listbox",29),p.\u0275\u0275listener("selectionChange",function(l){return n.onStatusChange(l)}),p.\u0275\u0275elementStart(57,"mat-chip-option",30),p.\u0275\u0275text(58,"All"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(59,"mat-chip-option",31),p.\u0275\u0275text(60,"Present"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(61,"mat-chip-option",32),p.\u0275\u0275text(62,"Absent"),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(63,"button",33),p.\u0275\u0275listener("click",function(){return n.exportCsv()}),p.\u0275\u0275text(64," Export CSV "),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(65,"mat-card",20)(66,"div",34)(67,"mat-form-field",35)(68,"mat-label"),p.\u0275\u0275text(69,"Student"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(70,"mat-select",36),p.\u0275\u0275twoWayListener("ngModelChange",function(l){return p.\u0275\u0275twoWayBindingSet(n.newStudentId,l)||(n.newStudentId=l),l}),p.\u0275\u0275template(71,wa,2,3,"mat-option",37),p.\u0275\u0275elementEnd()(),p.\u0275\u0275elementStart(72,"mat-form-field",35)(73,"mat-label"),p.\u0275\u0275text(74,"Status"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(75,"mat-select",36),p.\u0275\u0275twoWayListener("ngModelChange",function(l){return p.\u0275\u0275twoWayBindingSet(n.newStatus,l)||(n.newStatus=l),l}),p.\u0275\u0275elementStart(76,"mat-option",31),p.\u0275\u0275text(77,"Present"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(78,"mat-option",32),p.\u0275\u0275text(79,"Absent"),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275elementStart(80,"button",38),p.\u0275\u0275listener("click",function(){return n.addAttendance()}),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(81,"svg",8),p.\u0275\u0275element(82,"path",39),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(83," Mark attendance "),p.\u0275\u0275elementEnd()()(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(84,"mat-card",40)(85,"mat-card-title"),p.\u0275\u0275text(86,"Attendance log"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(87,"mat-card-subtitle"),p.\u0275\u0275text(88,"Filter by student, date, or status."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(89,"div",41)(90,"table",42),p.\u0275\u0275elementContainerStart(91,43),p.\u0275\u0275template(92,ya,2,0,"th",44)(93,va,5,2,"td",45),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(94,46),p.\u0275\u0275template(95,Pa,2,0,"th",44)(96,Sa,2,1,"td",45),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(97,47),p.\u0275\u0275template(98,Oa,2,0,"th",44)(99,Ea,2,1,"td",45),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(100,48),p.\u0275\u0275template(101,Ta,2,0,"th",49)(102,ka,3,2,"td",45),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275elementContainerStart(103,50),p.\u0275\u0275template(104,Da,2,0,"th",49)(105,Ia,3,0,"td",45),p.\u0275\u0275elementContainerEnd(),p.\u0275\u0275template(106,Fa,1,0,"tr",51)(107,Aa,1,0,"tr",52)(108,Ra,4,1,"tr",53),p.\u0275\u0275elementEnd()(),p.\u0275\u0275element(109,"mat-paginator",54),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(110,"mat-card",55),p.\u0275\u0275template(111,Va,13,6,"div",56),p.\u0275\u0275elementEnd()()),e&2&&(p.\u0275\u0275advance(16),p.\u0275\u0275textInterpolate(n.summary.present),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("Out of ",n.summary.total," students"),p.\u0275\u0275advance(9),p.\u0275\u0275textInterpolate(n.summary.absent),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1("Tracked for ",n.today),p.\u0275\u0275advance(10),p.\u0275\u0275textInterpolate(n.attendance.length),p.\u0275\u0275advance(11),p.\u0275\u0275twoWayProperty("ngModel",n.search),p.\u0275\u0275advance(),p.\u0275\u0275property("ngIf",n.search),p.\u0275\u0275advance(4),p.\u0275\u0275twoWayProperty("ngModel",n.newDate),p.\u0275\u0275advance(),p.\u0275\u0275property("value",n.statusFilter),p.\u0275\u0275advance(14),p.\u0275\u0275twoWayProperty("ngModel",n.newStudentId),p.\u0275\u0275advance(),p.\u0275\u0275property("ngForOf",n.students),p.\u0275\u0275advance(4),p.\u0275\u0275twoWayProperty("ngModel",n.newStatus),p.\u0275\u0275advance(15),p.\u0275\u0275property("dataSource",n.dataSource),p.\u0275\u0275advance(16),p.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),p.\u0275\u0275advance(),p.\u0275\u0275property("matRowDefColumns",n.displayedColumns),p.\u0275\u0275advance(2),p.\u0275\u0275property("pageSize",8)("pageSizeOptions",p.\u0275\u0275pureFunction0(18,xa)),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",n.dataSource.data))},dependencies:[fa,Je.NgForOf,Je.NgIf,_a,me.DefaultValueAccessor,me.NgControlStatus,me.NgModel,v,Ze.MatButton,Ze.MatIconButton,W.MatInput,W.MatFormField,W.MatLabel,W.MatPrefix,W.MatSuffix,Ke.MatSelect,Ke.MatOption,T.MatTable,T.MatHeaderCellDef,T.MatHeaderRowDef,T.MatColumnDef,T.MatCellDef,T.MatRowDef,T.MatHeaderCell,T.MatCell,T.MatHeaderRow,T.MatRow,T.MatNoDataRow,pe.MatCard,pe.MatCardSubtitle,pe.MatCardTitle,qt.MatToolbar,ue.MatChip,ue.MatChipListbox,ue.MatChipOption,Qt.MatPaginator,Xe.MatSort,Xe.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".attendance-root[_ngcontent-%COMP%]{padding:1rem}.attendance-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1rem}.attendance-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.attendance-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}.attendance-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attendance-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #f1f5f9}.attendance-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:700;text-transform:uppercase}.attendance-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 2px 8px #0000000a}.status-present[_ngcontent-%COMP%]{background:#e6ffed;color:#155724;padding:.25rem .5rem;border-radius:12px;font-weight:600}.status-absent[_ngcontent-%COMP%]{background:#ffecec;color:#7f1d1d;padding:.25rem .5rem;border-radius:12px;font-weight:600}@media (max-width: 767px){.attendance-table[_ngcontent-%COMP%]{font-size:.95rem}}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 900px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as La}from"@angular/common";import{FormsModule as Ba}from"@angular/forms";import{RouterModule as za}from"@angular/router";import{MatPaginator as Na}from"@angular/material/paginator";import{MatSort as ja}from"@angular/material/sort";import{MatTableDataSource as Ha}from"@angular/material/table";import*as c from"@angular/core";import*as ge from"@angular/common";import*as U from"@angular/forms";import*as tt from"@angular/router";import*as nt from"@angular/material/button";import*as $ from"@angular/material/input";import*as k from"@angular/material/table";import*as fe from"@angular/material/card";import*as Yt from"@angular/material/toolbar";import*as _e from"@angular/material/chips";import*as Jt from"@angular/material/paginator";import*as it from"@angular/material/sort";import*as Zt from"@angular/material/progress-bar";var Wa=()=>["/schools/fees/history"],Ua=()=>["/schools/fees/collect"],$a=()=>["/schools/fees/categories"],Ga=()=>["/schools/fees/structure"],qa=()=>["/schools/fees/my-fees"],Qa=()=>["/schools/fees/discounts"],Ya=()=>[5,10,25];function Ja(a,t){if(a&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",63),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(e);let r=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(r.clearSearch())}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(1,"svg",8),c.\u0275\u0275element(2,"path",64),c.\u0275\u0275elementEnd()()}}function Za(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Student"),c.\u0275\u0275elementEnd())}function Ka(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"div",67),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",68),c.\u0275\u0275text(4),c.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(e.studentName),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("ID #",e.studentId)}}function Xa(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Class"),c.\u0275\u0275elementEnd())}function eo(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"td",66),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate(e.class||"\u2014")}}function to(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Balance"),c.\u0275\u0275elementEnd())}function no(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"span"),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"currency"),c.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275classProp("due",e.status==="due")("clear",e.status==="clear"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind1(3,5,e.balance)," ")}}function io(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",65),c.\u0275\u0275text(1,"Last Paid"),c.\u0275\u0275elementEnd())}function ao(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"td",66),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate(e.lastPaid||"\u2014")}}function oo(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",69),c.\u0275\u0275text(1,"Status"),c.\u0275\u0275elementEnd())}function ro(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"td",66)(1,"mat-chip",70),c.\u0275\u0275text(2),c.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;c.\u0275\u0275advance(),c.\u0275\u0275property("color",e.status==="due"?"warn":"primary"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",e.status==="due"?"Due":"Clear"," ")}}function lo(a,t){a&1&&(c.\u0275\u0275elementStart(0,"th",69),c.\u0275\u0275text(1,"Collect"),c.\u0275\u0275elementEnd())}function so(a,t){if(a&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"td",66)(1,"div",71)(2,"mat-form-field",72)(3,"mat-label"),c.\u0275\u0275text(4,"Amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"input",73),c.\u0275\u0275twoWayListener("ngModelChange",function(r){let l=c.\u0275\u0275restoreView(e).$implicit,C=c.\u0275\u0275nextContext();return c.\u0275\u0275twoWayBindingSet(C.paymentAmounts[l.studentId],r)||(C.paymentAmounts[l.studentId]=r),c.\u0275\u0275resetView(r)}),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(6,"button",74),c.\u0275\u0275listener("click",function(){let r=c.\u0275\u0275restoreView(e).$implicit,l=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(l.pay(r.studentId))}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(7,"svg",8),c.\u0275\u0275element(8,"path",75),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(9," Record "),c.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit,n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(5),c.\u0275\u0275twoWayProperty("ngModel",n.paymentAmounts[e.studentId]),c.\u0275\u0275advance(),c.\u0275\u0275property("disabled",!n.paymentAmounts[e.studentId])}}function co(a,t){a&1&&c.\u0275\u0275element(0,"tr",76)}function mo(a,t){a&1&&c.\u0275\u0275element(0,"tr",77)}function po(a,t){if(a&1&&(c.\u0275\u0275elementStart(0,"tr",78)(1,"td")(2,"div",79),c.\u0275\u0275text(3,"No students match your filters."),c.\u0275\u0275elementEnd()()()),a&2){let e=c.\u0275\u0275nextContext();c.\u0275\u0275advance(),c.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function uo(a,t){if(a&1){let e=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",80)(1,"div",81)(2,"div",67),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"mat-chip",82),c.\u0275\u0275text(5),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(6,"div",68),c.\u0275\u0275text(7),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"div",83),c.\u0275\u0275text(9),c.\u0275\u0275pipe(10,"currency"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(11,"div",71)(12,"mat-form-field",72)(13,"mat-label"),c.\u0275\u0275text(14,"Amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(15,"input",73),c.\u0275\u0275twoWayListener("ngModelChange",function(r){let l=c.\u0275\u0275restoreView(e).$implicit,C=c.\u0275\u0275nextContext();return c.\u0275\u0275twoWayBindingSet(C.paymentAmounts[l.studentId],r)||(C.paymentAmounts[l.studentId]=r),c.\u0275\u0275resetView(r)}),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(16,"button",84),c.\u0275\u0275listener("click",function(){let r=c.\u0275\u0275restoreView(e).$implicit,l=c.\u0275\u0275nextContext();return c.\u0275\u0275resetView(l.pay(r.studentId))}),c.\u0275\u0275text(17," Record "),c.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit,n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(e.studentName),c.\u0275\u0275advance(),c.\u0275\u0275property("color",e.status==="due"?"warn":"primary"),c.\u0275\u0275advance(),c.\u0275\u0275textInterpolate1(" ",e.status==="due"?"Due":"Clear"," "),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate2("Class ",e.class||"--"," \xB7 Last paid ",e.lastPaid||"--"),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("Balance: ",c.\u0275\u0275pipeBind1(10,8,e.balance)),c.\u0275\u0275advance(6),c.\u0275\u0275twoWayProperty("ngModel",n.paymentAmounts[e.studentId]),c.\u0275\u0275advance(),c.\u0275\u0275property("disabled",!n.paymentAmounts[e.studentId])}}var et=class a{constructor(t){this.mock=t;this.fees=this.mock.getFees()}fees=[];search="";paymentAmounts={};students=[];viewRows=[];dataSource=new Ha([]);displayedColumns=["student","class","balance","lastPaid","status","actions"];statusFilter="all";summary={outstanding:0,dueCount:0,clearedCount:0,latestPayment:""};collectionProgress=0;paginator;sort;ngOnInit(){this.loadRows()}ngAfterViewInit(){this.attachTableHelpers()}loadRows(){this.students=this.mock.getStudents(),this.fees=this.mock.getFees();let t=new Map(this.fees.map(e=>[e.studentId,e]));this.viewRows=this.students.map(e=>{let n=t.get(e.id),r=Number(n?.balance)||0;return{studentId:e.id,studentName:`${e.firstName} ${e.lastName}`,class:e.class,balance:r,lastPaid:n?.lastPaid,status:r>0?"due":"clear"}}),this.viewRows.forEach(e=>this.paymentAmounts[e.studentId]=this.paymentAmounts[e.studentId]||0),this.applyFilters(),this.refreshSummary()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.viewRows.filter(n=>{let r=!t||n.studentName.toLowerCase().includes(t)||String(n.studentId).includes(t)||(n.class||"").toLowerCase().includes(t),l=this.statusFilter==="all"||n.status===this.statusFilter;return r&&l});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}pay(t){let e=Number(this.paymentAmounts[t])||0;if(e<=0)return;let n=new Date().toISOString().slice(0,10);this.mock.payFee(t,e,n),this.paymentAmounts[t]=0,this.loadRows()}refreshSummary(){this.summary.outstanding=this.viewRows.reduce((n,r)=>n+(Number(r.balance)||0),0),this.summary.dueCount=this.viewRows.filter(n=>n.status==="due").length,this.summary.clearedCount=this.viewRows.filter(n=>n.status==="clear").length;let t=this.viewRows.map(n=>n.lastPaid).filter(Boolean).map(n=>new Date(n)).sort((n,r)=>r.getTime()-n.getTime())[0];this.summary.latestPayment=t?t.toISOString().slice(0,10):"";let e=this.viewRows.length;this.collectionProgress=e?Math.round(this.summary.clearedCount/e*100):0}exportCsv(){let t=["Student","Class","Balance","LastPaid","Status"],e=this.dataSource.data.map(x=>[`"${(x.studentName||"").replace(/"/g,'""')}"`,x.class||"",x.balance,x.lastPaid||"",x.status].join(",")),n=[t.join(","),...e].join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="fees.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(c.\u0275\u0275directiveInject(P))};static \u0275cmp=c.\u0275\u0275defineComponent({type:a,selectors:[["app-fees"]],viewQuery:function(e,n){if(e&1&&(c.\u0275\u0275viewQuery(Na,5),c.\u0275\u0275viewQuery(ja,5)),e&2){let r;c.\u0275\u0275queryRefresh(r=c.\u0275\u0275loadQuery())&&(n.paginator=r.first),c.\u0275\u0275queryRefresh(r=c.\u0275\u0275loadQuery())&&(n.sort=r.first)}},decls:124,vars:30,consts:[[1,"fees-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"spacer"],[1,"toolbar-actions"],["mat-stroked-button","","color","accent",3,"routerLink"],["viewBox","0 0 24 24",1,"icon"],["d","M13 3a9 9 0 1 0 9 9h-2a7 7 0 1 1-7-7v2l3-3-3-3v2z","fill","currentColor"],["mat-flat-button","","color","accent",3,"routerLink"],["d","M21 7H3c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm0 8H3V9h18v6zm-2-3.5c0 .83-.67 1.5-1.5 1.5S16 12.33 16 11.5 16.67 10 17.5 10s1.5.67 1.5 1.5z","fill","currentColor"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","warn"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"metric-value","warn-text"],["mode","determinate",3,"value"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm.5-13H11v6l4.75 2.85.75-1.23-3.5-2.07V7z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","name, id, class",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],[1,"status-chips",3,"selectionChange","value"],["value","all"],["value","due"],["value","clear"],[1,"filter-actions"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"routerLink"],["d","M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 5h8v3h-8v-3zm0-5h8v3h-8v-3z","fill","currentColor"],["d","M4 6c0 1.66 3.58 3 8 3s8-1.34 8-3-3.58-3-8-3-8 1.34-8 3zm0 4c0 1.66 3.58 3 8 3s8-1.34 8-3V8c-1.73 1.27-5.02 2-8 2s-6.27-.73-8-2v2zm0 4c0 1.66 3.58 3 8 3s8-1.34 8-3v-2c-1.73 1.27-5.02 2-8 2s-6.27-.73-8-2v2z","fill","currentColor"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z","fill","currentColor"],["d","M12 2 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-3zm0 2.18L18.59 6 12 7.82 5.41 6 12 4.18zM5 8.47l7 1.91 7-1.91v2.53c0 4.24-2.7 8.28-7 9.66-4.3-1.38-7-5.42-7-9.66V8.47z","fill","currentColor"],["mat-stroked-button","","color","accent",1,"ghost-button",3,"click"],["d","M5 20h14v-2H5v2zm7-16-4 4h3v4h2v-4h3l-4-4z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","","matSortDisableClear","",1,"fees-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","balance"],["matColumnDef","lastPaid"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[1,"router-outlet-wrap"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"cell-title"],[1,"cell-meta"],["mat-header-cell",""],[1,"status-chip",3,"color"],[1,"action-row"],["appearance","fill",1,"compact-number"],["matInput","","type","number","min","0",3,"ngModelChange","ngModel"],["mat-flat-button","","color","accent",1,"record-btn",3,"click","disabled"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15-4-4 1.41-1.41L10 14.17l6.59-6.58L18 9l-8 8z","fill","currentColor"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],["selected","",3,"color"],[1,"cell-strong"],["mat-stroked-button","","color","primary",3,"click","disabled"]],template:function(e,n){e&1&&(c.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),c.\u0275\u0275text(4,"Finance"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"div",4),c.\u0275\u0275text(6,"Fee Management"),c.\u0275\u0275elementEnd()(),c.\u0275\u0275element(7,"span",5),c.\u0275\u0275elementStart(8,"div",6)(9,"button",7),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(10,"svg",8),c.\u0275\u0275element(11,"path",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(12," History "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(13,"button",10),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(14,"svg",8),c.\u0275\u0275element(15,"path",11),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(16," Collect Fee "),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(17,"div",12)(18,"mat-card",13)(19,"div",14),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(20,"svg",8),c.\u0275\u0275element(21,"path",11),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(22,"div",15)(23,"div",16),c.\u0275\u0275text(24,"Outstanding"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(25,"div",17),c.\u0275\u0275text(26),c.\u0275\u0275pipe(27,"currency"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(28,"div",18),c.\u0275\u0275text(29),c.\u0275\u0275elementEnd()()(),c.\u0275\u0275elementStart(30,"mat-card",13)(31,"div",19),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(32,"svg",8),c.\u0275\u0275element(33,"path",20),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(34,"div",15)(35,"div",16),c.\u0275\u0275text(36,"Due students"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(37,"div",21),c.\u0275\u0275text(38),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(39,"div",18),c.\u0275\u0275text(40),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(41,"mat-progress-bar",22),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(42,"mat-card",13)(43,"div",23),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(44,"svg",8),c.\u0275\u0275element(45,"path",24),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(46,"div",15)(47,"div",16),c.\u0275\u0275text(48,"Latest payment"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(49,"div",17),c.\u0275\u0275text(50),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(51,"div",18),c.\u0275\u0275text(52,"Refresh after collection"),c.\u0275\u0275elementEnd()()()(),c.\u0275\u0275elementStart(53,"mat-card",25)(54,"div",26)(55,"mat-form-field",27)(56,"mat-label"),c.\u0275\u0275text(57,"Search student"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(58,"span",28),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(59,"svg",8),c.\u0275\u0275element(60,"path",29),c.\u0275\u0275elementEnd()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(61,"input",30),c.\u0275\u0275twoWayListener("ngModelChange",function(l){return c.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),c.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(62,Ja,3,0,"button",31),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(63,"mat-chip-listbox",32),c.\u0275\u0275listener("selectionChange",function(l){return n.onStatusChange(l)}),c.\u0275\u0275elementStart(64,"mat-chip-option",33),c.\u0275\u0275text(65,"All"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(66,"mat-chip-option",34),c.\u0275\u0275text(67,"Due"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(68,"mat-chip-option",35),c.\u0275\u0275text(69,"Clear"),c.\u0275\u0275elementEnd()(),c.\u0275\u0275elementStart(70,"div",36)(71,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(72,"svg",8),c.\u0275\u0275element(73,"path",38),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(74," Categories "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(75,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(76,"svg",8),c.\u0275\u0275element(77,"path",39),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(78," Structure "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(79,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(80,"svg",8),c.\u0275\u0275element(81,"path",40),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(82," My Fees "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(83,"button",37),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(84,"svg",8),c.\u0275\u0275element(85,"path",41),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(86," Discounts "),c.\u0275\u0275elementEnd(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(87,"button",42),c.\u0275\u0275listener("click",function(){return n.exportCsv()}),c.\u0275\u0275namespaceSVG(),c.\u0275\u0275elementStart(88,"svg",8),c.\u0275\u0275element(89,"path",43),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(90," Export CSV "),c.\u0275\u0275elementEnd()()()(),c.\u0275\u0275namespaceHTML(),c.\u0275\u0275elementStart(91,"mat-card",44)(92,"mat-card-title"),c.\u0275\u0275text(93,"Student balances"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(94,"mat-card-subtitle"),c.\u0275\u0275text(95,"Quickly check outstanding balances and record payments."),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(96,"div",45)(97,"table",46),c.\u0275\u0275elementContainerStart(98,47),c.\u0275\u0275template(99,Za,2,0,"th",48)(100,Ka,5,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(101,50),c.\u0275\u0275template(102,Xa,2,0,"th",48)(103,eo,2,1,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(104,51),c.\u0275\u0275template(105,to,2,0,"th",48)(106,no,4,7,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(107,52),c.\u0275\u0275template(108,io,2,0,"th",48)(109,ao,2,1,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(110,53),c.\u0275\u0275template(111,oo,2,0,"th",54)(112,ro,3,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275elementContainerStart(113,55),c.\u0275\u0275template(114,lo,2,0,"th",54)(115,so,10,2,"td",49),c.\u0275\u0275elementContainerEnd(),c.\u0275\u0275template(116,co,1,0,"tr",56)(117,mo,1,0,"tr",57)(118,po,4,1,"tr",58),c.\u0275\u0275elementEnd()(),c.\u0275\u0275element(119,"mat-paginator",59),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(120,"mat-card",60),c.\u0275\u0275template(121,uo,18,10,"div",61),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(122,"div",62),c.\u0275\u0275element(123,"router-outlet"),c.\u0275\u0275elementEnd()()),e&2&&(c.\u0275\u0275advance(9),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(23,Wa)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(24,Ua)),c.\u0275\u0275advance(13),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(27,21,n.summary.outstanding)),c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1("Across ",n.viewRows.length," students"),c.\u0275\u0275advance(9),c.\u0275\u0275textInterpolate(n.summary.dueCount),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1("Cleared: ",n.summary.clearedCount),c.\u0275\u0275advance(),c.\u0275\u0275property("value",n.collectionProgress),c.\u0275\u0275advance(9),c.\u0275\u0275textInterpolate(n.summary.latestPayment||"\u2014"),c.\u0275\u0275advance(11),c.\u0275\u0275twoWayProperty("ngModel",n.search),c.\u0275\u0275advance(),c.\u0275\u0275property("ngIf",n.search),c.\u0275\u0275advance(),c.\u0275\u0275property("value",n.statusFilter),c.\u0275\u0275advance(8),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(25,$a)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(26,Ga)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(27,qa)),c.\u0275\u0275advance(4),c.\u0275\u0275property("routerLink",c.\u0275\u0275pureFunction0(28,Qa)),c.\u0275\u0275advance(14),c.\u0275\u0275property("dataSource",n.dataSource),c.\u0275\u0275advance(19),c.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),c.\u0275\u0275advance(),c.\u0275\u0275property("matRowDefColumns",n.displayedColumns),c.\u0275\u0275advance(2),c.\u0275\u0275property("pageSize",5)("pageSizeOptions",c.\u0275\u0275pureFunction0(29,Ya)),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngForOf",n.dataSource.data))},dependencies:[La,ge.NgForOf,ge.NgIf,Ba,U.DefaultValueAccessor,U.NumberValueAccessor,U.NgControlStatus,U.MinValidator,U.NgModel,za,tt.RouterOutlet,tt.RouterLink,v,nt.MatButton,nt.MatIconButton,$.MatInput,$.MatFormField,$.MatLabel,$.MatPrefix,$.MatSuffix,k.MatTable,k.MatHeaderCellDef,k.MatHeaderRowDef,k.MatColumnDef,k.MatCellDef,k.MatRowDef,k.MatHeaderCell,k.MatCell,k.MatHeaderRow,k.MatRow,k.MatNoDataRow,fe.MatCard,fe.MatCardSubtitle,fe.MatCardTitle,Yt.MatToolbar,_e.MatChip,_e.MatChipListbox,_e.MatChipOption,Jt.MatPaginator,it.MatSort,it.MatSortHeader,Zt.MatProgressBar,ge.CurrencyPipe],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}"]})};import{CommonModule as go}from"@angular/common";import{FormsModule as fo}from"@angular/forms";import{MatTableDataSource as _o}from"@angular/material/table";import{MatPaginator as Co}from"@angular/material/paginator";import{MatSort as ho}from"@angular/material/sort";import*as s from"@angular/core";import*as ot from"@angular/common";import*as Ce from"@angular/forms";import*as rt from"@angular/material/button";import*as G from"@angular/material/input";import*as lt from"@angular/material/select";import*as D from"@angular/material/table";import*as he from"@angular/material/card";import*as Kt from"@angular/material/toolbar";import*as Xt from"@angular/material/checkbox";import*as en from"@angular/material/chips";import*as tn from"@angular/material/paginator";import*as st from"@angular/material/sort";var bo=()=>[8,15,25];function xo(a,t){if(a&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",59),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(e);let r=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(r.clearSearch())}),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(1,"svg",8),s.\u0275\u0275element(2,"path",60),s.\u0275\u0275elementEnd()()}}function Mo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.name)}}function wo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275property("value",e),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e)}}function yo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.name)}}function vo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"mat-option",61),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275property("value",e),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e)}}function Po(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Class"),s.\u0275\u0275elementEnd())}function So(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.classId)}}function Oo(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Subject"),s.\u0275\u0275elementEnd())}function Eo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.subject)}}function To(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Teacher"),s.\u0275\u0275elementEnd())}function ko(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.teacher)}}function Do(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Day"),s.\u0275\u0275elementEnd())}function Io(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.day)}}function Fo(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",62),s.\u0275\u0275text(1,"Time"),s.\u0275\u0275elementEnd())}function Ao(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.time)}}function Ro(a,t){a&1&&(s.\u0275\u0275elementStart(0,"th",64),s.\u0275\u0275text(1,"Conflict"),s.\u0275\u0275elementEnd())}function Vo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"mat-chip",67),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),a&2){let e=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate(e.conflictReason)}}function Lo(a,t){a&1&&(s.\u0275\u0275elementStart(0,"span"),s.\u0275\u0275text(1,"--"),s.\u0275\u0275elementEnd())}function Bo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"td",63),s.\u0275\u0275template(1,Vo,2,1,"mat-chip",65)(2,Lo,2,0,"span",66),s.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",e.conflict),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",!e.conflict)}}function zo(a,t){a&1&&s.\u0275\u0275element(0,"th",64)}function No(a,t){if(a&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"td",63)(1,"button",68),s.\u0275\u0275listener("click",function(){let r=s.\u0275\u0275restoreView(e).$implicit,l=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(l.deleteEntry(r.id))}),s.\u0275\u0275text(2,"Delete"),s.\u0275\u0275elementEnd()()}}function jo(a,t){a&1&&s.\u0275\u0275element(0,"tr",69)}function Ho(a,t){a&1&&s.\u0275\u0275element(0,"tr",70)}function Wo(a,t){if(a&1&&(s.\u0275\u0275elementStart(0,"tr",71)(1,"td")(2,"div",72),s.\u0275\u0275text(3,"No timetable entries match your filters."),s.\u0275\u0275elementEnd()()()),a&2){let e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(),s.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Uo(a,t){if(a&1){let e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",73)(1,"div",74)(2,"div",75),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"mat-chip",76),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(6,"div",77),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",77),s.\u0275\u0275text(9),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"div",77),s.\u0275\u0275text(11),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(12,"div",78)(13,"button",68),s.\u0275\u0275listener("click",function(){let r=s.\u0275\u0275restoreView(e).$implicit,l=s.\u0275\u0275nextContext();return s.\u0275\u0275resetView(l.deleteEntry(r.id))}),s.\u0275\u0275text(14,"Delete"),s.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate2("",e.classId," \xB7 ",e.subject),s.\u0275\u0275advance(),s.\u0275\u0275property("color",e.conflict?"warn":"primary"),s.\u0275\u0275advance(),s.\u0275\u0275textInterpolate1(" ",e.conflict?"Conflict":"OK"," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate2("",e.day," \xB7 ",e.time),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1("Teacher: ",e.teacher),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1("Reason: ",e.conflictReason||"None")}}var at=class a{constructor(t){this.mock=t;this.classes=t.getClasses(),this.rows=t.getTimetable()}classes=[];rows=[];dataSource=new _o([]);displayedColumns=["classId","subject","teacher","day","time","conflict","actions"];newEntry={id:0,classId:"",subject:"",teacher:"",day:"",time:""};search="";filterClass="";filterDay="";showConflictsOnly=!1;classCount=0;nextDay="";conflictCount=0;days=["Mon","Tue","Wed","Thu","Fri","Sat"];paginator;sort;ngOnInit(){this.applyFilters(),this.refreshSummary()}ngAfterViewInit(){this.attachTableHelpers()}addEntry(){!this.newEntry.classId||!this.newEntry.subject||(this.mock.addTimetableEntry(te({},this.newEntry)),this.rows=this.mock.getTimetable(),this.newEntry={id:0,classId:"",subject:"",teacher:"",day:"",time:""},this.applyFilters(),this.refreshSummary())}deleteEntry(t){this.mock.deleteTimetableEntry(t),this.rows=this.mock.getTimetable(),this.applyFilters(),this.refreshSummary()}applyFilters(){this.flagConflicts();let t=this.search.trim().toLowerCase(),e=this.rows.filter(n=>{let r=!t||n.subject.toLowerCase().includes(t)||n.teacher.toLowerCase().includes(t)||n.classId.toLowerCase().includes(t),l=!this.filterClass||n.classId===this.filterClass,C=!this.filterDay||n.day===this.filterDay,x=!this.showConflictsOnly||!!n.conflict;return r&&l&&C&&x});this.dataSource.data=e,this.attachTableHelpers()}attachTableHelpers(){this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.firstPage()),this.sort&&(this.dataSource.sort=this.sort)}clearSearch(){this.search="",this.applyFilters()}refreshSummary(){this.classCount=new Set(this.rows.map(n=>n.classId)).size;let t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],e=this.rows.map(n=>n.day).filter(Boolean).sort((n,r)=>t.indexOf(n)-t.indexOf(r));this.nextDay=e[0]||"",this.conflictCount=this.rows.filter(n=>n.conflict).length}flagConflicts(){let t=C=>`${C.classId}-${C.day}-${C.time}`,e=C=>`${C.teacher}-${C.day}-${C.time}`,n=new Map,r=new Map;this.rows.forEach(C=>{let x=t(C),y=e(C);n.set(x,[...n.get(x)||[],C]),r.set(y,[...r.get(y)||[],C]),C.conflict=!1,C.conflictReason=""});let l=(C,x)=>{C.length>1&&C.forEach(y=>{y.conflict=!0,y.conflictReason=x})};n.forEach(C=>l(C,"Class overlap")),r.forEach(C=>l(C,"Teacher overlap"))}exportCsv(){let t=["Class","Subject","Teacher","Day","Time","Conflict","Reason"],e=this.dataSource.data.map(x=>[x.classId,`"${(x.subject||"").replace(/"/g,'""')}"`,`"${(x.teacher||"").replace(/"/g,'""')}"`,x.day,x.time,x.conflict?"Yes":"No",x.conflictReason||""].join(",")),n=[t.join(","),...e].join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="timetable.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(s.\u0275\u0275directiveInject(P))};static \u0275cmp=s.\u0275\u0275defineComponent({type:a,selectors:[["app-timetable"]],viewQuery:function(e,n){if(e&1&&(s.\u0275\u0275viewQuery(Co,5),s.\u0275\u0275viewQuery(ho,5)),e&2){let r;s.\u0275\u0275queryRefresh(r=s.\u0275\u0275loadQuery())&&(n.paginator=r.first),s.\u0275\u0275queryRefresh(r=s.\u0275\u0275loadQuery())&&(n.sort=r.first)}},decls:142,vars:25,consts:[[1,"fees-page","timetable-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["viewBox","0 0 24 24",1,"icon"],["d","M3 5h18v2H3V5zm2 4h14v2H5V9zm-2 4h18v2H3v-2zm2 4h14v2H5v-2z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M4 4h16v2H4V4zm0 5h16v2H4V9zm0 5h16v2H4v-2zm0 5h16v2H4v-2z","fill","currentColor"],[1,"metric-icon","warn"],["d","M19 3H5a2 2 0 0 0-2 2v14l4-4h12a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z","fill","currentColor"],[1,"metric-value","warn-text"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2V8h2v6z","fill","currentColor"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","subject, teacher, class",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel"],["mat-stroked-button","","color","primary",1,"ghost-button",3,"click"],[1,"structure-header"],["appearance","fill",1,"class-select"],[3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","placeholder","09:00",3,"ngModelChange","ngModel"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"table-card","mat-elevation-z2","desktop-only"],[1,"table-wrap"],["mat-table","","matSort","",1,"fees-table",3,"dataSource"],["matColumnDef","classId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subject"],["matColumnDef","teacher"],["matColumnDef","day"],["matColumnDef","time"],["matColumnDef","conflict"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["color","warn","selected","",4,"ngIf"],[4,"ngIf"],["color","warn","selected",""],["mat-stroked-button","","color","warn",1,"ghost-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"fee-empty"],[1,"mobile-card"],[1,"card-row"],[1,"cell-title"],["selected","",3,"color"],[1,"cell-meta"],[1,"action-row"]],template:function(e,n){e&1&&(s.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),s.\u0275\u0275text(4,"School Management"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"div",4),s.\u0275\u0275text(6,"Timetable"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(10,"svg",8),s.\u0275\u0275element(11,"path",9),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(12,"div",10)(13,"div",11),s.\u0275\u0275text(14,"Entries"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"div",12),s.\u0275\u0275text(16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"div",13),s.\u0275\u0275text(18,"Across all classes"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(21,"svg",8),s.\u0275\u0275element(22,"path",15),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(23,"div",10)(24,"div",11),s.\u0275\u0275text(25,"Classes"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"div",12),s.\u0275\u0275text(27),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(28,"div",13),s.\u0275\u0275text(29,"With scheduled slots"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",16),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(32,"svg",8),s.\u0275\u0275element(33,"path",17),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(34,"div",10)(35,"div",11),s.\u0275\u0275text(36,"Next day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(37,"div",18),s.\u0275\u0275text(38),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(39,"div",13),s.\u0275\u0275text(40,"Earliest scheduled day"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(41,"mat-card",6)(42,"div",16),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(43,"svg",8),s.\u0275\u0275element(44,"path",19),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(45,"div",10)(46,"div",11),s.\u0275\u0275text(47,"Conflicts"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(48,"div",18),s.\u0275\u0275text(49),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(50,"div",13),s.\u0275\u0275text(51,"Check class/teacher overlaps"),s.\u0275\u0275elementEnd()()()(),s.\u0275\u0275elementStart(52,"mat-card",20)(53,"div",21)(54,"mat-form-field",22)(55,"mat-label"),s.\u0275\u0275text(56,"Search subject/teacher"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(57,"span",23),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(58,"svg",8),s.\u0275\u0275element(59,"path",24),s.\u0275\u0275elementEnd()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(60,"input",25),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),s.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(61,xo,3,0,"button",26),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(62,"mat-form-field",27)(63,"mat-label"),s.\u0275\u0275text(64,"Class"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(65,"mat-select",28),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.filterClass,l)||(n.filterClass=l),l}),s.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),s.\u0275\u0275elementStart(66,"mat-option",29),s.\u0275\u0275text(67,"All"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(68,Mo,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(69,"mat-form-field",27)(70,"mat-label"),s.\u0275\u0275text(71,"Day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(72,"mat-select",28),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.filterDay,l)||(n.filterDay=l),l}),s.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),s.\u0275\u0275elementStart(73,"mat-option",29),s.\u0275\u0275text(74,"All"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(75,wo,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(76,"mat-checkbox",31),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.showConflictsOnly,l)||(n.showConflictsOnly=l),l}),s.\u0275\u0275listener("change",function(){return n.applyFilters()}),s.\u0275\u0275text(77,"Show conflicts only"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(78,"button",32),s.\u0275\u0275listener("click",function(){return n.exportCsv()}),s.\u0275\u0275text(79,"Export CSV"),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275elementStart(80,"mat-card",20)(81,"div",33)(82,"mat-form-field",34)(83,"mat-label"),s.\u0275\u0275text(84,"Class"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(85,"mat-select",35),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.newEntry.classId,l)||(n.newEntry.classId=l),l}),s.\u0275\u0275template(86,yo,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(87,"mat-form-field",34)(88,"mat-label"),s.\u0275\u0275text(89,"Subject"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(90,"input",36),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.newEntry.subject,l)||(n.newEntry.subject=l),l}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(91,"mat-form-field",34)(92,"mat-label"),s.\u0275\u0275text(93,"Teacher"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(94,"input",36),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.newEntry.teacher,l)||(n.newEntry.teacher=l),l}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(95,"mat-form-field",34)(96,"mat-label"),s.\u0275\u0275text(97,"Day"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(98,"mat-select",35),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.newEntry.day,l)||(n.newEntry.day=l),l}),s.\u0275\u0275template(99,vo,2,2,"mat-option",30),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(100,"mat-form-field",34)(101,"mat-label"),s.\u0275\u0275text(102,"Time"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(103,"input",37),s.\u0275\u0275twoWayListener("ngModelChange",function(l){return s.\u0275\u0275twoWayBindingSet(n.newEntry.time,l)||(n.newEntry.time=l),l}),s.\u0275\u0275elementEnd()(),s.\u0275\u0275elementStart(104,"button",38),s.\u0275\u0275listener("click",function(){return n.addEntry()}),s.\u0275\u0275namespaceSVG(),s.\u0275\u0275elementStart(105,"svg",8),s.\u0275\u0275element(106,"path",39),s.\u0275\u0275elementEnd(),s.\u0275\u0275text(107," Add slot "),s.\u0275\u0275elementEnd()()(),s.\u0275\u0275namespaceHTML(),s.\u0275\u0275elementStart(108,"mat-card",40)(109,"mat-card-title"),s.\u0275\u0275text(110,"Schedule"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(111,"mat-card-subtitle"),s.\u0275\u0275text(112,"Class-wise sessions with filters."),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(113,"div",41)(114,"table",42),s.\u0275\u0275elementContainerStart(115,43),s.\u0275\u0275template(116,Po,2,0,"th",44)(117,So,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(118,46),s.\u0275\u0275template(119,Oo,2,0,"th",44)(120,Eo,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(121,47),s.\u0275\u0275template(122,To,2,0,"th",44)(123,ko,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(124,48),s.\u0275\u0275template(125,Do,2,0,"th",44)(126,Io,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(127,49),s.\u0275\u0275template(128,Fo,2,0,"th",44)(129,Ao,2,1,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(130,50),s.\u0275\u0275template(131,Ro,2,0,"th",51)(132,Bo,3,2,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275elementContainerStart(133,52),s.\u0275\u0275template(134,zo,1,0,"th",51)(135,No,3,0,"td",45),s.\u0275\u0275elementContainerEnd(),s.\u0275\u0275template(136,jo,1,0,"tr",53)(137,Ho,1,0,"tr",54)(138,Wo,4,1,"tr",55),s.\u0275\u0275elementEnd()(),s.\u0275\u0275element(139,"mat-paginator",56),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(140,"mat-card",57),s.\u0275\u0275template(141,Uo,15,8,"div",58),s.\u0275\u0275elementEnd()()),e&2&&(s.\u0275\u0275advance(16),s.\u0275\u0275textInterpolate(n.rows.length),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(n.classCount),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(n.nextDay||"--"),s.\u0275\u0275advance(11),s.\u0275\u0275textInterpolate(n.conflictCount),s.\u0275\u0275advance(11),s.\u0275\u0275twoWayProperty("ngModel",n.search),s.\u0275\u0275advance(),s.\u0275\u0275property("ngIf",n.search),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.filterClass),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngForOf",n.classes),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.filterDay),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngForOf",n.days),s.\u0275\u0275advance(),s.\u0275\u0275twoWayProperty("ngModel",n.showConflictsOnly),s.\u0275\u0275advance(9),s.\u0275\u0275twoWayProperty("ngModel",n.newEntry.classId),s.\u0275\u0275advance(),s.\u0275\u0275property("ngForOf",n.classes),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.newEntry.subject),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.newEntry.teacher),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.newEntry.day),s.\u0275\u0275advance(),s.\u0275\u0275property("ngForOf",n.days),s.\u0275\u0275advance(4),s.\u0275\u0275twoWayProperty("ngModel",n.newEntry.time),s.\u0275\u0275advance(11),s.\u0275\u0275property("dataSource",n.dataSource),s.\u0275\u0275advance(22),s.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),s.\u0275\u0275advance(),s.\u0275\u0275property("matRowDefColumns",n.displayedColumns),s.\u0275\u0275advance(2),s.\u0275\u0275property("pageSize",8)("pageSizeOptions",s.\u0275\u0275pureFunction0(24,bo)),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",n.dataSource.data))},dependencies:[go,ot.NgForOf,ot.NgIf,fo,Ce.DefaultValueAccessor,Ce.NgControlStatus,Ce.NgModel,v,rt.MatButton,rt.MatIconButton,G.MatInput,G.MatFormField,G.MatLabel,G.MatPrefix,G.MatSuffix,lt.MatSelect,lt.MatOption,D.MatTable,D.MatHeaderCellDef,D.MatHeaderRowDef,D.MatColumnDef,D.MatCellDef,D.MatRowDef,D.MatHeaderCell,D.MatCell,D.MatHeaderRow,D.MatRow,D.MatNoDataRow,he.MatCard,he.MatCardSubtitle,he.MatCardTitle,Kt.MatToolbar,Xt.MatCheckbox,en.MatChip,tn.MatPaginator,st.MatSort,st.MatSortHeader],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".timetable-page[_ngcontent-%COMP%]{padding:0}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as $o}from"@angular/common";import{FormsModule as Go}from"@angular/forms";import*as g from"@angular/core";import*as dt from"@angular/common";import*as J from"@angular/forms";import*as mt from"@angular/material/button";import*as q from"@angular/material/input";import*as pt from"@angular/material/select";import*as be from"@angular/material/card";import*as nn from"@angular/material/toolbar";import*as an from"@angular/material/chips";function qo(a,t){if(a&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"button",39),g.\u0275\u0275listener("click",function(){g.\u0275\u0275restoreView(e);let r=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(r.clearSearch())}),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(1,"svg",8),g.\u0275\u0275element(2,"path",40),g.\u0275\u0275elementEnd()()}}function Qo(a,t){if(a&1&&(g.\u0275\u0275elementStart(0,"mat-option",41),g.\u0275\u0275text(1),g.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;g.\u0275\u0275property("value",e.id),g.\u0275\u0275advance(),g.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function Yo(a,t){if(a&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"div",48),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"div",49),g.\u0275\u0275text(5),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(6,"td")(7,"mat-form-field",50)(8,"mat-label"),g.\u0275\u0275text(9,"Marks"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(10,"input",51),g.\u0275\u0275twoWayListener("ngModelChange",function(r){let l=g.\u0275\u0275restoreView(e).$implicit;return g.\u0275\u0275twoWayBindingSet(l.marks,r)||(l.marks=r),g.\u0275\u0275resetView(r)}),g.\u0275\u0275elementEnd()()()()}if(a&2){let e=t.$implicit,n=g.\u0275\u0275nextContext(2);g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(n.studentName(e.studentId)),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1("ID #",e.studentId),g.\u0275\u0275advance(5),g.\u0275\u0275twoWayProperty("ngModel",e.marks)}}function Jo(a,t){if(a&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"mat-card",42)(1,"mat-card-title"),g.\u0275\u0275text(2),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(3,"mat-card-subtitle"),g.\u0275\u0275text(4),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",43)(6,"table",44)(7,"thead")(8,"tr")(9,"th"),g.\u0275\u0275text(10,"Student"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(11,"th"),g.\u0275\u0275text(12,"Marks"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(13,"tbody"),g.\u0275\u0275template(14,Yo,11,3,"tr",45),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(15,"div",46)(16,"button",33),g.\u0275\u0275listener("click",function(){let r=g.\u0275\u0275restoreView(e).$implicit,l=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(l.saveMarks(r))}),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(17,"svg",8),g.\u0275\u0275element(18,"path",47),g.\u0275\u0275elementEnd(),g.\u0275\u0275text(19," Save marks "),g.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(e.title),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate2("",e.date," \uFFFD ",(e.studentMarks==null?null:e.studentMarks.length)||0," students"),g.\u0275\u0275advance(10),g.\u0275\u0275property("ngForOf",e.studentMarks)}}function Zo(a,t){if(a&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",57)(1,"div",49),g.\u0275\u0275text(2),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(3,"mat-form-field",50)(4,"mat-label"),g.\u0275\u0275text(5,"Marks"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(6,"input",51),g.\u0275\u0275twoWayListener("ngModelChange",function(r){let l=g.\u0275\u0275restoreView(e).$implicit;return g.\u0275\u0275twoWayBindingSet(l.marks,r)||(l.marks=r),g.\u0275\u0275resetView(r)}),g.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit,n=g.\u0275\u0275nextContext(2);g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(n.studentName(e.studentId)),g.\u0275\u0275advance(4),g.\u0275\u0275twoWayProperty("ngModel",e.marks)}}function Ko(a,t){if(a&1){let e=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",52)(1,"div",53)(2,"div",48),g.\u0275\u0275text(3),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(4,"mat-chip",54),g.\u0275\u0275text(5),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(6,"div",55),g.\u0275\u0275text(7),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(8,Zo,7,2,"div",56),g.\u0275\u0275elementStart(9,"div",46)(10,"button",33),g.\u0275\u0275listener("click",function(){let r=g.\u0275\u0275restoreView(e).$implicit,l=g.\u0275\u0275nextContext();return g.\u0275\u0275resetView(l.saveMarks(r))}),g.\u0275\u0275text(11," Save marks "),g.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit;g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(e.title),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(e.date),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate1("Students: ",(e.studentMarks==null?null:e.studentMarks.length)||0),g.\u0275\u0275advance(),g.\u0275\u0275property("ngForOf",e.studentMarks)}}var ct=class a{constructor(t){this.mock=t;this.exams=t.getExams(),this.students=t.getStudents(),this.refreshMetrics()}exams=[];students=[];search="";dateFilter="";newTitle="";newDate=new Date().toISOString().slice(0,10);selectedStudentIds=[];metrics={nextExam:"",totalMarks:0};get filteredExams(){let t=this.search.trim().toLowerCase();return this.exams.filter(e=>{let n=!t||e.title.toLowerCase().includes(t)||e.date.includes(t),r=!this.dateFilter||e.date===this.dateFilter;return n&&r})}clearSearch(){this.search="",this.applyFilters()}applyFilters(){this.exams=this.mock.getExams()}studentName(t){let e=this.students.find(n=>n.id===t);return e?`${e.firstName} ${e.lastName}`:t}createExam(){this.newTitle&&(this.mock.createExam(this.newTitle,this.newDate,this.selectedStudentIds),this.exams=this.mock.getExams(),this.newTitle="",this.selectedStudentIds=[],this.refreshMetrics())}saveMarks(t){let e=t.studentMarks.map(n=>({studentId:n.studentId,marks:Number(n.marks)}));this.mock.recordMarks(t.id,e),this.exams=this.mock.getExams(),this.refreshMetrics()}refreshMetrics(){let t=this.exams.map(e=>e.date).filter(Boolean).sort();this.metrics.nextExam=t[0]||"",this.metrics.totalMarks=this.exams.reduce((e,n)=>e+(n.studentMarks?.length||0),0)}static \u0275fac=function(e){return new(e||a)(g.\u0275\u0275directiveInject(P))};static \u0275cmp=g.\u0275\u0275defineComponent({type:a,selectors:[["app-exams"]],decls:78,vars:12,consts:[[1,"fees-page","exams-page"],["color","primary",1,"fees-toolbar","mat-elevation-z2"],[1,"toolbar-left"],[1,"eyebrow"],[1,"title"],[1,"summary-grid"],[1,"metric-card","mat-elevation-z2"],[1,"metric-icon"],["viewBox","0 0 24 24",1,"icon"],["d","M5 4v3h5.5v12h3V7H19V4z","fill","currentColor"],[1,"metric-body"],[1,"metric-label"],[1,"metric-value"],[1,"metric-hint"],[1,"metric-icon","success"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-1 5h2v4h4v2h-6V7z","fill","currentColor"],[1,"metric-icon","warn"],["d","M7 5h14v2H7V5zm0 4h14v2H7V9zm0 4h14v2H7v-2zm0 4h14v2H7v-2zM3 5h2v2H3V5zm0 4h2v2H3V9zm0 4h2v2H3v-2zm0 4h2v2H3v-2z","fill","currentColor"],[1,"metric-value","warn-text"],[1,"filters-card","mat-elevation-z2"],[1,"filter-grid"],["appearance","fill",1,"full-width","search-field"],["matPrefix","",1,"icon-wrap"],["d","M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28h.79l5 4.99L20.49 19l-5-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","fill","currentColor"],["matInput","","placeholder","title or date",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click",4,"ngIf"],["appearance","fill"],["matInput","","type","date",3,"ngModelChange","ngModel"],[1,"structure-header"],["appearance","fill",1,"class-select"],["matInput","",3,"ngModelChange","ngModel"],["multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",1,"record-btn",3,"click"],["d","M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z","fill","currentColor"],[1,"exam-grid","desktop-only"],["class","table-card mat-elevation-z2",4,"ngFor","ngForOf"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","aria-label","Clear search",3,"click"],["d","M18.3 5.71 12 12l6.3 6.29-1.41 1.42L12 13.41l-4.89 4.9-1.41-1.42L10.59 12 4.29 5.71 5.7 4.29 12 10.59l6.29-6.3z","fill","currentColor"],[3,"value"],[1,"table-card","mat-elevation-z2"],[1,"table-wrap"],[1,"fees-table"],[4,"ngFor","ngForOf"],[1,"card-actions"],["d","M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15-4-4 1.41-1.41L10 14.17l6.59-6.58L18 9l-8 8z","fill","currentColor"],[1,"cell-title"],[1,"cell-meta"],["appearance","fill",1,"compact-number"],["matInput","","type","number",3,"ngModelChange","ngModel"],[1,"mobile-card"],[1,"card-row"],["color","primary","selected",""],[1,"cell-sub"],["class","mobile-marks",4,"ngFor","ngForOf"],[1,"mobile-marks"]],template:function(e,n){e&1&&(g.\u0275\u0275elementStart(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"div",3),g.\u0275\u0275text(4,"School Management"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",4),g.\u0275\u0275text(6,"Exams & Results"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(7,"div",5)(8,"mat-card",6)(9,"div",7),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(10,"svg",8),g.\u0275\u0275element(11,"path",9),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(12,"div",10)(13,"div",11),g.\u0275\u0275text(14,"Total exams"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(15,"div",12),g.\u0275\u0275text(16),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(17,"div",13),g.\u0275\u0275text(18,"Managed in this module"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(19,"mat-card",6)(20,"div",14),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(21,"svg",8),g.\u0275\u0275element(22,"path",15),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(23,"div",10)(24,"div",11),g.\u0275\u0275text(25,"Next exam"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(26,"div",12),g.\u0275\u0275text(27),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(28,"div",13),g.\u0275\u0275text(29,"Sorted by date"),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275elementStart(30,"mat-card",6)(31,"div",16),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(32,"svg",8),g.\u0275\u0275element(33,"path",17),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(34,"div",10)(35,"div",11),g.\u0275\u0275text(36,"Students marked"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(37,"div",18),g.\u0275\u0275text(38),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(39,"div",13),g.\u0275\u0275text(40,"Across all exams"),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(41,"mat-card",19)(42,"div",20)(43,"mat-form-field",21)(44,"mat-label"),g.\u0275\u0275text(45,"Search exam"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(46,"span",22),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(47,"svg",8),g.\u0275\u0275element(48,"path",23),g.\u0275\u0275elementEnd()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(49,"input",24),g.\u0275\u0275twoWayListener("ngModelChange",function(l){return g.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),g.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(50,qo,3,0,"button",25),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(51,"mat-form-field",26)(52,"mat-label"),g.\u0275\u0275text(53,"Date"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(54,"input",27),g.\u0275\u0275twoWayListener("ngModelChange",function(l){return g.\u0275\u0275twoWayBindingSet(n.dateFilter,l)||(n.dateFilter=l),l}),g.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),g.\u0275\u0275elementEnd()()()(),g.\u0275\u0275elementStart(55,"mat-card",19)(56,"div",28)(57,"mat-form-field",29)(58,"mat-label"),g.\u0275\u0275text(59,"Title"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(60,"input",30),g.\u0275\u0275twoWayListener("ngModelChange",function(l){return g.\u0275\u0275twoWayBindingSet(n.newTitle,l)||(n.newTitle=l),l}),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(61,"mat-form-field",29)(62,"mat-label"),g.\u0275\u0275text(63,"Date"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(64,"input",27),g.\u0275\u0275twoWayListener("ngModelChange",function(l){return g.\u0275\u0275twoWayBindingSet(n.newDate,l)||(n.newDate=l),l}),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(65,"mat-form-field",29)(66,"mat-label"),g.\u0275\u0275text(67,"Assign students"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(68,"mat-select",31),g.\u0275\u0275twoWayListener("ngModelChange",function(l){return g.\u0275\u0275twoWayBindingSet(n.selectedStudentIds,l)||(n.selectedStudentIds=l),l}),g.\u0275\u0275template(69,Qo,2,3,"mat-option",32),g.\u0275\u0275elementEnd()(),g.\u0275\u0275elementStart(70,"button",33),g.\u0275\u0275listener("click",function(){return n.createExam()}),g.\u0275\u0275namespaceSVG(),g.\u0275\u0275elementStart(71,"svg",8),g.\u0275\u0275element(72,"path",34),g.\u0275\u0275elementEnd(),g.\u0275\u0275text(73," Create exam "),g.\u0275\u0275elementEnd()()(),g.\u0275\u0275namespaceHTML(),g.\u0275\u0275elementStart(74,"div",35),g.\u0275\u0275template(75,Jo,20,4,"mat-card",36),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(76,"div",37),g.\u0275\u0275template(77,Ko,12,4,"div",38),g.\u0275\u0275elementEnd()()),e&2&&(g.\u0275\u0275advance(16),g.\u0275\u0275textInterpolate(n.exams.length),g.\u0275\u0275advance(11),g.\u0275\u0275textInterpolate(n.metrics.nextExam||"--"),g.\u0275\u0275advance(11),g.\u0275\u0275textInterpolate(n.metrics.totalMarks),g.\u0275\u0275advance(11),g.\u0275\u0275twoWayProperty("ngModel",n.search),g.\u0275\u0275advance(),g.\u0275\u0275property("ngIf",n.search),g.\u0275\u0275advance(4),g.\u0275\u0275twoWayProperty("ngModel",n.dateFilter),g.\u0275\u0275advance(6),g.\u0275\u0275twoWayProperty("ngModel",n.newTitle),g.\u0275\u0275advance(4),g.\u0275\u0275twoWayProperty("ngModel",n.newDate),g.\u0275\u0275advance(4),g.\u0275\u0275twoWayProperty("ngModel",n.selectedStudentIds),g.\u0275\u0275advance(),g.\u0275\u0275property("ngForOf",n.students),g.\u0275\u0275advance(6),g.\u0275\u0275property("ngForOf",n.filteredExams),g.\u0275\u0275advance(2),g.\u0275\u0275property("ngForOf",n.filteredExams))},dependencies:[$o,dt.NgForOf,dt.NgIf,Go,J.DefaultValueAccessor,J.NumberValueAccessor,J.NgControlStatus,J.NgModel,v,mt.MatButton,mt.MatIconButton,q.MatInput,q.MatFormField,q.MatLabel,q.MatPrefix,q.MatSuffix,pt.MatSelect,pt.MatOption,be.MatCard,be.MatCardSubtitle,be.MatCardTitle,nn.MatToolbar,an.MatChip],styles:["[_nghost-%COMP%]{display:block}.fees-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.fees-toolbar[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(120deg,#3949ab,#1e88e5);color:#fff;padding:12px 16px}.toolbar-left[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.toolbar-left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:22px;font-weight:700}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.toolbar-actions[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){background:#f8fafc;color:var(--brand-primary, #1e3a8a);border-color:#1e3a8a66;border-radius:12px}.toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mdc-button__label[_ngcontent-%COMP%], .toolbar-actions[_ngcontent-%COMP%]   .mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled)   .mat-icon[_ngcontent-%COMP%]{color:var(--brand-primary, #1e3a8a)}.spacer[_ngcontent-%COMP%]{flex:1}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px}.metric-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;gap:12px;align-items:center;border-radius:12px}.metric-icon[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;color:#fff;background:#1976d229}.metric-icon.warn[_ngcontent-%COMP%]{background:#f443362e}.metric-icon.success[_ngcontent-%COMP%]{background:#2e7d322e}.metric-body[_ngcontent-%COMP%]{display:grid;gap:2px}.metric-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;text-transform:uppercase;letter-spacing:.04em}.metric-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--brand-primary, #1e3a8a)}.metric-value.warn-text[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316)}.metric-hint[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.filters-card[_ngcontent-%COMP%]{border-radius:12px;background:linear-gradient(135deg,#4f46e514,#06b6d414);border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.4fr auto auto;gap:12px;align-items:center}.full-width[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background:#ffffff1a;box-shadow:0 8px 18px #0003}.icon-wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.status-chips[_ngcontent-%COMP%]{display:flex;gap:8px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option[_ngcontent-%COMP%]{border-radius:12px}.status-chips[_ngcontent-%COMP%]   .mat-mdc-chip-option.mat-mdc-chip-selected[_ngcontent-%COMP%]{background:#1e3a8a29;color:var(--brand-primary, #1e3a8a);border:1px solid rgba(30,58,138,.35)}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled){border-color:#4f46e573;color:var(--brand-primary, #1e3a8a);background:#ffffffc7;border-radius:12px;box-shadow:0 6px 16px #0000001f}.filter-actions[_ngcontent-%COMP%]   .ghost-button.mat-mdc-outlined-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#ffffffe6;border-color:#4f46e5b3}.ghost-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.table-card[_ngcontent-%COMP%]{border-radius:12px}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto;margin-top:8px}.fees-table[_ngcontent-%COMP%]{min-width:720px}.fees-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.cell-title[_ngcontent-%COMP%]{font-weight:600}.cell-meta[_ngcontent-%COMP%]{color:var(--brand-muted, #94a3b8);font-size:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.status-chip[_ngcontent-%COMP%]{height:28px;font-weight:600;border-radius:12px}.due[_ngcontent-%COMP%]{color:var(--brand-warn, #f97316);font-weight:700}.clear[_ngcontent-%COMP%]{color:var(--brand-success, #22c55e);font-weight:700}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.compact-number[_ngcontent-%COMP%]{width:140px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding-inline:8px;background:#ffffff14;border-radius:12px}.compact-number[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:4px 0 8px}.record-btn.mat-mdc-unelevated-button[_ngcontent-%COMP%]:not(:disabled){background:linear-gradient(135deg,var(--brand-accent, #06b6d4),var(--brand-accent-strong, #0ea5c6));color:#0b1221;font-weight:700;border-radius:12px;box-shadow:0 8px 18px #06b6d459}.record-btn[_ngcontent-%COMP%]   .mdc-button__label[_ngcontent-%COMP%], .record-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#0b1221}.record-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.structure-page[_ngcontent-%COMP%]{padding:0}.structure-header[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}.structure-header[_ngcontent-%COMP%]   .class-select[_ngcontent-%COMP%]{min-width:180px}.structure-input[_ngcontent-%COMP%]{width:100%}.structure-page[_ngcontent-%COMP%]   .fees-table[_ngcontent-%COMP%]{min-width:680px}.mat-mdc-chip.mat-mdc-standard-chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid var(--brand-border, rgba(255, 255, 255, .12))}.fee-empty[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:#6b7280}.router-outlet-wrap[_ngcontent-%COMP%]{margin-top:8px}.exam-form[_ngcontent-%COMP%], .fee-form[_ngcontent-%COMP%], .filters-section[_ngcontent-%COMP%]{padding:.6rem;background:#fff;border-radius:8px;box-shadow:0 1px 6px #0000000a;margin-bottom:.6rem}.fee-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #edf2f7;border-radius:8px;padding:.6rem;box-shadow:0 1px 6px #0000000a}.fee-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center;padding:.5rem 0}.fee-row-label[_ngcontent-%COMP%]{flex:1}.fee-row-fine[_ngcontent-%COMP%]{color:#718096;min-width:60px;text-align:right}.btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem .75rem}@media (max-width: 1024px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:600px}.toolbar-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}@media (max-width: 640px){.fees-page[_ngcontent-%COMP%]{padding:12px}.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fees-table[_ngcontent-%COMP%]{min-width:520px}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}",".exams-page[_ngcontent-%COMP%]{padding:0}.exam-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:8px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.mobile-card[_ngcontent-%COMP%]   .cell-sub[_ngcontent-%COMP%], .mobile-card[_ngcontent-%COMP%]   .cell-meta[_ngcontent-%COMP%]{color:#6b7280;font-size:12px}.mobile-marks[_ngcontent-%COMP%]{display:grid;gap:4px}@media (max-width: 768px){.exam-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};import{CommonModule as Xo}from"@angular/common";import{FormsModule as er}from"@angular/forms";import*as h from"@angular/core";import*as xe from"@angular/forms";import*as on from"@angular/material/button";import*as Z from"@angular/material/input";import*as I from"@angular/material/table";import*as gt from"@angular/material/card";import*as Me from"@angular/material/chips";function tr(a,t){a&1&&(h.\u0275\u0275elementStart(0,"th",29),h.\u0275\u0275text(1,"Name"),h.\u0275\u0275elementEnd())}function nr(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"td",30),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.name)}}function ir(a,t){a&1&&(h.\u0275\u0275elementStart(0,"th",29),h.\u0275\u0275text(1,"Class"),h.\u0275\u0275elementEnd())}function ar(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"td",30),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.class)}}function or(a,t){a&1&&(h.\u0275\u0275elementStart(0,"th",29),h.\u0275\u0275text(1,"Status"),h.\u0275\u0275elementEnd())}function rr(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"td",30)(1,"mat-chip",31),h.\u0275\u0275text(2),h.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275property("color",e.status==="verified"?"primary":e.status==="rejected"?"warn":void 0),h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate1(" ",e.status," ")}}function lr(a,t){a&1&&(h.\u0275\u0275elementStart(0,"th",29),h.\u0275\u0275text(1,"Submitted"),h.\u0275\u0275elementEnd())}function sr(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"td",30),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.submitted)}}function cr(a,t){a&1&&(h.\u0275\u0275elementStart(0,"th",29),h.\u0275\u0275text(1,"Notes"),h.\u0275\u0275elementEnd())}function dr(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"td",30),h.\u0275\u0275text(1),h.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;h.\u0275\u0275advance(),h.\u0275\u0275textInterpolate(e.notes||"--")}}function mr(a,t){a&1&&h.\u0275\u0275element(0,"th",29)}function pr(a,t){if(a&1){let e=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"td",30)(1,"button",32),h.\u0275\u0275listener("click",function(){let r=h.\u0275\u0275restoreView(e).$implicit,l=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(l.update(r,"verified"))}),h.\u0275\u0275text(2,"Verify"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(3,"button",33),h.\u0275\u0275listener("click",function(){let r=h.\u0275\u0275restoreView(e).$implicit,l=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(l.update(r,"rejected"))}),h.\u0275\u0275text(4,"Reject"),h.\u0275\u0275elementEnd()()}}function ur(a,t){a&1&&h.\u0275\u0275element(0,"tr",34)}function gr(a,t){a&1&&h.\u0275\u0275element(0,"tr",35)}function fr(a,t){if(a&1&&(h.\u0275\u0275elementStart(0,"tr",36)(1,"td"),h.\u0275\u0275text(2,"No admissions match your filters."),h.\u0275\u0275elementEnd()()),a&2){let e=h.\u0275\u0275nextContext();h.\u0275\u0275advance(),h.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}var ut=class a{constructor(t){this.mock=t;this.refresh()}admissions=[];filtered=[];displayedColumns=["name","class","status","submitted","notes","actions"];search="";statusFilter="all";refresh(){this.admissions=this.mock.getAdmissions(),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.admissions.filter(e=>{let n=!t||e.name.toLowerCase().includes(t)||(e.class||"").toLowerCase().includes(t),r=this.statusFilter==="all"||e.status===this.statusFilter;return n&&r})}onStatusChange(t){let e=t&&"value"in t?t.value:null;this.statusFilter=e||"all",this.applyFilters()}update(t,e){this.mock.updateAdmission(t.id,e),this.refresh()}static \u0275fac=function(e){return new(e||a)(h.\u0275\u0275directiveInject(P))};static \u0275cmp=h.\u0275\u0275defineComponent({type:a,selectors:[["app-admissions"]],decls:54,vars:5,consts:[[1,"admissions-page"],[1,"admissions-hero","mat-elevation-z2"],[1,"hero-text"],[1,"eyebrow"],[1,"title"],["mat-flat-button","","color","accent",1,"hero-action",3,"click"],[1,"icon-wrap"],[2,"display","flex","gap","12px","align-items","center","flex-wrap","wrap"],["appearance","fill",2,"flex","1 1 260px"],["matPrefix","",1,"icon-wrap"],["matInput","","placeholder","name or class",3,"ngModelChange","ngModel"],[3,"selectionChange","value"],["value","all"],["value","new"],["value","verified"],["value","rejected"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z1",2,"width","100%",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","class"],["matColumnDef","status"],["matColumnDef","submitted"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"]],template:function(e,n){e&1&&(h.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h.\u0275\u0275text(4,"School Management"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(5,"div",4),h.\u0275\u0275text(6,"Admissions"),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(7,"button",5),h.\u0275\u0275listener("click",function(){return n.refresh()}),h.\u0275\u0275elementStart(8,"span",6),h.\u0275\u0275text(9,"+"),h.\u0275\u0275elementEnd(),h.\u0275\u0275text(10," Refresh "),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(11,"mat-card")(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),h.\u0275\u0275text(15,"Search"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(16,"span",9),h.\u0275\u0275text(17,"\u{1F50D}"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(18,"input",10),h.\u0275\u0275twoWayListener("ngModelChange",function(l){return h.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),h.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),h.\u0275\u0275elementEnd()(),h.\u0275\u0275elementStart(19,"mat-chip-listbox",11),h.\u0275\u0275listener("selectionChange",function(l){return n.onStatusChange(l)}),h.\u0275\u0275elementStart(20,"mat-chip-option",12),h.\u0275\u0275text(21,"All"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(22,"mat-chip-option",13),h.\u0275\u0275text(23,"New"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(24,"mat-chip-option",14),h.\u0275\u0275text(25,"Verified"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(26,"mat-chip-option",15),h.\u0275\u0275text(27,"Rejected"),h.\u0275\u0275elementEnd()()()(),h.\u0275\u0275elementStart(28,"mat-card")(29,"mat-card-title"),h.\u0275\u0275text(30,"Admissions queue"),h.\u0275\u0275elementEnd(),h.\u0275\u0275elementStart(31,"div",16)(32,"table",17),h.\u0275\u0275elementContainerStart(33,18),h.\u0275\u0275template(34,tr,2,0,"th",19)(35,nr,2,1,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(36,21),h.\u0275\u0275template(37,ir,2,0,"th",19)(38,ar,2,1,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(39,22),h.\u0275\u0275template(40,or,2,0,"th",19)(41,rr,3,2,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(42,23),h.\u0275\u0275template(43,lr,2,0,"th",19)(44,sr,2,1,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(45,24),h.\u0275\u0275template(46,cr,2,0,"th",19)(47,dr,2,1,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275elementContainerStart(48,25),h.\u0275\u0275template(49,mr,1,0,"th",19)(50,pr,5,0,"td",20),h.\u0275\u0275elementContainerEnd(),h.\u0275\u0275template(51,ur,1,0,"tr",26)(52,gr,1,0,"tr",27)(53,fr,3,1,"tr",28),h.\u0275\u0275elementEnd()()()()),e&2&&(h.\u0275\u0275advance(18),h.\u0275\u0275twoWayProperty("ngModel",n.search),h.\u0275\u0275advance(),h.\u0275\u0275property("value",n.statusFilter),h.\u0275\u0275advance(13),h.\u0275\u0275property("dataSource",n.filtered),h.\u0275\u0275advance(19),h.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),h.\u0275\u0275advance(),h.\u0275\u0275property("matRowDefColumns",n.displayedColumns))},dependencies:[Xo,er,xe.DefaultValueAccessor,xe.NgControlStatus,xe.NgModel,v,on.MatButton,Z.MatInput,Z.MatFormField,Z.MatLabel,Z.MatPrefix,I.MatTable,I.MatHeaderCellDef,I.MatHeaderRowDef,I.MatColumnDef,I.MatCellDef,I.MatRowDef,I.MatHeaderCell,I.MatCell,I.MatHeaderRow,I.MatRow,I.MatNoDataRow,gt.MatCard,gt.MatCardTitle,Me.MatChip,Me.MatChipListbox,Me.MatChipOption],styles:[".admissions-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.admissions-hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;border-radius:16px;background:linear-gradient(90deg,#3b5998,#1e88e5);color:#fff}.hero-text[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:12px;opacity:.9}.hero-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.hero-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0ea5c6);color:#0b1221;font-weight:700;border-radius:12px;padding:10px 16px;box-shadow:0 10px 25px #06b6d44d}.hero-action[_ngcontent-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-right:6px;font-weight:900}.table-wrap[_ngcontent-%COMP%]{overflow:auto}"]})};import{CommonModule as _r}from"@angular/common";import{FormsModule as Cr}from"@angular/forms";import*as o from"@angular/core";import*as K from"@angular/material/dialog";import*as _t from"@angular/common";import*as we from"@angular/forms";import*as rn from"@angular/material/button";import*as ln from"@angular/material/icon";import*as ye from"@angular/material/input";import*as Ct from"@angular/material/select";import*as F from"@angular/material/table";import*as sn from"@angular/material/card";import*as cn from"@angular/material/checkbox";import*as ht from"@angular/material/chips";var hr=["incidentDialog"];function br(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"mat-chip")(1,"mat-icon",11),o.\u0275\u0275text(2,"trending_up"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate2(" ",e.type," (",e.count,") ")}}function xr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"mat-option",44),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e)}}function Mr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Student"),o.\u0275\u0275elementEnd())}function wr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46)(1,"div",47),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",48),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.studentName),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.class)}}function yr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Date"),o.\u0275\u0275elementEnd())}function vr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e.date)}}function Pr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Type"),o.\u0275\u0275elementEnd())}function Sr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"mat-chip",50),o.\u0275\u0275text(1,"Repeat"),o.\u0275\u0275elementEnd())}function Or(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46),o.\u0275\u0275text(1),o.\u0275\u0275template(2,Sr,2,0,"mat-chip",49),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate1(" ",e.type," "),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",e.isRepeat)}}function Er(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Severity"),o.\u0275\u0275elementEnd())}function Tr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46)(1,"mat-chip",51),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(),o.\u0275\u0275property("color",n.severityColor(e.severity)),o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate1(" ",e.severity," ")}}function kr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Action taken"),o.\u0275\u0275elementEnd())}function Dr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e.actionTaken)}}function Ir(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Staff"),o.\u0275\u0275elementEnd())}function Fr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e.staff)}}function Ar(a,t){a&1&&(o.\u0275\u0275elementStart(0,"th",45),o.\u0275\u0275text(1,"Follow-up"),o.\u0275\u0275elementEnd())}function Rr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"mat-icon",54),o.\u0275\u0275text(1,"check_circle"),o.\u0275\u0275elementEnd())}function Vr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1,"Parent notified"),o.\u0275\u0275elementEnd())}function Lr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"td",46)(1,"div",47),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",48),o.\u0275\u0275template(4,Rr,2,0,"mat-icon",52)(5,Vr,2,0,"span",53),o.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.followUpDate||"\u2014"),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.parentNotified),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",e.parentNotified)}}function Br(a,t){a&1&&o.\u0275\u0275element(0,"th",45)}function zr(a,t){if(a&1){let e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"td",46)(1,"button",6),o.\u0275\u0275listener("click",function(){let r=o.\u0275\u0275restoreView(e).$implicit,l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.openDialog(r))}),o.\u0275\u0275text(2,"Add follow-up"),o.\u0275\u0275elementEnd()()}}function Nr(a,t){a&1&&o.\u0275\u0275element(0,"tr",55)}function jr(a,t){a&1&&o.\u0275\u0275element(0,"tr",56)}function Hr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"tr",57)(1,"td"),o.\u0275\u0275text(2,"No incidents match your filters."),o.\u0275\u0275elementEnd()()),a&2){let e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(),o.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Wr(a,t){a&1&&(o.\u0275\u0275elementStart(0,"span",62),o.\u0275\u0275text(1,"Repeat"),o.\u0275\u0275elementEnd())}function Ur(a,t){a&1&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1,"\xB7 Parent notified"),o.\u0275\u0275elementEnd())}function $r(a,t){if(a&1){let e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",58)(1,"div",59)(2,"div")(3,"div",47),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",48),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(7,"mat-chip",51),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(9,"div",48),o.\u0275\u0275text(10),o.\u0275\u0275template(11,Wr,2,0,"span",60),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"div",48),o.\u0275\u0275text(13),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"div",48),o.\u0275\u0275text(15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",48),o.\u0275\u0275text(17),o.\u0275\u0275template(18,Ur,2,0,"span",53),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"div",61)(20,"button",6),o.\u0275\u0275listener("click",function(){let r=o.\u0275\u0275restoreView(e).$implicit,l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.openDialog(r))}),o.\u0275\u0275text(21,"Add follow-up"),o.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(e.studentName),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.class," \xB7 ",e.date),o.\u0275\u0275advance(),o.\u0275\u0275property("color",n.severityColor(e.severity)),o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e.severity),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("Type: ",e.type," "),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",e.isRepeat),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("Action: ",e.actionTaken),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("Staff: ",e.staff),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("Follow-up: ",e.followUpDate||"\u2014"," "),o.\u0275\u0275advance(),o.\u0275\u0275property("ngIf",e.parentNotified)}}function Gr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"mat-option",44),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275property("value",e.id),o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate2("",e.firstName," ",e.lastName)}}function qr(a,t){if(a&1&&(o.\u0275\u0275elementStart(0,"mat-option",44),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;o.\u0275\u0275property("value",e.name),o.\u0275\u0275advance(),o.\u0275\u0275textInterpolate(e.name)}}function Qr(a,t){if(a&1){let e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"h2",63),o.\u0275\u0275text(1,"Log behavior incident"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"mat-dialog-content",64)(3,"div",65)(4,"mat-form-field",66)(5,"mat-label"),o.\u0275\u0275text(6,"Student"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-select",67),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.studentId,r)||(l.form.studentId=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275template(8,Gr,2,3,"mat-option",20),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(9,"mat-form-field",66)(10,"mat-label"),o.\u0275\u0275text(11,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"input",68),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.type,r)||(l.form.type=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(13,"mat-form-field",66)(14,"mat-label"),o.\u0275\u0275text(15,"Severity"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"mat-select",67),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.severity,r)||(l.form.severity=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275elementStart(17,"mat-option",21),o.\u0275\u0275text(18,"Low"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"mat-option",22),o.\u0275\u0275text(20,"Medium"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"mat-option",23),o.\u0275\u0275text(22,"High"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(23,"mat-form-field",66)(24,"mat-label"),o.\u0275\u0275text(25,"Date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"input",69),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.date,r)||(l.form.date=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(27,"mat-form-field",66)(28,"mat-label"),o.\u0275\u0275text(29,"Follow-up date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(30,"input",69),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.followUpDate,r)||(l.form.followUpDate=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(31,"mat-form-field",66)(32,"mat-label"),o.\u0275\u0275text(33,"Staff"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"mat-select",67),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.staff,r)||(l.form.staff=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275template(35,qr,2,2,"mat-option",20),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(36,"mat-form-field",70)(37,"mat-label"),o.\u0275\u0275text(38,"Action / Notes"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(39,"textarea",71),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.actionTaken,r)||(l.form.actionTaken=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(40,"mat-checkbox",67),o.\u0275\u0275twoWayListener("ngModelChange",function(r){o.\u0275\u0275restoreView(e);let l=o.\u0275\u0275nextContext();return o.\u0275\u0275twoWayBindingSet(l.form.parentNotified,r)||(l.form.parentNotified=r),o.\u0275\u0275resetView(r)}),o.\u0275\u0275text(41,"Parent notified"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(42,"mat-dialog-actions",72)(43,"button",73),o.\u0275\u0275listener("click",function(){let r=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275resetView(r.close())}),o.\u0275\u0275text(44,"Cancel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(45,"button",74),o.\u0275\u0275listener("click",function(){let r=o.\u0275\u0275restoreView(e).$implicit,l=o.\u0275\u0275nextContext();return o.\u0275\u0275resetView(l.save(r))}),o.\u0275\u0275text(46,"Save"),o.\u0275\u0275elementEnd()()}if(a&2){let e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(7),o.\u0275\u0275twoWayProperty("ngModel",e.form.studentId),o.\u0275\u0275advance(),o.\u0275\u0275property("ngForOf",e.students),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",e.form.type),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",e.form.severity),o.\u0275\u0275advance(10),o.\u0275\u0275twoWayProperty("ngModel",e.form.date),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",e.form.followUpDate),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",e.form.staff),o.\u0275\u0275advance(),o.\u0275\u0275property("ngForOf",e.staff),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",e.form.actionTaken),o.\u0275\u0275advance(),o.\u0275\u0275twoWayProperty("ngModel",e.form.parentNotified),o.\u0275\u0275advance(5),o.\u0275\u0275property("disabled",!e.form.studentId||!e.form.type)}}var ft=class a{constructor(t,e){this.mock=t;this.dialog=e;this.students=this.mock.getStudents(),this.staff=this.mock.getStaff(),this.refresh()}incidentDialog;incidents=[];filtered=[];displayedColumns=["student","date","type","severity","action","staff","followUp","actions"];classes=[];students=[];staff=[];search="";classFilter="all";severityFilter="all";startDate="";endDate="";metrics={openFollowUps:0,incidentsThisMonth:0,topCauses:[]};form={};refresh(){this.incidents=this.mock.getBehaviorIncidents(),this.classes=Array.from(new Set(this.incidents.map(t=>t.class).filter(Boolean))),this.applyFilters(),this.computeMetrics()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.startDate?new Date(this.startDate):null,n=this.endDate?new Date(this.endDate):null;this.filtered=this.incidents.filter(r=>{let l=!t||[r.studentName,r.type,r.staff].some(Q=>(Q||"").toLowerCase().includes(t)),C=this.classFilter==="all"||r.class===this.classFilter,x=this.severityFilter==="all"||r.severity===this.severityFilter,y=new Date(r.date),ee=!e||y>=e,S=!n||y<=n;return l&&C&&x&&ee&&S})}computeMetrics(){let t=new Date,e=t.toISOString().slice(0,7);this.metrics.incidentsThisMonth=this.incidents.filter(r=>(r.date||"").startsWith(e)).length,this.metrics.openFollowUps=this.incidents.filter(r=>r.followUpDate?new Date(r.followUpDate)>=t:!1).length;let n={};this.incidents.forEach(r=>{n[r.type]=(n[r.type]||0)+1}),this.metrics.topCauses=Object.entries(n).sort((r,l)=>l[1]-r[1]).slice(0,3).map(([r,l])=>({type:r,count:l}))}severityColor(t){return t==="high"?"warn":t==="medium"?"accent":"primary"}openDialog(t){let e=new Date().toISOString().slice(0,10);this.form={studentId:t?.studentId||(this.students[0]?.id??null),type:t?.type||"General",severity:t?.severity||"medium",date:e,followUpDate:t?.followUpDate||"",staff:t?.staff||(this.staff[0]?.name??""),actionTaken:t?.actionTaken||""},this.dialog.open(this.incidentDialog,{width:"520px"})}save(t){let e=this.students.find(n=>n.id===this.form.studentId);this.mock.addBehaviorIncident({studentId:this.form.studentId,studentName:e?`${e.firstName} ${e.lastName}`:void 0,class:e?.class,type:this.form.type,severity:this.form.severity,date:this.form.date,followUpDate:this.form.followUpDate,staff:this.form.staff,actionTaken:this.form.actionTaken||"Logged",parentNotified:!!this.form.parentNotified}),this.refresh(),t.close()}exportCsv(){let t=["Student","Class","Date","Type","Severity","Action","Staff","FollowUp","ParentNotified","Repeat"],e=this.filtered.map(x=>[x.studentName,x.class,x.date,x.type,x.severity,x.actionTaken,x.staff,x.followUpDate||"",x.parentNotified?"Yes":"No",x.isRepeat?"Yes":"No"]),n=[t,...e].map(x=>x.map(y=>`"${(y??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="behavior-incidents.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(o.\u0275\u0275directiveInject(P),o.\u0275\u0275directiveInject(K.MatDialog))};static \u0275cmp=o.\u0275\u0275defineComponent({type:a,selectors:[["app-behavior"]],viewQuery:function(e,n){if(e&1&&o.\u0275\u0275viewQuery(hr,5),e&2){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(n.incidentDialog=r.first)}},decls:94,vars:13,consts:[["incidentDialog",""],[1,"behavior-page","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"icon"],[1,"chips","mat-elevation-z1"],["color","accent","selected",""],["inline",""],["color","primary","selected",""],[4,"ngFor","ngForOf"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","student, type, staff",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["value","low"],["value","medium"],["value","high"],["matInput","","type","date",3,"ngModelChange","change","ngModel"],[1,"table-card"],[1,"table-title"],[1,"table-wrap","desktop-only"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","student"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","type"],["matColumnDef","severity"],["matColumnDef","action"],["matColumnDef","staff"],["matColumnDef","followUp"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["color","warn","selected","","class","chip-tight",4,"ngIf"],["color","warn","selected","",1,"chip-tight"],["selected","",1,"chip-tight",3,"color"],["inline","true","aria-label","Parent notified",4,"ngIf"],[4,"ngIf"],["inline","true","aria-label","Parent notified"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["class","pill-warn",4,"ngIf"],[1,"action-row"],[1,"pill-warn"],["mat-dialog-title",""],[1,"dialog-content"],[1,"dialog-grid"],["appearance","outline"],[3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","type","date",3,"ngModelChange","ngModel"],["appearance","outline",1,"full-row"],["matInput","","rows","3",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,n){if(e&1){let r=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),o.\u0275\u0275text(4,"School Management"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",4),o.\u0275\u0275text(6,"Behavior"),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(7,"div",5)(8,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.exportCsv())}),o.\u0275\u0275text(9,"Export CSV"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"button",7),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.openDialog())}),o.\u0275\u0275elementStart(11,"span",8),o.\u0275\u0275text(12,"+"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(13," Log incident "),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(14,"mat-card",9)(15,"mat-chip-set")(16,"mat-chip",10)(17,"mat-icon",11),o.\u0275\u0275text(18,"schedule"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"mat-chip",12)(21,"mat-icon",11),o.\u0275\u0275text(22,"event"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(23),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(24,br,4,2,"mat-chip",13),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(25,"mat-card",14)(26,"div",15)(27,"mat-form-field",16)(28,"mat-label"),o.\u0275\u0275text(29,"Search"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(30,"input",17),o.\u0275\u0275twoWayListener("ngModelChange",function(C){return o.\u0275\u0275restoreView(r),o.\u0275\u0275twoWayBindingSet(n.search,C)||(n.search=C),o.\u0275\u0275resetView(C)}),o.\u0275\u0275listener("ngModelChange",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.applyFilters())}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(31,"mat-form-field",16)(32,"mat-label"),o.\u0275\u0275text(33,"Class"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"mat-select",18),o.\u0275\u0275twoWayListener("ngModelChange",function(C){return o.\u0275\u0275restoreView(r),o.\u0275\u0275twoWayBindingSet(n.classFilter,C)||(n.classFilter=C),o.\u0275\u0275resetView(C)}),o.\u0275\u0275listener("selectionChange",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.applyFilters())}),o.\u0275\u0275elementStart(35,"mat-option",19),o.\u0275\u0275text(36,"All"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(37,xr,2,2,"mat-option",20),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(38,"mat-form-field",16)(39,"mat-label"),o.\u0275\u0275text(40,"Severity"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(41,"mat-select",18),o.\u0275\u0275twoWayListener("ngModelChange",function(C){return o.\u0275\u0275restoreView(r),o.\u0275\u0275twoWayBindingSet(n.severityFilter,C)||(n.severityFilter=C),o.\u0275\u0275resetView(C)}),o.\u0275\u0275listener("selectionChange",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.applyFilters())}),o.\u0275\u0275elementStart(42,"mat-option",19),o.\u0275\u0275text(43,"All"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(44,"mat-option",21),o.\u0275\u0275text(45,"Low"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(46,"mat-option",22),o.\u0275\u0275text(47,"Medium"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(48,"mat-option",23),o.\u0275\u0275text(49,"High"),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(50,"mat-form-field",16)(51,"mat-label"),o.\u0275\u0275text(52,"Start date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(53,"input",24),o.\u0275\u0275twoWayListener("ngModelChange",function(C){return o.\u0275\u0275restoreView(r),o.\u0275\u0275twoWayBindingSet(n.startDate,C)||(n.startDate=C),o.\u0275\u0275resetView(C)}),o.\u0275\u0275listener("change",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.applyFilters())}),o.\u0275\u0275elementEnd()(),o.\u0275\u0275elementStart(54,"mat-form-field",16)(55,"mat-label"),o.\u0275\u0275text(56,"End date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(57,"input",24),o.\u0275\u0275twoWayListener("ngModelChange",function(C){return o.\u0275\u0275restoreView(r),o.\u0275\u0275twoWayBindingSet(n.endDate,C)||(n.endDate=C),o.\u0275\u0275resetView(C)}),o.\u0275\u0275listener("change",function(){return o.\u0275\u0275restoreView(r),o.\u0275\u0275resetView(n.applyFilters())}),o.\u0275\u0275elementEnd()()()(),o.\u0275\u0275elementStart(58,"mat-card",25)(59,"div",26),o.\u0275\u0275text(60,"Behavior incidents"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(61,"div",27)(62,"table",28),o.\u0275\u0275elementContainerStart(63,29),o.\u0275\u0275template(64,Mr,2,0,"th",30)(65,wr,5,2,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(66,32),o.\u0275\u0275template(67,yr,2,0,"th",30)(68,vr,2,1,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(69,33),o.\u0275\u0275template(70,Pr,2,0,"th",30)(71,Or,3,2,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(72,34),o.\u0275\u0275template(73,Er,2,0,"th",30)(74,Tr,3,2,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(75,35),o.\u0275\u0275template(76,kr,2,0,"th",30)(77,Dr,2,1,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(78,36),o.\u0275\u0275template(79,Ir,2,0,"th",30)(80,Fr,2,1,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(81,37),o.\u0275\u0275template(82,Ar,2,0,"th",30)(83,Lr,6,3,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerStart(84,38),o.\u0275\u0275template(85,Br,1,0,"th",30)(86,zr,3,0,"td",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275template(87,Nr,1,0,"tr",39)(88,jr,1,0,"tr",40)(89,Hr,3,1,"tr",41),o.\u0275\u0275elementEnd()()(),o.\u0275\u0275elementStart(90,"mat-card",42),o.\u0275\u0275template(91,$r,22,11,"div",43),o.\u0275\u0275elementEnd()(),o.\u0275\u0275template(92,Qr,47,11,"ng-template",null,0,o.\u0275\u0275templateRefExtractor)}e&2&&(o.\u0275\u0275advance(19),o.\u0275\u0275textInterpolate1(" Open follow-ups: ",n.metrics.openFollowUps," "),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate1(" This month: ",n.metrics.incidentsThisMonth," "),o.\u0275\u0275advance(),o.\u0275\u0275property("ngForOf",n.metrics.topCauses),o.\u0275\u0275advance(6),o.\u0275\u0275twoWayProperty("ngModel",n.search),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",n.classFilter),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",n.classes),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",n.severityFilter),o.\u0275\u0275advance(12),o.\u0275\u0275twoWayProperty("ngModel",n.startDate),o.\u0275\u0275advance(4),o.\u0275\u0275twoWayProperty("ngModel",n.endDate),o.\u0275\u0275advance(5),o.\u0275\u0275property("dataSource",n.filtered),o.\u0275\u0275advance(25),o.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),o.\u0275\u0275advance(),o.\u0275\u0275property("matRowDefColumns",n.displayedColumns),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",n.filtered))},dependencies:[_r,_t.NgForOf,_t.NgIf,Cr,we.DefaultValueAccessor,we.NgControlStatus,we.NgModel,v,rn.MatButton,ln.MatIcon,ye.MatInput,ye.MatFormField,ye.MatLabel,Ct.MatSelect,Ct.MatOption,F.MatTable,F.MatHeaderCellDef,F.MatHeaderRowDef,F.MatColumnDef,F.MatCellDef,F.MatRowDef,F.MatHeaderCell,F.MatCell,F.MatHeaderRow,F.MatRow,F.MatNoDataRow,sn.MatCard,K.MatDialogTitle,K.MatDialogActions,K.MatDialogContent,cn.MatCheckbox,ht.MatChip,ht.MatChipSet],styles:[".behavior-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#3353c6,#1b82e8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.icon[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-right:4px}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:0 .25rem}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.8rem;color:#5f6472}.chip-tight[_ngcontent-%COMP%]{height:26px;line-height:26px;margin-left:6px}.dialog-content[_ngcontent-%COMP%]{min-width:480px}.dialog-grid[_ngcontent-%COMP%]{display:grid;gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.full-row[_ngcontent-%COMP%]{grid-column:1/-1}@media (max-width: 768px){.behavior-page[_ngcontent-%COMP%]{padding:.25rem}.chips[_ngcontent-%COMP%]{padding:0 .5rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.pill-warn[_ngcontent-%COMP%]{background:#f443361a;color:#c62828;padding:2px 8px;border-radius:999px;font-size:12px;margin-left:6px}}"]})};import{CommonModule as Yr}from"@angular/common";import{FormsModule as Jr}from"@angular/forms";import*as m from"@angular/core";import*as X from"@angular/material/dialog";import*as dn from"@angular/common";import*as ve from"@angular/forms";import*as mn from"@angular/material/button";import*as Pe from"@angular/material/input";import*as xt from"@angular/material/select";import*as A from"@angular/material/table";import*as pn from"@angular/material/card";import*as un from"@angular/material/chips";var Zr=["announceDialog"];function Kr(a,t){a&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Title"),m.\u0275\u0275elementEnd())}function Xr(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"td",38)(1,"div",39),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(3,"div",40),m.\u0275\u0275text(4),m.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.title),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.body)}}function el(a,t){a&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Audience"),m.\u0275\u0275elementEnd())}function tl(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.audience)}}function nl(a,t){a&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Priority"),m.\u0275\u0275elementEnd())}function il(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"td",38)(1,"mat-chip",41),m.\u0275\u0275text(2),m.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit,n=m.\u0275\u0275nextContext();m.\u0275\u0275advance(),m.\u0275\u0275property("color",n.priorityColor(e.priority)),m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.priority)}}function al(a,t){a&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Date"),m.\u0275\u0275elementEnd())}function ol(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.date)}}function rl(a,t){a&1&&(m.\u0275\u0275elementStart(0,"th",37),m.\u0275\u0275text(1,"Author"),m.\u0275\u0275elementEnd())}function ll(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"td",38),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.author)}}function sl(a,t){a&1&&m.\u0275\u0275element(0,"tr",42)}function cl(a,t){a&1&&m.\u0275\u0275element(0,"tr",43)}function dl(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"tr",44)(1,"td"),m.\u0275\u0275text(2,"No announcements match your filters."),m.\u0275\u0275elementEnd()()),a&2){let e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(),m.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function ml(a,t){if(a&1&&(m.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div",39),m.\u0275\u0275text(3),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"mat-chip",41),m.\u0275\u0275text(5),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(6,"div",40),m.\u0275\u0275text(7),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(8,"div",40),m.\u0275\u0275text(9),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(10,"div",40),m.\u0275\u0275text(11),m.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit,n=m.\u0275\u0275nextContext();m.\u0275\u0275advance(3),m.\u0275\u0275textInterpolate(e.title),m.\u0275\u0275advance(),m.\u0275\u0275property("color",n.priorityColor(e.priority)),m.\u0275\u0275advance(),m.\u0275\u0275textInterpolate(e.priority),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate2("",e.audience," \xB7 ",e.date),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(e.body),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate1("Author: ",e.author)}}function pl(a,t){if(a&1){let e=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"h2",47),m.\u0275\u0275text(1,"New announcement"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(2,"mat-dialog-content",48)(3,"div",49)(4,"mat-form-field",50)(5,"mat-label"),m.\u0275\u0275text(6,"Title"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"input",51),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.title,r)||(l.form.title=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(8,"mat-form-field",50)(9,"mat-label"),m.\u0275\u0275text(10,"Audience"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(11,"mat-select",52),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.audience,r)||(l.form.audience=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementStart(12,"mat-option",14),m.\u0275\u0275text(13,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(14,"mat-option",15),m.\u0275\u0275text(15,"Students"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(16,"mat-option",16),m.\u0275\u0275text(17,"Teachers"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(18,"mat-form-field",50)(19,"mat-label"),m.\u0275\u0275text(20,"Priority"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(21,"mat-select",52),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.priority,r)||(l.form.priority=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementStart(22,"mat-option",17),m.\u0275\u0275text(23,"Low"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(24,"mat-option",18),m.\u0275\u0275text(25,"Normal"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(26,"mat-option",19),m.\u0275\u0275text(27,"High"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(28,"mat-form-field",50)(29,"mat-label"),m.\u0275\u0275text(30,"Date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(31,"input",53),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.date,r)||(l.form.date=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(32,"mat-form-field",50)(33,"mat-label"),m.\u0275\u0275text(34,"Author"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(35,"input",51),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.author,r)||(l.form.author=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(36,"mat-form-field",54)(37,"mat-label"),m.\u0275\u0275text(38,"Body"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(39,"textarea",55),m.\u0275\u0275twoWayListener("ngModelChange",function(r){m.\u0275\u0275restoreView(e);let l=m.\u0275\u0275nextContext();return m.\u0275\u0275twoWayBindingSet(l.form.body,r)||(l.form.body=r),m.\u0275\u0275resetView(r)}),m.\u0275\u0275elementEnd()()()(),m.\u0275\u0275elementStart(40,"mat-dialog-actions",56)(41,"button",57),m.\u0275\u0275listener("click",function(){let r=m.\u0275\u0275restoreView(e).$implicit;return m.\u0275\u0275resetView(r.close())}),m.\u0275\u0275text(42,"Cancel"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(43,"button",58),m.\u0275\u0275listener("click",function(){let r=m.\u0275\u0275restoreView(e).$implicit,l=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(l.save(r))}),m.\u0275\u0275text(44,"Save"),m.\u0275\u0275elementEnd()()}if(a&2){let e=m.\u0275\u0275nextContext();m.\u0275\u0275advance(7),m.\u0275\u0275twoWayProperty("ngModel",e.form.title),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.audience),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",e.form.priority),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",e.form.date),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.author),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",e.form.body),m.\u0275\u0275advance(4),m.\u0275\u0275property("disabled",!e.form.title)}}var bt=class a{constructor(t,e){this.mock=t;this.dialog=e;this.refresh()}announceDialog;announcements=[];filtered=[];displayedColumns=["title","audience","priority","date","author"];search="";audience="all";priority="all";startDate="";endDate="";form={};refresh(){this.announcements=this.mock.getAnnouncements()||[],this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase(),e=this.startDate?new Date(this.startDate):null,n=this.endDate?new Date(this.endDate):null;this.filtered=this.announcements.filter(r=>{let l=!t||[r.title,r.body,r.author].some(Q=>(Q||"").toLowerCase().includes(t)),C=this.audience==="all"||r.audience===this.audience,x=this.priority==="all"||r.priority===this.priority,y=new Date(r.date),ee=!e||y>=e,S=!n||y<=n;return l&&C&&x&&ee&&S})}priorityColor(t){return t==="high"?"warn":t==="normal"?"primary":"accent"}openDialog(){let t=new Date().toISOString().slice(0,10);this.form={title:"",audience:"all",priority:"normal",date:t,author:"Admin",body:""},this.dialog.open(this.announceDialog,{width:"520px"})}save(t){this.mock.addAnnouncement(this.form),this.refresh(),t.close()}exportCsv(){let t=["Title","Audience","Priority","Date","Author","Body"],e=this.filtered.map(x=>[x.title,x.audience,x.priority,x.date,x.author,x.body]),n=[t,...e].map(x=>x.map(y=>`"${(y??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="announcements.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(m.\u0275\u0275directiveInject(P),m.\u0275\u0275directiveInject(X.MatDialog))};static \u0275cmp=m.\u0275\u0275defineComponent({type:a,selectors:[["app-announcements"]],viewQuery:function(e,n){if(e&1&&m.\u0275\u0275viewQuery(Zr,5),e&2){let r;m.\u0275\u0275queryRefresh(r=m.\u0275\u0275loadQuery())&&(n.announceDialog=r.first)}},decls:77,vars:9,consts:[["announceDialog",""],[1,"announcements","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"icon"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","title or body",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","students"],["value","teachers"],["value","low"],["value","normal"],["value","high"],["matInput","","type","date",3,"ngModelChange","change","ngModel"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","audience"],["matColumnDef","priority"],["matColumnDef","date"],["matColumnDef","author"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["mat-dialog-title",""],[1,"dialog-content"],[1,"dialog-grid"],["appearance","outline"],["matInput","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["matInput","","type","date",3,"ngModelChange","ngModel"],["appearance","outline",1,"full-row"],["matInput","","rows","3",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,n){if(e&1){let r=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),m.\u0275\u0275text(4,"School Management"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(5,"div",4),m.\u0275\u0275text(6,"Announcements"),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(7,"div",5)(8,"button",6),m.\u0275\u0275listener("click",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.exportCsv())}),m.\u0275\u0275text(9,"Export CSV"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(10,"button",7),m.\u0275\u0275listener("click",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.openDialog())}),m.\u0275\u0275elementStart(11,"span",8),m.\u0275\u0275text(12,"+"),m.\u0275\u0275elementEnd(),m.\u0275\u0275text(13," New announcement "),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(14,"mat-card",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),m.\u0275\u0275text(18,"Search"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(19,"input",12),m.\u0275\u0275twoWayListener("ngModelChange",function(C){return m.\u0275\u0275restoreView(r),m.\u0275\u0275twoWayBindingSet(n.search,C)||(n.search=C),m.\u0275\u0275resetView(C)}),m.\u0275\u0275listener("ngModelChange",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.applyFilters())}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(20,"mat-form-field",11)(21,"mat-label"),m.\u0275\u0275text(22,"Audience"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(23,"mat-select",13),m.\u0275\u0275twoWayListener("ngModelChange",function(C){return m.\u0275\u0275restoreView(r),m.\u0275\u0275twoWayBindingSet(n.audience,C)||(n.audience=C),m.\u0275\u0275resetView(C)}),m.\u0275\u0275listener("selectionChange",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.applyFilters())}),m.\u0275\u0275elementStart(24,"mat-option",14),m.\u0275\u0275text(25,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(26,"mat-option",15),m.\u0275\u0275text(27,"Students"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(28,"mat-option",16),m.\u0275\u0275text(29,"Teachers"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(30,"mat-form-field",11)(31,"mat-label"),m.\u0275\u0275text(32,"Priority"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(33,"mat-select",13),m.\u0275\u0275twoWayListener("ngModelChange",function(C){return m.\u0275\u0275restoreView(r),m.\u0275\u0275twoWayBindingSet(n.priority,C)||(n.priority=C),m.\u0275\u0275resetView(C)}),m.\u0275\u0275listener("selectionChange",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.applyFilters())}),m.\u0275\u0275elementStart(34,"mat-option",14),m.\u0275\u0275text(35,"All"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(36,"mat-option",17),m.\u0275\u0275text(37,"Low"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(38,"mat-option",18),m.\u0275\u0275text(39,"Normal"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(40,"mat-option",19),m.\u0275\u0275text(41,"High"),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(42,"mat-form-field",11)(43,"mat-label"),m.\u0275\u0275text(44,"Start date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(45,"input",20),m.\u0275\u0275twoWayListener("ngModelChange",function(C){return m.\u0275\u0275restoreView(r),m.\u0275\u0275twoWayBindingSet(n.startDate,C)||(n.startDate=C),m.\u0275\u0275resetView(C)}),m.\u0275\u0275listener("change",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.applyFilters())}),m.\u0275\u0275elementEnd()(),m.\u0275\u0275elementStart(46,"mat-form-field",11)(47,"mat-label"),m.\u0275\u0275text(48,"End date"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(49,"input",20),m.\u0275\u0275twoWayListener("ngModelChange",function(C){return m.\u0275\u0275restoreView(r),m.\u0275\u0275twoWayBindingSet(n.endDate,C)||(n.endDate=C),m.\u0275\u0275resetView(C)}),m.\u0275\u0275listener("change",function(){return m.\u0275\u0275restoreView(r),m.\u0275\u0275resetView(n.applyFilters())}),m.\u0275\u0275elementEnd()()()(),m.\u0275\u0275elementStart(50,"mat-card",21)(51,"div",22),m.\u0275\u0275text(52,"Recent announcements"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(53,"div",23)(54,"table",24),m.\u0275\u0275elementContainerStart(55,25),m.\u0275\u0275template(56,Kr,2,0,"th",26)(57,Xr,5,2,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(58,28),m.\u0275\u0275template(59,el,2,0,"th",26)(60,tl,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(61,29),m.\u0275\u0275template(62,nl,2,0,"th",26)(63,il,3,2,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(64,30),m.\u0275\u0275template(65,al,2,0,"th",26)(66,ol,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275elementContainerStart(67,31),m.\u0275\u0275template(68,rl,2,0,"th",26)(69,ll,2,1,"td",27),m.\u0275\u0275elementContainerEnd(),m.\u0275\u0275template(70,sl,1,0,"tr",32)(71,cl,1,0,"tr",33)(72,dl,3,1,"tr",34),m.\u0275\u0275elementEnd()()(),m.\u0275\u0275elementStart(73,"mat-card",35),m.\u0275\u0275template(74,ml,12,7,"div",36),m.\u0275\u0275elementEnd()(),m.\u0275\u0275template(75,pl,45,7,"ng-template",null,0,m.\u0275\u0275templateRefExtractor)}e&2&&(m.\u0275\u0275advance(19),m.\u0275\u0275twoWayProperty("ngModel",n.search),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",n.audience),m.\u0275\u0275advance(10),m.\u0275\u0275twoWayProperty("ngModel",n.priority),m.\u0275\u0275advance(12),m.\u0275\u0275twoWayProperty("ngModel",n.startDate),m.\u0275\u0275advance(4),m.\u0275\u0275twoWayProperty("ngModel",n.endDate),m.\u0275\u0275advance(5),m.\u0275\u0275property("dataSource",n.filtered),m.\u0275\u0275advance(16),m.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),m.\u0275\u0275advance(),m.\u0275\u0275property("matRowDefColumns",n.displayedColumns),m.\u0275\u0275advance(3),m.\u0275\u0275property("ngForOf",n.filtered))},dependencies:[Yr,dn.NgForOf,Jr,ve.DefaultValueAccessor,ve.NgControlStatus,ve.NgModel,v,mn.MatButton,Pe.MatInput,Pe.MatFormField,Pe.MatLabel,xt.MatSelect,xt.MatOption,A.MatTable,A.MatHeaderCellDef,A.MatHeaderRowDef,A.MatColumnDef,A.MatCellDef,A.MatRowDef,A.MatHeaderCell,A.MatCell,A.MatHeaderRow,A.MatRow,A.MatNoDataRow,pn.MatCard,X.MatDialogTitle,X.MatDialogActions,X.MatDialogContent,un.MatChip],styles:[".announcements[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#334ac6,#2185e3);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.icon[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-right:4px}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}@media (max-width: 768px){.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.announcements[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}}.dialog-content[_ngcontent-%COMP%]{min-width:480px}.dialog-grid[_ngcontent-%COMP%]{display:grid;gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.full-row[_ngcontent-%COMP%]{grid-column:1/-1}"]})};import{CommonModule as ul}from"@angular/common";import{FormsModule as gl}from"@angular/forms";import*as _ from"@angular/core";import*as wt from"@angular/common";import*as Se from"@angular/forms";import*as gn from"@angular/material/button";import*as Oe from"@angular/material/input";import*as yt from"@angular/material/select";import*as R from"@angular/material/table";import*as fn from"@angular/material/card";import*as _n from"@angular/material/chips";function fl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"mat-option",31),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;_.\u0275\u0275property("value",e),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate(e)}}function _l(a,t){a&1&&(_.\u0275\u0275elementStart(0,"th",32),_.\u0275\u0275text(1,"Title"),_.\u0275\u0275elementEnd())}function Cl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"td",33)(1,"div",34),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"div",35),_.\u0275\u0275text(4),_.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(e.title),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(e.author)}}function hl(a,t){a&1&&(_.\u0275\u0275elementStart(0,"th",32),_.\u0275\u0275text(1,"Category"),_.\u0275\u0275elementEnd())}function bl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"td",33),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate(e.category)}}function xl(a,t){a&1&&(_.\u0275\u0275elementStart(0,"th",32),_.\u0275\u0275text(1,"Status"),_.\u0275\u0275elementEnd())}function Ml(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"td",33)(1,"mat-chip",36),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("color",e.status==="available"?"primary":"warn"),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate(e.status)}}function wl(a,t){a&1&&(_.\u0275\u0275elementStart(0,"th",32),_.\u0275\u0275text(1,"Borrower"),_.\u0275\u0275elementEnd())}function yl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"div")(1,"div",34),_.\u0275\u0275text(2),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"div",35),_.\u0275\u0275text(4),_.\u0275\u0275elementEnd()()),a&2){let e=_.\u0275\u0275nextContext().$implicit;_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate(e.borrower),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate1("Due ",e.dueDate||"--")}}function vl(a,t){a&1&&(_.\u0275\u0275elementStart(0,"span"),_.\u0275\u0275text(1,"\u2014"),_.\u0275\u0275elementEnd())}function Pl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"td",33),_.\u0275\u0275template(1,yl,5,2,"div",37)(2,vl,2,0,"span",37),_.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="checked-out"),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="available")}}function Sl(a,t){a&1&&_.\u0275\u0275element(0,"th",32)}function Ol(a,t){if(a&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",5),_.\u0275\u0275listener("click",function(){_.\u0275\u0275restoreView(e);let r=_.\u0275\u0275nextContext().$implicit,l=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(l.quickCheckout(r))}),_.\u0275\u0275text(1,"Checkout"),_.\u0275\u0275elementEnd()}}function El(a,t){if(a&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",40),_.\u0275\u0275listener("click",function(){_.\u0275\u0275restoreView(e);let r=_.\u0275\u0275nextContext().$implicit,l=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(l.markReturned(r))}),_.\u0275\u0275text(1,"Return"),_.\u0275\u0275elementEnd()}}function Tl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"td",33),_.\u0275\u0275template(1,Ol,2,0,"button",38)(2,El,2,0,"button",39),_.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="available"),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="checked-out")}}function kl(a,t){a&1&&_.\u0275\u0275element(0,"tr",41)}function Dl(a,t){a&1&&_.\u0275\u0275element(0,"tr",42)}function Il(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"tr",43)(1,"td"),_.\u0275\u0275text(2,"No books match your filters."),_.\u0275\u0275elementEnd()()),a&2){let e=_.\u0275\u0275nextContext();_.\u0275\u0275advance(),_.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function Fl(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"div",35),_.\u0275\u0275text(1),_.\u0275\u0275elementEnd()),a&2){let e=_.\u0275\u0275nextContext().$implicit;_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate2("Borrower: ",e.borrower," \xB7 Due ",e.dueDate||"--")}}function Al(a,t){a&1&&(_.\u0275\u0275elementStart(0,"div",35),_.\u0275\u0275text(1,"Available for checkout"),_.\u0275\u0275elementEnd())}function Rl(a,t){if(a&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",5),_.\u0275\u0275listener("click",function(){_.\u0275\u0275restoreView(e);let r=_.\u0275\u0275nextContext().$implicit,l=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(l.quickCheckout(r))}),_.\u0275\u0275text(1,"Checkout"),_.\u0275\u0275elementEnd()}}function Vl(a,t){if(a&1){let e=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"button",40),_.\u0275\u0275listener("click",function(){_.\u0275\u0275restoreView(e);let r=_.\u0275\u0275nextContext().$implicit,l=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(l.markReturned(r))}),_.\u0275\u0275text(1,"Return"),_.\u0275\u0275elementEnd()}}function Ll(a,t){if(a&1&&(_.\u0275\u0275elementStart(0,"div",44)(1,"div",45)(2,"div")(3,"div",34),_.\u0275\u0275text(4),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(5,"div",35),_.\u0275\u0275text(6),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(7,"mat-chip",36),_.\u0275\u0275text(8),_.\u0275\u0275elementEnd()(),_.\u0275\u0275template(9,Fl,2,2,"div",46)(10,Al,2,0,"div",46),_.\u0275\u0275elementStart(11,"div",47),_.\u0275\u0275template(12,Rl,2,0,"button",38)(13,Vl,2,0,"button",39),_.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;_.\u0275\u0275advance(4),_.\u0275\u0275textInterpolate(e.title),_.\u0275\u0275advance(2),_.\u0275\u0275textInterpolate2("",e.author," \xB7 ",e.category),_.\u0275\u0275advance(),_.\u0275\u0275property("color",e.status==="available"?"primary":"warn"),_.\u0275\u0275advance(),_.\u0275\u0275textInterpolate(e.status),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="checked-out"),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="available"),_.\u0275\u0275advance(2),_.\u0275\u0275property("ngIf",e.status==="available"),_.\u0275\u0275advance(),_.\u0275\u0275property("ngIf",e.status==="checked-out")}}var Mt=class a{constructor(t){this.mock=t;this.refresh()}items=[];filtered=[];categories=[];displayedColumns=["title","category","status","borrower","actions"];search="";status="all";category="all";refresh(){this.items=this.mock.getLibraryItems()||[],this.categories=Array.from(new Set(this.items.map(t=>t.category).filter(Boolean))),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.items.filter(e=>{let n=!t||[e.title,e.author,e.borrower].some(C=>(C||"").toLowerCase().includes(t)),r=this.status==="all"||e.status===this.status,l=this.category==="all"||e.category===this.category;return n&&r&&l})}quickCheckout(t){let e=t.borrower||"Student",n=t.dueDate||new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10);this.mock.checkoutBook(t.id,e,n),this.refresh()}markReturned(t){this.mock.returnBook(t.id),this.refresh()}exportCsv(){let t=["Title","Author","Category","Status","Borrower","DueDate"],e=this.filtered.map(x=>[x.title,x.author,x.category,x.status,x.borrower||"",x.dueDate||""]),n=[t,...e].map(x=>x.map(y=>`"${(y??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="library-catalog.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(_.\u0275\u0275directiveInject(P))};static \u0275cmp=_.\u0275\u0275defineComponent({type:a,selectors:[["app-library"]],decls:58,vars:8,consts:[[1,"library","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","title, author, borrower",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","available"],["value","checked-out"],[3,"value",4,"ngFor","ngForOf"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","borrower"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["selected","",3,"color"],[4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],["class","cell-sub",4,"ngIf"],[1,"action-row"]],template:function(e,n){e&1&&(_.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),_.\u0275\u0275text(4,"School Management"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(5,"div",3),_.\u0275\u0275text(6,"Library"),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(7,"div",4)(8,"button",5),_.\u0275\u0275listener("click",function(){return n.exportCsv()}),_.\u0275\u0275text(9,"Export CSV"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(10,"mat-card",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),_.\u0275\u0275text(14,"Search"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(15,"input",9),_.\u0275\u0275twoWayListener("ngModelChange",function(l){return _.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),_.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),_.\u0275\u0275elementEnd()(),_.\u0275\u0275elementStart(16,"mat-form-field",8)(17,"mat-label"),_.\u0275\u0275text(18,"Status"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(19,"mat-select",10),_.\u0275\u0275twoWayListener("ngModelChange",function(l){return _.\u0275\u0275twoWayBindingSet(n.status,l)||(n.status=l),l}),_.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),_.\u0275\u0275elementStart(20,"mat-option",11),_.\u0275\u0275text(21,"All"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(22,"mat-option",12),_.\u0275\u0275text(23,"Available"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(24,"mat-option",13),_.\u0275\u0275text(25,"Checked out"),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(26,"mat-form-field",8)(27,"mat-label"),_.\u0275\u0275text(28,"Category"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(29,"mat-select",10),_.\u0275\u0275twoWayListener("ngModelChange",function(l){return _.\u0275\u0275twoWayBindingSet(n.category,l)||(n.category=l),l}),_.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),_.\u0275\u0275elementStart(30,"mat-option",11),_.\u0275\u0275text(31,"All"),_.\u0275\u0275elementEnd(),_.\u0275\u0275template(32,fl,2,2,"mat-option",14),_.\u0275\u0275elementEnd()()()(),_.\u0275\u0275elementStart(33,"mat-card",15)(34,"div",16),_.\u0275\u0275text(35,"Catalog"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(36,"div",17)(37,"table",18),_.\u0275\u0275elementContainerStart(38,19),_.\u0275\u0275template(39,_l,2,0,"th",20)(40,Cl,5,2,"td",21),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementContainerStart(41,22),_.\u0275\u0275template(42,hl,2,0,"th",20)(43,bl,2,1,"td",21),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementContainerStart(44,23),_.\u0275\u0275template(45,xl,2,0,"th",20)(46,Ml,3,2,"td",21),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementContainerStart(47,24),_.\u0275\u0275template(48,wl,2,0,"th",20)(49,Pl,3,2,"td",21),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275elementContainerStart(50,25),_.\u0275\u0275template(51,Sl,1,0,"th",20)(52,Tl,3,2,"td",21),_.\u0275\u0275elementContainerEnd(),_.\u0275\u0275template(53,kl,1,0,"tr",26)(54,Dl,1,0,"tr",27)(55,Il,3,1,"tr",28),_.\u0275\u0275elementEnd()()(),_.\u0275\u0275elementStart(56,"mat-card",29),_.\u0275\u0275template(57,Ll,14,9,"div",30),_.\u0275\u0275elementEnd()()),e&2&&(_.\u0275\u0275advance(15),_.\u0275\u0275twoWayProperty("ngModel",n.search),_.\u0275\u0275advance(4),_.\u0275\u0275twoWayProperty("ngModel",n.status),_.\u0275\u0275advance(10),_.\u0275\u0275twoWayProperty("ngModel",n.category),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngForOf",n.categories),_.\u0275\u0275advance(5),_.\u0275\u0275property("dataSource",n.filtered),_.\u0275\u0275advance(16),_.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),_.\u0275\u0275advance(),_.\u0275\u0275property("matRowDefColumns",n.displayedColumns),_.\u0275\u0275advance(3),_.\u0275\u0275property("ngForOf",n.filtered))},dependencies:[ul,wt.NgForOf,wt.NgIf,gl,Se.DefaultValueAccessor,Se.NgControlStatus,Se.NgModel,v,gn.MatButton,Oe.MatInput,Oe.MatFormField,Oe.MatLabel,yt.MatSelect,yt.MatOption,R.MatTable,R.MatHeaderCellDef,R.MatHeaderRowDef,R.MatColumnDef,R.MatCellDef,R.MatRowDef,R.MatHeaderCell,R.MatCell,R.MatHeaderRow,R.MatRow,R.MatNoDataRow,fn.MatCard,_n.MatChip],styles:[".library[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#3353c6,#1b82e8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.library[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}}"]})};import{CommonModule as Bl}from"@angular/common";import{FormsModule as zl}from"@angular/forms";import*as f from"@angular/core";import*as Cn from"@angular/common";import*as Ee from"@angular/forms";import*as hn from"@angular/material/button";import*as Te from"@angular/material/input";import*as Pt from"@angular/material/select";import*as V from"@angular/material/table";import*as bn from"@angular/material/card";import*as xn from"@angular/material/chips";import*as Mn from"@angular/material/progress-bar";function Nl(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"mat-option",33),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;f.\u0275\u0275property("value",e),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e)}}function jl(a,t){a&1&&(f.\u0275\u0275elementStart(0,"th",34),f.\u0275\u0275text(1,"Route"),f.\u0275\u0275elementEnd())}function Hl(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"td",35)(1,"div",36),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"div",37),f.\u0275\u0275text(4),f.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(e.routeName),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Driver: ",e.driver)}}function Wl(a,t){a&1&&(f.\u0275\u0275elementStart(0,"th",34),f.\u0275\u0275text(1,"Times"),f.\u0275\u0275elementEnd())}function Ul(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"td",35)(1,"div",36),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"div",37),f.\u0275\u0275text(4),f.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit;f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Depart ",e.departure),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Return ",e.returnTime)}}function $l(a,t){a&1&&(f.\u0275\u0275elementStart(0,"th",34),f.\u0275\u0275text(1,"Capacity"),f.\u0275\u0275elementEnd())}function Gl(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"td",35)(1,"div",36),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd(),f.\u0275\u0275element(3,"mat-progress-bar",38),f.\u0275\u0275elementEnd()),a&2){let e=t.$implicit,n=f.\u0275\u0275nextContext();f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate2("",e.assigned,"/",e.capacity),f.\u0275\u0275advance(),f.\u0275\u0275property("value",n.utilization(e))}}function ql(a,t){a&1&&(f.\u0275\u0275elementStart(0,"th",34),f.\u0275\u0275text(1,"Status"),f.\u0275\u0275elementEnd())}function Ql(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"td",35)(1,"mat-chip",39),f.\u0275\u0275text(2),f.\u0275\u0275elementEnd()()),a&2){let e=t.$implicit,n=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275property("color",n.statusColor(e.status)),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.status)}}function Yl(a,t){a&1&&(f.\u0275\u0275elementStart(0,"th",34),f.\u0275\u0275text(1,"Notes"),f.\u0275\u0275elementEnd())}function Jl(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"td",35),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.notes||"\u2014")}}function Zl(a,t){a&1&&f.\u0275\u0275element(0,"th",34)}function Kl(a,t){if(a&1){let e=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"td",35)(1,"button",5),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"on-time"))}),f.\u0275\u0275text(2,"On time"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(3,"button",40),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"delayed"))}),f.\u0275\u0275text(4,"Delay"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(5,"button",41),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"maintenance"))}),f.\u0275\u0275text(6,"Maintenance"),f.\u0275\u0275elementEnd()()}}function Xl(a,t){a&1&&f.\u0275\u0275element(0,"tr",42)}function es(a,t){a&1&&f.\u0275\u0275element(0,"tr",43)}function ts(a,t){if(a&1&&(f.\u0275\u0275elementStart(0,"tr",44)(1,"td"),f.\u0275\u0275text(2,"No routes match your filters."),f.\u0275\u0275elementEnd()()),a&2){let e=f.\u0275\u0275nextContext();f.\u0275\u0275advance(),f.\u0275\u0275attribute("colspan",e.displayedColumns.length)}}function ns(a,t){if(a&1){let e=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",45)(1,"div",46)(2,"div")(3,"div",36),f.\u0275\u0275text(4),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(5,"div",37),f.\u0275\u0275text(6),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(7,"mat-chip",39),f.\u0275\u0275text(8),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(9,"div",37),f.\u0275\u0275text(10),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(11,"div",37),f.\u0275\u0275text(12),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(13,"div",37),f.\u0275\u0275text(14),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(15,"div",47)(16,"button",5),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"on-time"))}),f.\u0275\u0275text(17,"On time"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(18,"button",40),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"delayed"))}),f.\u0275\u0275text(19,"Delay"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(20,"button",41),f.\u0275\u0275listener("click",function(){let r=f.\u0275\u0275restoreView(e).$implicit,l=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(l.setStatus(r,"maintenance"))}),f.\u0275\u0275text(21,"Maintenance"),f.\u0275\u0275elementEnd()()()}if(a&2){let e=t.$implicit,n=f.\u0275\u0275nextContext();f.\u0275\u0275advance(4),f.\u0275\u0275textInterpolate(e.routeName),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Driver: ",e.driver),f.\u0275\u0275advance(),f.\u0275\u0275property("color",n.statusColor(e.status)),f.\u0275\u0275advance(),f.\u0275\u0275textInterpolate(e.status),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate2("Depart ",e.departure," \xB7 Return ",e.returnTime),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate2("Capacity: ",e.assigned,"/",e.capacity),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate1("Notes: ",e.notes||"\u2014")}}var vt=class a{constructor(t){this.mock=t;this.refresh()}routes=[];filtered=[];drivers=[];displayedColumns=["route","times","capacity","status","notes","actions"];search="";status="all";driver="all";refresh(){this.routes=this.mock.getTransportRoutes()||[],this.drivers=Array.from(new Set(this.routes.map(t=>t.driver).filter(Boolean))),this.applyFilters()}applyFilters(){let t=this.search.trim().toLowerCase();this.filtered=this.routes.filter(e=>{let n=!t||[e.routeName,e.driver,e.notes].some(C=>(C||"").toLowerCase().includes(t)),r=this.status==="all"||e.status===this.status,l=this.driver==="all"||e.driver===this.driver;return n&&r&&l})}utilization(t){return t.capacity?Math.min(100,Math.round(t.assigned/t.capacity*100)):0}statusColor(t){return t==="on-time"?"primary":t==="delayed"?"accent":"warn"}setStatus(t,e){this.mock.updateRouteStatus(t.id,e),this.refresh()}exportCsv(){let t=["Route","Driver","Departure","Return","Capacity","Assigned","Status","Notes"],e=this.filtered.map(x=>[x.routeName,x.driver,x.departure,x.returnTime,x.capacity,x.assigned,x.status,x.notes||""]),n=[t,...e].map(x=>x.map(y=>`"${(y??"").toString().replace(/"/g,'""')}"`).join(",")).join(`
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(r),C=document.createElement("a");C.href=l,C.download="transport-routes.csv",C.click(),URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||a)(f.\u0275\u0275directiveInject(P))};static \u0275cmp=f.\u0275\u0275defineComponent({type:a,selectors:[["app-transport"]],decls:63,vars:8,consts:[[1,"transport","mat-typography"],[1,"hero","mat-elevation-z2"],[1,"eyebrow"],[1,"title"],[1,"hero-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"filters"],[1,"filter-grid"],["appearance","fill"],["matInput","","placeholder","route, driver, note",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","all"],["value","on-time"],["value","delayed"],["value","maintenance"],[3,"value",4,"ngFor","ngForOf"],[1,"table-card","desktop-only"],[1,"table-title"],[1,"table-wrap"],["mat-table","",1,"mat-elevation-z2","mat-table",3,"dataSource"],["matColumnDef","route"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","times"],["matColumnDef","capacity"],["matColumnDef","status"],["matColumnDef","notes"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"mobile-only","mobile-card-list"],["class","mobile-card",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[1,"cell-strong"],[1,"cell-sub"],["mode","determinate",3,"value"],["selected","",3,"color"],["mat-stroked-button","","color","accent",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mobile-card"],[1,"card-row"],[1,"action-row"]],template:function(e,n){e&1&&(f.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),f.\u0275\u0275text(4,"School Management"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(5,"div",3),f.\u0275\u0275text(6,"Transport"),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(7,"div",4)(8,"button",5),f.\u0275\u0275listener("click",function(){return n.exportCsv()}),f.\u0275\u0275text(9,"Export CSV"),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(10,"mat-card",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),f.\u0275\u0275text(14,"Search"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(15,"input",9),f.\u0275\u0275twoWayListener("ngModelChange",function(l){return f.\u0275\u0275twoWayBindingSet(n.search,l)||(n.search=l),l}),f.\u0275\u0275listener("ngModelChange",function(){return n.applyFilters()}),f.\u0275\u0275elementEnd()(),f.\u0275\u0275elementStart(16,"mat-form-field",8)(17,"mat-label"),f.\u0275\u0275text(18,"Status"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(19,"mat-select",10),f.\u0275\u0275twoWayListener("ngModelChange",function(l){return f.\u0275\u0275twoWayBindingSet(n.status,l)||(n.status=l),l}),f.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),f.\u0275\u0275elementStart(20,"mat-option",11),f.\u0275\u0275text(21,"All"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(22,"mat-option",12),f.\u0275\u0275text(23,"On time"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(24,"mat-option",13),f.\u0275\u0275text(25,"Delayed"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(26,"mat-option",14),f.\u0275\u0275text(27,"Maintenance"),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(28,"mat-form-field",8)(29,"mat-label"),f.\u0275\u0275text(30,"Driver"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(31,"mat-select",10),f.\u0275\u0275twoWayListener("ngModelChange",function(l){return f.\u0275\u0275twoWayBindingSet(n.driver,l)||(n.driver=l),l}),f.\u0275\u0275listener("selectionChange",function(){return n.applyFilters()}),f.\u0275\u0275elementStart(32,"mat-option",11),f.\u0275\u0275text(33,"All"),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(34,Nl,2,2,"mat-option",15),f.\u0275\u0275elementEnd()()()(),f.\u0275\u0275elementStart(35,"mat-card",16)(36,"div",17),f.\u0275\u0275text(37,"Routes"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(38,"div",18)(39,"table",19),f.\u0275\u0275elementContainerStart(40,20),f.\u0275\u0275template(41,jl,2,0,"th",21)(42,Hl,5,2,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(43,23),f.\u0275\u0275template(44,Wl,2,0,"th",21)(45,Ul,5,2,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(46,24),f.\u0275\u0275template(47,$l,2,0,"th",21)(48,Gl,4,3,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(49,25),f.\u0275\u0275template(50,ql,2,0,"th",21)(51,Ql,3,2,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(52,26),f.\u0275\u0275template(53,Yl,2,0,"th",21)(54,Jl,2,1,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275elementContainerStart(55,27),f.\u0275\u0275template(56,Zl,1,0,"th",21)(57,Kl,7,0,"td",22),f.\u0275\u0275elementContainerEnd(),f.\u0275\u0275template(58,Xl,1,0,"tr",28)(59,es,1,0,"tr",29)(60,ts,3,1,"tr",30),f.\u0275\u0275elementEnd()()(),f.\u0275\u0275elementStart(61,"mat-card",31),f.\u0275\u0275template(62,ns,22,9,"div",32),f.\u0275\u0275elementEnd()()),e&2&&(f.\u0275\u0275advance(15),f.\u0275\u0275twoWayProperty("ngModel",n.search),f.\u0275\u0275advance(4),f.\u0275\u0275twoWayProperty("ngModel",n.status),f.\u0275\u0275advance(12),f.\u0275\u0275twoWayProperty("ngModel",n.driver),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngForOf",n.drivers),f.\u0275\u0275advance(5),f.\u0275\u0275property("dataSource",n.filtered),f.\u0275\u0275advance(19),f.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),f.\u0275\u0275advance(),f.\u0275\u0275property("matRowDefColumns",n.displayedColumns),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngForOf",n.filtered))},dependencies:[Bl,Cn.NgForOf,zl,Ee.DefaultValueAccessor,Ee.NgControlStatus,Ee.NgModel,v,hn.MatButton,Te.MatInput,Te.MatFormField,Te.MatLabel,Pt.MatSelect,Pt.MatOption,V.MatTable,V.MatHeaderCellDef,V.MatHeaderRowDef,V.MatColumnDef,V.MatCellDef,V.MatRowDef,V.MatHeaderCell,V.MatCell,V.MatHeaderRow,V.MatRow,V.MatNoDataRow,bn.MatCard,xn.MatChip,Mn.MatProgressBar],styles:[".transport[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-radius:14px;background:linear-gradient(90deg,#2f60c6,#1a8be8);color:#fff}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;letter-spacing:.08em;font-size:.8rem;opacity:.9}.title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.filters[_ngcontent-%COMP%]{padding:.75rem}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.table-card[_ngcontent-%COMP%]{padding:.5rem .5rem 1rem}.table-title[_ngcontent-%COMP%]{font-weight:700;padding:.5rem .75rem}.table-wrap[_ngcontent-%COMP%]{overflow:auto}table[_ngcontent-%COMP%]{width:100%}.cell-strong[_ngcontent-%COMP%]{font-weight:700}.cell-sub[_ngcontent-%COMP%]{font-size:.85rem;color:#5f6472}.desktop-only[_ngcontent-%COMP%]{display:block}.mobile-only[_ngcontent-%COMP%]{display:none}.mobile-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff;box-shadow:0 1px 4px #0000000d;display:grid;gap:6px}.mobile-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}@media (max-width: 768px){.transport[_ngcontent-%COMP%]{padding:.25rem}.table-wrap[_ngcontent-%COMP%]{margin:0 -12px;padding:0 12px}table[_ngcontent-%COMP%]{min-width:640px}.desktop-only[_ngcontent-%COMP%]{display:none}.mobile-only[_ngcontent-%COMP%]{display:grid;gap:12px}}"]})};var wn=[{path:"",component:De},{path:"dashboard",component:De},{path:"admissions",component:ut},{path:"students",component:Le},{path:"teachers",component:He},{path:"classes",component:Qe},{path:"attendance",component:Ye},{path:"fees",component:et},{path:"timetable",component:at},{path:"exams",component:ct},{path:"behavior",component:ft},{path:"announcements",component:bt},{path:"library",component:Mt},{path:"transport",component:vt},{path:"**",redirectTo:""}];var yn=(a,t)=>{try{let e=localStorage.getItem("auth_token")||localStorage.getItem("shellAuthToken"),n=localStorage.getItem("tenant_id")||ne.multiTenant?.defaultTenant,r=a.headers;e&&(r=r.set("Authorization",`Bearer ${e}`)),n&&(r=r.set("X-Tenant-ID",n));let C=/^https?:\/\//i.test(a.url)?a.url:`${ne.apiUrl.replace(/\/$/,"")}/${a.url.replace(/^\//,"")}`,x=a.clone({headers:r,url:C});return t(x)}catch{return t(a)}};var vn={providers:[is(),as({eventCoalescing:!0}),os(),rs(wn),ls(ss([yn]))]};import{signal as us,inject as Sn}from"@angular/core";import{RouterOutlet as gs,RouterModule as fs,Router as _s}from"@angular/router";import{ActivatedRoute as Cs}from"@angular/router";import{CommonModule as cs}from"@angular/common";import{FormsModule as ds}from"@angular/forms";import*as M from"@angular/core";import*as Ot from"@angular/common";import*as Et from"@angular/forms";import*as Tt from"@angular/material/input";import*as kt from"@angular/material/select";import*as Pn from"@angular/material/checkbox";function ms(a,t){if(a&1&&(M.\u0275\u0275elementStart(0,"mat-option",9),M.\u0275\u0275text(1),M.\u0275\u0275pipe(2,"titlecase"),M.\u0275\u0275elementEnd()),a&2){let e=t.$implicit;M.\u0275\u0275property("value",e),M.\u0275\u0275advance(),M.\u0275\u0275textInterpolate(M.\u0275\u0275pipeBind1(2,2,e))}}function ps(a,t){if(a&1){let e=M.\u0275\u0275getCurrentView();M.\u0275\u0275elementStart(0,"div",10)(1,"mat-checkbox",11),M.\u0275\u0275listener("change",function(){let r=M.\u0275\u0275restoreView(e).$implicit,l=M.\u0275\u0275nextContext();return M.\u0275\u0275resetView(l.toggleFeature(r))}),M.\u0275\u0275text(2),M.\u0275\u0275elementEnd()()}if(a&2){let e=t.$implicit,n=M.\u0275\u0275nextContext();M.\u0275\u0275advance(),M.\u0275\u0275property("checked",n.features[e]),M.\u0275\u0275advance(),M.\u0275\u0275textInterpolate(e)}}var St=class a{constructor(t){this.tenant=t;let e=this.tenant.getCurrentTenant();this.currentPlan=e?.subscription?.plan??"enterprise",this.features=Object.assign({},e?.features||{})}plans=["free","basic","premium","enterprise"];currentPlan="enterprise";features={};setPlan(t){this.currentPlan=t,this.tenant.setPlan(t);let e=this.tenant.getCurrentTenant();this.features=Object.assign({},e?.features||{})}toggleFeature(t){this.features[t]=!this.features[t];let e={};e[t]=this.features[t],this.tenant.updateFeatures(e)}get keys(){return Object.keys(this.features||{})}static \u0275fac=function(e){return new(e||a)(M.\u0275\u0275directiveInject(N))};static \u0275cmp=M.\u0275\u0275defineComponent({type:a,selectors:[["app-tenant-switcher"]],decls:14,vars:4,consts:[[1,"tenant-switcher"],[1,"tenant-header"],[1,"tenant-name"],[1,"plan-select"],["appearance","outline"],["id","plan",3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"feature-list"],["class","feature",4,"ngFor","ngForOf"],[3,"value"],[1,"feature"],[3,"change","checked"]],template:function(e,n){if(e&1&&(M.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),M.\u0275\u0275text(3,"Tenant: "),M.\u0275\u0275elementStart(4,"strong"),M.\u0275\u0275text(5),M.\u0275\u0275elementEnd()(),M.\u0275\u0275elementStart(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),M.\u0275\u0275text(9,"Plan"),M.\u0275\u0275elementEnd(),M.\u0275\u0275elementStart(10,"mat-select",5),M.\u0275\u0275twoWayListener("ngModelChange",function(l){return M.\u0275\u0275twoWayBindingSet(n.currentPlan,l)||(n.currentPlan=l),l}),M.\u0275\u0275listener("selectionChange",function(l){return n.setPlan(l.value)}),M.\u0275\u0275template(11,ms,3,4,"mat-option",6),M.\u0275\u0275elementEnd()()()(),M.\u0275\u0275elementStart(12,"div",7),M.\u0275\u0275template(13,ps,3,2,"div",8),M.\u0275\u0275elementEnd()()),e&2){let r;M.\u0275\u0275advance(5),M.\u0275\u0275textInterpolate(((r=n.tenant.getCurrentTenant())==null?null:r.displayName)||"Default"),M.\u0275\u0275advance(5),M.\u0275\u0275twoWayProperty("ngModel",n.currentPlan),M.\u0275\u0275advance(),M.\u0275\u0275property("ngForOf",n.plans),M.\u0275\u0275advance(2),M.\u0275\u0275property("ngForOf",n.keys)}},dependencies:[cs,Ot.NgForOf,ds,Et.NgControlStatus,Et.NgModel,v,Tt.MatFormField,Tt.MatLabel,kt.MatSelect,kt.MatOption,Pn.MatCheckbox,Ot.TitleCasePipe],styles:[".tenant-switcher[_ngcontent-%COMP%]{padding:8px 12px;border-bottom:1px solid rgba(0,0,0,.06)}.tenant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.tenant-name[_ngcontent-%COMP%]{font-size:13px}.plan-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;font-size:13px}.feature-list[_ngcontent-%COMP%]{margin-top:8px;display:flex;flex-wrap:wrap;gap:6px}.feature[_ngcontent-%COMP%]{font-size:12px;background:#00000008;padding:4px 6px;border-radius:4px}"]})};import*as w from"@angular/core";import*as On from"@angular/router";import*as En from"@angular/material/toolbar";import*as It from"@angular/material/list";import*as ke from"@angular/material/sidenav";var Dt=class a{title=us("buildaq-schools");router=Sn(_s);route=Sn(Cs);constructor(){}ngOnInit(){let t=new URLSearchParams(window.location.search),e=t.get("authToken");if(e){localStorage.setItem("shellAuthToken",e),localStorage.setItem("auth_token",e),window.parent!==window&&window.parent.postMessage({type:"schools-ready",token:e},"*");let r=new URL(window.location.href);r.searchParams.delete("authToken"),window.history.replaceState({},"",r.pathname+r.hash)}let n=t.get("goto");if(n)try{setTimeout(()=>{try{this.router.navigate([n])}catch(r){console.warn("goto navigation failed",r)}},50)}catch(r){console.warn("Failed to process goto query param",r)}}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=w.\u0275\u0275defineComponent({type:a,selectors:[["app-root"]],decls:26,vars:0,consts:[[1,"app-shell"],[1,"app-sidenav-container"],["mode","side","opened","",1,"app-sidebar"],["color","primary",1,"brand"],["mat-list-item","","routerLink","/dashboard"],["mat-list-item","","routerLink","/students"],["mat-list-item","","routerLink","/teachers"],["mat-list-item","","routerLink","/classes"],["mat-list-item","","routerLink","/attendance"],["mat-list-item","","routerLink","/fees"],["mat-list-item","","routerLink","/timetable"],["mat-list-item","","routerLink","/exams"],[1,"app-main"]],template:function(e,n){e&1&&(w.\u0275\u0275elementStart(0,"div",0)(1,"mat-sidenav-container",1)(2,"mat-sidenav",2)(3,"mat-toolbar",3),w.\u0275\u0275text(4,"BuildAQ Schools"),w.\u0275\u0275elementEnd(),w.\u0275\u0275element(5,"app-tenant-switcher"),w.\u0275\u0275elementStart(6,"mat-nav-list")(7,"a",4),w.\u0275\u0275text(8,"\u{1F3E0} Dashboard"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(9,"a",5),w.\u0275\u0275text(10,"\u{1F468}\u200D\u{1F393} Students"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(11,"a",6),w.\u0275\u0275text(12,"\u{1F469}\u200D\u{1F3EB} Teachers"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(13,"a",7),w.\u0275\u0275text(14,"\u{1F3EB} Classes"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(15,"a",8),w.\u0275\u0275text(16,"\u{1F552} Attendance"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(17,"a",9),w.\u0275\u0275text(18,"\u{1F4B3} Fees"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(19,"a",10),w.\u0275\u0275text(20,"\u{1F4C5} Timetable"),w.\u0275\u0275elementEnd(),w.\u0275\u0275elementStart(21,"a",11),w.\u0275\u0275text(22,"\u{1F4DD} Exams"),w.\u0275\u0275elementEnd()()(),w.\u0275\u0275elementStart(23,"mat-sidenav-content")(24,"main",12),w.\u0275\u0275element(25,"router-outlet"),w.\u0275\u0275elementEnd()()()())},dependencies:[gs,fs,On.RouterLink,St,v,En.MatToolbar,It.MatNavList,It.MatListItem,ke.MatSidenav,ke.MatSidenavContainer,ke.MatSidenavContent],styles:[".app-shell[_ngcontent-%COMP%]{display:flex}.app-sidebar[_ngcontent-%COMP%]{width:220px;background:#1f2937;color:#fff;min-height:100vh;padding:1rem}.brand[_ngcontent-%COMP%]{font-weight:700;margin-bottom:1rem}.nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.nav-link[_ngcontent-%COMP%]{color:#d1d5db;text-decoration:none;padding:.5rem;border-radius:6px}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff0a;color:#fff}.app-main[_ngcontent-%COMP%]{flex:1;padding:1rem;background:#f3f4f6;min-height:100vh}.page[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:10px;box-shadow:0 4px 12px #0206170f}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px solid #eee;text-align:left}.class-card[_ngcontent-%COMP%]{background:#f8fafc;padding:.75rem;border-radius:8px;margin-bottom:.5rem}"]})};hs(Dt,vn).catch(a=>console.error(a));
