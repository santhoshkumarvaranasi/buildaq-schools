<div class="students-container">
  <div class="students-header">
    <h2>Collect Fee</h2>
    <div>
      <input class="form-input" placeholder="Search by name / roll" [(ngModel)]="search" />
      <button class="btn btn-primary" (click)="searchStudent()">Search</button>
    </div>
  </div>

  <div *ngIf="results.length">
    <div class="students-table-container">
      <div class="table-scroll-container">
        <table class="students-table">
          <thead><tr><th>Student Name</th><th>Class</th><th>Outstanding</th><th>Action</th></tr></thead>
          <tbody>
            <tr *ngFor="let r of results">
              <td>{{r.firstName}} {{r.lastName}}</td>
              <td>{{r.class}}</td>
              <td>{{ studentOutstanding(r.id) }}</td>
              <td><button class="btn btn-primary" (click)="openCollect(r)">Collect Fee</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div *ngIf="selected" class="students-table-container fee-card" style="margin-top:1rem;">
    <h3>Collect for {{selected.firstName}} {{selected.lastName}}</h3>
    <div *ngFor="let p of payments; let i = index" class="fee-row">
      <div class="fee-row-label">{{p.head}}</div>
      <div><input class="form-input" type="number" [(ngModel)]="p.amount" /></div>
      <div class="fee-row-fine">{{p.fine}}</div>
    </div>
    <div style="margin-top:0.5rem">
      <label>Payment Method
        <select class="form-select" [(ngModel)]="method">
          <option>Cash</option>
          <option>Online</option>
          <option>Cheque</option>
        </select>
      </label>
      <button class="btn btn-primary" (click)="collect()">Generate Receipt</button>
    </div>
  </div>
</div>
