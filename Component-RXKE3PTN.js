import{c as m,d as h}from"./chunk-ZCUYKKFO.js";import{signal as P,inject as v}from"@angular/core";import{RouterOutlet as O,RouterLink as w,Router as k}from"@angular/router";import{ActivatedRoute as L}from"@angular/router";import{CommonModule as M}from"@angular/common";import{FormsModule as _}from"@angular/forms";import*as t from"@angular/core";import*as d from"@angular/common";import*as p from"@angular/forms";import*as f from"@angular/material/input";import*as g from"@angular/material/select";import*as u from"@angular/material/checkbox";function C(r,a){if(r&1&&(t.\u0275\u0275elementStart(0,"mat-option",9),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"titlecase"),t.\u0275\u0275elementEnd()),r&2){let n=a.$implicit;t.\u0275\u0275property("value",n),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,2,n))}}function S(r,a){if(r&1){let n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",10)(1,"mat-checkbox",11),t.\u0275\u0275listener("change",function(){let o=t.\u0275\u0275restoreView(n).$implicit,l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.toggleFeature(o))}),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(r&2){let n=a.$implicit,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(),t.\u0275\u0275property("checked",i.features[n]),t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(n)}}var s=class r{constructor(a){this.tenant=a;let n=this.tenant.getCurrentTenant();this.currentPlan=n?.subscription?.plan??"enterprise",this.features=Object.assign({},n?.features||{})}plans=["free","basic","premium","enterprise"];currentPlan="enterprise";features={};setPlan(a){this.currentPlan=a,this.tenant.setPlan(a);let n=this.tenant.getCurrentTenant();this.features=Object.assign({},n?.features||{})}toggleFeature(a){this.features[a]=!this.features[a];let n={};n[a]=this.features[a],this.tenant.updateFeatures(n)}get keys(){return Object.keys(this.features||{})}static \u0275fac=function(n){return new(n||r)(t.\u0275\u0275directiveInject(h))};static \u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-tenant-switcher"]],decls:14,vars:4,consts:[[1,"tenant-switcher"],[1,"tenant-header"],[1,"tenant-name"],[1,"plan-select"],["appearance","outline"],["id","plan",3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"feature-list"],["class","feature",4,"ngFor","ngForOf"],[3,"value"],[1,"feature"],[3,"change","checked"]],template:function(n,i){if(n&1&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2),t.\u0275\u0275text(3,"Tenant: "),t.\u0275\u0275elementStart(4,"strong"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t.\u0275\u0275text(9,"Plan"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"mat-select",5),t.\u0275\u0275twoWayListener("ngModelChange",function(l){return t.\u0275\u0275twoWayBindingSet(i.currentPlan,l)||(i.currentPlan=l),l}),t.\u0275\u0275listener("selectionChange",function(l){return i.setPlan(l.value)}),t.\u0275\u0275template(11,C,3,4,"mat-option",6),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(12,"div",7),t.\u0275\u0275template(13,S,3,2,"div",8),t.\u0275\u0275elementEnd()()),n&2){let o;t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(((o=i.tenant.getCurrentTenant())==null?null:o.displayName)||"Default"),t.\u0275\u0275advance(5),t.\u0275\u0275twoWayProperty("ngModel",i.currentPlan),t.\u0275\u0275advance(),t.\u0275\u0275property("ngForOf",i.plans),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",i.keys)}},dependencies:[M,d.NgForOf,_,p.NgControlStatus,p.NgModel,m,f.MatFormField,f.MatLabel,g.MatSelect,g.MatOption,u.MatCheckbox,d.TitleCasePipe],styles:[".tenant-switcher[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.08);background:#ffffff08;margin:0 0 8px}.tenant-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}.tenant-name[_ngcontent-%COMP%]{font-size:13px;color:#cbd5e1;flex:1;min-width:140px}.tenant-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:600}.plan-select[_ngcontent-%COMP%]{flex-shrink:0}.plan-select[_ngcontent-%COMP%]     .mat-mdc-form-field{width:140px}.plan-select[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background:#ffffff14;border-radius:6px}.plan-select[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:transparent}.plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#ffffff26}.plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__leading, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__notch, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#60a5fa80}.plan-select[_ngcontent-%COMP%]     .mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch, .plan-select[_ngcontent-%COMP%]     .mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#60a5fa}.plan-select[_ngcontent-%COMP%]     .mat-mdc-select-value, .plan-select[_ngcontent-%COMP%]     .mat-mdc-select-arrow{color:#fff}.plan-select[_ngcontent-%COMP%]     .mat-mdc-form-field-label, .plan-select[_ngcontent-%COMP%]     .mdc-floating-label{color:#94a3b8!important}.plan-select[_ngcontent-%COMP%]     .mat-mdc-form-field-focused .mat-mdc-form-field-label, .plan-select[_ngcontent-%COMP%]     .mdc-floating-label--float-above{color:#60a5fa!important}.feature-list[_ngcontent-%COMP%]{margin-top:12px;display:flex;flex-wrap:wrap;gap:8px}.feature[_ngcontent-%COMP%]{font-size:11px;background:#ffffff14;padding:6px 10px;border-radius:6px;border:1px solid rgba(255,255,255,.1)}.feature[_ngcontent-%COMP%]     .mat-mdc-checkbox{--mdc-checkbox-unselected-icon-color: rgba(255, 255, 255, .5);--mdc-checkbox-unselected-hover-icon-color: rgba(255, 255, 255, .7);--mdc-checkbox-selected-icon-color: #60a5fa;--mdc-checkbox-selected-hover-icon-color: #60a5fa}.feature[_ngcontent-%COMP%]     .mdc-label{color:#cbd5e1;font-size:11px;padding-left:8px}"]})};import*as e from"@angular/core";import*as x from"@angular/material/list";import*as c from"@angular/material/sidenav";var b=class r{title=P("buildaq-schools");router=v(k);route=v(L);constructor(){}ngOnInit(){let a=new URLSearchParams(window.location.search),n=a.get("authToken");if(n){localStorage.setItem("shellAuthToken",n),localStorage.setItem("auth_token",n),window.parent!==window&&window.parent.postMessage({type:"schools-ready",token:n},"*");let o=new URL(window.location.href);o.searchParams.delete("authToken"),window.history.replaceState({},"",o.pathname+o.hash)}let i=a.get("goto");if(i)try{setTimeout(()=>{try{this.router.navigate([i])}catch(o){console.warn("goto navigation failed",o)}},50)}catch(o){console.warn("Failed to process goto query param",o)}}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-root"]],decls:77,vars:0,consts:[[1,"app-shell"],[1,"app-sidenav-container"],["mode","side","opened","",1,"app-sidebar"],[1,"sidebar-header"],[1,"brand-logo"],["viewBox","0 0 24 24","fill","none",1,"logo-icon"],["d","M12 2L2 7v10c0 5.55 3.84 10.74 10 12 6.16-1.26 10-6.45 10-12V7l-10-5z","fill","currentColor"],[1,"brand-text"],[1,"brand-name"],[1,"brand-subtitle"],[1,"sidebar-nav"],[1,"nav-section"],[1,"nav-section-title"],["mat-list-item","","routerLink","/dashboard","routerLinkActive","active",1,"nav-item"],["viewBox","0 0 24 24",1,"nav-icon"],["d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z","fill","currentColor"],[1,"nav-label"],["mat-list-item","","routerLink","/admissions","routerLinkActive","active",1,"nav-item"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z","fill","currentColor"],["mat-list-item","","routerLink","/students","routerLinkActive","active",1,"nav-item"],["d","M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z","fill","currentColor"],["mat-list-item","","routerLink","/teachers","routerLinkActive","active",1,"nav-item"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z","fill","currentColor"],["mat-list-item","","routerLink","/classes","routerLinkActive","active",1,"nav-item"],["d","M12 3 1 9l11 6 9-4.91V17h2V9L12 3z","fill","currentColor"],["d","M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82z","fill","currentColor"],["mat-list-item","","routerLink","/attendance","routerLinkActive","active",1,"nav-item"],["d","M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z","fill","currentColor"],["mat-list-item","","routerLink","/timetable","routerLinkActive","active",1,"nav-item"],["d","M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z","fill","currentColor"],["mat-list-item","","routerLink","/exams","routerLinkActive","active",1,"nav-item"],["d","M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z","fill","currentColor"],["mat-list-item","","routerLink","/fees","routerLinkActive","active",1,"nav-item"],["d","M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z","fill","currentColor"],["mat-list-item","","routerLink","/analytics","routerLinkActive","active",1,"nav-item"],["d","M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z","fill","currentColor"],[1,"app-main"]],template:function(n,i){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-sidenav-container",1)(2,"mat-sidenav",2)(3,"div",3)(4,"div",4),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(5,"svg",5),e.\u0275\u0275element(6,"path",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(7,"div",7)(8,"div",8),e.\u0275\u0275text(9,"BuildAQ"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275text(11,"Schools"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(12,"app-tenant-switcher"),e.\u0275\u0275elementStart(13,"nav",10)(14,"div",11)(15,"div",12),e.\u0275\u0275text(16,"Main"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"a",13),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(18,"svg",14),e.\u0275\u0275element(19,"path",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(20,"span",16),e.\u0275\u0275text(21,"Dashboard"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(22,"a",17),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(23,"svg",14),e.\u0275\u0275element(24,"path",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"Admissions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(27,"div",11)(28,"div",12),e.\u0275\u0275text(29,"Academic"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"a",19),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(31,"svg",14),e.\u0275\u0275element(32,"path",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(33,"span",16),e.\u0275\u0275text(34,"Students"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"a",21),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(36,"svg",14),e.\u0275\u0275element(37,"path",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(38,"span",16),e.\u0275\u0275text(39,"Teachers"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"a",23),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(41,"svg",14),e.\u0275\u0275element(42,"path",24)(43,"path",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(44,"span",16),e.\u0275\u0275text(45,"Classes"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"a",26),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(47,"svg",14),e.\u0275\u0275element(48,"path",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(49,"span",16),e.\u0275\u0275text(50,"Attendance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"a",28),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(52,"svg",14),e.\u0275\u0275element(53,"path",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(54,"span",16),e.\u0275\u0275text(55,"Timetable"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"a",30),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(57,"svg",14),e.\u0275\u0275element(58,"path",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(59,"span",16),e.\u0275\u0275text(60,"Exams"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(61,"div",11)(62,"div",12),e.\u0275\u0275text(63,"Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"a",32),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(65,"svg",14),e.\u0275\u0275element(66,"path",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(67,"span",16),e.\u0275\u0275text(68,"Fees"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"a",34),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(70,"svg",14),e.\u0275\u0275element(71,"path",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(72,"span",16),e.\u0275\u0275text(73,"Analytics"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(74,"mat-sidenav-content")(75,"main",36),e.\u0275\u0275element(76,"router-outlet"),e.\u0275\u0275elementEnd()()()())},dependencies:[O,w,s,m,x.MatListItem,c.MatSidenav,c.MatSidenavContainer,c.MatSidenavContent],styles:['.app-shell[_ngcontent-%COMP%]{display:flex}.app-sidebar[_ngcontent-%COMP%]{width:260px;background:linear-gradient(180deg,#1a1f2e,#0f1419);color:#fff;min-height:100vh;padding:0;border-right:1px solid rgba(255,255,255,.08);box-shadow:2px 0 12px #00000026}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem 1.25rem;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:.5rem}.brand-logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.logo-icon[_ngcontent-%COMP%]{width:36px;height:36px;color:#60a5fa;filter:drop-shadow(0 0 8px rgba(96,165,250,.4))}.brand-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.brand-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff;letter-spacing:.02em}.brand-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#94a3b8;text-transform:uppercase;letter-spacing:.08em;font-weight:600}.sidebar-nav[_ngcontent-%COMP%]{padding:.5rem 0;overflow-y:auto;max-height:calc(100vh - 180px)}.nav-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nav-section-title[_ngcontent-%COMP%]{padding:.5rem 1.25rem;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:#64748b;margin-bottom:.25rem}.nav-item[_ngcontent-%COMP%]{display:flex!important;align-items:center;gap:12px;padding:.75rem 1.25rem!important;color:#cbd5e1;text-decoration:none;transition:all .2s ease;border-left:3px solid transparent;margin:2px 0;cursor:pointer;position:relative}.nav-item[_ngcontent-%COMP%]:hover{background:#ffffff0f;color:#fff;border-left-color:#60a5fa4d}.nav-item.active[_ngcontent-%COMP%]{background:#60a5fa26;color:#fff;border-left-color:#60a5fa;box-shadow:inset 0 0 0 1px #60a5fa33}.nav-item.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:60%;background:#60a5fa;box-shadow:0 0 8px #60a5fa99}.nav-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0;opacity:.8}.nav-item[_ngcontent-%COMP%]:hover   .nav-icon[_ngcontent-%COMP%], .nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{opacity:1;color:#60a5fa}.nav-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;letter-spacing:.01em}.app-main[_ngcontent-%COMP%]{flex:1;padding:1rem;background:#f3f4f6;min-height:100vh}.page[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:10px;box-shadow:0 4px 12px #0206170f}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px solid #eee;text-align:left}.class-card[_ngcontent-%COMP%]{background:#f8fafc;padding:.75rem;border-radius:8px;margin-bottom:.5rem}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.sidebar-nav[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}']})};export{b as App};
