import{a as l,b as d,c as u}from"./chunk-2VMXMS7J.js";var $={singleton:!1,requiredVersionPrefix:""};function G(e=$){let o=window.__NATIVE_FEDERATION__.externals,n={},i=[...o.keys()].filter(s=>!s.startsWith("/@id/")&&!s.startsWith("@angular-architects/module-federation")&&!s.endsWith("@")).sort();for(let s of i){let a=s.lastIndexOf("@"),c=s.substring(0,a),m=s.substring(a+1),f=o.get(s)??"",_={version:m,get:()=>u(null,null,function*(){let S=yield window.importShim(f);return()=>S}),shareConfig:{singleton:e.singleton,requiredVersion:e.requiredVersionPrefix+m}};n[c]||(n[c]=[]),n[c].push(_)}return n}var E="__NATIVE_FEDERATION__",N=globalThis;N[E]??={externals:new Map,remoteNamesToRemote:new Map,baseUrlToRemoteNames:new Map};var g=N[E],I=g.externals;function b(e){return`${e.packageName}@${e.version}`}function P(e){let t=b(e);return I.get(t)}function R(e,t){let o=b(e);I.set(o,t)}function x(e,t){return{imports:l(l({},e.imports),t.imports),scopes:l(l({},e.scopes),t.scopes)}}var T=g.remoteNamesToRemote,h=g.baseUrlToRemoteNames;function j(e,t){T.set(e,t),h.set(t.baseUrl,e)}function v(e){return h.get(e)}function C(e){return h.has(e)}function D(e){return T.get(e)}function M(e){document.head.appendChild(Object.assign(document.createElement("script"),{type:"importmap-shim",innerHTML:JSON.stringify(e)}))}function w(e){let t=e.split("/");return t.pop(),t.join("/")}function p(e,t){for(;e.endsWith("/");)e=e.substring(0,e.length-1);return t.startsWith("./")&&(t=t.substring(2,t.length)),`${e}/${t}`}var Q="/@angular-architects/native-federation:build-notifications",F=(function(e){return e.COMPLETED="federation-rebuild-complete",e.ERROR="federation-rebuild-error",e})(F||{});function U(e){let t=new EventSource(e);t.onmessage=function(o){JSON.parse(o.data).type===F.COMPLETED&&(console.log("[Federation] Rebuild completed, reloading..."),window.location.reload())},t.onerror=function(o){console.warn("[Federation] SSE connection error:",o)}}function X(){return u(this,arguments,function*(e={},t){let o=t?.cacheTag?`?t=${t.cacheTag}`:"",n=typeof e=="string"?yield A(e+o):e,r="./remoteEntry.json"+o,i=yield O(r),s=yield q(i),a=yield K(n,l({throwIfRemoteNotFound:!1},t)),c=x(s,a);return M(c),c})}function A(e){return u(this,null,function*(){return yield fetch(e).then(t=>t.json())})}function K(o){return u(this,arguments,function*(e,t={throwIfRemoteNotFound:!1}){let n=Object.keys(e).map(s=>u(null,null,function*(){try{let a=e[s];if(t.cacheTag){let c=e[s].includes("?")?"&":"?";a+=`${c}t=${t.cacheTag}`}return yield k(a,s)}catch{let c=`Error loading remote entry for ${s} from file ${e[s]}`;if(t.throwIfRemoteNotFound)throw new Error(c);return console.error(c),null}}));return(yield Promise.all(n)).reduce((s,a)=>a?x(s,a):s,{imports:{},scopes:{}})})}function k(e,t){return u(this,null,function*(){let o=w(e),n=yield O(e);t||(t=n.name),n.buildNotificationsEndpoint&&U(o+n.buildNotificationsEndpoint);let r=V(n,t,o);return j(t,d(l({},n),{baseUrl:o})),r})}function V(e,t,o){let n=L(e,t,o),r=W(e,o);return{imports:n,scopes:r}}function O(e){return u(this,null,function*(){return yield fetch(e).then(o=>o.json())})}function W(e,t){let o={},n={};for(let r of e.shared){let i=P(r)??p(t,r.outFileName);R(r,i),n[r.packageName]=i}return o[t+"/"]=n,o}function L(e,t,o){let n={};for(let r of e.exposes){let i=p(t,r.key),s=p(o,r.outFileName);n[i]=s}return n}function q(e,t="./"){return u(this,null,function*(){let o=e.shared.reduce((n,r)=>d(l({},n),{[r.packageName]:t+r.outFileName}),{});for(let n of e.shared)R(n,t+n.outFileName);return{imports:o,scopes:{}}})}function Y(e,t){return u(this,null,function*(){let o=J(e,t);yield H(o);let n=B(o),r=D(n),i=o.fallback,s=r?"":"unknown remote "+n;if(!r&&!i)throw new Error(s);if(!r)return y(s),Promise.resolve(i);let a=r.exposes.find(f=>f.key===o.exposedModule),c=a?"":`Unknown exposed module ${o.exposedModule} in remote ${n}`;if(!a&&!i)throw new Error(c);if(!a)return y(c),Promise.resolve(i);let m=p(r.baseUrl,a.outFileName);try{return z(m)}catch(f){if(i)return console.error("error loading remote module",f),i;throw f}})}function z(e){return typeof importShim<"u"?importShim(e):import(e)}function B(e){let t;if(e.remoteName)t=e.remoteName;else if(e.remoteEntry){let o=w(e.remoteEntry);t=v(o)}else throw new Error("unexpcted arguments: Please pass remoteName or remoteEntry");if(!t)throw new Error("unknown remoteName "+t);return t}function H(e){return u(this,null,function*(){if(e.remoteEntry&&!C(w(e.remoteEntry))){let t=yield k(e.remoteEntry);M(t)}})}function J(e,t){let o;if(typeof e=="string"&&t)o={remoteName:e,exposedModule:t};else if(typeof e=="object"&&!t)o=e;else throw new Error("unexpected arguments: please pass options or a remoteName/exposedModule-pair");return o}function y(e){typeof window<"u"&&console.error(e)}export{Q as BUILD_NOTIFICATIONS_ENDPOINT,F as BuildNotificationType,G as getShared,X as initFederation,Y as loadRemoteModule,x as mergeImportMaps,q as processHostInfo,k as processRemoteInfo,K as processRemoteInfos};
