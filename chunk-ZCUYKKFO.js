var d=Object.defineProperty,m=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var s=(a,e,t)=>e in a?d(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,R=(a,e)=>{for(var t in e||={})g.call(e,t)&&s(a,t,e[t]);if(i)for(var t of i(e))f.call(e,t)&&s(a,t,e[t]);return a},O=(a,e)=>m(a,p(e));import{MatButtonModule as b}from"@angular/material/button";import{MatIconModule as T}from"@angular/material/icon";import{MatInputModule as v}from"@angular/material/input";import{MatFormFieldModule as y}from"@angular/material/form-field";import{MatSelectModule as h}from"@angular/material/select";import{MatTableModule as M}from"@angular/material/table";import{MatCardModule as S}from"@angular/material/card";import{MatToolbarModule as C}from"@angular/material/toolbar";import{MatDialogModule as x}from"@angular/material/dialog";import{MatListModule as k}from"@angular/material/list";import{MatCheckboxModule as A}from"@angular/material/checkbox";import{MatSlideToggleModule as B}from"@angular/material/slide-toggle";import{MatButtonToggleModule as F}from"@angular/material/button-toggle";import{MatSidenavModule as E}from"@angular/material/sidenav";import{MatChipsModule as j}from"@angular/material/chips";import{MatPaginatorModule as D}from"@angular/material/paginator";import{MatSortModule as w}from"@angular/material/sort";import{MatTooltipModule as I}from"@angular/material/tooltip";import{MatProgressBarModule as P}from"@angular/material/progress-bar";import*as r from"@angular/core";var l=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=r.\u0275\u0275defineNgModule({type:a});static \u0275inj=r.\u0275\u0275defineInjector({imports:[b,T,v,y,h,M,S,C,x,k,A,E,j,D,w,I,P,B,F]})};import{BehaviorSubject as o}from"rxjs";import*as n from"@angular/core";import*as c from"@angular/common/http";var u=class a{constructor(e){this.http=e;console.log("TenantService constructor - starting..."),this.loadDefaultTenant()}currentTenantSubject=new o(null);currentTenant$=this.currentTenantSubject.asObservable();loadingSubject=new o(!1);loading$=this.loadingSubject.asObservable();errorSubject=new o(null);error$=this.errorSubject.asObservable();tenantId="";isInitialized=!1;loadDefaultTenant(){console.log("Loading default tenant configuration..."),this.setLoading(!0);let e={id:"default",name:"School Management System",displayName:"BuildAQ Schools",domain:window.location.hostname,status:"active",adminEmail:"admin@buildaq.com",adminName:"System Administrator",features:{gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0},branding:{logo:"",favicon:"/favicon.ico",primaryColor:"#3498db",secondaryColor:"#2ecc71",accentColor:"#f39c12",logoUrl:"",fontFamily:"Inter, sans-serif"},settings:{timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD",language:"en-US",academicYear:{start:"2025-08-15",end:"2026-06-15"},gradingScale:{A:90,B:80,C:70,D:60,F:0},classPeriods:{1:"08:00-08:50",2:"09:00-09:50",3:"10:00-10:50",4:"11:00-11:50",5:"12:00-12:50",6:"13:00-13:50",7:"14:00-14:50",8:"15:00-15:50"},schoolHours:{start:"07:30",end:"16:00"}},subscription:{plan:"enterprise",status:"active",limits:{maxStudents:1e4,maxTeachers:1e3,maxClasses:2e3,maxStorageGB:100,maxApiCalls:1e5},usage:{students:0,teachers:0,classes:0,storageGB:0,apiCalls:0}},createdAt:new Date,updatedAt:new Date,dataRegion:"US-East",complianceLevel:"ferpa",ssoEnabled:!1,mfaRequired:!1};this.setCurrentTenant(e),this.applyTenantConfiguration(e),this.isInitialized=!0,this.setLoading(!1),console.log("Default tenant loaded successfully:",e.name)}setCurrentTenant(e){this.currentTenantSubject.next(e)}applyTenantConfiguration(e){this.applyBranding(e.branding),this.updatePageTitle(e.displayName),this.updateFavicon(e.branding.favicon)}applyBranding(e){let t=document.documentElement;t.style.setProperty("--primary-color",e.primaryColor),t.style.setProperty("--secondary-color",e.secondaryColor),t.style.setProperty("--accent-color",e.accentColor||e.primaryColor),e.fontFamily&&t.style.setProperty("--font-family",e.fontFamily)}updatePageTitle(e){document.title=`${e} - School Management`}updateFavicon(e){if(e){let t=document.querySelector('link[rel="icon"]');t||(t=document.createElement("link"),t.rel="icon",document.head.appendChild(t)),t.href=e}}getCurrentTenant(){return this.currentTenantSubject.value}getTenantId(){return this.tenantId||"default"}isFeatureEnabled(e){return this.getCurrentTenant()?.features[e]||!1}isReady(){return this.isInitialized&&this.currentTenantSubject.value!==null}updateFeatures(e){let t=this.getCurrentTenant();t&&(t.features=Object.assign({},t.features,e),t.updatedAt=new Date,this.setCurrentTenant(t))}setPlan(e){let t=this.getCurrentTenant();if(t){switch(t.subscription.plan=e,e){case"free":t.features={gradebook:!1,reports:!1,analytics:!1,bulkOperations:!1,dataExport:!1,realTimeUpdates:!1,notifications:!1,customBranding:!1,apiAccess:!1,advancedReporting:!1};break;case"basic":t.features={gradebook:!0,reports:!0,analytics:!1,bulkOperations:!0,dataExport:!1,realTimeUpdates:!1,notifications:!0,customBranding:!1,apiAccess:!0,advancedReporting:!1};break;case"premium":t.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break;case"enterprise":default:t.features={gradebook:!0,reports:!0,analytics:!0,bulkOperations:!0,dataExport:!0,realTimeUpdates:!0,notifications:!0,customBranding:!0,apiAccess:!0,advancedReporting:!0};break}t.updatedAt=new Date,this.setCurrentTenant(t),this.applyTenantConfiguration(t)}}setLoading(e){this.loadingSubject.next(e)}setError(e){this.errorSubject.next(e)}static \u0275fac=function(t){return new(t||a)(n.\u0275\u0275inject(c.HttpClient))};static \u0275prov=n.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac,providedIn:"root"})};export{R as a,O as b,l as c,u as d};
